{"version":3,"file":"Oid4Vci-cGor7iof.js","sources":["../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.1/node_modules/@patternfly/react-styles/css/components/ActionList/action-list.mjs","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/ActionList/ActionList.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/ActionList/ActionListItem.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.1/node_modules/@patternfly/react-styles/css/components/List/list.mjs","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/List/List.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/List/ListItem.js","../../../../../../../src/oid4vci/Oid4Vci.tsx"],"sourcesContent":["import './action-list.css';\nexport default {\n  \"actionList\": \"pf-v5-c-action-list\",\n  \"actionListGroup\": \"pf-v5-c-action-list__group\",\n  \"modifiers\": {\n    \"icons\": \"pf-m-icons\"\n  }\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/ActionList/action-list.mjs';\nexport const ActionList = (_a) => {\n    var { children, isIconList, className = '' } = _a, props = __rest(_a, [\"children\", \"isIconList\", \"className\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(styles.actionList, isIconList && styles.modifiers.icons, className) }, props), children));\n};\nActionList.displayName = 'ActionList';\n//# sourceMappingURL=ActionList.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/ActionList/action-list.mjs';\nexport const ActionListItem = (_a) => {\n    var { children, className = '' } = _a, props = __rest(_a, [\"children\", \"className\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(`${styles.actionList}__item`, className) }, props), children));\n};\nActionListItem.displayName = 'ActionListItem';\n//# sourceMappingURL=ActionListItem.js.map","import './list.css';\nexport default {\n  \"list\": \"pf-v5-c-list\",\n  \"listItem\": \"pf-v5-c-list__item\",\n  \"listItemIcon\": \"pf-v5-c-list__item-icon\",\n  \"modifiers\": {\n    \"iconLg\": \"pf-m-icon-lg\",\n    \"plain\": \"pf-m-plain\",\n    \"inline\": \"pf-m-inline\",\n    \"bordered\": \"pf-m-bordered\"\n  }\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/List/list.mjs';\nimport { css } from '@patternfly/react-styles';\nexport var OrderType;\n(function (OrderType) {\n    OrderType[\"number\"] = \"1\";\n    OrderType[\"lowercaseLetter\"] = \"a\";\n    OrderType[\"uppercaseLetter\"] = \"A\";\n    OrderType[\"lowercaseRomanNumber\"] = \"i\";\n    OrderType[\"uppercaseRomanNumber\"] = \"I\";\n})(OrderType || (OrderType = {}));\nexport var ListVariant;\n(function (ListVariant) {\n    ListVariant[\"inline\"] = \"inline\";\n})(ListVariant || (ListVariant = {}));\nexport var ListComponent;\n(function (ListComponent) {\n    ListComponent[\"ol\"] = \"ol\";\n    ListComponent[\"ul\"] = \"ul\";\n})(ListComponent || (ListComponent = {}));\nexport const List = (_a) => {\n    var { className = '', children = null, variant = null, isBordered = false, isPlain = false, iconSize = 'default', type = OrderType.number, ref = null, component = ListComponent.ul } = _a, props = __rest(_a, [\"className\", \"children\", \"variant\", \"isBordered\", \"isPlain\", \"iconSize\", \"type\", \"ref\", \"component\"]);\n    return component === ListComponent.ol ? (React.createElement(\"ol\", Object.assign({ ref: ref, type: type }, (isPlain && { role: 'list' }), props, { className: css(styles.list, variant && styles.modifiers[variant], isBordered && styles.modifiers.bordered, isPlain && styles.modifiers.plain, iconSize && iconSize === 'large' && styles.modifiers.iconLg, className) }), children)) : (React.createElement(\"ul\", Object.assign({ ref: ref }, (isPlain && { role: 'list' }), props, { className: css(styles.list, variant && styles.modifiers[variant], isBordered && styles.modifiers.bordered, isPlain && styles.modifiers.plain, iconSize && iconSize === 'large' && styles.modifiers.iconLg, className) }), children));\n};\nList.displayName = 'List';\n//# sourceMappingURL=List.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/List/list.mjs';\nimport { css } from '@patternfly/react-styles';\nexport const ListItem = (_a) => {\n    var { icon = null, children = null } = _a, props = __rest(_a, [\"icon\", \"children\"]);\n    return (React.createElement(\"li\", Object.assign({ className: css(icon && styles.listItem) }, props),\n        icon && React.createElement(\"span\", { className: css(styles.listItemIcon) }, icon),\n        children));\n};\nListItem.displayName = 'ListItem';\n//# sourceMappingURL=ListItem.js.map","import { useEnvironment } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionList,\r\n  ActionListItem,\r\n  List,\r\n  ListItem,\r\n  MenuToggle,\r\n  MenuToggleElement,\r\n  PageSection,\r\n  PageSectionVariants,\r\n  Select,\r\n  SelectList,\r\n  SelectOption,\r\n} from \"@patternfly/react-core\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getIssuer, requestVCOffer } from \"../api\";\r\nimport { CredentialsIssuer } from \"../api/representations\";\r\nimport { Page } from \"../components/page/Page\";\r\nimport { usePromise } from \"../utils/usePromise\";\r\n\r\nexport const Oid4Vci = () => {\r\n  const context = useEnvironment();\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const initialSelected = t(\"verifiableCredentialsSelectionDefault\");\r\n\r\n  const [selected, setSelected] = useState<string>(initialSelected);\r\n  const [qrCode, setQrCode] = useState<string>(\"\");\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n  const [offerQRVisible, setOfferQRVisible] = useState<boolean>(false);\r\n  const [credentialsIssuer, setCredentialsIssuer] =\r\n    useState<CredentialsIssuer>();\r\n\r\n  usePromise(() => getIssuer(context), setCredentialsIssuer);\r\n\r\n  const selectOptions = useMemo(() => {\r\n    if (typeof credentialsIssuer !== \"undefined\") {\r\n      return credentialsIssuer.credential_configurations_supported;\r\n    }\r\n    return {};\r\n  }, [credentialsIssuer]);\r\n\r\n  const dropdownItems = useMemo(() => {\r\n    if (typeof selectOptions !== \"undefined\") {\r\n      return Array.from(Object.keys(selectOptions));\r\n    }\r\n    return [];\r\n  }, [selectOptions]);\r\n\r\n  useEffect(() => {\r\n    if (initialSelected !== selected && credentialsIssuer !== undefined) {\r\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n      requestVCOffer(context, selectOptions[selected], credentialsIssuer).then(\r\n        (blob) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(blob);\r\n          reader.onloadend = function () {\r\n            const result = reader.result;\r\n            if (typeof result === \"string\") {\r\n              setQrCode(result);\r\n              setOfferQRVisible(true);\r\n              setIsOpen(false);\r\n            }\r\n          };\r\n        },\r\n      );\r\n    }\r\n  }, [selected]);\r\n\r\n  const onToggleClick = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  const toggle = (toggleRef: React.Ref<MenuToggleElement>) => (\r\n    <MenuToggle\r\n      ref={toggleRef}\r\n      onClick={onToggleClick}\r\n      isExpanded={isOpen}\r\n      data-testid=\"menu-toggle\"\r\n    >\r\n      {selected}\r\n    </MenuToggle>\r\n  );\r\n\r\n  return (\r\n    <Page\r\n      title={t(\"verifiableCredentialsTitle\")}\r\n      description={t(\"verifiableCredentialsDescription\")}\r\n    >\r\n      <PageSection isFilled variant={PageSectionVariants.light}>\r\n        <List isPlain>\r\n          <ListItem>\r\n            <Select\r\n              data-testid=\"credential-select\"\r\n              onOpenChange={(isOpen) => setIsOpen(isOpen)}\r\n              onSelect={(_event, val) => setSelected(val as string)}\r\n              isOpen={isOpen}\r\n              selected={selected}\r\n              toggle={toggle}\r\n              shouldFocusToggleOnSelect={true}\r\n            >\r\n              <SelectList>\r\n                {dropdownItems.map((option) => (\r\n                  <SelectOption\r\n                    key={option}\r\n                    value={option}\r\n                    data-testid={option}\r\n                  >\r\n                    {option}\r\n                  </SelectOption>\r\n                ))}\r\n              </SelectList>\r\n            </Select>\r\n          </ListItem>\r\n          <ListItem>\r\n            <ActionList>\r\n              {offerQRVisible && (\r\n                <ActionListItem>\r\n                  <img\r\n                    width=\"500\"\r\n                    height=\"500\"\r\n                    src={qrCode}\r\n                    data-testid=\"qr-code\"\r\n                  />\r\n                </ActionListItem>\r\n              )}\r\n            </ActionList>\r\n          </ListItem>\r\n        </List>\r\n      </PageSection>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default Oid4Vci;\r\n"],"names":["styles$1","ActionList","_a","children","isIconList","className","props","__rest","React","css","styles","ActionListItem","OrderType","ListVariant","ListComponent","List","variant","isBordered","isPlain","iconSize","type","ref","component","ListItem","icon","Oid4Vci","context","useEnvironment","t","useTranslation","initialSelected","selected","setSelected","useState","qrCode","setQrCode","isOpen","setIsOpen","offerQRVisible","setOfferQRVisible","credentialsIssuer","setCredentialsIssuer","usePromise","getIssuer","selectOptions","useMemo","dropdownItems","useEffect","requestVCOffer","blob","reader","result","onToggleClick","toggle","toggleRef","jsx","MenuToggle","Page","PageSection","PageSectionVariants","jsxs","Select","_event","val","SelectList","option","SelectOption"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}