{"version":3,"file":"ContentComponent--dDvj3FX.js","sources":["../../../../../../../src/content/ContentComponent.tsx"],"sourcesContent":["import { Spinner } from \"@patternfly/react-core\";\r\nimport { Suspense, lazy, useMemo, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useEnvironment } from \"@keycloak/keycloak-ui-shared\";\r\nimport { MenuItem } from \"../root/PageNav\";\r\nimport { ContentComponentParams } from \"../routes\";\r\nimport { joinPath } from \"../utils/joinPath\";\r\nimport { usePromise } from \"../utils/usePromise\";\r\nimport fetchContentJson from \"./fetchContent\";\r\n\r\nfunction findComponent(\r\n  content: MenuItem[],\r\n  componentId: string,\r\n): string | undefined {\r\n  for (const item of content) {\r\n    if (\r\n      \"path\" in item &&\r\n      item.path.endsWith(componentId) &&\r\n      \"modulePath\" in item\r\n    ) {\r\n      return item.modulePath;\r\n    }\r\n    if (\"children\" in item) {\r\n      return findComponent(item.children, componentId);\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport const ContentComponent = () => {\r\n  const context = useEnvironment();\r\n\r\n  const [content, setContent] = useState<MenuItem[]>();\r\n  const { componentId } = useParams<ContentComponentParams>();\r\n\r\n  usePromise((signal) => fetchContentJson({ signal, context }), setContent);\r\n  const modulePath = useMemo(\r\n    () => findComponent(content || [], componentId!),\r\n    [content, componentId],\r\n  );\r\n\r\n  return modulePath && <Component modulePath={modulePath} />;\r\n};\r\n\r\ntype ComponentProps = {\r\n  modulePath: string;\r\n};\r\n\r\nconst Component = ({ modulePath }: ComponentProps) => {\r\n  const { environment } = useEnvironment();\r\n\r\n  const Element = lazy(\r\n    () => import(joinPath(environment.resourceUrl, modulePath)),\r\n  );\r\n  return (\r\n    <Suspense fallback={<Spinner />}>\r\n      <Element />\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default ContentComponent;\r\n"],"names":["findComponent","content","componentId","item","ContentComponent","context","useEnvironment","setContent","useState","useParams","usePromise","signal","fetchContentJson","modulePath","useMemo","jsx","Component","environment","Element","lazy","joinPath","Suspense","Spinner"],"mappings":"6MAUA,SAASA,EACPC,EACAC,EACoB,CACpB,UAAWC,KAAQF,EAAS,CAC1B,GACE,SAAUE,GACVA,EAAK,KAAK,SAASD,CAAW,GAC9B,eAAgBC,EAEhB,OAAOA,EAAK,WAEd,GAAI,aAAcA,EAChB,OAAOH,EAAcG,EAAK,SAAUD,CAAW,CAEnD,CAEF,CAEO,MAAME,EAAmB,IAAM,CACpC,MAAMC,EAAUC,EAAA,EAEV,CAACL,EAASM,CAAU,EAAIC,EAAA,EACxB,CAAE,YAAAN,CAAA,EAAgBO,EAAA,EAExBC,EAAYC,GAAWC,EAAiB,CAAE,OAAAD,EAAQ,QAAAN,CAAA,CAAS,EAAGE,CAAU,EACxE,MAAMM,EAAaC,EACjB,IAAMd,EAAcC,GAAW,CAAA,EAAIC,CAAY,EAC/C,CAACD,EAASC,CAAW,CAAA,EAGvB,OAAOW,GAAcE,EAACC,EAAA,CAAU,WAAAH,CAAA,CAAwB,CAC1D,EAMMG,EAAY,CAAC,CAAE,WAAAH,KAAiC,CACpD,KAAM,CAAE,YAAAI,CAAA,EAAgBX,EAAA,EAElBY,EAAUC,EACd,IAAM,OAAOC,EAASH,EAAY,YAAaJ,CAAU,EAAA,EAE3D,OACEE,EAACM,GAAS,SAAUN,EAACO,IAAQ,EAC3B,SAAAP,EAACG,IAAQ,CAAA,CACX,CAEJ"}