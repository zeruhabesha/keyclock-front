{"version":3,"file":"CreateClientScope-quszE63b.js","sources":["../../../../../../../src/client-scopes/CreateClientScope.tsx"],"sourcesContent":["import { AlertVariant, PageSection } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ClientScopeDefaultOptionalType,\r\n  changeScope,\r\n} from \"../components/client-scope/ClientScopeTypes\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { convertFormValuesToObject } from \"../util\";\r\nimport { ScopeForm } from \"./details/ScopeForm\";\r\nimport { toClientScope } from \"./routes/ClientScope\";\r\n\r\nexport default function CreateClientScope() {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { realm } = useRealm();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const onSubmit = async (formData: ClientScopeDefaultOptionalType) => {\r\n    const clientScope = convertFormValuesToObject({\r\n      ...formData,\r\n      name: formData.name?.trim().replace(/ /g, \"_\"),\r\n    });\r\n\r\n    try {\r\n      await adminClient.clientScopes.create(clientScope);\r\n\r\n      const scope = await adminClient.clientScopes.findOneByName({\r\n        name: clientScope.name!,\r\n      });\r\n\r\n      if (!scope) {\r\n        throw new Error(t(\"notFound\"));\r\n      }\r\n\r\n      await changeScope(\r\n        adminClient,\r\n        { ...clientScope, id: scope.id },\r\n        clientScope.type,\r\n      );\r\n\r\n      addAlert(t(\"createClientScopeSuccess\", AlertVariant.success));\r\n\r\n      navigate(\r\n        toClientScope({\r\n          realm,\r\n          id: scope.id!,\r\n          tab: \"settings\",\r\n        }),\r\n      );\r\n    } catch (error) {\r\n      addError(\"createClientScopeError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ViewHeader titleKey=\"createClientScope\" />\r\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n        <PageSection variant=\"light\">\r\n          <ScopeForm save={onSubmit} />\r\n        </PageSection>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["CreateClientScope","adminClient","useAdminClient","t","useTranslation","navigate","useNavigate","realm","useRealm","addAlert","addError","useAlerts","jsxs","Fragment","jsx","ViewHeader","PageSection","ScopeForm","formData","clientScope","convertFormValuesToObject","scope","changeScope","AlertVariant","toClientScope","error"],"mappings":"waAeA,SAAwBA,GAAoB,CAC1C,KAAM,CAAE,YAAAC,CAAA,EAAgBC,EAAA,EAElB,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACRC,EAAWC,EAAA,EACX,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZ,CAAE,SAAAC,EAAU,SAAAC,CAAA,EAAaC,EAAA,EAuC/B,OACEC,EAAAC,EAAA,CACE,SAAA,CAAAC,EAACC,EAAA,CAAW,SAAS,mBAAA,CAAoB,EACzCD,EAACE,EAAA,CAAY,QAAQ,QAAQ,UAAU,cACrC,SAAAF,EAACE,EAAA,CAAY,QAAQ,QACnB,SAAAF,EAACG,EAAA,CAAU,KA1CF,MAAOC,GAA6C,CACnE,MAAMC,EAAcC,EAA0B,CAC5C,GAAGF,EACH,KAAMA,EAAS,MAAM,OAAO,QAAQ,KAAM,GAAG,CAAA,CAC9C,EAED,GAAI,CACF,MAAMjB,EAAY,aAAa,OAAOkB,CAAW,EAEjD,MAAME,EAAQ,MAAMpB,EAAY,aAAa,cAAc,CACzD,KAAMkB,EAAY,IAAA,CACnB,EAED,GAAI,CAACE,EACH,MAAM,IAAI,MAAMlB,EAAE,UAAU,CAAC,EAG/B,MAAMmB,EACJrB,EACA,CAAE,GAAGkB,EAAa,GAAIE,EAAM,EAAA,EAC5BF,EAAY,IAAA,EAGdV,EAASN,EAAE,2BAA4BoB,EAAa,OAAO,CAAC,EAE5DlB,EACEmB,EAAc,CACZ,MAAAjB,EACA,GAAIc,EAAM,GACV,IAAK,UAAA,CACN,CAAA,CAEL,OAASI,EAAO,CACdf,EAAS,yBAA0Be,CAAK,CAC1C,CACF,EAOmC,EAC7B,CAAA,CACF,CAAA,EACF,CAEJ"}