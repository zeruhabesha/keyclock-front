import{jsx as t,jsxs as f}from"react/jsx-runtime";import{u as C,a as E,j as F,d as L,_ as O,y as R,p as w,P as x,F as D,l as I,A as B,g as p,L as H,i as N}from"./main-o1hptXRo.js";import{useState as u}from"react";import{D as T}from"./DynamicComponents-CnLlz98z.js";import{u as z}from"./useParams-CGVhlaFZ.js";import{T as g}from"./constants-BclHbWtx.js";const Q=({id:P,providerType:m,page:{id:o,...h}})=>{const{adminClient:r}=C(),{t:n}=E(),c=F(),{realm:y,realmRepresentation:b}=L(),{addAlert:S,addError:A}=O(),[i,d]=u(P),l=z(),[j,v]=u(!0);R(async()=>await Promise.all([i?r.components.findOne({id:i}):Promise.resolve(),m===g?r.components.find({type:g}):Promise.resolve()]),([a,s])=>{const e=(s||[]).find(k=>k.providerId===o);c.reset(a||e||{}),e&&d(e.id),v(!1)},[]);const _=async a=>{(a.config||l)&&(a.config=Object.assign(a.config||{},l),Object.entries(a.config).forEach(([s,e])=>a.config[s]=Array.isArray(e)?e:[e]));try{const s={...a,providerId:o,providerType:m,parentId:b?.id};if(i)await r.components.update({id:i},s);else{const{id:e}=await r.components.create(s);d(e)}S(n("itemSaveSuccessful"))}catch(s){A("itemSaveError",s)}};return j?t(w,{}):t(x,{variant:"light",children:f(D,{isHorizontal:!0,onSubmit:c.handleSubmit(_),className:"keycloak__form",children:[t(I,{...c,children:t(T,{properties:h.properties})}),f(B,{children:[t(p,{"data-testid":"save",type:"submit",children:n("save")}),t(p,{variant:"link",component:a=>t(H,{...a,to:N({realm:y,providerId:o})}),children:n("cancel")})]})]})})};export{Q as P};
//# sourceMappingURL=PageHandler-B1ed5nYb.js.map
