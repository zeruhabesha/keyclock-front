{"version":3,"file":"NewAttributeSettings-CLC6AG4r.js","sources":["../../../../../../../src/realm-settings/user-profile/attribute/ValueSelect.tsx","../../../../../../../src/realm-settings/user-profile/attribute/AttributeAnnotations.tsx","../../../../../../../src/realm-settings/user-profile/attribute/AttributeGeneralSettings.tsx","../../../../../../../src/realm-settings/user-profile/attribute/AttributePermission.tsx","../../../../../../../src/realm-settings/user-profile/attribute/ValidatorSelect.tsx","../../../../../../../src/realm-settings/user-profile/attribute/AddValidatorDialog.tsx","../../../../../../../src/realm-settings/user-profile/attribute/AttributeValidations.tsx","../../../../../../../src/realm-settings/NewAttributeSettings.tsx"],"sourcesContent":["import { KeycloakSelect } from \"@keycloak/keycloak-ui-shared\";\r\nimport { SelectOption } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { UseControllerProps, useController } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype ValueSelectProps = UseControllerProps & {\r\n  selectItems: string[];\r\n};\r\n\r\nexport const ValueSelect = ({ selectItems, ...rest }: ValueSelectProps) => {\r\n  const { t } = useTranslation();\r\n  const { field } = useController(rest);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  return (\r\n    <KeycloakSelect\r\n      onToggle={(isOpen) => setOpen(isOpen)}\r\n      isOpen={open}\r\n      onSelect={(value) => {\r\n        field.onChange(value);\r\n        setOpen(false);\r\n      }}\r\n      selections={field.value ? [field.value] : t(\"choose\")}\r\n      placeholderText={t(\"valuePlaceholder\")}\r\n    >\r\n      {selectItems.map((item) => (\r\n        <SelectOption key={item} value={item}>\r\n          {item}\r\n        </SelectOption>\r\n      ))}\r\n    </KeycloakSelect>\r\n  );\r\n};\r\n","import { FormGroup, Grid, GridItem, TextInput } from \"@patternfly/react-core\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { FormAccess } from \"../../../components/form/FormAccess\";\r\nimport { KeyValueInput } from \"../../../components/key-value-form/KeyValueInput\";\r\nimport { KeySelect } from \"./KeySelect\";\r\nimport { ValueSelect } from \"./ValueSelect\";\r\n\r\nimport \"../../realm-settings-section.css\";\r\n\r\nexport const AttributeAnnotations = () => {\r\n  const { t } = useTranslation();\r\n  const { register } = useFormContext();\r\n\r\n  return (\r\n    <FormAccess role=\"manage-realm\" isHorizontal>\r\n      <FormGroup\r\n        hasNoPaddingTop\r\n        label={t(\"annotations\")}\r\n        fieldId=\"kc-annotations\"\r\n        className=\"kc-annotations-label\"\r\n      >\r\n        <Grid className=\"kc-annotations\">\r\n          <GridItem>\r\n            <KeyValueInput\r\n              name=\"annotations\"\r\n              label={t(\"annotations\")}\r\n              KeyComponent={(props) => (\r\n                <KeySelect\r\n                  {...props}\r\n                  selectItems={[\r\n                    {\r\n                      key: \"inputType\",\r\n                      value: t(\"inputType\"),\r\n                    },\r\n                    {\r\n                      key: \"inputHelperTextBefore\",\r\n                      value: t(\"inputHelperTextBefore\"),\r\n                    },\r\n                    {\r\n                      key: \"inputHelperTextAfter\",\r\n                      value: t(\"inputHelperTextAfter\"),\r\n                    },\r\n                    {\r\n                      key: \"inputOptionLabelsI18nPrefix\",\r\n                      value: t(\"inputOptionLabelsI18nPrefix\"),\r\n                    },\r\n                    {\r\n                      key: \"inputTypePlaceholder\",\r\n                      value: t(\"inputTypePlaceholder\"),\r\n                    },\r\n                    {\r\n                      key: \"inputTypeSize\",\r\n                      value: t(\"inputTypeSize\"),\r\n                    },\r\n                    {\r\n                      key: \"inputTypeCols\",\r\n                      value: t(\"inputTypeCols\"),\r\n                    },\r\n                    {\r\n                      key: \"inputTypeRows\",\r\n                      value: t(\"inputTypeRows\"),\r\n                    },\r\n                    {\r\n                      key: \"inputTypeStep\",\r\n                      value: t(\"inputTypeStep\"),\r\n                    },\r\n                    {\r\n                      key: \"kcNumberFormat\",\r\n                      value: t(\"kcNumberFormat\"),\r\n                    },\r\n                    {\r\n                      key: \"kcNumberUnFormat\",\r\n                      value: t(\"kcNumberUnFormat\"),\r\n                    },\r\n                  ]}\r\n                />\r\n              )}\r\n              ValueComponent={(props) =>\r\n                props.keyValue === \"inputType\" ? (\r\n                  <ValueSelect\r\n                    selectItems={[\r\n                      \"text\",\r\n                      \"textarea\",\r\n                      \"select\",\r\n                      \"select-radiobuttons\",\r\n                      \"multiselect\",\r\n                      \"multiselect-checkboxes\",\r\n                      \"html5-email\",\r\n                      \"html5-tel\",\r\n                      \"html5-url\",\r\n                      \"html5-number\",\r\n                      \"html5-range\",\r\n                      \"html5-datetime-local\",\r\n                      \"html5-date\",\r\n                      \"html5-month\",\r\n                      \"html5-week\",\r\n                      \"html5-time\",\r\n                    ]}\r\n                    {...props}\r\n                  />\r\n                ) : (\r\n                  <TextInput\r\n                    aria-label={t(\"customValue\")}\r\n                    data-testid={props.name}\r\n                    {...props}\r\n                    {...register(props.name)}\r\n                  />\r\n                )\r\n              }\r\n            />\r\n          </GridItem>\r\n        </Grid>\r\n      </FormGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\r\nimport type { UserProfileConfig } from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\r\nimport {\r\n  HelpItem,\r\n  KeycloakSelect,\r\n  KeycloakSpinner,\r\n  SelectControl,\r\n  SelectVariant,\r\n  TextControl,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Divider,\r\n  FormGroup,\r\n  Radio,\r\n  SelectOption,\r\n  Switch,\r\n} from \"@patternfly/react-core\";\r\nimport { isEqual } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  useWatch,\r\n} from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../../admin-client\";\r\nimport { FormAccess } from \"../../../components/form/FormAccess\";\r\nimport { DefaultSwitchControl } from \"../../../components/SwitchControl\";\r\nimport { useParams } from \"../../../utils/useParams\";\r\nimport { USERNAME_EMAIL } from \"../../NewAttributeSettings\";\r\nimport { AttributeParams } from \"../../routes/Attribute\";\r\nimport { TranslatableField } from \"./TranslatableField\";\r\n\r\nimport \"../../realm-settings-section.css\";\r\nimport useLocaleSort, { mapByKey } from \"../../../utils/useLocaleSort\";\r\n\r\nconst REQUIRED_FOR = [\r\n  { label: \"requiredForLabel.both\", value: [\"admin\", \"user\"] },\r\n  { label: \"requiredForLabel.users\", value: [\"user\"] },\r\n  { label: \"requiredForLabel.admins\", value: [\"admin\"] },\r\n] as const;\r\n\r\nexport const AttributeGeneralSettings = () => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const form = useFormContext();\r\n  const [clientScopes, setClientScopes] =\r\n    useState<ClientScopeRepresentation[]>();\r\n  const [config, setConfig] = useState<UserProfileConfig>();\r\n  const [selectEnabledWhenOpen, setSelectEnabledWhenOpen] = useState(false);\r\n  const [selectRequiredForOpen, setSelectRequiredForOpen] = useState(false);\r\n\r\n  const [enabledWhenSearch, setEnableWhenSearch] = useState(\"\");\r\n  const localeSort = useLocaleSort();\r\n\r\n  const { attributeName } = useParams<AttributeParams>();\r\n  const editMode = attributeName ? true : false;\r\n\r\n  const hasSelector = useWatch({\r\n    control: form.control,\r\n    name: \"hasSelector\",\r\n  });\r\n\r\n  const hasRequiredScopes = useWatch({\r\n    control: form.control,\r\n    name: \"hasRequiredScopes\",\r\n  });\r\n\r\n  const required = useWatch({\r\n    control: form.control,\r\n    name: \"isRequired\",\r\n    defaultValue: false,\r\n  });\r\n\r\n  useFetch(() => adminClient.clientScopes.find(), setClientScopes, []);\r\n  useFetch(() => adminClient.users.getProfile(), setConfig, []);\r\n\r\n  if (!clientScopes) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  function setHasSelector(hasSelector: boolean) {\r\n    form.setValue(\"hasSelector\", hasSelector);\r\n  }\r\n\r\n  function setHasRequiredScopes(hasRequiredScopes: boolean) {\r\n    form.setValue(\"hasRequiredScopes\", hasRequiredScopes);\r\n  }\r\n\r\n  const items = () =>\r\n    localeSort(clientScopes, mapByKey(\"name\"))\r\n      .filter(\r\n        (s) => enabledWhenSearch === \"\" || s.name?.includes(enabledWhenSearch),\r\n      )\r\n      .map((option) => (\r\n        <SelectOption key={option.name} value={option.name}>\r\n          {option.name}\r\n        </SelectOption>\r\n      ));\r\n\r\n  const ROOT_ATTRIBUTE = [...USERNAME_EMAIL, \"firstName\", \"lastName\"];\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <TextControl\r\n          name=\"name\"\r\n          label={t(\"attributeName\")}\r\n          labelIcon={t(\"upAttributeNameHelp\")}\r\n          isDisabled={editMode}\r\n          rules={{\r\n            required: t(\"validateAttributeName\"),\r\n          }}\r\n        />\r\n        <FormGroup\r\n          label={t(\"attributeDisplayName\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"attributeDisplayNameHelp\")}\r\n              fieldLabelId=\"attributeDisplayName\"\r\n            />\r\n          }\r\n          fieldId=\"kc-attribute-displayName\"\r\n        >\r\n          <TranslatableField\r\n            attributeName=\"name\"\r\n            prefix=\"profile.attributes\"\r\n            fieldName=\"displayName\"\r\n            predefinedAttributes={[\r\n              \"username\",\r\n              \"email\",\r\n              \"firstName\",\r\n              \"lastName\",\r\n            ]}\r\n          />\r\n        </FormGroup>\r\n        <DefaultSwitchControl\r\n          name=\"multivalued\"\r\n          label={t(\"multivalued\")}\r\n          labelIcon={t(\"multivaluedHelp\")}\r\n        />\r\n        {!ROOT_ATTRIBUTE.includes(attributeName) && (\r\n          <TextControl\r\n            name=\"defaultValue\"\r\n            label={t(\"defaultValue\")}\r\n            labelIcon={t(\"defaultValueHelp\")}\r\n          />\r\n        )}\r\n        <SelectControl\r\n          name=\"group\"\r\n          label={t(\"attributeGroup\")}\r\n          labelIcon={t(\"attributeGroupHelp\")}\r\n          controller={{\r\n            defaultValue: \"\",\r\n          }}\r\n          options={[\r\n            { key: \"\", value: t(\"none\") },\r\n            ...(config?.groups?.map((g) => ({\r\n              key: g.name!,\r\n              value: g.name!,\r\n            })) || []),\r\n          ]}\r\n        />\r\n        {!USERNAME_EMAIL.includes(attributeName) && (\r\n          <>\r\n            <Divider />\r\n            <FormGroup\r\n              label={t(\"enabledWhen\")}\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"enabledWhenTooltip\")}\r\n                  fieldLabelId=\"enabled-when\"\r\n                />\r\n              }\r\n              fieldId=\"enabledWhen\"\r\n              hasNoPaddingTop\r\n            >\r\n              <Radio\r\n                id=\"always\"\r\n                data-testid=\"always\"\r\n                isChecked={!hasSelector}\r\n                name=\"enabledWhen\"\r\n                label={t(\"always\")}\r\n                onChange={() => setHasSelector(false)}\r\n                className=\"pf-v5-u-mb-md\"\r\n              />\r\n              <Radio\r\n                id=\"scopesAsRequested\"\r\n                data-testid=\"scopesAsRequested\"\r\n                isChecked={hasSelector}\r\n                name=\"enabledWhen\"\r\n                label={t(\"scopesAsRequested\")}\r\n                onChange={() => setHasSelector(true)}\r\n                className=\"pf-v5-u-mb-md\"\r\n              />\r\n            </FormGroup>\r\n            {hasSelector && (\r\n              <FormGroup fieldId=\"kc-scope-enabled-when\">\r\n                <Controller\r\n                  name=\"selector.scopes\"\r\n                  control={form.control}\r\n                  defaultValue={[]}\r\n                  render={({ field }) => (\r\n                    <KeycloakSelect\r\n                      data-testid=\"enabled-when-scope-field\"\r\n                      variant={SelectVariant.typeaheadMulti}\r\n                      onFilter={(value) => {\r\n                        setEnableWhenSearch(value);\r\n                        return items();\r\n                      }}\r\n                      typeAheadAriaLabel=\"Select\"\r\n                      chipGroupProps={{\r\n                        numChips: 3,\r\n                        expandedText: t(\"hide\"),\r\n                        collapsedText: t(\"showRemaining\"),\r\n                      }}\r\n                      onToggle={(isOpen) => setSelectEnabledWhenOpen(isOpen)}\r\n                      selections={field.value}\r\n                      onSelect={(selectedValue) => {\r\n                        const option = selectedValue.toString();\r\n                        let changedValue = [\"\"];\r\n                        if (field.value) {\r\n                          changedValue = field.value.includes(option)\r\n                            ? field.value.filter(\r\n                                (item: string) => item !== option,\r\n                              )\r\n                            : [...field.value, option];\r\n                        } else {\r\n                          changedValue = [option];\r\n                        }\r\n\r\n                        field.onChange(changedValue);\r\n                      }}\r\n                      onClear={() => {\r\n                        field.onChange([]);\r\n                      }}\r\n                      isOpen={selectEnabledWhenOpen}\r\n                      aria-labelledby={\"scope\"}\r\n                    >\r\n                      {items()}\r\n                    </KeycloakSelect>\r\n                  )}\r\n                />\r\n              </FormGroup>\r\n            )}\r\n          </>\r\n        )}\r\n        {attributeName !== \"username\" && (\r\n          <>\r\n            <Divider />\r\n            <FormGroup\r\n              label={t(\"required\")}\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"requiredHelp\")}\r\n                  fieldLabelId=\"required\"\r\n                />\r\n              }\r\n              fieldId=\"kc-required\"\r\n              hasNoPaddingTop\r\n            >\r\n              <Controller\r\n                name=\"isRequired\"\r\n                data-testid=\"required\"\r\n                defaultValue={false}\r\n                control={form.control}\r\n                render={({ field }) => (\r\n                  <Switch\r\n                    id={\"kc-required\"}\r\n                    onChange={field.onChange}\r\n                    isChecked={field.value}\r\n                    label={t(\"on\")}\r\n                    labelOff={t(\"off\")}\r\n                    aria-label={t(\"required\")}\r\n                  />\r\n                )}\r\n              />\r\n            </FormGroup>\r\n            {required && (\r\n              <>\r\n                <FormGroup\r\n                  label={t(\"requiredFor\")}\r\n                  fieldId=\"requiredFor\"\r\n                  hasNoPaddingTop\r\n                >\r\n                  <Controller\r\n                    name=\"required.roles\"\r\n                    data-testid=\"requiredFor\"\r\n                    defaultValue={REQUIRED_FOR[0].value}\r\n                    control={form.control}\r\n                    render={({ field }) => (\r\n                      <div className=\"kc-requiredFor\">\r\n                        {REQUIRED_FOR.map((option) => (\r\n                          <Radio\r\n                            id={option.label}\r\n                            key={option.label}\r\n                            data-testid={option.label}\r\n                            isChecked={isEqual(field.value, option.value)}\r\n                            name=\"roles\"\r\n                            onChange={() => {\r\n                              field.onChange(option.value);\r\n                            }}\r\n                            label={t(option.label)}\r\n                            className=\"kc-requiredFor-option\"\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  />\r\n                </FormGroup>\r\n                <FormGroup\r\n                  label={t(\"requiredWhen\")}\r\n                  labelIcon={\r\n                    <HelpItem\r\n                      helpText={t(\"requiredWhenTooltip\")}\r\n                      fieldLabelId=\"required-when\"\r\n                    />\r\n                  }\r\n                  fieldId=\"requiredWhen\"\r\n                  hasNoPaddingTop\r\n                >\r\n                  <Radio\r\n                    id=\"requiredAlways\"\r\n                    data-testid=\"requiredAlways\"\r\n                    isChecked={!hasRequiredScopes}\r\n                    name=\"requiredWhen\"\r\n                    label={t(\"always\")}\r\n                    onChange={() => setHasRequiredScopes(false)}\r\n                    className=\"pf-v5-u-mb-md\"\r\n                  />\r\n                  <Radio\r\n                    id=\"requiredScopesAsRequested\"\r\n                    data-testid=\"requiredScopesAsRequested\"\r\n                    isChecked={hasRequiredScopes}\r\n                    name=\"requiredWhen\"\r\n                    label={t(\"scopesAsRequested\")}\r\n                    onChange={() => setHasRequiredScopes(true)}\r\n                    className=\"pf-v5-u-mb-md\"\r\n                  />\r\n                </FormGroup>\r\n                {hasRequiredScopes && (\r\n                  <FormGroup fieldId=\"kc-scope-required-when\">\r\n                    <Controller\r\n                      name=\"required.scopes\"\r\n                      control={form.control}\r\n                      defaultValue={[]}\r\n                      render={({ field }) => (\r\n                        <KeycloakSelect\r\n                          data-testid=\"required-when-scope-field\"\r\n                          variant={SelectVariant.typeaheadMulti}\r\n                          typeAheadAriaLabel=\"Select\"\r\n                          chipGroupProps={{\r\n                            numChips: 3,\r\n                            expandedText: t(\"hide\"),\r\n                            collapsedText: t(\"showRemaining\"),\r\n                          }}\r\n                          onToggle={(isOpen) =>\r\n                            setSelectRequiredForOpen(isOpen)\r\n                          }\r\n                          selections={field.value}\r\n                          onSelect={(selectedValue) => {\r\n                            const option = selectedValue.toString();\r\n                            let changedValue = [\"\"];\r\n                            if (field.value) {\r\n                              changedValue = field.value.includes(option)\r\n                                ? field.value.filter(\r\n                                    (item: string) => item !== option,\r\n                                  )\r\n                                : [...field.value, option];\r\n                            } else {\r\n                              changedValue = [option];\r\n                            }\r\n                            field.onChange(changedValue);\r\n                          }}\r\n                          onClear={() => {\r\n                            field.onChange([]);\r\n                          }}\r\n                          isOpen={selectRequiredForOpen}\r\n                          aria-labelledby={\"scope\"}\r\n                        >\r\n                          {clientScopes.map((option) => (\r\n                            <SelectOption key={option.name} value={option.name}>\r\n                              {option.name}\r\n                            </SelectOption>\r\n                          ))}\r\n                        </KeycloakSelect>\r\n                      )}\r\n                    />\r\n                  </FormGroup>\r\n                )}\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import { Checkbox, FormGroup, Grid, GridItem } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { FormAccess } from \"../../../components/form/FormAccess\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nimport \"../../realm-settings-section.css\";\r\n\r\nconst Permissions = ({ name }: { name: string }) => {\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <Grid>\r\n      <Controller\r\n        name={`permissions.${name}`}\r\n        control={control}\r\n        defaultValue={[]}\r\n        render={({ field }) => (\r\n          <>\r\n            <GridItem lg={4} sm={6}>\r\n              <Checkbox\r\n                id={`user-${name}`}\r\n                label={t(\"user\")}\r\n                value=\"user\"\r\n                data-testid={`user-${name}`}\r\n                isChecked={field.value.includes(\"user\")}\r\n                onChange={() => {\r\n                  const option = \"user\";\r\n                  const changedValue = field.value.includes(option)\r\n                    ? field.value.filter((item: string) => item !== option)\r\n                    : [...field.value, option];\r\n\r\n                  field.onChange(changedValue);\r\n                }}\r\n              />\r\n            </GridItem>\r\n            <GridItem lg={8} sm={6}>\r\n              <Checkbox\r\n                id={`admin-${name}`}\r\n                label={t(\"admin\")}\r\n                value=\"admin\"\r\n                data-testid={`admin-${name}`}\r\n                isChecked={field.value.includes(\"admin\")}\r\n                onChange={() => {\r\n                  const option = \"admin\";\r\n                  const changedValue = field.value.includes(option)\r\n                    ? field.value.filter((item: string) => item !== option)\r\n                    : [...field.value, option];\r\n\r\n                  field.onChange(changedValue);\r\n                }}\r\n              />\r\n            </GridItem>\r\n          </>\r\n        )}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport const AttributePermission = () => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <FormAccess role=\"manage-realm\" isHorizontal>\r\n      <FormGroup\r\n        hasNoPaddingTop\r\n        label={t(\"whoCanEdit\")}\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"whoCanEditHelp\")} fieldLabelId=\"whoCanEdit\" />\r\n        }\r\n        fieldId=\"kc-who-can-edit\"\r\n      >\r\n        <Permissions name=\"edit\" />\r\n      </FormGroup>\r\n      <FormGroup\r\n        hasNoPaddingTop\r\n        label={t(\"whoCanView\")}\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"whoCanViewHelp\")} fieldLabelId=\"whoCanView\" />\r\n        }\r\n        fieldId=\"kc-who-can-view\"\r\n      >\r\n        <Permissions name=\"view\" />\r\n      </FormGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import ComponentTypeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentTypeRepresentation\";\r\nimport { KeycloakSelect } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormGroup, SelectOption } from \"@patternfly/react-core\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useServerInfo } from \"../../../context/server-info/ServerInfoProvider\";\r\nimport useToggle from \"../../../utils/useToggle\";\r\n\r\ntype ValidatorSelectProps = {\r\n  selectedValidators: string[];\r\n  onChange: (validator: ComponentTypeRepresentation) => void;\r\n};\r\n\r\nexport const ValidatorSelect = ({\r\n  selectedValidators,\r\n  onChange,\r\n}: ValidatorSelectProps) => {\r\n  const { t } = useTranslation();\r\n  const allValidator: ComponentTypeRepresentation[] =\r\n    useServerInfo().componentTypes?.[\"org.keycloak.validate.Validator\"] || [];\r\n  const validators = useMemo(\r\n    () => allValidator.filter(({ id }) => !selectedValidators.includes(id)),\r\n    [selectedValidators],\r\n  );\r\n  const [open, toggle] = useToggle();\r\n  const [value, setValue] = useState<ComponentTypeRepresentation>();\r\n\r\n  return (\r\n    <FormGroup label={t(\"validatorType\")} fieldId=\"validator\">\r\n      <KeycloakSelect\r\n        toggleId=\"validator\"\r\n        onToggle={toggle}\r\n        onSelect={(value) => {\r\n          const option = value as ComponentTypeRepresentation;\r\n          onChange(option);\r\n          setValue(option);\r\n          toggle();\r\n        }}\r\n        selections={value?.id}\r\n        variant=\"single\"\r\n        aria-label={t(\"selectOne\")}\r\n        isOpen={open}\r\n        placeholderText={t(\"choose\")}\r\n        menuAppendTo=\"parent\"\r\n        maxHeight={300}\r\n      >\r\n        {validators.map((option) => (\r\n          <SelectOption\r\n            selected={value?.id === option.id}\r\n            key={option.id}\r\n            value={option}\r\n            description={option.helpText}\r\n          >\r\n            {option.id}\r\n          </SelectOption>\r\n        ))}\r\n      </KeycloakSelect>\r\n    </FormGroup>\r\n  );\r\n};\r\n","import ComponentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentRepresentation\";\r\nimport ComponentTypeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentTypeRepresentation\";\r\nimport { Button, Form, Modal, ModalVariant } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { DynamicComponents } from \"../../../components/dynamic/DynamicComponents\";\r\nimport { useServerInfo } from \"../../../context/server-info/ServerInfoProvider\";\r\nimport type { IndexedValidations } from \"../../NewAttributeSettings\";\r\nimport { ValidatorSelect } from \"./ValidatorSelect\";\r\n\r\nexport type AddValidatorDialogProps = {\r\n  selectedValidators: IndexedValidations[];\r\n  toggleDialog: () => void;\r\n  onConfirm: (newValidator: ComponentRepresentation) => void;\r\n};\r\n\r\nexport const AddValidatorDialog = ({\r\n  selectedValidators,\r\n  toggleDialog,\r\n  onConfirm,\r\n}: AddValidatorDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const [selectedValidator, setSelectedValidator] =\r\n    useState<ComponentTypeRepresentation>();\r\n\r\n  const allSelected =\r\n    useServerInfo().componentTypes?.[\"org.keycloak.validate.Validator\"]\r\n      .length === selectedValidators.length;\r\n  const form = useForm<ComponentTypeRepresentation>();\r\n  const { handleSubmit } = form;\r\n\r\n  const save = (newValidator: ComponentTypeRepresentation) => {\r\n    onConfirm({ ...newValidator, id: selectedValidator?.id });\r\n    toggleDialog();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={t(\"addValidator\")}\r\n      isOpen\r\n      onClose={toggleDialog}\r\n      actions={[\r\n        <Button\r\n          key=\"save\"\r\n          data-testid=\"save-validator-role-button\"\r\n          variant=\"primary\"\r\n          type=\"submit\"\r\n          form=\"add-validator\"\r\n        >\r\n          {t(\"save\")}\r\n        </Button>,\r\n        <Button\r\n          key=\"cancel\"\r\n          data-testid=\"cancel-validator-role-button\"\r\n          variant=\"link\"\r\n          onClick={toggleDialog}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      {allSelected ? (\r\n        t(\"emptyValidators\")\r\n      ) : (\r\n        <Form id=\"add-validator\" onSubmit={handleSubmit(save)}>\r\n          <ValidatorSelect\r\n            selectedValidators={selectedValidators.map(\r\n              (validator) => validator.key,\r\n            )}\r\n            onChange={setSelectedValidator}\r\n          />\r\n          {selectedValidator && (\r\n            <FormProvider {...form}>\r\n              <DynamicComponents properties={selectedValidator.properties} />\r\n            </FormProvider>\r\n          )}\r\n        </Form>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  ButtonVariant,\r\n  Divider,\r\n  Text,\r\n  TextVariants,\r\n} from \"@patternfly/react-core\";\r\nimport { PlusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useFormContext, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { useConfirmDialog } from \"../../../components/confirm-dialog/ConfirmDialog\";\r\nimport { DefaultValue } from \"../../../components/key-value-form/KeyValueInput\";\r\nimport useToggle from \"../../../utils/useToggle\";\r\nimport type { IndexedValidations } from \"../../NewAttributeSettings\";\r\nimport { AddValidatorDialog } from \"../attribute/AddValidatorDialog\";\r\n\r\nimport \"../../realm-settings-section.css\";\r\n\r\nexport const AttributeValidations = () => {\r\n  const { t } = useTranslation();\r\n  const [addValidatorModalOpen, toggleModal] = useToggle();\r\n  const [validatorToDelete, setValidatorToDelete] = useState<string>();\r\n  const { setValue, control, register, getValues } = useFormContext();\r\n\r\n  const validators: IndexedValidations[] = useWatch({\r\n    name: \"validations\",\r\n    control,\r\n    defaultValue: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    register(\"validations\");\r\n  }, [register]);\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: t(\"deleteValidatorConfirmTitle\"),\r\n    messageKey: t(\"deleteValidatorConfirmMsg\", {\r\n      validatorName: validatorToDelete,\r\n    }),\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      const updatedValidators = validators.filter(\r\n        (validator) => validator.key !== validatorToDelete,\r\n      );\r\n\r\n      setValue(\"validations\", [...updatedValidators]);\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {addValidatorModalOpen && (\r\n        <AddValidatorDialog\r\n          selectedValidators={validators}\r\n          onConfirm={(newValidator) => {\r\n            const annotations: DefaultValue[] = getValues(\"annotations\");\r\n            if (\r\n              newValidator.id === \"options\" &&\r\n              !annotations.find((a) => a.key === \"inputType\")\r\n            ) {\r\n              setValue(\"annotations\", [\r\n                ...annotations,\r\n                { key: \"inputType\", value: \"select\" },\r\n              ]);\r\n            }\r\n            setValue(\"validations\", [\r\n              ...validators,\r\n              { key: newValidator.id, value: newValidator.config },\r\n            ]);\r\n          }}\r\n          toggleDialog={toggleModal}\r\n        />\r\n      )}\r\n      <DeleteConfirm />\r\n      <div className=\"kc-attributes-validations\">\r\n        <Button\r\n          id=\"addValidator\"\r\n          onClick={() => toggleModal()}\r\n          variant=\"link\"\r\n          data-testid=\"addValidator\"\r\n          className=\"kc--attributes-validations--add-validation-button\"\r\n          icon={<PlusCircleIcon />}\r\n        >\r\n          {t(\"addValidator\")}\r\n        </Button>\r\n        <Divider />\r\n        {validators.length !== 0 ? (\r\n          <Table>\r\n            <Thead>\r\n              <Tr>\r\n                <Th>{t(\"validatorColNames.colName\")}</Th>\r\n                <Th>{t(\"validatorColNames.colConfig\")}</Th>\r\n                <Th aria-hidden=\"true\" />\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              {validators.map((validator) => (\r\n                <Tr key={validator.key}>\r\n                  <Td dataLabel={t(\"validatorColNames.colName\")}>\r\n                    {validator.key}\r\n                  </Td>\r\n                  <Td dataLabel={t(\"validatorColNames.colConfig\")}>\r\n                    {JSON.stringify(validator.value)}\r\n                  </Td>\r\n                  <Td className=\"kc--attributes-validations--action-cell\">\r\n                    <Button\r\n                      key=\"validator\"\r\n                      variant=\"link\"\r\n                      data-testid=\"deleteValidator\"\r\n                      onClick={() => {\r\n                        toggleDeleteDialog();\r\n                        setValidatorToDelete(validator.key);\r\n                      }}\r\n                    >\r\n                      {t(\"delete\")}\r\n                    </Button>\r\n                  </Td>\r\n                </Tr>\r\n              ))}\r\n            </Tbody>\r\n          </Table>\r\n        ) : (\r\n          <Text className=\"kc-emptyValidators\" component={TextVariants.p}>\r\n            {t(\"emptyValidators\")}\r\n          </Text>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import type {\r\n  UserProfileAttribute,\r\n  UserProfileConfig,\r\n} from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\r\nimport { ScrollForm, useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  Form,\r\n  PageSection,\r\n} from \"@patternfly/react-core\";\r\nimport { flatten } from \"flat\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { FixedButtonsGroup } from \"../components/form/FixedButtonGroup\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { convertToFormValues } from \"../util\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport { TranslationForm } from \"./AddTranslationModal\";\r\nimport type { AttributeParams } from \"./routes/Attribute\";\r\nimport { toUserProfile } from \"./routes/UserProfile\";\r\nimport { UserProfileProvider } from \"./user-profile/UserProfileContext\";\r\nimport {\r\n  saveTranslations,\r\n  Translations,\r\n} from \"./user-profile/attribute/TranslatableField\";\r\nimport { AttributeAnnotations } from \"./user-profile/attribute/AttributeAnnotations\";\r\nimport { AttributeGeneralSettings } from \"./user-profile/attribute/AttributeGeneralSettings\";\r\nimport { AttributePermission } from \"./user-profile/attribute/AttributePermission\";\r\nimport { AttributeValidations } from \"./user-profile/attribute/AttributeValidations\";\r\n\r\nimport \"./realm-settings-section.css\";\r\n\r\ntype IndexedAnnotations = {\r\n  key: string;\r\n  value?: Record<string, unknown>;\r\n};\r\n\r\nexport type IndexedValidations = {\r\n  key: string;\r\n  value?: Record<string, unknown>;\r\n};\r\n\r\ntype UserProfileAttributeFormFields = Omit<\r\n  UserProfileAttribute,\r\n  \"validations\" | \"annotations\"\r\n> &\r\n  Translations &\r\n  Attribute &\r\n  Permission & {\r\n    validations: IndexedValidations[];\r\n    annotations: IndexedAnnotations[];\r\n    hasSelector: boolean;\r\n    hasRequiredScopes: boolean;\r\n    translations?: TranslationForm[];\r\n  };\r\n\r\ntype Attribute = {\r\n  roles: string[];\r\n  scopes: string[];\r\n  isRequired: boolean;\r\n};\r\n\r\ntype Permission = {\r\n  view: PermissionView[];\r\n  edit: PermissionEdit[];\r\n};\r\n\r\ntype PermissionView = [\r\n  {\r\n    adminView: boolean;\r\n    userView: boolean;\r\n  },\r\n];\r\n\r\ntype PermissionEdit = [\r\n  {\r\n    adminEdit: boolean;\r\n    userEdit: boolean;\r\n  },\r\n];\r\n\r\nexport const USERNAME_EMAIL = [\"username\", \"email\"];\r\n\r\nconst CreateAttributeFormContent = ({\r\n  save,\r\n}: {\r\n  save: (profileConfig: UserProfileConfig) => void;\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const form = useFormContext();\r\n  const { realm, attributeName } = useParams<AttributeParams>();\r\n  const editMode = attributeName ? true : false;\r\n\r\n  return (\r\n    <UserProfileProvider>\r\n      <ScrollForm\r\n        label={t(\"jumpToSection\")}\r\n        sections={[\r\n          { title: t(\"generalSettings\"), panel: <AttributeGeneralSettings /> },\r\n          { title: t(\"permission\"), panel: <AttributePermission /> },\r\n          { title: t(\"validations\"), panel: <AttributeValidations /> },\r\n          { title: t(\"annotations\"), panel: <AttributeAnnotations /> },\r\n        ]}\r\n      />\r\n      <Form onSubmit={form.handleSubmit(save)}>\r\n        <FixedButtonsGroup name=\"attribute-settings\">\r\n          <Button\r\n            variant=\"primary\"\r\n            type=\"submit\"\r\n            data-testid=\"attribute-create\"\r\n          >\r\n            {editMode ? t(\"save\") : t(\"create\")}\r\n          </Button>\r\n          <Link\r\n            to={toUserProfile({ realm, tab: \"attributes\" })}\r\n            data-testid=\"attribute-cancel\"\r\n            className=\"kc-attributeCancel\"\r\n          >\r\n            {t(\"cancel\")}\r\n          </Link>\r\n        </FixedButtonsGroup>\r\n      </Form>\r\n    </UserProfileProvider>\r\n  );\r\n};\r\n\r\nexport default function NewAttributeSettings() {\r\n  const { adminClient } = useAdminClient();\r\n  const { realm: realmName, attributeName } = useParams<AttributeParams>();\r\n  const form = useForm<UserProfileAttributeFormFields>();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [config, setConfig] = useState<UserProfileConfig | null>(null);\r\n  const editMode = attributeName ? true : false;\r\n\r\n  useFetch(\r\n    () => adminClient.users.getProfile(),\r\n    (config) => {\r\n      setConfig(config);\r\n      const {\r\n        annotations,\r\n        validations,\r\n        permissions,\r\n        selector,\r\n        required,\r\n        multivalued,\r\n        defaultValue,\r\n        ...values\r\n      } = config.attributes!.find(\r\n        (attribute) => attribute.name === attributeName,\r\n      ) || { permissions: { edit: [\"admin\"] } };\r\n      convertToFormValues(\r\n        {\r\n          ...values,\r\n          hasSelector: typeof selector !== \"undefined\",\r\n          hasRequiredScopes: typeof required?.scopes !== \"undefined\",\r\n        },\r\n        form.setValue,\r\n      );\r\n      Object.entries(\r\n        flatten<any, any>({ permissions, selector, required }, { safe: true }),\r\n      ).map(([key, value]) => form.setValue(key as any, value));\r\n      form.setValue(\r\n        \"annotations\",\r\n        Object.entries(annotations || {}).map(([key, value]) => ({\r\n          key,\r\n          value: value as Record<string, unknown>,\r\n        })),\r\n      );\r\n      form.setValue(\r\n        \"validations\",\r\n        Object.entries(validations || {}).map(([key, value]) => ({\r\n          key,\r\n          value: value as Record<string, unknown>,\r\n        })),\r\n      );\r\n      form.setValue(\"isRequired\", required !== undefined);\r\n      form.setValue(\"multivalued\", multivalued === true);\r\n      form.setValue(\"defaultValue\", defaultValue);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const save = async ({\r\n    hasSelector,\r\n    hasRequiredScopes,\r\n    ...formFields\r\n  }: UserProfileAttributeFormFields) => {\r\n    if (!hasSelector) {\r\n      delete formFields.selector;\r\n    }\r\n\r\n    if (!hasRequiredScopes) {\r\n      delete formFields.required?.scopes;\r\n    }\r\n\r\n    const validations = formFields.validations.reduce(\r\n      (prevValidations, currentValidations) => {\r\n        prevValidations[currentValidations.key] =\r\n          currentValidations.value || {};\r\n        return prevValidations;\r\n      },\r\n      {} as Record<string, unknown>,\r\n    );\r\n\r\n    const annotations = formFields.annotations.reduce(\r\n      (obj, item) => Object.assign(obj, { [item.key]: item.value }),\r\n      {},\r\n    );\r\n\r\n    const patchAttributes = () =>\r\n      (config?.attributes || []).map((attribute) => {\r\n        if (attribute.name !== attributeName) {\r\n          return attribute;\r\n        }\r\n\r\n        delete attribute.required;\r\n        return Object.assign(\r\n          {\r\n            ...attribute,\r\n            name: attributeName,\r\n            displayName: formFields.displayName!,\r\n            selector: formFields.selector,\r\n            permissions: formFields.permissions!,\r\n            multivalued: formFields.multivalued,\r\n            annotations,\r\n            validations,\r\n          },\r\n          formFields.defaultValue\r\n            ? { defaultValue: formFields.defaultValue }\r\n            : { defaultValue: null },\r\n          formFields.isRequired ? { required: formFields.required } : undefined,\r\n          formFields.group ? { group: formFields.group } : { group: null },\r\n        );\r\n      });\r\n\r\n    const addAttribute = () =>\r\n      (config?.attributes || []).concat([\r\n        Object.assign(\r\n          {\r\n            name: formFields.name,\r\n            displayName: formFields.displayName!,\r\n            required: formFields.isRequired ? formFields.required : undefined,\r\n            selector: formFields.selector,\r\n            permissions: formFields.permissions!,\r\n            multivalued: formFields.multivalued,\r\n            annotations,\r\n            validations,\r\n          },\r\n          formFields.defaultValue\r\n            ? { defaultValue: formFields.defaultValue }\r\n            : { defaultValue: null },\r\n          formFields.isRequired ? { required: formFields.required } : undefined,\r\n          formFields.group ? { group: formFields.group } : undefined,\r\n        ),\r\n      ] as UserProfileAttribute);\r\n\r\n    try {\r\n      const updatedAttributes = editMode ? patchAttributes() : addAttribute();\r\n\r\n      await adminClient.users.updateProfile({\r\n        ...config,\r\n        attributes: updatedAttributes as UserProfileAttribute[],\r\n        realm: realmName,\r\n      });\r\n\r\n      if (formFields.translation) {\r\n        try {\r\n          await saveTranslations({\r\n            adminClient,\r\n            realmName,\r\n            translationsData: {\r\n              translation: formFields.translation,\r\n            },\r\n          });\r\n        } catch (error) {\r\n          addError(t(\"errorSavingTranslations\"), error);\r\n        }\r\n      }\r\n      navigate(toUserProfile({ realm: realmName, tab: \"attributes\" }));\r\n\r\n      addAlert(t(\"createAttributeSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"createAttributeError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      <ViewHeader\r\n        titleKey={editMode ? attributeName : t(\"createAttribute\")}\r\n        subKey={editMode ? \"\" : t(\"createAttributeSubTitle\")}\r\n      />\r\n      <PageSection variant=\"light\">\r\n        <CreateAttributeFormContent save={() => form.handleSubmit(save)()} />\r\n      </PageSection>\r\n    </FormProvider>\r\n  );\r\n}\r\n"],"names":["ValueSelect","selectItems","rest","t","useTranslation","field","useController","open","setOpen","useState","jsx","KeycloakSelect","isOpen","value","item","SelectOption","AttributeAnnotations","register","useFormContext","FormAccess","FormGroup","Grid","GridItem","KeyValueInput","props","KeySelect","TextInput","REQUIRED_FOR","AttributeGeneralSettings","adminClient","useAdminClient","form","clientScopes","setClientScopes","config","setConfig","selectEnabledWhenOpen","setSelectEnabledWhenOpen","selectRequiredForOpen","setSelectRequiredForOpen","enabledWhenSearch","setEnableWhenSearch","localeSort","useLocaleSort","attributeName","useParams","editMode","hasSelector","useWatch","hasRequiredScopes","required","useFetch","KeycloakSpinner","setHasSelector","setHasRequiredScopes","items","mapByKey","s","option","ROOT_ATTRIBUTE","USERNAME_EMAIL","FormProvider","TextControl","HelpItem","TranslatableField","DefaultSwitchControl","SelectControl","g","jsxs","Fragment","Divider","Radio","Controller","SelectVariant","selectedValue","changedValue","Switch","isEqual","Permissions","name","control","Checkbox","AttributePermission","ValidatorSelect","selectedValidators","onChange","allValidator","useServerInfo","validators","useMemo","id","toggle","useToggle","setValue","AddValidatorDialog","toggleDialog","onConfirm","selectedValidator","setSelectedValidator","allSelected","useForm","handleSubmit","save","newValidator","Modal","ModalVariant","Button","Form","validator","DynamicComponents","AttributeValidations","addValidatorModalOpen","toggleModal","validatorToDelete","setValidatorToDelete","getValues","useEffect","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","updatedValidators","annotations","a","PlusCircleIcon","Table","Thead","Tr","Th","Tbody","Td","Text","TextVariants","CreateAttributeFormContent","realm","UserProfileProvider","ScrollForm","FixedButtonsGroup","Link","toUserProfile","NewAttributeSettings","realmName","navigate","useNavigate","addAlert","addError","useAlerts","validations","permissions","selector","multivalued","defaultValue","values","attribute","convertToFormValues","flatten","key","formFields","prevValidations","currentValidations","obj","patchAttributes","addAttribute","updatedAttributes","saveTranslations","error","AlertVariant","ViewHeader","PageSection"],"mappings":"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"}