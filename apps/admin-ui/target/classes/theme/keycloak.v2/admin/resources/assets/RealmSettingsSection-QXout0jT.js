import{jsx as e,jsxs as H,Fragment as ve}from"react/jsx-runtime";import{aw as vn,av as yn,eu as kn,ev as _n,ew as wn,ex as Cn,ey as Tn,de as Sn,dF as ja,dG as xn,cr as In,dd as En,ez as An,dI as Ln,eA as Pn,ct as On,u as Te,cX as Ot,y as et,a as de,_ as Oe,j as Fe,C as rt,N as We,P as xe,l as Ve,bP as Ye,Q as Ae,eB as aa,O as se,R as fe,cc as Wt,$ as ua,V as vt,cU as xa,aW as ut,eC as Rn,L as Be,bT as Dn,A as He,g as oe,o as Ie,d as Ce,p as tt,c1 as ba,an as Qt,ao as nt,a7 as zn,b3 as gt,U as Me,W as he,c2 as qt,w as na,m as Rt,S as Re,M as ht,k as yt,H as _t,I as Ge,F as ft,B as Ee,bh as Nn,bf as kt,aa as it,bp as qe,x as st,ak as Le,at as Zt,b as wt,aC as ea,aD as Ue,aE as Ga,eo as Fn,T as ze,eD as Ia,v as Ze,en as ha,eE as Bn,er as Mn,a0 as Ct,eF as Bt,aI as Un,cS as Vn,eG as Hn,a3 as Dt,eH as Kn,eI as jn,bw as Wa,bx as fa,e as mt,eJ as Mt,eK as Ea,b_ as qa,bj as Gn,bq as Qe,a5 as Aa,dY as Wn,dD as qn,dE as Zn,J as va,eh as Ut,bk as $n,am as Jn,aS as ya,E as Yn,eL as La,aM as Za,aN as $a,D as Lt,al as Ja,a_ as Ya,bm as Xn,aX as ot,aY as Vt,eM as ma,eN as ka,a8 as Xa,bv as Qn,by as Qa,eO as er,Y as It,Z as pt,ei as Xe,em as je,ek as ra,aB as tr,aQ as ar,bo as nr,ay as Pa,aK as Ht,aR as rr,aP as Kt,eP as ir,di as sr,du as or,bW as Oa,X as ia,eQ as Ra,eR as lr,a9 as cr,cB as dr,eS as ur,eT as Da,eg as za,cl as sa,aL as Na,cg as hr,ap as fr,n as mr,r as pr,s as gr}from"./main-o1hptXRo.js";import br,{useState as J,useEffect as at,useMemo as ct}from"react";import{u as De,C as vr}from"./ConfirmDialog-BkU7melV.js";import{u as dt,R as Pt}from"./RoutableTabs-DyhWhd6v.js";import{V as yr}from"./ViewHeader-BDBsroi3.js";import{u as _a}from"./useLocale-cOPKcLYS.js";import{F as _e,C as kr,S as en,a as Je,b as $t}from"./FormAccess-BnhQnYb9.js";/* empty css                               */import{a as oa}from"./ActionListItem-Cy-NQlq4.js";import{U as Et}from"./userProfileMetadata-CFgHgJ2w.js";import{D as bt}from"./SwitchControl-CU1bUhmR.js";import{K as _r}from"./KeyValueInput-BOsiIUR1.js";import{b as wr}from"./SamlSignature-DX1VWY22.js";import{J as Cr}from"./JsonFileUpload-CXVaTh71.js";import{D as tn,a as an,b as nn,c as rn,d as pa}from"./DataListItemRow-B_0B-ko6.js";import{a as wa}from"./CodeEditor-C4IS5oxi.js";import{t as sn}from"./translationFormatter-DQJeO7lr.js";import{b as Tr}from"./_baseSlice-F8doVSIJ.js";import{b as Sr}from"./_baseFlatten-BLlCkxtA.js";import{T as ke,t as xr}from"./TimeSelector-1gdltitc.js";import{T as zt,a as me,b as pe}from"./Tabs-DSwQhKoJ.js";import{T as Jt}from"./TimeSelectorControl-B1N9IKgG.js";import{R as Ir}from"./RoleMapping-BOcI-Nkp.js";import{G as Er}from"./GroupPickerDialog-U3luvxlw.js";import{T as Yt}from"./Trans-CicUNvCL.js";import{Q as Ar}from"./question-circle-icon-C0dl_LB7.js";import{i as on}from"./isEqual-B7qkGgF1.js";import{u as Lr}from"./useFormatDate-CuGjRZ4j.js";import{F as ln}from"./filter-icon-DYNmdQ7O.js";import{D as cn}from"./DraggableTable-CH2dxmAN.js";import{KeyProviderForm as Pr}from"./KeyProviderForm-BdvE2HbQ.js";import{D as Or}from"./DropdownPanel-vRJu3PnV.js";import{u as Rr,m as Dr}from"./useLocaleSort-C-diWts5.js";import{p as zr}from"./pickBy-JGveacY0.js";import{M as Nr}from"./MenuGroup-ldqwBZhf.js";import{P as Fr}from"./pencil-alt-icon-pqpZW-gk.js";import{u as Ca,U as Br}from"./UserProfileContext-DwkKusZd.js";import"react-dom";import"./PageHandler-B1ed5nYb.js";import"./DynamicComponents-CnLlz98z.js";import"./ClientSelect-BY77LEpN.js";import"./IdentityProviderSelect-rmWlUbIg.js";import"./MultiLineInput-OP0faqms.js";import"./useParams-CGVhlaFZ.js";import"./constants-BclHbWtx.js";import"./FileUploadForm-3WTCaGLI.js";const ga=x=>{var{children:I,className:t,label:a}=x,d=vn(x,["children","className","label"]);return br.createElement(Nr,Object.assign({className:yn(t),label:a},d),I)};ga.displayName="SelectGroup";function Mr(x){var I=x==null?0:x.length;return I?Sr(x):[]}function Ur(x){return kn(_n(x,void 0,Mr),x+"")}var Vr="[object Object]",Hr=Function.prototype,Kr=Object.prototype,dn=Hr.toString,jr=Kr.hasOwnProperty,Gr=dn.call(Object);function Wr(x){if(!wn(x)||Cn(x)!=Vr)return!1;var I=Tn(x);if(I===null)return!0;var t=jr.call(I,"constructor")&&I.constructor;return typeof t=="function"&&t instanceof t&&dn.call(t)==Gr}function qr(x,I){return I.length<2?x:Sn(x,Tr(I,0,-1))}function Zr(x,I){return I=ja(I,x),x=qr(x,I),x==null||delete x[xn(In(I))]}function $r(x){return Wr(x)?void 0:x}var Jr=1,Yr=2,Xr=4,un=Ur(function(x,I){var t={};if(x==null)return t;var a=!1;I=En(I,function(r){return r=ja(r,x),a||(a=r.length>1),r}),An(x,Ln(x),t),a&&(t=Pn(t,Jr|Yr|Xr,$r));for(var d=I.length;d--;)Zr(t,I[d]);return t});function Qr(x,I){return I=typeof I=="function"?I:void 0,x&&x.length?On(x,void 0,I):[]}function ei(){const{adminClient:x}=Te(),{whoAmI:I}=Ot(),[t,a]=J();return et(()=>x.users.findOne({id:I.userId}),a,[I.userId]),{...t,realm:I.realm}}const ti=({realm:x,save:I})=>{const{adminClient:t}=Te(),{t:a}=de(),{addAlert:d,addError:r}=Oe(),c=ei(),i=Fe({defaultValues:x}),{control:o,handleSubmit:p,watch:k,reset:w,getValues:y}=i,u=()=>w(x),g=k("smtpServer.from",""),s=k("smtpServer.host",""),[f,h]=rt(),m=We({control:o,name:"smtpServer.auth",defaultValue:x.smtpServer?.auth||"false"}),C=We({control:o,name:"smtpServer.authType",defaultValue:x.smtpServer?.authType||"basic"}),_=async()=>{const S=P=>Number(P),L=P=>P==="true",A=new Map([["port",S],["ssl",L],["starttls",L],["auth",L]]),D={...y().smtpServer};for(const[P,O]of A.entries())D[P]=O(D[P]);D.port===0&&(D.port=null);try{h(),await t.realms.testSMTPConnection({realm:x.realm},D),d(a("testConnectionSuccess"),Ie.success)}catch(P){r("testConnectionError",P)}h()};return e(xe,{variant:"light",children:H(Ve,{...i,children:[e(Ye,{title:a("template"),className:"kc-email-template",children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:p(I),children:[e(Ae,{name:"smtpServer.from",label:a("from"),type:"email",placeholder:a("smtpFromPlaceholder"),rules:{pattern:{value:aa,message:a("emailInvalid")},required:a("required")}}),e(Ae,{name:"smtpServer.fromDisplayName",label:a("fromDisplayName"),labelIcon:a("fromDisplayNameHelp"),placeholder:a("smtpFromDisplayPlaceholder")}),e(Ae,{name:"smtpServer.replyTo",label:a("replyTo"),type:"email",placeholder:a("replyToEmailPlaceholder"),rules:{pattern:{value:aa,message:a("emailInvalid")}}}),e(Ae,{name:"smtpServer.replyToDisplayName",label:a("replyToDisplayName"),labelIcon:a("replyToDisplayNameHelp"),placeholder:a("replyToDisplayPlaceholder")}),e(Ae,{name:"smtpServer.envelopeFrom",label:a("envelopeFrom"),labelIcon:a("envelopeFromHelp"),placeholder:a("senderEnvelopePlaceholder")})]})}),e(Ye,{className:"kc-email-connection",title:a("connectionAndAuthentication"),children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:p(I),children:[e(Ae,{name:"smtpServer.host",label:a("host"),rules:{required:a("required")}}),e(Ae,{name:"smtpServer.port",label:a("port"),placeholder:a("smtpPortPlaceholder")}),H(se,{label:a("encryption"),fieldId:"kc-html-display-name",children:[e(fe,{name:"smtpServer.ssl",control:o,defaultValue:"false",render:({field:S})=>e(Wt,{id:"kc-enable-ssl","data-testid":"enable-ssl",label:a("enableSSL"),isChecked:S.value==="true",onChange:(L,A)=>S.onChange(""+A)})}),e(fe,{name:"smtpServer.starttls",control:o,defaultValue:"false",render:({field:S})=>e(Wt,{id:"kc-enable-start-tls","data-testid":"enable-start-tls",label:a("enableStartTLS"),isChecked:S.value==="true",onChange:(L,A)=>S.onChange(""+A)})})]}),e(ua,{name:"smtpServer.auth",label:a("authentication"),"data-testid":"smtpServer.auth",defaultValue:"",labelOn:a("enabled"),labelOff:a("disabled"),stringify:!0}),m==="true"&&H(ve,{children:[e(Ae,{name:"smtpServer.user",label:a("username"),placeholder:a("loginUsernamePlaceholder"),rules:{required:a("required")}}),e(se,{label:a("authenticationType"),fieldId:"authType",children:e(fe,{name:"smtpServer.authType",control:o,defaultValue:"basic",render:({field:S})=>H(ve,{children:[e(vt,{id:"basicAuth",name:"smtpServer.authType","data-testid":"smtpServer.authType.basic",label:a("authenticationTypeBasicAuth"),value:"basic",isChecked:S.value==="basic",onChange:()=>S.onChange("basic")}),e(vt,{id:"tokenAuth",name:"smtpServer.authType","data-testid":"smtpServer.authType.token",label:a("authenticationTypeTokenAuth"),value:"token",isChecked:S.value==="token",onChange:()=>S.onChange("token")})]})})}),C==="basic"&&e(xa,{name:"smtpServer.password",label:a("password"),labelIcon:a("passwordHelp"),rules:{required:a("required")}}),C==="token"&&H(ve,{children:[e(Ae,{name:"smtpServer.authTokenUrl",label:a("authTokenUrl"),helperText:a("tokenTokenUrlHelp"),rules:{required:a("required")}}),e(Ae,{name:"smtpServer.authTokenScope",label:a("authTokenScope"),helperText:a("authTokenScopeHelp"),rules:{required:a("required")}}),e(Ae,{name:"smtpServer.authTokenClientId",label:a("authTokenClientId"),helperText:a("authTokenClientIdHelp"),rules:{required:a("required")}}),e(xa,{name:"smtpServer.authTokenClientSecret",label:a("authTokenClientSecret"),labelIcon:a("authTokenClientSecretHelp"),rules:{required:a("required")}})]})]}),e(ua,{name:"smtpServer.allowutf8",label:a("allowutf8"),labelIcon:a("allowutf8Help"),"data-testid":"smtpServer.allowutf8",defaultValue:"",labelOn:a("enabled"),labelOff:a("disabled"),stringify:!0}),e(fe,{name:"smtpServer.debug",control:o,defaultValue:"false",render:({field:S})=>e(Wt,{id:"kc-enable-debug","data-testid":"enable-debug",label:a("enableDebugSMTP"),isChecked:S.value==="true",onChange:(L,A)=>S.onChange(""+A)})}),c&&e(se,{id:"descriptionTestConnection",children:c.email?e(ut,{variant:"info",component:"h2",isInline:!0,title:a("testConnectionHint.withEmail",{email:c.email})}):e(ut,{variant:"warning",component:"h2",isInline:!0,title:a("testConnectionHint.withoutEmail",{userName:c.username}),actionLinks:e(Rn,{component:S=>e(Be,{...S,to:Dn({realm:c.realm,id:c.id,tab:"settings"})}),children:a("testConnectionHint.withoutEmailAction")})})}),H(He,{children:[e(oa,{children:e(oe,{variant:"primary",type:"submit","data-testid":"email-tab-save",children:a("save")})}),e(oa,{children:e(oe,{variant:"secondary",onClick:()=>_(),"data-testid":"test-connection-button",isDisabled:!(aa.test(g)&&s)||!c?.email,"aria-describedby":"descriptionTestConnection",isLoading:f,spinnerAriaValueText:a("testingConnection"),children:a("testConnection")})}),e(oa,{children:e(oe,{variant:"link",onClick:u,"data-testid":"email-tab-revert",children:a("revert")})})]})]})})]})})},ai=({realm:x,save:I})=>{const{adminClient:t}=Te(),{realm:a}=Ce(),[d,r]=J();return et(()=>t.users.getProfile({realm:a}),c=>r(c),[]),d?e(ri,{realm:x,save:I,userProfileConfig:d}):e(tt,{})},ni=["all","external","none"],la=[Et.Disabled,Et.Enabled,Et.AdminView,Et.AdminEdit];function ri({realm:x,save:I,userProfileConfig:t}){const{environment:{serverBaseUrl:a}}=ba(),{t:d}=de(),{realm:r}=Ce(),c=Fe(),{control:i,handleSubmit:o,setValue:p,formState:{errors:k}}=c,w=Qt(),y=w(nt.Organizations),u=w(nt.AdminFineGrainedAuthzV2),g=w(nt.OpenId4VCI),s=()=>{if(Rt(x,p),p("unmanagedAttributePolicy",t.unmanagedAttributePolicy||la[0]),x.attributes?.["acr.loa.map"]){const h=Object.entries(JSON.parse(x.attributes["acr.loa.map"])).flatMap(([m,C])=>({key:m,value:C}));h.concat({key:"",value:""}),p(gt("attributes.acr.loa.map"),h)}};at(s,[]);const f=o(async({unmanagedAttributePolicy:h,...m})=>{const C={...t};h===Et.Disabled?delete C.unmanagedAttributePolicy:C.unmanagedAttributePolicy=h,await I({...m,upConfig:C})});return e(xe,{variant:"light",children:e(Ve,{...c,children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:f,children:[H(se,{label:d("realmName"),fieldId:"kc-realm-id",isRequired:!0,children:[e(fe,{name:"realm",control:i,rules:{required:{value:!0,message:d("required")}},defaultValue:"",render:({field:h})=>e(kr,{"data-testid":"realmName",onChange:h.onChange,children:h.value})}),k.realm&&e(zn,{"data-testid":"realm-id-error",message:k.realm.message})]}),e(Ae,{name:"displayName",label:d("displayName")}),e(Ae,{name:"displayNameHtml",label:d("htmlDisplayName")}),e(Ae,{name:gt("attributes.frontendUrl"),type:"url",label:d("frontendUrl"),labelIcon:d("frontendUrlHelp")}),e(Me,{name:"sslRequired",label:d("requireSsl"),labelIcon:d("requireSslHelp"),controller:{defaultValue:"none"},options:ni.map(h=>({key:h,value:d(`sslType.${h}`)}))}),e(se,{label:d("acrToLoAMapping"),fieldId:"acrToLoAMapping",labelIcon:e(he,{helpText:d("acrToLoAMappingHelp"),fieldLabelId:"acrToLoAMapping"}),children:e(_r,{label:d("acrToLoAMapping"),name:gt("attributes.acr.loa.map")})}),e(bt,{name:"userManagedAccessAllowed",label:d("userManagedAccess"),labelIcon:d("userManagedAccessHelp")}),y&&e(bt,{name:"organizationsEnabled",label:d("organizationsEnabled"),labelIcon:d("organizationsEnabledHelp")}),u&&e(bt,{name:"adminPermissionsEnabled",label:d("adminPermissionsEnabled"),labelIcon:d("adminPermissionsEnabledHelp")}),g&&e(bt,{name:"verifiableCredentialsEnabled",label:d("verifiableCredentialsEnabled"),labelIcon:d("verifiableCredentialsEnabledHelp")}),e(Me,{name:"unmanagedAttributePolicy",label:d("unmanagedAttributes"),labelIcon:d("unmanagedAttributesHelpText"),controller:{defaultValue:la[0]},options:la.map(h=>({key:h,value:d(`unmanagedAttributePolicy.${h}`)}))}),e(Me,{name:gt("attributes.saml.signature.algorithm"),label:d("signatureAlgorithmIdentityProviderMetadata"),labelIcon:d("signatureAlgorithmIdentityProviderMetadataHelp"),controller:{defaultValue:""},options:[{key:"",value:d("choose")},...wr.map(h=>({key:h,value:h}))]}),e(se,{label:d("endpoints"),labelIcon:e(he,{helpText:d("endpointsHelp"),fieldLabelId:"endpoints"}),fieldId:"kc-endpoints",children:H(en,{children:[e(Je,{children:e(qt,{href:`${na(a)}realms/${r}/.well-known/openid-configuration`,title:d("openIDEndpointConfiguration")})}),e(Je,{children:e(qt,{href:`${na(a)}realms/${r}/protocol/saml/descriptor`,title:d("samlIdentityProviderMetadata")})}),g&&x.verifiableCredentialsEnabled&&e(Je,{children:e(qt,{href:`${na(a)}.well-known/openid-credential-issuer/realms/${r}`,title:d("oid4vcIssuerMetadata")})})]})}),e($t,{name:"realmSettingsGeneralTab",reset:s,isSubmit:!0})]})})})}const ii=({realm:x,refresh:I})=>{const{adminClient:t}=Te(),{t:a}=de(),{addAlert:d,addError:r}=Oe(),{realm:c}=Ce(),i=async o=>{const p=Array.isArray(o)?Object.keys(o[0])[0]:Object.keys(o)[0];try{await t.realms.update({realm:c},Array.isArray(o)?o.reduce((k,w)=>Object.assign(k,w),x):Object.assign(x,o)),d(a("enableSwitchSuccess",{switch:a(p)})),I()}catch(k){r("enableSwitchError",k)}};return H(xe,{variant:"light",children:[e(Ye,{className:"kc-login-screen",title:a("loginScreenCustomization"),children:H(_e,{isHorizontal:!0,role:"manage-realm",children:[e(se,{label:a("registrationAllowed"),fieldId:"kc-user-reg",labelIcon:e(he,{helpText:a("userRegistrationHelpText"),fieldLabelId:"registrationAllowed"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-user-reg-switch","data-testid":"user-reg-switch",value:x.registrationAllowed?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.registrationAllowed,onChange:async(o,p)=>{await i({registrationAllowed:p})},"aria-label":a("registrationAllowed")})}),e(se,{label:a("resetPasswordAllowed"),fieldId:"kc-forgot-pw",labelIcon:e(he,{helpText:a("forgotPasswordHelpText"),fieldLabelId:"resetPasswordAllowed"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-forgot-pw-switch","data-testid":"forgot-pw-switch",name:"resetPasswordAllowed",value:x.resetPasswordAllowed?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.resetPasswordAllowed,onChange:async(o,p)=>{await i({resetPasswordAllowed:p})},"aria-label":a("resetPasswordAllowed")})}),e(se,{label:a("rememberMe"),fieldId:"kc-remember-me",labelIcon:e(he,{helpText:a("rememberMeHelpText"),fieldLabelId:"rememberMe"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-remember-me-switch","data-testid":"remember-me-switch",value:x.rememberMe?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.rememberMe,onChange:async(o,p)=>{await i({rememberMe:p})},"aria-label":a("rememberMe")})})]})}),e(Ye,{className:"kc-email-settings",title:a("emailSettings"),children:H(_e,{isHorizontal:!0,role:"manage-realm",children:[e(se,{label:a("registrationEmailAsUsername"),fieldId:"kc-email-as-username",labelIcon:e(he,{helpText:a("emailAsUsernameHelpText"),fieldLabelId:"registrationEmailAsUsername"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-email-as-username-switch","data-testid":"email-as-username-switch",value:x.registrationEmailAsUsername?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.registrationEmailAsUsername,onChange:async(o,p)=>{await i([{registrationEmailAsUsername:p},{duplicateEmailsAllowed:!1}])},"aria-label":a("registrationEmailAsUsername")})}),e(se,{label:a("loginWithEmailAllowed"),fieldId:"kc-login-with-email",labelIcon:e(he,{helpText:a("loginWithEmailHelpText"),fieldLabelId:"loginWithEmailAllowed"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-login-with-email-switch","data-testid":"login-with-email-switch",value:x.loginWithEmailAllowed?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.loginWithEmailAllowed,onChange:async(o,p)=>{await i([{loginWithEmailAllowed:p},{duplicateEmailsAllowed:!1}])},"aria-label":a("loginWithEmailAllowed")})}),e(se,{label:a("duplicateEmailsAllowed"),fieldId:"kc-duplicate-emails",labelIcon:e(he,{helpText:a("duplicateEmailsHelpText"),fieldLabelId:"duplicateEmailsAllowed"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-duplicate-emails-switch","data-testid":"duplicate-emails-switch",label:a("on"),labelOff:a("off"),isChecked:x.duplicateEmailsAllowed,onChange:async(o,p)=>{await i({duplicateEmailsAllowed:p})},isDisabled:x.loginWithEmailAllowed||x.registrationEmailAsUsername,"aria-label":a("duplicateEmailsAllowed")})}),e(se,{label:a("verifyEmail"),fieldId:"kc-verify-email",labelIcon:e(he,{helpText:a("verifyEmailHelpText"),fieldLabelId:"verifyEmail"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-verify-email-switch","data-testid":"verify-email-switch",name:"verifyEmail",value:x.verifyEmail?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.verifyEmail,onChange:async(o,p)=>{await i({verifyEmail:p})},"aria-label":a("verifyEmail")})})]})}),e(Ye,{className:"kc-user-info-settings",title:a("userInfoSettings"),children:e(_e,{isHorizontal:!0,role:"manage-realm",children:e(se,{label:a("editUsernameAllowed"),fieldId:"kc-edit-username",labelIcon:e(he,{helpText:a("editUsernameHelp"),fieldLabelId:"editUsernameAllowed"}),hasNoPaddingTop:!0,children:e(Re,{id:"kc-edit-username-switch","data-testid":"edit-username-switch",value:x.editUsernameAllowed?"on":"off",label:a("on"),labelOff:a("off"),isChecked:x.editUsernameAllowed,onChange:async(o,p)=>{await i({editUsernameAllowed:p})},"aria-label":a("editUsernameAllowed")})})})})]})},si=({isOpen:x,onClose:I})=>{const{adminClient:t}=Te(),{t:a}=de(),{realm:d}=Ce(),{addAlert:r,addError:c}=Oe(),[i,o]=J(!1),[p,k]=J(!1),[w,y]=J(!1),u=i||p;async function g(){y(!0);try{const s=await t.realms.export({realm:d,exportClients:p,exportGroupsAndRoles:i});Nn.saveAs(new Blob([kt(s)],{type:"application/json"}),"realm-export.json"),r(a("exportSuccess"),Ie.success),I()}catch(s){c("exportFail",s)}y(!1)}return H(ht,{variant:yt.small,title:a("partialExport"),isOpen:x,onClose:I,actions:[e(oe,{"data-testid":"confirm",isDisabled:w,onClick:g,children:a("export")},"export"),e(oe,{"data-testid":"cancel",variant:Ee.link,onClick:I,children:a("cancel")},"cancel")],children:[e(_t,{children:e(Ge,{children:a("partialExportHeaderText")})}),H(ft,{isHorizontal:!0,className:"keycloak__realm-settings__partial-import_form",children:[e(se,{label:a("includeGroupsAndRoles"),fieldId:"include-groups-and-roles-check",hasNoPaddingTop:!0,children:e(Re,{id:"include-groups-and-roles-check","data-testid":"include-groups-and-roles-check",isChecked:i,onChange:(s,f)=>o(f),label:a("on"),labelOff:a("off"),"aria-label":a("includeGroupsAndRoles")})}),e(se,{label:a("includeClients"),fieldId:"include-clients-check",hasNoPaddingTop:!0,children:e(Re,{id:"include-clients-check","data-testid":"include-clients-check",onChange:(s,f)=>k(f),isChecked:p,label:a("on"),labelOff:a("off"),"aria-label":a("includeClients")})})]}),u&&e(ut,{"data-testid":"warning-message",variant:"warning",component:"p",title:a("exportWarningTitle"),isInline:!0,children:a("exportWarningDescription")})]})},Fa={users:!1,clients:!1,groups:!1,identityProviders:!1,realmRoles:!1,clientRoles:!1},oi=x=>{const{adminClient:I}=Te(),{t}=de(),{realm:a}=Ce(),[d,r]=J(),c=!!d,[i,o]=J(!1),[p,k]=J(!1),[w,y]=J(!1),[u,g]=J("FAIL"),[s,f]=J({}),[h,m]=J(),{addError:C}=Oe(),[_,S]=J(Fa),L=Object.values(_).some(Y=>Y),A=()=>{S(Fa)},D=()=>{r(void 0),f({}),g("FAIL"),A()};at(()=>{y(!1),m(void 0),D()},[x.open]);const P=Y=>{D(),r(Y),Array.isArray(Y)?Y.length>0&&f(Y[0]):f(Y)},O=Y=>{f(Y),o(!1),A()},W=(Y,ue)=>{const Se=ue.currentTarget.name;S({..._,[Se]:Y})},T=Y=>Y.map(ue=>e(Le,{value:ue,"data-testid":ue.id+"-select-option",children:ue.realm||ue.id},ue.id)),F=Y=>{g(Y),k(!1)},l=()=>[e(Le,{value:"FAIL",children:t("FAIL")},"fail"),e(Le,{value:"SKIP",children:t("SKIP")},"skip"),e(Le,{value:"OVERWRITE",children:t("OVERWRITE")},"overwrite")],U=()=>Q("users")||Q("groups")||Q("clients")||Q("identityProviders")||j()||re(),Q=Y=>{const ue=s[Y];return ue!==void 0&&ue.length>0},j=()=>{const Y=s.roles?.realm;return Y!==void 0&&Y.length>0},re=()=>{const Y=s.roles?.client;return Y!==void 0&&Object.keys(Y).length>0},q=Y=>c?Y==="realmRoles"?s.roles?.realm?.length??0:Y==="clientRoles"?re()?ae(s.roles.client):0:s[Y]?.length??0:0,ae=Y=>Object.values(Y).reduce((ue,Se)=>ue+Se.length,0),N=(Y,ue)=>e(an,{"aria-labelledby":`${Y}-list-item`,children:e(nn,{children:e(rn,{dataListCells:[e(pa,{children:e(Wt,{id:`${Y}-checkbox`,label:`${q(Y)} ${ue}`,"aria-labelledby":`${Y}-checkbox`,name:Y,isChecked:_[Y],onChange:(Se,Pe)=>W(Pe,Se),"data-testid":Y+"-checkbox"})},Y)]})})}),R=()=>{const Y={ifResourceExists:u,id:s.id,realm:s.realm};return _.users&&(Y.users=s.users),_.groups&&(Y.groups=s.groups),_.identityProviders&&(Y.identityProviders=s.identityProviders),_.clients&&(Y.clients=s.clients),(_.realmRoles||_.clientRoles)&&(Y.roles=s.roles,_.realmRoles||delete Y.roles?.realm,_.clientRoles||delete Y.roles?.client),Y};async function K(){if(!w){y(!0);try{const Y=await I.realms.partialImport({realm:a,rep:R()});m(Y)}catch(Y){C("importFail",Y)}y(!1)}}const M=()=>e(ht,{variant:yt.medium,title:t("partialImport"),isOpen:x.open,onClose:x.toggleDialog,actions:[e(oe,{id:"modal-import","data-testid":"confirm",isDisabled:!L,onClick:async()=>{await K()},children:t("import")},"import"),e(oe,{id:"modal-cancel","data-testid":"cancel",variant:Ee.link,onClick:()=>{x.toggleDialog()},children:t("cancel")},"cancel")],children:H(en,{hasGutter:!0,children:[e(Je,{children:e(_t,{children:e(Ge,{children:t("partialImportHeaderText")})})}),e(Je,{children:e(Cr,{id:"partial-import-file",allowEditingUploadedText:!0,onChange:P})}),c&&U()&&H(ve,{children:[e(Je,{children:e(it,{})}),Array.isArray(d)&&d.length>1&&H(Je,{children:[H(Ge,{children:[t("selectRealm"),":"]}),e(qe,{toggleId:"realm-selector",isOpen:i,typeAheadAriaLabel:t("realmSelector"),"aria-label":t("realmSelector"),onToggle:()=>o(!i),selections:s.id,onSelect:Y=>O(Y),placeholderText:s.realm||s.id,children:T(d)})]}),H(Je,{children:[H(Ge,{children:[t("chooseResources"),":"]}),H(tn,{"aria-label":t("resourcesToImport"),isCompact:!0,children:[Q("users")&&N("users",t("users")),Q("groups")&&N("groups",t("groups")),Q("clients")&&N("clients",t("clients")),Q("identityProviders")&&N("identityProviders",t("identityProviders")),j()&&N("realmRoles",t("realmRoles")),re()&&N("clientRoles",t("clientRoles"))]})]}),H(Je,{children:[H(Ge,{children:[t("selectIfResourceExists"),":"]}),e(qe,{isOpen:p,direction:"up",onToggle:()=>{k(!p)},selections:u,onSelect:F,placeholderText:t(u),children:l()})]})]})]})}),$=()=>`${t("importAdded",{count:h?.added})}  ${t("importSkipped",{count:h?.skipped})} ${t("importOverwritten",{count:h?.overwritten})}`,ne=async(Y=0,ue=15)=>{if(!h)return[];const Se=Math.min(Y+ue,h.results.length);return h.results.slice(Y,Se)},be=Y=>{switch(Y.action){case"ADDED":return e(Zt,{color:"green",children:t("added")},Y.id);case"SKIPPED":return e(Zt,{color:"orange",children:t("skipped")},Y.id);case"OVERWRITTEN":return e(Zt,{color:"purple",children:t("overwritten")},Y.id);default:return""}},ie=Y=>{const ue=new Map([["CLIENT",t("clients")],["REALM_ROLE",t("realmRoles")],["USER",t("users")],["CLIENT_ROLE",t("clientRoles")],["IDP",t("identityProviders")],["GROUP",t("groups")]]);return e("span",{children:ue.get(Y.resourceType)})},ce=()=>H(ht,{variant:yt.medium,title:t("partialImport"),isOpen:x.open,onClose:x.toggleDialog,actions:[e(oe,{id:"modal-close","data-testid":"close-button",variant:Ee.primary,onClick:()=>{x.toggleDialog()},children:t("close")},"close")],children:[e(ut,{variant:"success",component:"p",isInline:!0,title:$()}),e(st,{loader:ne,isPaginated:!0,ariaLabelKey:"partialImport",columns:[{name:"action",displayKey:"action",cellRenderer:be},{name:"resourceType",displayKey:"type",cellRenderer:ie},{name:"resourceName",displayKey:"name"},{name:"id",displayKey:"id"}]})]});return h?ce():M()},li=()=>{const{adminClient:x}=Te(),{t:I}=de(),{addAlert:t,addError:a}=Oe(),{realm:d}=Ce(),r=wt(),[c,i]=J(!1),[o,p]=J(),[k,w]=J(),[y,u]=J(0),[g,s]=J(),[f,h]=J(),m=()=>u(y+1),C=Fe({mode:"onChange"});et(()=>x.clientPolicies.listPolicies({includeGlobalPolicies:!0}),O=>{const W=O.globalPolicies?.map(l=>({...l,global:!0})),T=O.policies?.map(l=>({...l,global:!1})),F=W?.concat(T??[]);p(F),h(F||[]),s(kt(F))},[y]);const _=async()=>o??[],S=async()=>{const O=C.getValues(),W=o?.filter(T=>!T.global).map(T=>{const F=O[T.name],l={...T,enabled:F};return delete l.global,l});try{await x.clientPolicies.updatePolicy({policies:W}),r(ha({realm:d,tab:"policies"})),t(I("updateClientPolicySuccess"),Ie.success)}catch(T){a("updateClientPolicyError",T)}},L=O=>un(O,"global"),A=async()=>{if(g)try{const O=JSON.parse(g),W=O.filter(F=>!F.global).map(F=>L(F)),T=O.filter(F=>F.global).map(F=>L(F));try{await x.clientPolicies.updatePolicy({policies:W,globalPolicies:T}),t(I("updateClientPoliciesSuccess"),Ie.success),m()}catch(F){a("updateClientPoliciesError",F)}}catch(O){console.warn("Invalid json, ignoring value using {}"),a("invalidJsonClientPoliciesError",O)}},[D,P]=De({titleKey:I("deleteClientPolicyConfirmTitle"),messageKey:I("deleteClientPolicyConfirm",{policyName:k?.name}),continueButtonLabel:I("delete"),continueButtonVariant:Ee.danger,onConfirm:async()=>{const O=o?.filter(W=>!W.global&&W.name!==k?.name).map(W=>{const T={...W};return delete T.global,T});try{await x.clientPolicies.updatePolicy({policies:O}),t(I("deleteClientPolicySuccess"),Ie.success),m()}catch(W){a("deleteClientPolicyError",W)}}});return o?H(ve,{children:[e(P,{}),e(xe,{children:H(ea,{className:"kc-policies-config-section",children:[e(Ue,{children:e(Ga,{headingLevel:"h1",size:"md",children:I("policiesConfigType")})}),e(Ue,{children:e(vt,{isChecked:!c,name:"policiesView",onChange:()=>i(!1),label:I("policiesConfigTypes.formView"),id:"formView-policiesView","data-testid":"formView-policiesView",className:"kc-form-radio-btn pf-v5-u-mr-sm pf-v5-u-ml-sm"})}),e(Ue,{children:e(vt,{isChecked:c,name:"policiesView",onChange:()=>i(!0),label:I("policiesConfigTypes.jsonEditor"),id:"jsonEditor-policiesView","data-testid":"jsonEditor-policiesView",className:"kc-editor-radio-btn"})})]})}),e(it,{}),c?H(ve,{children:[e("div",{className:"pf-v5-u-mt-md pf-v5-u-ml-lg",children:e(wa,{value:g,language:"json",onChange:O=>s(O),height:480})}),H("div",{className:"pf-v5-u-mt-md",children:[e(oe,{variant:Ee.primary,className:"pf-v5-u-mr-md pf-v5-u-ml-lg","data-testid":"jsonEditor-policies-saveBtn",onClick:A,children:I("save")}),e(oe,{variant:Ee.link,"data-testid":"jsonEditor-reloadBtn",onClick:()=>{s(kt(f))},children:I("reload")})]})]}):e(st,{emptyState:e(Ze,{message:I("noClientPolicies"),instructions:I("noClientPoliciesInstructions"),primaryActionText:I("createClientPolicy"),onPrimaryAction:()=>r(Ia({realm:d}))}),ariaLabelKey:"clientPolicies",searchPlaceholderKey:"clientPolicySearch",loader:_,toolbarItem:e(ze,{children:e(oe,{id:"createPolicy",component:O=>e(Be,{...O,to:Ia({realm:d})}),"data-testid":"createPolicy",children:I("createClientPolicy")})}),isRowDisabled:O=>!!O.global,actions:[{title:I("delete"),onRowClick:O=>{D(),w(O)}}],columns:[{name:"name",cellRenderer:({name:O})=>e(Be,{to:Fn({realm:d,policyName:O}),children:O})},{name:"enabled",displayKey:"status",cellRenderer:O=>e(ci,{clientPolicy:O,form:C,saveStatus:S,onConfirm:async()=>{C.setValue(O.name,!1),await S()}})},{name:"description",cellFormatters:[sn(I)]}]},o.length)]}):e(tt,{})},ci=({clientPolicy:x,form:I,saveStatus:t,onConfirm:a})=>{const{t:d}=de(),[r,c]=De({titleKey:"disablePolicyConfirmTitle",messageKey:"disablePolicyConfirm",continueButtonLabel:"disable",onConfirm:a});return H(ve,{children:[e(c,{}),e(fe,{name:x.name,"data-testid":`${x.name}-switch`,defaultValue:x.enabled,control:I.control,render:({field:i})=>e(Re,{label:d("enabled"),labelOff:d("disabled"),isChecked:i.value,isDisabled:x.global,onChange:(o,p)=>{p?(i.onChange(p),t()):r()},"aria-label":x.name})})]})};function di(){const{adminClient:x}=Te(),{t:I}=de(),{realm:t}=Ce(),{addAlert:a,addError:d}=Oe(),[r,c]=J(),[i,o]=J(),[p,k]=J(),[w,y]=J(!1),[u,g]=J(),[s,f]=J(0);et(()=>x.clientPolicies.listProfiles({includeGlobalProfiles:!0}),A=>{o(A.globalProfiles);const D=A.globalProfiles?.map(W=>({...W,global:!0})),P=A.profiles?.map(W=>({...W,global:!1})),O=D?.concat(P??[]);c(O||[]),g(JSON.stringify(O,null,2))},[s]);const h=async()=>r??[],m=A=>un(A,"global"),[C,_]=De({titleKey:I("deleteClientProfileConfirmTitle"),messageKey:I("deleteClientProfileConfirm",{profileName:p?.name}),continueButtonLabel:I("delete"),continueButtonVariant:Ee.danger,onConfirm:async()=>{const A=r?.filter(D=>D.name!==p?.name&&!D.global).map(D=>m(D));try{await x.clientPolicies.createProfiles({profiles:A,globalProfiles:i}),a(I("deleteClientSuccess"),Ie.success),f(s+1)}catch(D){d("deleteClientError",D)}}}),S=A=>H(Be,{to:Mn({realm:t,profileName:A.name}),children:[A.name," ",A.global&&e(Zt,{color:"blue",children:I("global")})]},A.name);if(!r)return e(tt,{});const L=async()=>{if(u)try{const A=JSON.parse(u),D=A.filter(O=>!O.global).map(O=>m(O)),P=A.filter(O=>O.global).map(O=>m(O));try{await x.clientPolicies.createProfiles({profiles:D,globalProfiles:P}),a(I("updateClientProfilesSuccess"),Ie.success),f(s+1)}catch(O){d("updateClientProfilesError",O)}}catch(A){d("invalidJsonClientProfilesError",A)}};return H(ve,{children:[e(_,{}),e(xe,{children:H(ea,{className:"kc-profiles-config-section",children:[e(Ue,{children:e(Ga,{headingLevel:"h1",size:"md",children:I("profilesConfigType")})}),e(Ue,{children:e(vt,{isChecked:!w,name:"profilesView",onChange:()=>y(!1),label:I("profilesConfigTypes.formView"),id:"formView-profilesView",className:"kc-form-radio-btn pf-v5-u-mr-sm pf-v5-u-ml-sm","data-testid":"formView-profilesView"})}),e(Ue,{children:e(vt,{isChecked:w,name:"profilesView",onChange:()=>y(!0),label:I("profilesConfigTypes.jsonEditor"),id:"jsonEditor-profilesView",className:"kc-editor-radio-btn","data-testid":"jsonEditor-profilesView"})})]})}),e(it,{}),w?H(se,{fieldId:"jsonEditor",children:[e("div",{className:"pf-v5-u-mt-md pf-v5-u-ml-lg",children:e(wa,{value:u,language:"json",onChange:A=>g(A??""),height:480})}),e(He,{children:H("div",{className:"pf-v5-u-mt-md",children:[e(oe,{variant:Ee.primary,className:"pf-v5-u-mr-md pf-v5-u-ml-lg",onClick:L,"data-testid":"jsonEditor-saveBtn",children:I("save")}),e(oe,{variant:Ee.link,onClick:()=>{g(kt(r))},"data-testid":"jsonEditor-reloadBtn",children:I("reload")})]})})]}):e(st,{ariaLabelKey:"profiles",searchPlaceholderKey:"clientProfileSearch",loader:h,toolbarItem:e(ze,{children:e(oe,{id:"createProfile",component:A=>e(Be,{...A,to:Bn({realm:t,tab:"profiles"})}),"data-testid":"createProfile",children:I("createClientProfile")})}),isRowDisabled:A=>A.global,actions:[{title:I("delete"),onRowClick:A=>{k(A),C()}}],columns:[{name:"name",displayKey:I("name"),cellRenderer:S},{name:"description",displayKey:I("clientProfileDescription")}],emptyState:e(Ze,{message:I("emptyClientProfiles"),instructions:I("emptyClientProfilesInstructions")})},r.length)]})}const ui=({realm:x,save:I})=>{const{t}=de(),{control:a,handleSubmit:d,formState:r,reset:c}=Ct(),i=We({control:a,name:"offlineSessionMaxLifespanEnabled"});return H(xe,{variant:"light",children:[e(Ye,{title:t("SSOSessionSettings"),className:"kc-sso-session-template",children:H(_e,{isHorizontal:!0,role:"manage-realm",onSubmit:d(I),children:[e(se,{label:t("SSOSessionIdle"),fieldId:"SSOSessionIdle",labelIcon:e(he,{helpText:t("ssoSessionIdle"),fieldLabelId:"SSOSessionIdle"}),children:e(fe,{name:"ssoSessionIdleTimeout",defaultValue:x.ssoSessionIdleTimeout,control:a,render:({field:o})=>e(ke,{className:"kc-sso-session-idle","data-testid":"sso-session-idle-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("SSOSessionMax"),fieldId:"SSOSessionMax",labelIcon:e(he,{helpText:t("ssoSessionMax"),fieldLabelId:"SSOSessionMax"}),children:e(fe,{name:"ssoSessionMaxLifespan",control:a,render:({field:o})=>e(ke,{className:"kc-sso-session-max","data-testid":"sso-session-max-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("SSOSessionIdleRememberMe"),fieldId:"SSOSessionIdleRememberMe",labelIcon:e(he,{helpText:t("ssoSessionIdleRememberMe"),fieldLabelId:"SSOSessionIdleRememberMe"}),children:e(fe,{name:"ssoSessionIdleTimeoutRememberMe",control:a,render:({field:o})=>e(ke,{className:"kc-sso-session-idle-remember-me","data-testid":"sso-session-idle-remember-me-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("SSOSessionMaxRememberMe"),fieldId:"SSOSessionMaxRememberMe",labelIcon:e(he,{helpText:t("ssoSessionMaxRememberMe"),fieldLabelId:"SSOSessionMaxRememberMe"}),children:e(fe,{name:"ssoSessionMaxLifespanRememberMe",control:a,render:({field:o})=>e(ke,{className:"kc-sso-session-max-remember-me","data-testid":"sso-session-max-remember-me-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})})]})}),e(Ye,{title:t("clientSessionSettings"),className:"kc-client-session-template",children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:d(I),children:[e(se,{label:t("clientSessionIdle"),fieldId:"clientSessionIdle",labelIcon:e(he,{helpText:t("clientSessionIdleHelp"),fieldLabelId:"clientSessionIdle"}),children:e(fe,{name:"clientSessionIdleTimeout",control:a,render:({field:o})=>e(ke,{className:"kc-client-session-idle","data-testid":"client-session-idle-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("clientSessionMax"),fieldId:"clientSessionMax",labelIcon:e(he,{helpText:t("clientSessionMaxHelp"),fieldLabelId:"clientSessionMax"}),children:e(fe,{name:"clientSessionMaxLifespan",control:a,render:({field:o})=>e(ke,{className:"kc-client-session-max","data-testid":"client-session-max-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})})]})}),e(Ye,{title:t("offlineSessionSettings"),className:"kc-offline-session-template",children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:d(I),children:[e(se,{label:t("offlineSessionIdle"),fieldId:"offlineSessionIdle",labelIcon:e(he,{helpText:t("offlineSessionIdleHelp"),fieldLabelId:"offlineSessionIdle"}),children:e(fe,{name:"offlineSessionIdleTimeout",control:a,render:({field:o})=>e(ke,{className:"kc-offline-session-idle","data-testid":"offline-session-idle-input","aria-label":"offline-session-idle-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("clientOfflineSessionIdle"),fieldId:"clientOfflineSessionIdle",labelIcon:e(he,{helpText:t("clientOfflineSessionIdleHelp"),fieldLabelId:"clientOfflineSessionIdle"}),children:e(fe,{name:"clientOfflineSessionIdleTimeout",control:a,render:({field:o})=>e(ke,{className:"kc-client-offline-session-idle","data-testid":"client-offline-session-idle-input","aria-label":"client-offline-session-idle-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{hasNoPaddingTop:!0,label:t("offlineSessionMaxLimited"),fieldId:"kc-offlineSessionMaxLimited",labelIcon:e(he,{helpText:t("offlineSessionMaxLimitedHelp"),fieldLabelId:"offlineSessionMaxLimited"}),children:e(fe,{name:"offlineSessionMaxLifespanEnabled",control:a,defaultValue:!1,render:({field:o})=>e(Re,{id:"kc-offline-session-max","data-testid":"offline-session-max-switch","aria-label":t("offlineSessionMaxLimited"),label:t("enabled"),labelOff:t("disabled"),isChecked:o.value,onChange:o.onChange})})}),i&&e(se,{label:t("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:e(he,{helpText:t("offlineSessionMaxHelp"),fieldLabelId:"offlineSessionMax"}),children:e(fe,{name:"offlineSessionMaxLifespan",control:a,render:({field:o})=>e(ke,{className:"kc-offline-session-max","data-testid":"offline-session-max-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),i&&e(se,{label:t("clientOfflineSessionMax"),fieldId:"clientOfflineSessionMax",id:"client-offline-session-max-label",labelIcon:e(he,{helpText:t("clientOfflineSessionMaxHelp"),fieldLabelId:"clientOfflineSessionMax"}),children:e(fe,{name:"clientOfflineSessionMaxLifespan",control:a,render:({field:o})=>e(ke,{className:"kc-client-offline-session-max","data-testid":"client-offline-session-max-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})})]})}),e(Ye,{className:"kc-login-settings-template",title:t("loginSettings"),children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:d(I),children:[e(se,{label:t("loginTimeout"),id:"kc-login-timeout-label",fieldId:"offlineSessionIdle",labelIcon:e(he,{helpText:t("loginTimeoutHelp"),fieldLabelId:"loginTimeout"}),children:e(fe,{name:"accessCodeLifespanLogin",control:a,render:({field:o})=>e(ke,{className:"kc-login-timeout","data-testid":"login-timeout-input","aria-label":"login-timeout-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("loginActionTimeout"),fieldId:"loginActionTimeout",id:"login-action-timeout-label",labelIcon:e(he,{helpText:t("loginActionTimeoutHelp"),fieldLabelId:"loginActionTimeout"}),children:e(fe,{name:"accessCodeLifespanUserAction",control:a,render:({field:o})=>e(ke,{className:"kc-login-action-timeout","data-testid":"login-action-timeout-input",value:o.value,onChange:o.onChange,units:["minute","hour","day"]})})}),H(He,{children:[e(oe,{variant:"primary",type:"submit","data-testid":"sessions-tab-save",isDisabled:!r.isDirty,children:t("save")}),e(oe,{variant:"link",onClick:()=>c(x),children:t("revert")})]})]})})]})};function jt(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ca={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ba;function hi(){return Ba||(Ba=1,(function(x,I){(function(t){x.exports=t()})(function(){return(function t(a,d,r){function c(p,k){if(!d[p]){if(!a[p]){var w=typeof jt=="function"&&jt;if(!k&&w)return w(p,!0);if(i)return i(p,!0);var y=new Error("Cannot find module '"+p+"'");throw y.code="MODULE_NOT_FOUND",y}var u=d[p]={exports:{}};a[p][0].call(u.exports,function(g){var s=a[p][1][g];return c(s||g)},u,u.exports,t,a,d,r)}return d[p].exports}for(var i=typeof jt=="function"&&jt,o=0;o<r.length;o++)c(r[o]);return c})({1:[function(t,a,d){var r=t("./utils"),c=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.encode=function(o){for(var p,k,w,y,u,g,s,f=[],h=0,m=o.length,C=m,_=r.getTypeOf(o)!=="string";h<o.length;)C=m-h,w=_?(p=o[h++],k=h<m?o[h++]:0,h<m?o[h++]:0):(p=o.charCodeAt(h++),k=h<m?o.charCodeAt(h++):0,h<m?o.charCodeAt(h++):0),y=p>>2,u=(3&p)<<4|k>>4,g=1<C?(15&k)<<2|w>>6:64,s=2<C?63&w:64,f.push(i.charAt(y)+i.charAt(u)+i.charAt(g)+i.charAt(s));return f.join("")},d.decode=function(o){var p,k,w,y,u,g,s=0,f=0,h="data:";if(o.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var m,C=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===i.charAt(64)&&C--,o.charAt(o.length-2)===i.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=c.uint8array?new Uint8Array(0|C):new Array(0|C);s<o.length;)p=i.indexOf(o.charAt(s++))<<2|(y=i.indexOf(o.charAt(s++)))>>4,k=(15&y)<<4|(u=i.indexOf(o.charAt(s++)))>>2,w=(3&u)<<6|(g=i.indexOf(o.charAt(s++))),m[f++]=p,u!==64&&(m[f++]=k),g!==64&&(m[f++]=w);return m}},{"./support":30,"./utils":32}],2:[function(t,a,d){var r=t("./external"),c=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function p(k,w,y,u,g){this.compressedSize=k,this.uncompressedSize=w,this.crc32=y,this.compression=u,this.compressedContent=g}p.prototype={getContentWorker:function(){var k=new c(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),w=this;return k.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new c(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(k,w,y){return k.pipe(new i).pipe(new o("uncompressedSize")).pipe(w.compressWorker(y)).pipe(new o("compressedSize")).withStreamInfo("compression",w)},a.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,a,d){var r=t("./stream/GenericWorker");d.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},d.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,a,d){var r=t("./utils"),c=(function(){for(var i,o=[],p=0;p<256;p++){i=p;for(var k=0;k<8;k++)i=1&i?3988292384^i>>>1:i>>>1;o[p]=i}return o})();a.exports=function(i,o){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?(function(p,k,w,y){var u=c,g=y+w;p^=-1;for(var s=y;s<g;s++)p=p>>>8^u[255&(p^k[s])];return-1^p})(0|o,i,i.length,0):(function(p,k,w,y){var u=c,g=y+w;p^=-1;for(var s=y;s<g;s++)p=p>>>8^u[255&(p^k.charCodeAt(s))];return-1^p})(0|o,i,i.length,0):0}},{"./utils":32}],5:[function(t,a,d){d.base64=!1,d.binary=!1,d.dir=!1,d.createFolders=!0,d.date=null,d.compression=null,d.compressionOptions=null,d.comment=null,d.unixPermissions=null,d.dosPermissions=null},{}],6:[function(t,a,d){var r=null;r=typeof Promise<"u"?Promise:t("lie"),a.exports={Promise:r}},{lie:37}],7:[function(t,a,d){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=t("pako"),i=t("./utils"),o=t("./stream/GenericWorker"),p=r?"uint8array":"array";function k(w,y){o.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=y,this.meta={}}d.magic="\b\0",i.inherits(k,o),k.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(p,w.data),!1)},k.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(y){w.push({data:y,meta:w.meta})}},d.compressWorker=function(w){return new k("Deflate",w)},d.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,a,d){function r(u,g){var s,f="";for(s=0;s<g;s++)f+=String.fromCharCode(255&u),u>>>=8;return f}function c(u,g,s,f,h,m){var C,_,S=u.file,L=u.compression,A=m!==p.utf8encode,D=i.transformTo("string",m(S.name)),P=i.transformTo("string",p.utf8encode(S.name)),O=S.comment,W=i.transformTo("string",m(O)),T=i.transformTo("string",p.utf8encode(O)),F=P.length!==S.name.length,l=T.length!==O.length,U="",Q="",j="",re=S.dir,q=S.date,ae={crc32:0,compressedSize:0,uncompressedSize:0};g&&!s||(ae.crc32=u.crc32,ae.compressedSize=u.compressedSize,ae.uncompressedSize=u.uncompressedSize);var N=0;g&&(N|=8),A||!F&&!l||(N|=2048);var R=0,K=0;re&&(R|=16),h==="UNIX"?(K=798,R|=(function($,ne){var be=$;return $||(be=ne?16893:33204),(65535&be)<<16})(S.unixPermissions,re)):(K=20,R|=(function($){return 63&($||0)})(S.dosPermissions)),C=q.getUTCHours(),C<<=6,C|=q.getUTCMinutes(),C<<=5,C|=q.getUTCSeconds()/2,_=q.getUTCFullYear()-1980,_<<=4,_|=q.getUTCMonth()+1,_<<=5,_|=q.getUTCDate(),F&&(Q=r(1,1)+r(k(D),4)+P,U+="up"+r(Q.length,2)+Q),l&&(j=r(1,1)+r(k(W),4)+T,U+="uc"+r(j.length,2)+j);var M="";return M+=`
\0`,M+=r(N,2),M+=L.magic,M+=r(C,2),M+=r(_,2),M+=r(ae.crc32,4),M+=r(ae.compressedSize,4),M+=r(ae.uncompressedSize,4),M+=r(D.length,2),M+=r(U.length,2),{fileRecord:w.LOCAL_FILE_HEADER+M+D+U,dirRecord:w.CENTRAL_FILE_HEADER+r(K,2)+M+r(W.length,2)+"\0\0\0\0"+r(R,4)+r(f,4)+D+U+W}}var i=t("../utils"),o=t("../stream/GenericWorker"),p=t("../utf8"),k=t("../crc32"),w=t("../signature");function y(u,g,s,f){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=s,this.encodeFileName=f,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(y,o),y.prototype.push=function(u){var g=u.meta.percent||0,s=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,o.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:s?(g+100*(s-f-1))/s:100}}))},y.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var g=this.streamFiles&&!u.file.dir;if(g){var s=c(u,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(u){this.accumulate=!1;var g=this.streamFiles&&!u.file.dir,s=c(u,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),g)this.push({data:(function(f){return w.DATA_DESCRIPTOR+r(f.crc32,4)+r(f.compressedSize,4)+r(f.uncompressedSize,4)})(u),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var u=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var s=this.bytesWritten-u,f=(function(h,m,C,_,S){var L=i.transformTo("string",S(_));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(h,2)+r(h,2)+r(m,4)+r(C,4)+r(L.length,2)+L})(this.dirRecords.length,s,u,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(u){this._sources.push(u);var g=this;return u.on("data",function(s){g.processChunk(s)}),u.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),u.on("error",function(s){g.error(s)}),this},y.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(u){var g=this._sources;if(!o.prototype.error.call(this,u))return!1;for(var s=0;s<g.length;s++)try{g[s].error(u)}catch{}return!0},y.prototype.lock=function(){o.prototype.lock.call(this);for(var u=this._sources,g=0;g<u.length;g++)u[g].lock()},a.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,a,d){var r=t("../compressions"),c=t("./ZipFileWorker");d.generateWorker=function(i,o,p){var k=new c(o.streamFiles,p,o.platform,o.encodeFileName),w=0;try{i.forEach(function(y,u){w++;var g=(function(m,C){var _=m||C,S=r[_];if(!S)throw new Error(_+" is not a valid compression method !");return S})(u.options.compression,o.compression),s=u.options.compressionOptions||o.compressionOptions||{},f=u.dir,h=u.date;u._compressWorker(g,s).withStreamInfo("file",{name:y,dir:f,date:h,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(k)}),k.entriesCount=w}catch(y){k.error(y)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,a,d){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new r;for(var i in this)typeof this[i]!="function"&&(c[i]=this[i]);return c}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(c,i){return new r().loadAsync(c,i)},r.external=t("./external"),a.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,a,d){var r=t("./utils"),c=t("./external"),i=t("./utf8"),o=t("./zipEntries"),p=t("./stream/Crc32Probe"),k=t("./nodejsUtils");function w(y){return new c.Promise(function(u,g){var s=y.decompressed.getContentWorker().pipe(new p);s.on("error",function(f){g(f)}).on("end",function(){s.streamInfo.crc32!==y.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}a.exports=function(y,u){var g=this;return u=r.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),k.isNode&&k.isStream(y)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",y,!0,u.optimizedBinaryString,u.base64).then(function(s){var f=new o(u);return f.load(s),f}).then(function(s){var f=[c.Promise.resolve(s)],h=s.files;if(u.checkCRC32)for(var m=0;m<h.length;m++)f.push(w(h[m]));return c.Promise.all(f)}).then(function(s){for(var f=s.shift(),h=f.files,m=0;m<h.length;m++){var C=h[m],_=C.fileNameStr,S=r.resolve(C.fileNameStr);g.file(S,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:u.createFolders}),C.dir||(g.file(S).unsafeOriginalName=_)}return f.zipComment.length&&(g.comment=f.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,a,d){var r=t("../utils"),c=t("../stream/GenericWorker");function i(o,p){c.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(p)}r.inherits(i,c),i.prototype._bindStream=function(o){var p=this;(this._stream=o).pause(),o.on("data",function(k){p.push({data:k,meta:{percent:0}})}).on("error",function(k){p.isPaused?this.generatedError=k:p.error(k)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},i.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,a,d){var r=t("readable-stream").Readable;function c(i,o,p){r.call(this,o),this._helper=i;var k=this;i.on("data",function(w,y){k.push(w)||k._helper.pause(),p&&p(y)}).on("error",function(w){k.emit("error",w)}).on("end",function(){k.push(null)})}t("../utils").inherits(c,r),c.prototype._read=function(){this._helper.resume()},a.exports=c},{"../utils":32,"readable-stream":16}],14:[function(t,a,d){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,c);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,c)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var c=new Buffer(r);return c.fill(0),c},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,a,d){function r(S,L,A){var D,P=i.getTypeOf(L),O=i.extend(A||{},k);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(S=h(S)),O.createFolders&&(D=f(S))&&m.call(this,D,!0);var W=P==="string"&&O.binary===!1&&O.base64===!1;A&&A.binary!==void 0||(O.binary=!W),(L instanceof w&&L.uncompressedSize===0||O.dir||!L||L.length===0)&&(O.base64=!1,O.binary=!0,L="",O.compression="STORE",P="string");var T=null;T=L instanceof w||L instanceof o?L:g.isNode&&g.isStream(L)?new s(S,L):i.prepareContent(S,L,O.binary,O.optimizedBinaryString,O.base64);var F=new y(S,T,O);this.files[S]=F}var c=t("./utf8"),i=t("./utils"),o=t("./stream/GenericWorker"),p=t("./stream/StreamHelper"),k=t("./defaults"),w=t("./compressedObject"),y=t("./zipObject"),u=t("./generate"),g=t("./nodejsUtils"),s=t("./nodejs/NodejsStreamInputAdapter"),f=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var L=S.lastIndexOf("/");return 0<L?S.substring(0,L):""},h=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},m=function(S,L){return L=L!==void 0?L:k.createFolders,S=h(S),this.files[S]||r.call(this,S,null,{dir:!0,createFolders:L}),this.files[S]};function C(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var L,A,D;for(L in this.files)D=this.files[L],(A=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&S(A,D)},filter:function(S){var L=[];return this.forEach(function(A,D){S(A,D)&&L.push(D)}),L},file:function(S,L,A){if(arguments.length!==1)return S=this.root+S,r.call(this,S,L,A),this;if(C(S)){var D=S;return this.filter(function(O,W){return!W.dir&&D.test(O)})}var P=this.files[this.root+S];return P&&!P.dir?P:null},folder:function(S){if(!S)return this;if(C(S))return this.filter(function(P,O){return O.dir&&S.test(P)});var L=this.root+S,A=m.call(this,L),D=this.clone();return D.root=A.name,D},remove:function(S){S=this.root+S;var L=this.files[S];if(L||(S.slice(-1)!=="/"&&(S+="/"),L=this.files[S]),L&&!L.dir)delete this.files[S];else for(var A=this.filter(function(P,O){return O.name.slice(0,S.length)===S}),D=0;D<A.length;D++)delete this.files[A[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var L,A={};try{if((A=i.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");i.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var D=A.comment||this.comment||"";L=u.generateWorker(this,A,D)}catch(P){(L=new o("error")).error(P)}return new p(L,A.type||"string",A.mimeType)},generateAsync:function(S,L){return this.generateInternalStream(S).accumulate(L)},generateNodeStream:function(S,L){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(L)}};a.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,a,d){a.exports=t("stream")},{stream:void 0}],17:[function(t,a,d){var r=t("./DataReader");function c(i){r.call(this,i);for(var o=0;o<this.data.length;o++)i[o]=255&i[o]}t("../utils").inherits(c,r),c.prototype.byteAt=function(i){return this.data[this.zero+i]},c.prototype.lastIndexOfSignature=function(i){for(var o=i.charCodeAt(0),p=i.charCodeAt(1),k=i.charCodeAt(2),w=i.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===o&&this.data[y+1]===p&&this.data[y+2]===k&&this.data[y+3]===w)return y-this.zero;return-1},c.prototype.readAndCheckSignature=function(i){var o=i.charCodeAt(0),p=i.charCodeAt(1),k=i.charCodeAt(2),w=i.charCodeAt(3),y=this.readData(4);return o===y[0]&&p===y[1]&&k===y[2]&&w===y[3]},c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,o},a.exports=c},{"../utils":32,"./DataReader":18}],18:[function(t,a,d){var r=t("../utils");function c(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var o,p=0;for(this.checkOffset(i),o=this.index+i-1;o>=this.index;o--)p=(p<<8)+this.byteAt(o);return this.index+=i,p},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},a.exports=c},{"../utils":32}],19:[function(t,a,d){var r=t("./Uint8ArrayReader");function c(i){r.call(this,i)}t("../utils").inherits(c,r),c.prototype.readData=function(i){this.checkOffset(i);var o=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,o},a.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,a,d){var r=t("./DataReader");function c(i){r.call(this,i)}t("../utils").inherits(c,r),c.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},c.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},c.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},c.prototype.readData=function(i){this.checkOffset(i);var o=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,o},a.exports=c},{"../utils":32,"./DataReader":18}],21:[function(t,a,d){var r=t("./ArrayReader");function c(i){r.call(this,i)}t("../utils").inherits(c,r),c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,o},a.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(t,a,d){var r=t("../utils"),c=t("../support"),i=t("./ArrayReader"),o=t("./StringReader"),p=t("./NodeBufferReader"),k=t("./Uint8ArrayReader");a.exports=function(w){var y=r.getTypeOf(w);return r.checkSupport(y),y!=="string"||c.uint8array?y==="nodebuffer"?new p(w):c.uint8array?new k(r.transformTo("uint8array",w)):new i(r.transformTo("array",w)):new o(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,a,d){d.LOCAL_FILE_HEADER="PK",d.CENTRAL_FILE_HEADER="PK",d.CENTRAL_DIRECTORY_END="PK",d.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",d.ZIP64_CENTRAL_DIRECTORY_END="PK",d.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,a,d){var r=t("./GenericWorker"),c=t("../utils");function i(o){r.call(this,"ConvertWorker to "+o),this.destType=o}c.inherits(i,r),i.prototype.processChunk=function(o){this.push({data:c.transformTo(this.destType,o.data),meta:o.meta})},a.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,a,d){var r=t("./GenericWorker"),c=t("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,r),i.prototype.processChunk=function(o){this.streamInfo.crc32=c(o.data,this.streamInfo.crc32||0),this.push(o)},a.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,a,d){var r=t("../utils"),c=t("./GenericWorker");function i(o){c.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}r.inherits(i,c),i.prototype.processChunk=function(o){if(o){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+o.data.length}c.prototype.processChunk.call(this,o)},a.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,a,d){var r=t("../utils"),c=t("./GenericWorker");function i(o){c.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(k){p.dataIsReady=!0,p.data=k,p.max=k&&k.length||0,p.type=r.getTypeOf(k),p.isPaused||p._tickAndRepeat()},function(k){p.error(k)})}r.inherits(i,c),i.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,p);break;case"uint8array":o=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":o=this.data.slice(this.index,p)}return this.index=p,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,a,d){function r(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,i){return this._listeners[c].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,i){if(this._listeners[c])for(var o=0;o<this._listeners[c].length;o++)this._listeners[c][o].call(this,i)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var i=this;return c.on("data",function(o){i.processChunk(o)}),c.on("end",function(){i.end()}),c.on("error",function(o){i.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,i){return this.extraStreamInfo[c]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},a.exports=r},{}],29:[function(t,a,d){var r=t("../utils"),c=t("./ConvertWorker"),i=t("./GenericWorker"),o=t("../base64"),p=t("../support"),k=t("../external"),w=null;if(p.nodestream)try{w=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(g,s){return new k.Promise(function(f,h){var m=[],C=g._internalType,_=g._outputType,S=g._mimeType;g.on("data",function(L,A){m.push(L),s&&s(A)}).on("error",function(L){m=[],h(L)}).on("end",function(){try{var L=(function(A,D,P){switch(A){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),P);case"base64":return o.encode(D);default:return r.transformTo(A,D)}})(_,(function(A,D){var P,O=0,W=null,T=0;for(P=0;P<D.length;P++)T+=D[P].length;switch(A){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(W=new Uint8Array(T),P=0;P<D.length;P++)W.set(D[P],O),O+=D[P].length;return W;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+A+"'")}})(C,m),S);f(L)}catch(A){h(A)}m=[]}).resume()})}function u(g,s,f){var h=s;switch(s){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=s,this._mimeType=f,r.checkSupport(h),this._worker=g.pipe(new c(h)),g.lock()}catch(m){this._worker=new i("error"),this._worker.error(m)}}u.prototype={accumulate:function(g){return y(this,g)},on:function(g,s){var f=this;return g==="data"?this._worker.on(g,function(h){s.call(f,h.data,h.meta)}):this._worker.on(g,function(){r.delay(s,arguments,f)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},g)}},a.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,a,d){if(d.base64=!0,d.array=!0,d.string=!0,d.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",d.nodebuffer=typeof Buffer<"u",d.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")d.blob=!1;else{var r=new ArrayBuffer(0);try{d.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(r),d.blob=c.getBlob("application/zip").size===0}catch{d.blob=!1}}}try{d.nodestream=!!t("readable-stream").Readable}catch{d.nodestream=!1}},{"readable-stream":16}],31:[function(t,a,d){for(var r=t("./utils"),c=t("./support"),i=t("./nodejsUtils"),o=t("./stream/GenericWorker"),p=new Array(256),k=0;k<256;k++)p[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;p[254]=p[254]=1;function w(){o.call(this,"utf-8 decode"),this.leftOver=null}function y(){o.call(this,"utf-8 encode")}d.utf8encode=function(u){return c.nodebuffer?i.newBufferFrom(u,"utf-8"):(function(g){var s,f,h,m,C,_=g.length,S=0;for(m=0;m<_;m++)(64512&(f=g.charCodeAt(m)))==55296&&m+1<_&&(64512&(h=g.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(h-56320),m++),S+=f<128?1:f<2048?2:f<65536?3:4;for(s=c.uint8array?new Uint8Array(S):new Array(S),m=C=0;C<S;m++)(64512&(f=g.charCodeAt(m)))==55296&&m+1<_&&(64512&(h=g.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(h-56320),m++),f<128?s[C++]=f:(f<2048?s[C++]=192|f>>>6:(f<65536?s[C++]=224|f>>>12:(s[C++]=240|f>>>18,s[C++]=128|f>>>12&63),s[C++]=128|f>>>6&63),s[C++]=128|63&f);return s})(u)},d.utf8decode=function(u){return c.nodebuffer?r.transformTo("nodebuffer",u).toString("utf-8"):(function(g){var s,f,h,m,C=g.length,_=new Array(2*C);for(s=f=0;s<C;)if((h=g[s++])<128)_[f++]=h;else if(4<(m=p[h]))_[f++]=65533,s+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&s<C;)h=h<<6|63&g[s++],m--;1<m?_[f++]=65533:h<65536?_[f++]=h:(h-=65536,_[f++]=55296|h>>10&1023,_[f++]=56320|1023&h)}return _.length!==f&&(_.subarray?_=_.subarray(0,f):_.length=f),r.applyFromCharCode(_)})(u=r.transformTo(c.uint8array?"uint8array":"array",u))},r.inherits(w,o),w.prototype.processChunk=function(u){var g=r.transformTo(c.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var s=g;(g=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),g.set(s,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var f=(function(m,C){var _;for((C=C||m.length)>m.length&&(C=m.length),_=C-1;0<=_&&(192&m[_])==128;)_--;return _<0||_===0?C:_+p[m[_]]>C?_:C})(g),h=g;f!==g.length&&(c.uint8array?(h=g.subarray(0,f),this.leftOver=g.subarray(f,g.length)):(h=g.slice(0,f),this.leftOver=g.slice(f,g.length))),this.push({data:d.utf8decode(h),meta:u.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:d.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},d.Utf8DecodeWorker=w,r.inherits(y,o),y.prototype.processChunk=function(u){this.push({data:d.utf8encode(u.data),meta:u.meta})},d.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,a,d){var r=t("./support"),c=t("./base64"),i=t("./nodejsUtils"),o=t("./external");function p(s){return s}function k(s,f){for(var h=0;h<s.length;++h)f[h]=255&s.charCodeAt(h);return f}t("setimmediate"),d.newBlob=function(s,f){d.checkSupport("blob");try{return new Blob([s],{type:f})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(s),h.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(s,f,h){var m=[],C=0,_=s.length;if(_<=h)return String.fromCharCode.apply(null,s);for(;C<_;)f==="array"||f==="nodebuffer"?m.push(String.fromCharCode.apply(null,s.slice(C,Math.min(C+h,_)))):m.push(String.fromCharCode.apply(null,s.subarray(C,Math.min(C+h,_)))),C+=h;return m.join("")},stringifyByChar:function(s){for(var f="",h=0;h<s.length;h++)f+=String.fromCharCode(s[h]);return f},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function y(s){var f=65536,h=d.getTypeOf(s),m=!0;if(h==="uint8array"?m=w.applyCanBeUsed.uint8array:h==="nodebuffer"&&(m=w.applyCanBeUsed.nodebuffer),m)for(;1<f;)try{return w.stringifyByChunk(s,h,f)}catch{f=Math.floor(f/2)}return w.stringifyByChar(s)}function u(s,f){for(var h=0;h<s.length;h++)f[h]=s[h];return f}d.applyFromCharCode=y;var g={};g.string={string:p,array:function(s){return k(s,new Array(s.length))},arraybuffer:function(s){return g.string.uint8array(s).buffer},uint8array:function(s){return k(s,new Uint8Array(s.length))},nodebuffer:function(s){return k(s,i.allocBuffer(s.length))}},g.array={string:y,array:p,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return i.newBufferFrom(s)}},g.arraybuffer={string:function(s){return y(new Uint8Array(s))},array:function(s){return u(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:p,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return i.newBufferFrom(new Uint8Array(s))}},g.uint8array={string:y,array:function(s){return u(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:p,nodebuffer:function(s){return i.newBufferFrom(s)}},g.nodebuffer={string:y,array:function(s){return u(s,new Array(s.length))},arraybuffer:function(s){return g.nodebuffer.uint8array(s).buffer},uint8array:function(s){return u(s,new Uint8Array(s.length))},nodebuffer:p},d.transformTo=function(s,f){if(f=f||"",!s)return f;d.checkSupport(s);var h=d.getTypeOf(f);return g[h][s](f)},d.resolve=function(s){for(var f=s.split("/"),h=[],m=0;m<f.length;m++){var C=f[m];C==="."||C===""&&m!==0&&m!==f.length-1||(C===".."?h.pop():h.push(C))}return h.join("/")},d.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(s)?"nodebuffer":r.uint8array&&s instanceof Uint8Array?"uint8array":r.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},d.checkSupport=function(s){if(!r[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},d.MAX_VALUE_16BITS=65535,d.MAX_VALUE_32BITS=-1,d.pretty=function(s){var f,h,m="";for(h=0;h<(s||"").length;h++)m+="\\x"+((f=s.charCodeAt(h))<16?"0":"")+f.toString(16).toUpperCase();return m},d.delay=function(s,f,h){setImmediate(function(){s.apply(h||null,f||[])})},d.inherits=function(s,f){function h(){}h.prototype=f.prototype,s.prototype=new h},d.extend=function(){var s,f,h={};for(s=0;s<arguments.length;s++)for(f in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],f)&&h[f]===void 0&&(h[f]=arguments[s][f]);return h},d.prepareContent=function(s,f,h,m,C){return o.Promise.resolve(f).then(function(_){return r.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new o.Promise(function(S,L){var A=new FileReader;A.onload=function(D){S(D.target.result)},A.onerror=function(D){L(D.target.error)},A.readAsArrayBuffer(_)}):_}).then(function(_){var S=d.getTypeOf(_);return S?(S==="arraybuffer"?_=d.transformTo("uint8array",_):S==="string"&&(C?_=c.decode(_):h&&m!==!0&&(_=(function(L){return k(L,r.uint8array?new Uint8Array(L.length):new Array(L.length))})(_))),_):o.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,a,d){var r=t("./reader/readerFor"),c=t("./utils"),i=t("./signature"),o=t("./zipEntry"),p=t("./support");function k(w){this.files=[],this.loadOptions=w}k.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(y)+", expected "+c.pretty(w)+")")}},isSignature:function(w,y){var u=this.reader.index;this.reader.setIndex(w);var g=this.reader.readString(4)===y;return this.reader.setIndex(u),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),y=p.uint8array?"uint8array":"array",u=c.transformTo(y,w);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,y,u,g=this.zip64EndOfCentralSize-44;0<g;)w=this.reader.readInt(2),y=this.reader.readInt(4),u=this.reader.readData(y),this.zip64ExtensibleData[w]={id:w,length:y,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,y;for(w=0;w<this.files.length;w++)y=this.files[w],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(w=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var y=w;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var g=y-u;if(0<g)this.isSignature(y,i.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(w){this.reader=r(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,a,d){var r=t("./reader/readerFor"),c=t("./utils"),i=t("./compressedObject"),o=t("./crc32"),p=t("./utf8"),k=t("./compressions"),w=t("./support");function y(u,g){this.options=u,this.loadOptions=g}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var g,s;if(u.skip(22),this.fileNameLength=u.readInt(2),s=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=(function(f){for(var h in k)if(Object.prototype.hasOwnProperty.call(k,h)&&k[h].magic===f)return k[h];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,g,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var g=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(g),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=r(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var g,s,f,h=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<h;)g=u.readInt(2),s=u.readInt(2),f=u.readData(s),this.extraFields[g]={id:g,length:s,value:f};u.setIndex(h)},handleUTF8:function(){var u=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var s=c.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var h=c.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var g=r(u.value);return g.readInt(1)!==1||o(this.fileName)!==g.readInt(4)?null:p.utf8decode(g.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var g=r(u.value);return g.readInt(1)!==1||o(this.fileComment)!==g.readInt(4)?null:p.utf8decode(g.readData(u.length-5))}return null}},a.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,a,d){function r(g,s,f){this.name=g,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=s,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var c=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),o=t("./utf8"),p=t("./compressedObject"),k=t("./stream/GenericWorker");r.prototype={internalStream:function(g){var s=null,f="string";try{if(!g)throw new Error("No output type specified.");var h=(f=g.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),s=this._decompressWorker();var m=!this._dataBinary;m&&!h&&(s=s.pipe(new o.Utf8EncodeWorker)),!m&&h&&(s=s.pipe(new o.Utf8DecodeWorker))}catch(C){(s=new k("error")).error(C)}return new c(s,f,"")},async:function(g,s){return this.internalStream(g).accumulate(s)},nodeStream:function(g,s){return this.internalStream(g||"nodebuffer").toNodejsStream(s)},_compressWorker:function(g,s){if(this._data instanceof p&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new o.Utf8EncodeWorker)),p.createWorkerFrom(f,g,s)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof k?this._data:new i(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<w.length;u++)r.prototype[w[u]]=y;a.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,a,d){(function(r){var c,i,o=r.MutationObserver||r.WebKitMutationObserver;if(o){var p=0,k=new o(g),w=r.document.createTextNode("");k.observe(w,{characterData:!0}),c=function(){w.data=p=++p%2}}else if(r.setImmediate||r.MessageChannel===void 0)c="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var s=r.document.createElement("script");s.onreadystatechange=function(){g(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},r.document.documentElement.appendChild(s)}:function(){setTimeout(g,0)};else{var y=new r.MessageChannel;y.port1.onmessage=g,c=function(){y.port2.postMessage(0)}}var u=[];function g(){var s,f;i=!0;for(var h=u.length;h;){for(f=u,u=[],s=-1;++s<h;)f[s]();h=u.length}i=!1}a.exports=function(s){u.push(s)!==1||i||c()}}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,a,d){var r=t("immediate");function c(){}var i={},o=["REJECTED"],p=["FULFILLED"],k=["PENDING"];function w(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,h!==c&&s(this,h)}function y(h,m,C){this.promise=h,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function u(h,m,C){r(function(){var _;try{_=m(C)}catch(S){return i.reject(h,S)}_===h?i.reject(h,new TypeError("Cannot resolve promise with itself")):i.resolve(h,_)})}function g(h){var m=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof m=="function")return function(){m.apply(h,arguments)}}function s(h,m){var C=!1;function _(A){C||(C=!0,i.reject(h,A))}function S(A){C||(C=!0,i.resolve(h,A))}var L=f(function(){m(S,_)});L.status==="error"&&_(L.value)}function f(h,m){var C={};try{C.value=h(m),C.status="success"}catch(_){C.status="error",C.value=_}return C}(a.exports=w).prototype.finally=function(h){if(typeof h!="function")return this;var m=this.constructor;return this.then(function(C){return m.resolve(h()).then(function(){return C})},function(C){return m.resolve(h()).then(function(){throw C})})},w.prototype.catch=function(h){return this.then(null,h)},w.prototype.then=function(h,m){if(typeof h!="function"&&this.state===p||typeof m!="function"&&this.state===o)return this;var C=new this.constructor(c);return this.state!==k?u(C,this.state===p?h:m,this.outcome):this.queue.push(new y(C,h,m)),C},y.prototype.callFulfilled=function(h){i.resolve(this.promise,h)},y.prototype.otherCallFulfilled=function(h){u(this.promise,this.onFulfilled,h)},y.prototype.callRejected=function(h){i.reject(this.promise,h)},y.prototype.otherCallRejected=function(h){u(this.promise,this.onRejected,h)},i.resolve=function(h,m){var C=f(g,m);if(C.status==="error")return i.reject(h,C.value);var _=C.value;if(_)s(h,_);else{h.state=p,h.outcome=m;for(var S=-1,L=h.queue.length;++S<L;)h.queue[S].callFulfilled(m)}return h},i.reject=function(h,m){h.state=o,h.outcome=m;for(var C=-1,_=h.queue.length;++C<_;)h.queue[C].callRejected(m);return h},w.resolve=function(h){return h instanceof this?h:i.resolve(new this(c),h)},w.reject=function(h){var m=new this(c);return i.reject(m,h)},w.all=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=h.length,_=!1;if(!C)return this.resolve([]);for(var S=new Array(C),L=0,A=-1,D=new this(c);++A<C;)P(h[A],A);return D;function P(O,W){m.resolve(O).then(function(T){S[W]=T,++L!==C||_||(_=!0,i.resolve(D,S))},function(T){_||(_=!0,i.reject(D,T))})}},w.race=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=h.length,_=!1;if(!C)return this.resolve([]);for(var S=-1,L=new this(c);++S<C;)A=h[S],m.resolve(A).then(function(D){_||(_=!0,i.resolve(L,D))},function(D){_||(_=!0,i.reject(L,D))});var A;return L}},{immediate:36}],38:[function(t,a,d){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),a.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,a,d){var r=t("./zlib/deflate"),c=t("./utils/common"),i=t("./utils/strings"),o=t("./zlib/messages"),p=t("./zlib/zstream"),k=Object.prototype.toString,w=0,y=-1,u=0,g=8;function s(h){if(!(this instanceof s))return new s(h);this.options=c.assign({level:y,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},h||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=r.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(C!==w)throw new Error(o[C]);if(m.header&&r.deflateSetHeader(this.strm,m.header),m.dictionary){var _;if(_=typeof m.dictionary=="string"?i.string2buf(m.dictionary):k.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(C=r.deflateSetDictionary(this.strm,_))!==w)throw new Error(o[C]);this._dict_set=!0}}function f(h,m){var C=new s(m);if(C.push(h,!0),C.err)throw C.msg||o[C.err];return C.result}s.prototype.push=function(h,m){var C,_,S=this.strm,L=this.options.chunkSize;if(this.ended)return!1;_=m===~~m?m:m===!0?4:0,typeof h=="string"?S.input=i.string2buf(h):k.call(h)==="[object ArrayBuffer]"?S.input=new Uint8Array(h):S.input=h,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new c.Buf8(L),S.next_out=0,S.avail_out=L),(C=r.deflate(S,_))!==1&&C!==w)return this.onEnd(C),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(c.shrinkBuf(S.output,S.next_out))):this.onData(c.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&C!==1);return _===4?(C=r.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===w):_!==2||(this.onEnd(w),!(S.avail_out=0))},s.prototype.onData=function(h){this.chunks.push(h)},s.prototype.onEnd=function(h){h===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},d.Deflate=s,d.deflate=f,d.deflateRaw=function(h,m){return(m=m||{}).raw=!0,f(h,m)},d.gzip=function(h,m){return(m=m||{}).gzip=!0,f(h,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,a,d){var r=t("./zlib/inflate"),c=t("./utils/common"),i=t("./utils/strings"),o=t("./zlib/constants"),p=t("./zlib/messages"),k=t("./zlib/zstream"),w=t("./zlib/gzheader"),y=Object.prototype.toString;function u(s){if(!(this instanceof u))return new u(s);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},s||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||s&&s.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var h=r.inflateInit2(this.strm,f.windowBits);if(h!==o.Z_OK)throw new Error(p[h]);this.header=new w,r.inflateGetHeader(this.strm,this.header)}function g(s,f){var h=new u(f);if(h.push(s,!0),h.err)throw h.msg||p[h.err];return h.result}u.prototype.push=function(s,f){var h,m,C,_,S,L,A=this.strm,D=this.options.chunkSize,P=this.options.dictionary,O=!1;if(this.ended)return!1;m=f===~~f?f:f===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof s=="string"?A.input=i.binstring2buf(s):y.call(s)==="[object ArrayBuffer]"?A.input=new Uint8Array(s):A.input=s,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new c.Buf8(D),A.next_out=0,A.avail_out=D),(h=r.inflate(A,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&P&&(L=typeof P=="string"?i.string2buf(P):y.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,h=r.inflateSetDictionary(this.strm,L)),h===o.Z_BUF_ERROR&&O===!0&&(h=o.Z_OK,O=!1),h!==o.Z_STREAM_END&&h!==o.Z_OK)return this.onEnd(h),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&h!==o.Z_STREAM_END&&(A.avail_in!==0||m!==o.Z_FINISH&&m!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=i.utf8border(A.output,A.next_out),_=A.next_out-C,S=i.buf2string(A.output,C),A.next_out=_,A.avail_out=D-_,_&&c.arraySet(A.output,A.output,C,_,0),this.onData(S)):this.onData(c.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(O=!0)}while((0<A.avail_in||A.avail_out===0)&&h!==o.Z_STREAM_END);return h===o.Z_STREAM_END&&(m=o.Z_FINISH),m===o.Z_FINISH?(h=r.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===o.Z_OK):m!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(A.avail_out=0))},u.prototype.onData=function(s){this.chunks.push(s)},u.prototype.onEnd=function(s){s===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},d.Inflate=u,d.inflate=g,d.inflateRaw=function(s,f){return(f=f||{}).raw=!0,g(s,f)},d.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,a,d){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";d.assign=function(o){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var k=p.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var w in k)k.hasOwnProperty(w)&&(o[w]=k[w])}}return o},d.shrinkBuf=function(o,p){return o.length===p?o:o.subarray?o.subarray(0,p):(o.length=p,o)};var c={arraySet:function(o,p,k,w,y){if(p.subarray&&o.subarray)o.set(p.subarray(k,k+w),y);else for(var u=0;u<w;u++)o[y+u]=p[k+u]},flattenChunks:function(o){var p,k,w,y,u,g;for(p=w=0,k=o.length;p<k;p++)w+=o[p].length;for(g=new Uint8Array(w),p=y=0,k=o.length;p<k;p++)u=o[p],g.set(u,y),y+=u.length;return g}},i={arraySet:function(o,p,k,w,y){for(var u=0;u<w;u++)o[y+u]=p[k+u]},flattenChunks:function(o){return[].concat.apply([],o)}};d.setTyped=function(o){o?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,c)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,i))},d.setTyped(r)},{}],42:[function(t,a,d){var r=t("./common"),c=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var o=new r.Buf8(256),p=0;p<256;p++)o[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function k(w,y){if(y<65537&&(w.subarray&&i||!w.subarray&&c))return String.fromCharCode.apply(null,r.shrinkBuf(w,y));for(var u="",g=0;g<y;g++)u+=String.fromCharCode(w[g]);return u}o[254]=o[254]=1,d.string2buf=function(w){var y,u,g,s,f,h=w.length,m=0;for(s=0;s<h;s++)(64512&(u=w.charCodeAt(s)))==55296&&s+1<h&&(64512&(g=w.charCodeAt(s+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),s++),m+=u<128?1:u<2048?2:u<65536?3:4;for(y=new r.Buf8(m),s=f=0;f<m;s++)(64512&(u=w.charCodeAt(s)))==55296&&s+1<h&&(64512&(g=w.charCodeAt(s+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),s++),u<128?y[f++]=u:(u<2048?y[f++]=192|u>>>6:(u<65536?y[f++]=224|u>>>12:(y[f++]=240|u>>>18,y[f++]=128|u>>>12&63),y[f++]=128|u>>>6&63),y[f++]=128|63&u);return y},d.buf2binstring=function(w){return k(w,w.length)},d.binstring2buf=function(w){for(var y=new r.Buf8(w.length),u=0,g=y.length;u<g;u++)y[u]=w.charCodeAt(u);return y},d.buf2string=function(w,y){var u,g,s,f,h=y||w.length,m=new Array(2*h);for(u=g=0;u<h;)if((s=w[u++])<128)m[g++]=s;else if(4<(f=o[s]))m[g++]=65533,u+=f-1;else{for(s&=f===2?31:f===3?15:7;1<f&&u<h;)s=s<<6|63&w[u++],f--;1<f?m[g++]=65533:s<65536?m[g++]=s:(s-=65536,m[g++]=55296|s>>10&1023,m[g++]=56320|1023&s)}return k(m,g)},d.utf8border=function(w,y){var u;for((y=y||w.length)>w.length&&(y=w.length),u=y-1;0<=u&&(192&w[u])==128;)u--;return u<0||u===0?y:u+o[w[u]]>y?u:y}},{"./common":41}],43:[function(t,a,d){a.exports=function(r,c,i,o){for(var p=65535&r|0,k=r>>>16&65535|0,w=0;i!==0;){for(i-=w=2e3<i?2e3:i;k=k+(p=p+c[o++]|0)|0,--w;);p%=65521,k%=65521}return p|k<<16|0}},{}],44:[function(t,a,d){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,a,d){var r=(function(){for(var c,i=[],o=0;o<256;o++){c=o;for(var p=0;p<8;p++)c=1&c?3988292384^c>>>1:c>>>1;i[o]=c}return i})();a.exports=function(c,i,o,p){var k=r,w=p+o;c^=-1;for(var y=p;y<w;y++)c=c>>>8^k[255&(c^i[y])];return-1^c}},{}],46:[function(t,a,d){var r,c=t("../utils/common"),i=t("./trees"),o=t("./adler32"),p=t("./crc32"),k=t("./messages"),w=0,y=4,u=0,g=-2,s=-1,f=4,h=2,m=8,C=9,_=286,S=30,L=19,A=2*_+1,D=15,P=3,O=258,W=O+P+1,T=42,F=113,l=1,U=2,Q=3,j=4;function re(n,G){return n.msg=k[G],G}function q(n){return(n<<1)-(4<n?9:0)}function ae(n){for(var G=n.length;0<=--G;)n[G]=0}function N(n){var G=n.state,B=G.pending;B>n.avail_out&&(B=n.avail_out),B!==0&&(c.arraySet(n.output,G.pending_buf,G.pending_out,B,n.next_out),n.next_out+=B,G.pending_out+=B,n.total_out+=B,n.avail_out-=B,G.pending-=B,G.pending===0&&(G.pending_out=0))}function R(n,G){i._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,G),n.block_start=n.strstart,N(n.strm)}function K(n,G){n.pending_buf[n.pending++]=G}function M(n,G){n.pending_buf[n.pending++]=G>>>8&255,n.pending_buf[n.pending++]=255&G}function $(n,G){var B,v,b=n.max_chain_length,E=n.strstart,V=n.prev_length,Z=n.nice_match,z=n.strstart>n.w_size-W?n.strstart-(n.w_size-W):0,X=n.window,te=n.w_mask,ee=n.prev,le=n.strstart+O,ye=X[E+V-1],ge=X[E+V];n.prev_length>=n.good_match&&(b>>=2),Z>n.lookahead&&(Z=n.lookahead);do if(X[(B=G)+V]===ge&&X[B+V-1]===ye&&X[B]===X[E]&&X[++B]===X[E+1]){E+=2,B++;do;while(X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&X[++E]===X[++B]&&E<le);if(v=O-(le-E),E=le-O,V<v){if(n.match_start=G,Z<=(V=v))break;ye=X[E+V-1],ge=X[E+V]}}while((G=ee[G&te])>z&&--b!=0);return V<=n.lookahead?V:n.lookahead}function ne(n){var G,B,v,b,E,V,Z,z,X,te,ee=n.w_size;do{if(b=n.window_size-n.lookahead-n.strstart,n.strstart>=ee+(ee-W)){for(c.arraySet(n.window,n.window,ee,ee,0),n.match_start-=ee,n.strstart-=ee,n.block_start-=ee,G=B=n.hash_size;v=n.head[--G],n.head[G]=ee<=v?v-ee:0,--B;);for(G=B=ee;v=n.prev[--G],n.prev[G]=ee<=v?v-ee:0,--B;);b+=ee}if(n.strm.avail_in===0)break;if(V=n.strm,Z=n.window,z=n.strstart+n.lookahead,X=b,te=void 0,te=V.avail_in,X<te&&(te=X),B=te===0?0:(V.avail_in-=te,c.arraySet(Z,V.input,V.next_in,te,z),V.state.wrap===1?V.adler=o(V.adler,Z,te,z):V.state.wrap===2&&(V.adler=p(V.adler,Z,te,z)),V.next_in+=te,V.total_in+=te,te),n.lookahead+=B,n.lookahead+n.insert>=P)for(E=n.strstart-n.insert,n.ins_h=n.window[E],n.ins_h=(n.ins_h<<n.hash_shift^n.window[E+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[E+P-1])&n.hash_mask,n.prev[E&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=E,E++,n.insert--,!(n.lookahead+n.insert<P)););}while(n.lookahead<W&&n.strm.avail_in!==0)}function be(n,G){for(var B,v;;){if(n.lookahead<W){if(ne(n),n.lookahead<W&&G===w)return l;if(n.lookahead===0)break}if(B=0,n.lookahead>=P&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+P-1])&n.hash_mask,B=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),B!==0&&n.strstart-B<=n.w_size-W&&(n.match_length=$(n,B)),n.match_length>=P)if(v=i._tr_tally(n,n.strstart-n.match_start,n.match_length-P),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=P){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+P-1])&n.hash_mask,B=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,--n.match_length!=0;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else v=i._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(v&&(R(n,!1),n.strm.avail_out===0))return l}return n.insert=n.strstart<P-1?n.strstart:P-1,G===y?(R(n,!0),n.strm.avail_out===0?Q:j):n.last_lit&&(R(n,!1),n.strm.avail_out===0)?l:U}function ie(n,G){for(var B,v,b;;){if(n.lookahead<W){if(ne(n),n.lookahead<W&&G===w)return l;if(n.lookahead===0)break}if(B=0,n.lookahead>=P&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+P-1])&n.hash_mask,B=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=P-1,B!==0&&n.prev_length<n.max_lazy_match&&n.strstart-B<=n.w_size-W&&(n.match_length=$(n,B),n.match_length<=5&&(n.strategy===1||n.match_length===P&&4096<n.strstart-n.match_start)&&(n.match_length=P-1)),n.prev_length>=P&&n.match_length<=n.prev_length){for(b=n.strstart+n.lookahead-P,v=i._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-P),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=b&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+P-1])&n.hash_mask,B=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),--n.prev_length!=0;);if(n.match_available=0,n.match_length=P-1,n.strstart++,v&&(R(n,!1),n.strm.avail_out===0))return l}else if(n.match_available){if((v=i._tr_tally(n,0,n.window[n.strstart-1]))&&R(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return l}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(v=i._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<P-1?n.strstart:P-1,G===y?(R(n,!0),n.strm.avail_out===0?Q:j):n.last_lit&&(R(n,!1),n.strm.avail_out===0)?l:U}function ce(n,G,B,v,b){this.good_length=n,this.max_lazy=G,this.nice_length=B,this.max_chain=v,this.func=b}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*A),this.dyn_dtree=new c.Buf16(2*(2*S+1)),this.bl_tree=new c.Buf16(2*(2*L+1)),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(D+1),this.heap=new c.Buf16(2*_+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*_+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(n){var G;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=h,(G=n.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?T:F,n.adler=G.wrap===2?0:1,G.last_flush=w,i._tr_init(G),u):re(n,g)}function Se(n){var G=ue(n);return G===u&&(function(B){B.window_size=2*B.w_size,ae(B.head),B.max_lazy_match=r[B.level].max_lazy,B.good_match=r[B.level].good_length,B.nice_match=r[B.level].nice_length,B.max_chain_length=r[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=P-1,B.match_available=0,B.ins_h=0})(n.state),G}function Pe(n,G,B,v,b,E){if(!n)return g;var V=1;if(G===s&&(G=6),v<0?(V=0,v=-v):15<v&&(V=2,v-=16),b<1||C<b||B!==m||v<8||15<v||G<0||9<G||E<0||f<E)return re(n,g);v===8&&(v=9);var Z=new Y;return(n.state=Z).strm=n,Z.wrap=V,Z.gzhead=null,Z.w_bits=v,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=b+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+P-1)/P),Z.window=new c.Buf8(2*Z.w_size),Z.head=new c.Buf16(Z.hash_size),Z.prev=new c.Buf16(Z.w_size),Z.lit_bufsize=1<<b+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new c.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=G,Z.strategy=E,Z.method=B,Se(n)}r=[new ce(0,0,0,0,function(n,G){var B=65535;for(B>n.pending_buf_size-5&&(B=n.pending_buf_size-5);;){if(n.lookahead<=1){if(ne(n),n.lookahead===0&&G===w)return l;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var v=n.block_start+B;if((n.strstart===0||n.strstart>=v)&&(n.lookahead=n.strstart-v,n.strstart=v,R(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-W&&(R(n,!1),n.strm.avail_out===0))return l}return n.insert=0,G===y?(R(n,!0),n.strm.avail_out===0?Q:j):(n.strstart>n.block_start&&(R(n,!1),n.strm.avail_out),l)}),new ce(4,4,8,4,be),new ce(4,5,16,8,be),new ce(4,6,32,32,be),new ce(4,4,16,16,ie),new ce(8,16,32,32,ie),new ce(8,16,128,128,ie),new ce(8,32,128,256,ie),new ce(32,128,258,1024,ie),new ce(32,258,258,4096,ie)],d.deflateInit=function(n,G){return Pe(n,G,m,15,8,0)},d.deflateInit2=Pe,d.deflateReset=Se,d.deflateResetKeep=ue,d.deflateSetHeader=function(n,G){return n&&n.state?n.state.wrap!==2?g:(n.state.gzhead=G,u):g},d.deflate=function(n,G){var B,v,b,E;if(!n||!n.state||5<G||G<0)return n?re(n,g):g;if(v=n.state,!n.output||!n.input&&n.avail_in!==0||v.status===666&&G!==y)return re(n,n.avail_out===0?-5:g);if(v.strm=n,B=v.last_flush,v.last_flush=G,v.status===T)if(v.wrap===2)n.adler=0,K(v,31),K(v,139),K(v,8),v.gzhead?(K(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),K(v,255&v.gzhead.time),K(v,v.gzhead.time>>8&255),K(v,v.gzhead.time>>16&255),K(v,v.gzhead.time>>24&255),K(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),K(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(K(v,255&v.gzhead.extra.length),K(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(n.adler=p(n.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(K(v,0),K(v,0),K(v,0),K(v,0),K(v,0),K(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),K(v,3),v.status=F);else{var V=m+(v.w_bits-8<<4)<<8;V|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(V|=32),V+=31-V%31,v.status=F,M(v,V),v.strstart!==0&&(M(v,n.adler>>>16),M(v,65535&n.adler)),n.adler=1}if(v.status===69)if(v.gzhead.extra){for(b=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),N(n),b=v.pending,v.pending!==v.pending_buf_size));)K(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){b=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),N(n),b=v.pending,v.pending===v.pending_buf_size)){E=1;break}E=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,K(v,E)}while(E!==0);v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),E===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){b=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),N(n),b=v.pending,v.pending===v.pending_buf_size)){E=1;break}E=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,K(v,E)}while(E!==0);v.gzhead.hcrc&&v.pending>b&&(n.adler=p(n.adler,v.pending_buf,v.pending-b,b)),E===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&N(n),v.pending+2<=v.pending_buf_size&&(K(v,255&n.adler),K(v,n.adler>>8&255),n.adler=0,v.status=F)):v.status=F),v.pending!==0){if(N(n),n.avail_out===0)return v.last_flush=-1,u}else if(n.avail_in===0&&q(G)<=q(B)&&G!==y)return re(n,-5);if(v.status===666&&n.avail_in!==0)return re(n,-5);if(n.avail_in!==0||v.lookahead!==0||G!==w&&v.status!==666){var Z=v.strategy===2?(function(z,X){for(var te;;){if(z.lookahead===0&&(ne(z),z.lookahead===0)){if(X===w)return l;break}if(z.match_length=0,te=i._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,te&&(R(z,!1),z.strm.avail_out===0))return l}return z.insert=0,X===y?(R(z,!0),z.strm.avail_out===0?Q:j):z.last_lit&&(R(z,!1),z.strm.avail_out===0)?l:U})(v,G):v.strategy===3?(function(z,X){for(var te,ee,le,ye,ge=z.window;;){if(z.lookahead<=O){if(ne(z),z.lookahead<=O&&X===w)return l;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=P&&0<z.strstart&&(ee=ge[le=z.strstart-1])===ge[++le]&&ee===ge[++le]&&ee===ge[++le]){ye=z.strstart+O;do;while(ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&ee===ge[++le]&&le<ye);z.match_length=O-(ye-le),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=P?(te=i._tr_tally(z,1,z.match_length-P),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(te=i._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),te&&(R(z,!1),z.strm.avail_out===0))return l}return z.insert=0,X===y?(R(z,!0),z.strm.avail_out===0?Q:j):z.last_lit&&(R(z,!1),z.strm.avail_out===0)?l:U})(v,G):r[v.level].func(v,G);if(Z!==Q&&Z!==j||(v.status=666),Z===l||Z===Q)return n.avail_out===0&&(v.last_flush=-1),u;if(Z===U&&(G===1?i._tr_align(v):G!==5&&(i._tr_stored_block(v,0,0,!1),G===3&&(ae(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),N(n),n.avail_out===0))return v.last_flush=-1,u}return G!==y?u:v.wrap<=0?1:(v.wrap===2?(K(v,255&n.adler),K(v,n.adler>>8&255),K(v,n.adler>>16&255),K(v,n.adler>>24&255),K(v,255&n.total_in),K(v,n.total_in>>8&255),K(v,n.total_in>>16&255),K(v,n.total_in>>24&255)):(M(v,n.adler>>>16),M(v,65535&n.adler)),N(n),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?u:1)},d.deflateEnd=function(n){var G;return n&&n.state?(G=n.state.status)!==T&&G!==69&&G!==73&&G!==91&&G!==103&&G!==F&&G!==666?re(n,g):(n.state=null,G===F?re(n,-3):u):g},d.deflateSetDictionary=function(n,G){var B,v,b,E,V,Z,z,X,te=G.length;if(!n||!n.state||(E=(B=n.state).wrap)===2||E===1&&B.status!==T||B.lookahead)return g;for(E===1&&(n.adler=o(n.adler,G,te,0)),B.wrap=0,te>=B.w_size&&(E===0&&(ae(B.head),B.strstart=0,B.block_start=0,B.insert=0),X=new c.Buf8(B.w_size),c.arraySet(X,G,te-B.w_size,B.w_size,0),G=X,te=B.w_size),V=n.avail_in,Z=n.next_in,z=n.input,n.avail_in=te,n.next_in=0,n.input=G,ne(B);B.lookahead>=P;){for(v=B.strstart,b=B.lookahead-(P-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[v+P-1])&B.hash_mask,B.prev[v&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=v,v++,--b;);B.strstart=v,B.lookahead=P-1,ne(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=P-1,B.match_available=0,n.next_in=Z,n.input=z,n.avail_in=V,B.wrap=E,u},d.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,a,d){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,a,d){a.exports=function(r,c){var i,o,p,k,w,y,u,g,s,f,h,m,C,_,S,L,A,D,P,O,W,T,F,l,U;i=r.state,o=r.next_in,l=r.input,p=o+(r.avail_in-5),k=r.next_out,U=r.output,w=k-(c-r.avail_out),y=k+(r.avail_out-257),u=i.dmax,g=i.wsize,s=i.whave,f=i.wnext,h=i.window,m=i.hold,C=i.bits,_=i.lencode,S=i.distcode,L=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{C<15&&(m+=l[o++]<<C,C+=8,m+=l[o++]<<C,C+=8),D=_[m&L];t:for(;;){if(m>>>=P=D>>>24,C-=P,(P=D>>>16&255)===0)U[k++]=65535&D;else{if(!(16&P)){if((64&P)==0){D=_[(65535&D)+(m&(1<<P)-1)];continue t}if(32&P){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}O=65535&D,(P&=15)&&(C<P&&(m+=l[o++]<<C,C+=8),O+=m&(1<<P)-1,m>>>=P,C-=P),C<15&&(m+=l[o++]<<C,C+=8,m+=l[o++]<<C,C+=8),D=S[m&A];a:for(;;){if(m>>>=P=D>>>24,C-=P,!(16&(P=D>>>16&255))){if((64&P)==0){D=S[(65535&D)+(m&(1<<P)-1)];continue a}r.msg="invalid distance code",i.mode=30;break e}if(W=65535&D,C<(P&=15)&&(m+=l[o++]<<C,(C+=8)<P&&(m+=l[o++]<<C,C+=8)),u<(W+=m&(1<<P)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(m>>>=P,C-=P,(P=k-w)<W){if(s<(P=W-P)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(F=h,(T=0)===f){if(T+=g-P,P<O){for(O-=P;U[k++]=h[T++],--P;);T=k-W,F=U}}else if(f<P){if(T+=g+f-P,(P-=f)<O){for(O-=P;U[k++]=h[T++],--P;);if(T=0,f<O){for(O-=P=f;U[k++]=h[T++],--P;);T=k-W,F=U}}}else if(T+=f-P,P<O){for(O-=P;U[k++]=h[T++],--P;);T=k-W,F=U}for(;2<O;)U[k++]=F[T++],U[k++]=F[T++],U[k++]=F[T++],O-=3;O&&(U[k++]=F[T++],1<O&&(U[k++]=F[T++]))}else{for(T=k-W;U[k++]=U[T++],U[k++]=U[T++],U[k++]=U[T++],2<(O-=3););O&&(U[k++]=U[T++],1<O&&(U[k++]=U[T++]))}break}}break}}while(o<p&&k<y);o-=O=C>>3,m&=(1<<(C-=O<<3))-1,r.next_in=o,r.next_out=k,r.avail_in=o<p?p-o+5:5-(o-p),r.avail_out=k<y?y-k+257:257-(k-y),i.hold=m,i.bits=C}},{}],49:[function(t,a,d){var r=t("../utils/common"),c=t("./adler32"),i=t("./crc32"),o=t("./inffast"),p=t("./inftrees"),k=1,w=2,y=0,u=-2,g=1,s=852,f=592;function h(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(T){var F;return T&&T.state?(F=T.state,T.total_in=T.total_out=F.total=0,T.msg="",F.wrap&&(T.adler=1&F.wrap),F.mode=g,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new r.Buf32(s),F.distcode=F.distdyn=new r.Buf32(f),F.sane=1,F.back=-1,y):u}function _(T){var F;return T&&T.state?((F=T.state).wsize=0,F.whave=0,F.wnext=0,C(T)):u}function S(T,F){var l,U;return T&&T.state?(U=T.state,F<0?(l=0,F=-F):(l=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?u:(U.window!==null&&U.wbits!==F&&(U.window=null),U.wrap=l,U.wbits=F,_(T))):u}function L(T,F){var l,U;return T?(U=new m,(T.state=U).window=null,(l=S(T,F))!==y&&(T.state=null),l):u}var A,D,P=!0;function O(T){if(P){var F;for(A=new r.Buf32(512),D=new r.Buf32(32),F=0;F<144;)T.lens[F++]=8;for(;F<256;)T.lens[F++]=9;for(;F<280;)T.lens[F++]=7;for(;F<288;)T.lens[F++]=8;for(p(k,T.lens,0,288,A,0,T.work,{bits:9}),F=0;F<32;)T.lens[F++]=5;p(w,T.lens,0,32,D,0,T.work,{bits:5}),P=!1}T.lencode=A,T.lenbits=9,T.distcode=D,T.distbits=5}function W(T,F,l,U){var Q,j=T.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new r.Buf8(j.wsize)),U>=j.wsize?(r.arraySet(j.window,F,l-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(U<(Q=j.wsize-j.wnext)&&(Q=U),r.arraySet(j.window,F,l-U,Q,j.wnext),(U-=Q)?(r.arraySet(j.window,F,l-U,U,0),j.wnext=U,j.whave=j.wsize):(j.wnext+=Q,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=Q))),0}d.inflateReset=_,d.inflateReset2=S,d.inflateResetKeep=C,d.inflateInit=function(T){return L(T,15)},d.inflateInit2=L,d.inflate=function(T,F){var l,U,Q,j,re,q,ae,N,R,K,M,$,ne,be,ie,ce,Y,ue,Se,Pe,n,G,B,v,b=0,E=new r.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return u;(l=T.state).mode===12&&(l.mode=13),re=T.next_out,Q=T.output,ae=T.avail_out,j=T.next_in,U=T.input,q=T.avail_in,N=l.hold,R=l.bits,K=q,M=ae,G=y;e:for(;;)switch(l.mode){case g:if(l.wrap===0){l.mode=13;break}for(;R<16;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(2&l.wrap&&N===35615){E[l.check=0]=255&N,E[1]=N>>>8&255,l.check=i(l.check,E,2,0),R=N=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&N)<<8)+(N>>8))%31){T.msg="incorrect header check",l.mode=30;break}if((15&N)!=8){T.msg="unknown compression method",l.mode=30;break}if(R-=4,n=8+(15&(N>>>=4)),l.wbits===0)l.wbits=n;else if(n>l.wbits){T.msg="invalid window size",l.mode=30;break}l.dmax=1<<n,T.adler=l.check=1,l.mode=512&N?10:12,R=N=0;break;case 2:for(;R<16;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(l.flags=N,(255&l.flags)!=8){T.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){T.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=N>>8&1),512&l.flags&&(E[0]=255&N,E[1]=N>>>8&255,l.check=i(l.check,E,2,0)),R=N=0,l.mode=3;case 3:for(;R<32;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.head&&(l.head.time=N),512&l.flags&&(E[0]=255&N,E[1]=N>>>8&255,E[2]=N>>>16&255,E[3]=N>>>24&255,l.check=i(l.check,E,4,0)),R=N=0,l.mode=4;case 4:for(;R<16;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.head&&(l.head.xflags=255&N,l.head.os=N>>8),512&l.flags&&(E[0]=255&N,E[1]=N>>>8&255,l.check=i(l.check,E,2,0)),R=N=0,l.mode=5;case 5:if(1024&l.flags){for(;R<16;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.length=N,l.head&&(l.head.extra_len=N),512&l.flags&&(E[0]=255&N,E[1]=N>>>8&255,l.check=i(l.check,E,2,0)),R=N=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(q<($=l.length)&&($=q),$&&(l.head&&(n=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),r.arraySet(l.head.extra,U,j,$,n)),512&l.flags&&(l.check=i(l.check,U,$,j)),q-=$,j+=$,l.length-=$),l.length))break e;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(q===0)break e;for($=0;n=U[j+$++],l.head&&n&&l.length<65536&&(l.head.name+=String.fromCharCode(n)),n&&$<q;);if(512&l.flags&&(l.check=i(l.check,U,$,j)),q-=$,j+=$,n)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(q===0)break e;for($=0;n=U[j+$++],l.head&&n&&l.length<65536&&(l.head.comment+=String.fromCharCode(n)),n&&$<q;);if(512&l.flags&&(l.check=i(l.check,U,$,j)),q-=$,j+=$,n)break e}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;R<16;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(N!==(65535&l.check)){T.msg="header crc mismatch",l.mode=30;break}R=N=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),T.adler=l.check=0,l.mode=12;break;case 10:for(;R<32;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}T.adler=l.check=h(N),R=N=0,l.mode=11;case 11:if(l.havedict===0)return T.next_out=re,T.avail_out=ae,T.next_in=j,T.avail_in=q,l.hold=N,l.bits=R,2;T.adler=l.check=1,l.mode=12;case 12:if(F===5||F===6)break e;case 13:if(l.last){N>>>=7&R,R-=7&R,l.mode=27;break}for(;R<3;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}switch(l.last=1&N,R-=1,3&(N>>>=1)){case 0:l.mode=14;break;case 1:if(O(l),l.mode=20,F!==6)break;N>>>=2,R-=2;break e;case 2:l.mode=17;break;case 3:T.msg="invalid block type",l.mode=30}N>>>=2,R-=2;break;case 14:for(N>>>=7&R,R-=7&R;R<32;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if((65535&N)!=(N>>>16^65535)){T.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&N,R=N=0,l.mode=15,F===6)break e;case 15:l.mode=16;case 16:if($=l.length){if(q<$&&($=q),ae<$&&($=ae),$===0)break e;r.arraySet(Q,U,j,$,re),q-=$,j+=$,ae-=$,re+=$,l.length-=$;break}l.mode=12;break;case 17:for(;R<14;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(l.nlen=257+(31&N),N>>>=5,R-=5,l.ndist=1+(31&N),N>>>=5,R-=5,l.ncode=4+(15&N),N>>>=4,R-=4,286<l.nlen||30<l.ndist){T.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;R<3;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.lens[V[l.have++]]=7&N,N>>>=3,R-=3}for(;l.have<19;)l.lens[V[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,B={bits:l.lenbits},G=p(0,l.lens,0,19,l.lencode,0,l.work,B),l.lenbits=B.bits,G){T.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;ce=(b=l.lencode[N&(1<<l.lenbits)-1])>>>16&255,Y=65535&b,!((ie=b>>>24)<=R);){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(Y<16)N>>>=ie,R-=ie,l.lens[l.have++]=Y;else{if(Y===16){for(v=ie+2;R<v;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(N>>>=ie,R-=ie,l.have===0){T.msg="invalid bit length repeat",l.mode=30;break}n=l.lens[l.have-1],$=3+(3&N),N>>>=2,R-=2}else if(Y===17){for(v=ie+3;R<v;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}R-=ie,n=0,$=3+(7&(N>>>=ie)),N>>>=3,R-=3}else{for(v=ie+7;R<v;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}R-=ie,n=0,$=11+(127&(N>>>=ie)),N>>>=7,R-=7}if(l.have+$>l.nlen+l.ndist){T.msg="invalid bit length repeat",l.mode=30;break}for(;$--;)l.lens[l.have++]=n}}if(l.mode===30)break;if(l.lens[256]===0){T.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,B={bits:l.lenbits},G=p(k,l.lens,0,l.nlen,l.lencode,0,l.work,B),l.lenbits=B.bits,G){T.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,B={bits:l.distbits},G=p(w,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,B),l.distbits=B.bits,G){T.msg="invalid distances set",l.mode=30;break}if(l.mode=20,F===6)break e;case 20:l.mode=21;case 21:if(6<=q&&258<=ae){T.next_out=re,T.avail_out=ae,T.next_in=j,T.avail_in=q,l.hold=N,l.bits=R,o(T,M),re=T.next_out,Q=T.output,ae=T.avail_out,j=T.next_in,U=T.input,q=T.avail_in,N=l.hold,R=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;ce=(b=l.lencode[N&(1<<l.lenbits)-1])>>>16&255,Y=65535&b,!((ie=b>>>24)<=R);){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(ce&&(240&ce)==0){for(ue=ie,Se=ce,Pe=Y;ce=(b=l.lencode[Pe+((N&(1<<ue+Se)-1)>>ue)])>>>16&255,Y=65535&b,!(ue+(ie=b>>>24)<=R);){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}N>>>=ue,R-=ue,l.back+=ue}if(N>>>=ie,R-=ie,l.back+=ie,l.length=Y,ce===0){l.mode=26;break}if(32&ce){l.back=-1,l.mode=12;break}if(64&ce){T.msg="invalid literal/length code",l.mode=30;break}l.extra=15&ce,l.mode=22;case 22:if(l.extra){for(v=l.extra;R<v;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.length+=N&(1<<l.extra)-1,N>>>=l.extra,R-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;ce=(b=l.distcode[N&(1<<l.distbits)-1])>>>16&255,Y=65535&b,!((ie=b>>>24)<=R);){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if((240&ce)==0){for(ue=ie,Se=ce,Pe=Y;ce=(b=l.distcode[Pe+((N&(1<<ue+Se)-1)>>ue)])>>>16&255,Y=65535&b,!(ue+(ie=b>>>24)<=R);){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}N>>>=ue,R-=ue,l.back+=ue}if(N>>>=ie,R-=ie,l.back+=ie,64&ce){T.msg="invalid distance code",l.mode=30;break}l.offset=Y,l.extra=15&ce,l.mode=24;case 24:if(l.extra){for(v=l.extra;R<v;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}l.offset+=N&(1<<l.extra)-1,N>>>=l.extra,R-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){T.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(ae===0)break e;if($=M-ae,l.offset>$){if(($=l.offset-$)>l.whave&&l.sane){T.msg="invalid distance too far back",l.mode=30;break}ne=$>l.wnext?($-=l.wnext,l.wsize-$):l.wnext-$,$>l.length&&($=l.length),be=l.window}else be=Q,ne=re-l.offset,$=l.length;for(ae<$&&($=ae),ae-=$,l.length-=$;Q[re++]=be[ne++],--$;);l.length===0&&(l.mode=21);break;case 26:if(ae===0)break e;Q[re++]=l.length,ae--,l.mode=21;break;case 27:if(l.wrap){for(;R<32;){if(q===0)break e;q--,N|=U[j++]<<R,R+=8}if(M-=ae,T.total_out+=M,l.total+=M,M&&(T.adler=l.check=l.flags?i(l.check,Q,M,re-M):c(l.check,Q,M,re-M)),M=ae,(l.flags?N:h(N))!==l.check){T.msg="incorrect data check",l.mode=30;break}R=N=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;R<32;){if(q===0)break e;q--,N+=U[j++]<<R,R+=8}if(N!==(4294967295&l.total)){T.msg="incorrect length check",l.mode=30;break}R=N=0}l.mode=29;case 29:G=1;break e;case 30:G=-3;break e;case 31:return-4;case 32:default:return u}return T.next_out=re,T.avail_out=ae,T.next_in=j,T.avail_in=q,l.hold=N,l.bits=R,(l.wsize||M!==T.avail_out&&l.mode<30&&(l.mode<27||F!==4))&&W(T,T.output,T.next_out,M-T.avail_out)?(l.mode=31,-4):(K-=T.avail_in,M-=T.avail_out,T.total_in+=K,T.total_out+=M,l.total+=M,l.wrap&&M&&(T.adler=l.check=l.flags?i(l.check,Q,M,T.next_out-M):c(l.check,Q,M,T.next_out-M)),T.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(K==0&&M===0||F===4)&&G===y&&(G=-5),G)},d.inflateEnd=function(T){if(!T||!T.state)return u;var F=T.state;return F.window&&(F.window=null),T.state=null,y},d.inflateGetHeader=function(T,F){var l;return T&&T.state?(2&(l=T.state).wrap)==0?u:((l.head=F).done=!1,y):u},d.inflateSetDictionary=function(T,F){var l,U=F.length;return T&&T.state?(l=T.state).wrap!==0&&l.mode!==11?u:l.mode===11&&c(1,F,U,0)!==l.check?-3:W(T,F,U,U)?(l.mode=31,-4):(l.havedict=1,y):u},d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,a,d){var r=t("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(k,w,y,u,g,s,f,h){var m,C,_,S,L,A,D,P,O,W=h.bits,T=0,F=0,l=0,U=0,Q=0,j=0,re=0,q=0,ae=0,N=0,R=null,K=0,M=new r.Buf16(16),$=new r.Buf16(16),ne=null,be=0;for(T=0;T<=15;T++)M[T]=0;for(F=0;F<u;F++)M[w[y+F]]++;for(Q=W,U=15;1<=U&&M[U]===0;U--);if(U<Q&&(Q=U),U===0)return g[s++]=20971520,g[s++]=20971520,h.bits=1,0;for(l=1;l<U&&M[l]===0;l++);for(Q<l&&(Q=l),T=q=1;T<=15;T++)if(q<<=1,(q-=M[T])<0)return-1;if(0<q&&(k===0||U!==1))return-1;for($[1]=0,T=1;T<15;T++)$[T+1]=$[T]+M[T];for(F=0;F<u;F++)w[y+F]!==0&&(f[$[w[y+F]]++]=F);if(A=k===0?(R=ne=f,19):k===1?(R=c,K-=257,ne=i,be-=257,256):(R=o,ne=p,-1),T=l,L=s,re=F=N=0,_=-1,S=(ae=1<<(j=Q))-1,k===1&&852<ae||k===2&&592<ae)return 1;for(;;){for(D=T-re,O=f[F]<A?(P=0,f[F]):f[F]>A?(P=ne[be+f[F]],R[K+f[F]]):(P=96,0),m=1<<T-re,l=C=1<<j;g[L+(N>>re)+(C-=m)]=D<<24|P<<16|O|0,C!==0;);for(m=1<<T-1;N&m;)m>>=1;if(m!==0?(N&=m-1,N+=m):N=0,F++,--M[T]==0){if(T===U)break;T=w[y+f[F]]}if(Q<T&&(N&S)!==_){for(re===0&&(re=Q),L+=l,q=1<<(j=T-re);j+re<U&&!((q-=M[j+re])<=0);)j++,q<<=1;if(ae+=1<<j,k===1&&852<ae||k===2&&592<ae)return 1;g[_=N&S]=Q<<24|j<<16|L-s|0}}return N!==0&&(g[L+N]=T-re<<24|64<<16|0),h.bits=Q,0}},{"../utils/common":41}],51:[function(t,a,d){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,a,d){var r=t("../utils/common"),c=0,i=1;function o(b){for(var E=b.length;0<=--E;)b[E]=0}var p=0,k=29,w=256,y=w+1+k,u=30,g=19,s=2*y+1,f=15,h=16,m=7,C=256,_=16,S=17,L=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(y+2));o(W);var T=new Array(2*u);o(T);var F=new Array(512);o(F);var l=new Array(256);o(l);var U=new Array(k);o(U);var Q,j,re,q=new Array(u);function ae(b,E,V,Z,z){this.static_tree=b,this.extra_bits=E,this.extra_base=V,this.elems=Z,this.max_length=z,this.has_stree=b&&b.length}function N(b,E){this.dyn_tree=b,this.max_code=0,this.stat_desc=E}function R(b){return b<256?F[b]:F[256+(b>>>7)]}function K(b,E){b.pending_buf[b.pending++]=255&E,b.pending_buf[b.pending++]=E>>>8&255}function M(b,E,V){b.bi_valid>h-V?(b.bi_buf|=E<<b.bi_valid&65535,K(b,b.bi_buf),b.bi_buf=E>>h-b.bi_valid,b.bi_valid+=V-h):(b.bi_buf|=E<<b.bi_valid&65535,b.bi_valid+=V)}function $(b,E,V){M(b,V[2*E],V[2*E+1])}function ne(b,E){for(var V=0;V|=1&b,b>>>=1,V<<=1,0<--E;);return V>>>1}function be(b,E,V){var Z,z,X=new Array(f+1),te=0;for(Z=1;Z<=f;Z++)X[Z]=te=te+V[Z-1]<<1;for(z=0;z<=E;z++){var ee=b[2*z+1];ee!==0&&(b[2*z]=ne(X[ee]++,ee))}}function ie(b){var E;for(E=0;E<y;E++)b.dyn_ltree[2*E]=0;for(E=0;E<u;E++)b.dyn_dtree[2*E]=0;for(E=0;E<g;E++)b.bl_tree[2*E]=0;b.dyn_ltree[2*C]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function ce(b){8<b.bi_valid?K(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function Y(b,E,V,Z){var z=2*E,X=2*V;return b[z]<b[X]||b[z]===b[X]&&Z[E]<=Z[V]}function ue(b,E,V){for(var Z=b.heap[V],z=V<<1;z<=b.heap_len&&(z<b.heap_len&&Y(E,b.heap[z+1],b.heap[z],b.depth)&&z++,!Y(E,Z,b.heap[z],b.depth));)b.heap[V]=b.heap[z],V=z,z<<=1;b.heap[V]=Z}function Se(b,E,V){var Z,z,X,te,ee=0;if(b.last_lit!==0)for(;Z=b.pending_buf[b.d_buf+2*ee]<<8|b.pending_buf[b.d_buf+2*ee+1],z=b.pending_buf[b.l_buf+ee],ee++,Z===0?$(b,z,E):($(b,(X=l[z])+w+1,E),(te=A[X])!==0&&M(b,z-=U[X],te),$(b,X=R(--Z),V),(te=D[X])!==0&&M(b,Z-=q[X],te)),ee<b.last_lit;);$(b,C,E)}function Pe(b,E){var V,Z,z,X=E.dyn_tree,te=E.stat_desc.static_tree,ee=E.stat_desc.has_stree,le=E.stat_desc.elems,ye=-1;for(b.heap_len=0,b.heap_max=s,V=0;V<le;V++)X[2*V]!==0?(b.heap[++b.heap_len]=ye=V,b.depth[V]=0):X[2*V+1]=0;for(;b.heap_len<2;)X[2*(z=b.heap[++b.heap_len]=ye<2?++ye:0)]=1,b.depth[z]=0,b.opt_len--,ee&&(b.static_len-=te[2*z+1]);for(E.max_code=ye,V=b.heap_len>>1;1<=V;V--)ue(b,X,V);for(z=le;V=b.heap[1],b.heap[1]=b.heap[b.heap_len--],ue(b,X,1),Z=b.heap[1],b.heap[--b.heap_max]=V,b.heap[--b.heap_max]=Z,X[2*z]=X[2*V]+X[2*Z],b.depth[z]=(b.depth[V]>=b.depth[Z]?b.depth[V]:b.depth[Z])+1,X[2*V+1]=X[2*Z+1]=z,b.heap[1]=z++,ue(b,X,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],(function(ge,Ne){var Tt,Ke,St,we,Nt,ta,$e=Ne.dyn_tree,Ta=Ne.max_code,pn=Ne.stat_desc.static_tree,gn=Ne.stat_desc.has_stree,bn=Ne.stat_desc.extra_bits,Sa=Ne.stat_desc.extra_base,xt=Ne.stat_desc.max_length,Ft=0;for(we=0;we<=f;we++)ge.bl_count[we]=0;for($e[2*ge.heap[ge.heap_max]+1]=0,Tt=ge.heap_max+1;Tt<s;Tt++)xt<(we=$e[2*$e[2*(Ke=ge.heap[Tt])+1]+1]+1)&&(we=xt,Ft++),$e[2*Ke+1]=we,Ta<Ke||(ge.bl_count[we]++,Nt=0,Sa<=Ke&&(Nt=bn[Ke-Sa]),ta=$e[2*Ke],ge.opt_len+=ta*(we+Nt),gn&&(ge.static_len+=ta*(pn[2*Ke+1]+Nt)));if(Ft!==0){do{for(we=xt-1;ge.bl_count[we]===0;)we--;ge.bl_count[we]--,ge.bl_count[we+1]+=2,ge.bl_count[xt]--,Ft-=2}while(0<Ft);for(we=xt;we!==0;we--)for(Ke=ge.bl_count[we];Ke!==0;)Ta<(St=ge.heap[--Tt])||($e[2*St+1]!==we&&(ge.opt_len+=(we-$e[2*St+1])*$e[2*St],$e[2*St+1]=we),Ke--)}})(b,E),be(X,ye,b.bl_count)}function n(b,E,V){var Z,z,X=-1,te=E[1],ee=0,le=7,ye=4;for(te===0&&(le=138,ye=3),E[2*(V+1)+1]=65535,Z=0;Z<=V;Z++)z=te,te=E[2*(Z+1)+1],++ee<le&&z===te||(ee<ye?b.bl_tree[2*z]+=ee:z!==0?(z!==X&&b.bl_tree[2*z]++,b.bl_tree[2*_]++):ee<=10?b.bl_tree[2*S]++:b.bl_tree[2*L]++,X=z,ye=(ee=0)===te?(le=138,3):z===te?(le=6,3):(le=7,4))}function G(b,E,V){var Z,z,X=-1,te=E[1],ee=0,le=7,ye=4;for(te===0&&(le=138,ye=3),Z=0;Z<=V;Z++)if(z=te,te=E[2*(Z+1)+1],!(++ee<le&&z===te)){if(ee<ye)for(;$(b,z,b.bl_tree),--ee!=0;);else z!==0?(z!==X&&($(b,z,b.bl_tree),ee--),$(b,_,b.bl_tree),M(b,ee-3,2)):ee<=10?($(b,S,b.bl_tree),M(b,ee-3,3)):($(b,L,b.bl_tree),M(b,ee-11,7));X=z,ye=(ee=0)===te?(le=138,3):z===te?(le=6,3):(le=7,4)}}o(q);var B=!1;function v(b,E,V,Z){M(b,(p<<1)+(Z?1:0),3),(function(z,X,te,ee){ce(z),K(z,te),K(z,~te),r.arraySet(z.pending_buf,z.window,X,te,z.pending),z.pending+=te})(b,E,V)}d._tr_init=function(b){B||((function(){var E,V,Z,z,X,te=new Array(f+1);for(z=Z=0;z<k-1;z++)for(U[z]=Z,E=0;E<1<<A[z];E++)l[Z++]=z;for(l[Z-1]=z,z=X=0;z<16;z++)for(q[z]=X,E=0;E<1<<D[z];E++)F[X++]=z;for(X>>=7;z<u;z++)for(q[z]=X<<7,E=0;E<1<<D[z]-7;E++)F[256+X++]=z;for(V=0;V<=f;V++)te[V]=0;for(E=0;E<=143;)W[2*E+1]=8,E++,te[8]++;for(;E<=255;)W[2*E+1]=9,E++,te[9]++;for(;E<=279;)W[2*E+1]=7,E++,te[7]++;for(;E<=287;)W[2*E+1]=8,E++,te[8]++;for(be(W,y+1,te),E=0;E<u;E++)T[2*E+1]=5,T[2*E]=ne(E,5);Q=new ae(W,A,w+1,y,f),j=new ae(T,D,0,u,f),re=new ae(new Array(0),P,0,g,m)})(),B=!0),b.l_desc=new N(b.dyn_ltree,Q),b.d_desc=new N(b.dyn_dtree,j),b.bl_desc=new N(b.bl_tree,re),b.bi_buf=0,b.bi_valid=0,ie(b)},d._tr_stored_block=v,d._tr_flush_block=function(b,E,V,Z){var z,X,te=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=(function(ee){var le,ye=4093624447;for(le=0;le<=31;le++,ye>>>=1)if(1&ye&&ee.dyn_ltree[2*le]!==0)return c;if(ee.dyn_ltree[18]!==0||ee.dyn_ltree[20]!==0||ee.dyn_ltree[26]!==0)return i;for(le=32;le<w;le++)if(ee.dyn_ltree[2*le]!==0)return i;return c})(b)),Pe(b,b.l_desc),Pe(b,b.d_desc),te=(function(ee){var le;for(n(ee,ee.dyn_ltree,ee.l_desc.max_code),n(ee,ee.dyn_dtree,ee.d_desc.max_code),Pe(ee,ee.bl_desc),le=g-1;3<=le&&ee.bl_tree[2*O[le]+1]===0;le--);return ee.opt_len+=3*(le+1)+5+5+4,le})(b),z=b.opt_len+3+7>>>3,(X=b.static_len+3+7>>>3)<=z&&(z=X)):z=X=V+5,V+4<=z&&E!==-1?v(b,E,V,Z):b.strategy===4||X===z?(M(b,2+(Z?1:0),3),Se(b,W,T)):(M(b,4+(Z?1:0),3),(function(ee,le,ye,ge){var Ne;for(M(ee,le-257,5),M(ee,ye-1,5),M(ee,ge-4,4),Ne=0;Ne<ge;Ne++)M(ee,ee.bl_tree[2*O[Ne]+1],3);G(ee,ee.dyn_ltree,le-1),G(ee,ee.dyn_dtree,ye-1)})(b,b.l_desc.max_code+1,b.d_desc.max_code+1,te+1),Se(b,b.dyn_ltree,b.dyn_dtree)),ie(b),Z&&ce(b)},d._tr_tally=function(b,E,V){return b.pending_buf[b.d_buf+2*b.last_lit]=E>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&E,b.pending_buf[b.l_buf+b.last_lit]=255&V,b.last_lit++,E===0?b.dyn_ltree[2*V]++:(b.matches++,E--,b.dyn_ltree[2*(l[V]+w+1)]++,b.dyn_dtree[2*R(E)]++),b.last_lit===b.lit_bufsize-1},d._tr_align=function(b){M(b,2,3),$(b,C,W),(function(E){E.bi_valid===16?(K(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)})(b)}},{"../utils/common":41}],53:[function(t,a,d){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,a,d){(function(r){(function(c,i){if(!c.setImmediate){var o,p,k,w,y=1,u={},g=!1,s=c.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(c);f=f&&f.setTimeout?f:c,o={}.toString.call(c.process)==="[object process]"?function(_){process.nextTick(function(){m(_)})}:(function(){if(c.postMessage&&!c.importScripts){var _=!0,S=c.onmessage;return c.onmessage=function(){_=!1},c.postMessage("","*"),c.onmessage=S,_}})()?(w="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",C,!1):c.attachEvent("onmessage",C),function(_){c.postMessage(w+_,"*")}):c.MessageChannel?((k=new MessageChannel).port1.onmessage=function(_){m(_.data)},function(_){k.port2.postMessage(_)}):s&&"onreadystatechange"in s.createElement("script")?(p=s.documentElement,function(_){var S=s.createElement("script");S.onreadystatechange=function(){m(_),S.onreadystatechange=null,p.removeChild(S),S=null},p.appendChild(S)}):function(_){setTimeout(m,0,_)},f.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var S=new Array(arguments.length-1),L=0;L<S.length;L++)S[L]=arguments[L+1];var A={callback:_,args:S};return u[y]=A,o(y),y++},f.clearImmediate=h}function h(_){delete u[_]}function m(_){if(g)setTimeout(m,0,_);else{var S=u[_];if(S){g=!0;try{(function(L){var A=L.callback,D=L.args;switch(D.length){case 0:A();break;case 1:A(D[0]);break;case 2:A(D[0],D[1]);break;case 3:A(D[0],D[1],D[2]);break;default:A.apply(i,D)}})(S)}finally{h(_),g=!1}}}}function C(_){_.source===c&&typeof _.data=="string"&&_.data.indexOf(w)===0&&m(+_.data.slice(w.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Bt<"u"?Bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ca)),ca.exports}var fi=hi();const hn=Un(fi),mi=({onSave:x,onClose:I})=>{const{t}=de(),a=Fe(),{handleSubmit:d}=a,r=({fileName:c})=>x(c);return e(vr,{titleKey:"fileNameDialogTitle",open:!0,toggleDialog:I,onConfirm:()=>d(r)(),children:e(ft,{isHorizontal:!0,onSubmit:d(r),children:e(Ve,{...a,children:e(Ae,{name:"fileName",label:t("fileName"),defaultValue:"quick-theme.jar"})})})})},da=({name:x,onChange:I})=>{const[t,a]=J(""),[d,r]=J(),[c,i]=J(!1),{control:o,watch:p}=Ct(),k=y=>new Promise(u=>{const g=new FileReader;g.onload=s=>{u(s.target?.result)},g.readAsDataURL(y)});d&&k(d).then(y=>{a(y),I?.(y)});const w=p(x);return at(()=>{w&&k(w).then(y=>{a(y)})},[w]),e(fe,{name:x,control:o,defaultValue:"",render:({field:y})=>H(ve,{children:[c&&e(tt,{}),t&&e("img",{src:t,width:200,height:200}),e(Vn,{id:x,type:"dataURL",filename:d?.name,dropzoneProps:{accept:{"image/*":[".png",".gif",".jpeg",".jpg",".svg",".webp"]}},onFileInputChange:(u,g)=>r(g),onReadStarted:()=>i(!0),onReadFinished:(u,g)=>{r(g),y.onChange(g),i(!1)},onClearClick:()=>{r(void 0),y.onChange(void 0),a("")}})]})})},fn=[{name:"font",defaultValue:'"RedHatText", helvetica, arial, sans-serif',variable:"FontFamily--text"},{name:"errorColor",defaultValue:{light:"#c9190b",dark:"#fe5142"},variable:"danger-color--100"},{name:"successColor",defaultValue:{light:"#3e8635",dark:"#5ba352"},variable:"success-color--100"},{name:"activeColor",defaultValue:{light:"#0066cc",dark:"#1fa7f8"},variable:"active-color--100"},{name:"primaryColor",defaultValue:"#0066cc",variable:{light:"primary-color--100",dark:"primary-color--300"}},{name:"primaryColorHover",defaultValue:"#004080",variable:"primary-color--200"},{name:"secondaryColor",defaultValue:{light:"#0066cc",dark:"#1fa7f8"},variable:"primary-color--100"},{name:"linkColor",defaultValue:{light:"#0066cc",dark:"#1fa7f8"},variable:"link--Color"},{name:"linkColorHover",defaultValue:{light:"#004080",dark:"#73bcf7"},variable:"link--Color--hover"},{name:"backgroundColor",defaultValue:{light:"#ffffff",dark:"#1b1d21"},variable:"BackgroundColor--light-100"},{name:"backgroundColorAccent",defaultValue:"#26292d",variable:{dark:"BackgroundColor--300"}},{name:"backgroundColorNav",defaultValue:{light:"#212427",dark:"#1b1d21"},variable:{light:"BackgroundColor--dark-300",dark:"BackgroundColor--100"}},{name:"backgroundColorHeader",defaultValue:{light:"#151515",dark:"#030303"},variable:{light:"BackgroundColor--dark-100",dark:"palette--black-1000"}},{name:"iconColor",defaultValue:"#f0f0f0",variable:"Color--light-200"},{name:"textColor",defaultValue:{light:"#151515",dark:"#e0e0e0"},variable:"Color--100"},{name:"lightTextColor",defaultValue:{light:"#ffffff",dark:"#e0e0e0"},variable:"Color--light-100"},{name:"inputBackgroundColor",defaultValue:"#36373a",variable:{dark:"BackgroundColor--400"}},{name:"inputTextColor",defaultValue:{light:"#151515",dark:"#e0e0e0"},variable:"Color--dark-100"}],Xt=(x,I)=>typeof x=="string"?x:x[I],pi=()=>fn.filter(x=>typeof x.defaultValue!="string").map(x=>({name:x.name,defaultValue:Xt(x.defaultValue,"light"),variable:Xt(x.variable,"light")})),gi=()=>fn.map(x=>({name:x.name,defaultValue:Xt(x.defaultValue,"dark"),variable:Xt(x.variable,"dark")})),bi=({cssVars:x})=>H(ve,{children:[e("style",{children:`
      .preview {
        ${Object.entries(x).map(([I,t])=>`--pf-v5-global--${I}: ${t};`).join(`
`)}
      }
    `}),e(Hn,{className:"preview",header:e(Kn,{}),children:H(xe,{variant:"light",style:{backgroundColor:x["BackgroundColor--light-100"]},children:[H(zt,{activeKey:1,className:"pf-v5-u-p-lg",children:[e(me,{eventKey:0,title:e(pe,{children:"Tab One"})}),e(me,{eventKey:1,title:e(pe,{children:"Tab Two"})})]}),e(ut,{title:"Error",isInline:!0,variant:"danger"}),e(ut,{title:"Success",isInline:!0,variant:"success"}),e("p",{className:"pf-v5-u-p-lg pf-v5-c-content",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."}),H(ft,{children:[e(Dt,{id:"test",placeholder:"Text input"}),e(oe,{variant:"primary",children:"Primary"}),e(oe,{variant:"secondary",children:"Secondary"}),e(oe,{variant:"link",children:"Link button"})]})]})})]}),vi=({onUpload:x})=>{const{t:I}=de(),t=()=>{const d=document.getElementById("jarUpload");d&&d.click()},a=async d=>{const r=d.target.files?.[0];if(!r)return;const i=await new hn().loadAsync(r),o=await i.file("theme-settings.json")?.async("string"),p=JSON.parse(o||"{}");p.bgimage=await i.file(p.bgimage)?.async("blob"),p.favicon=await i.file(p.favicon)?.async("blob"),p.logo=await i.file(p.logo)?.async("blob"),x(p)};return H(ve,{children:[e("input",{id:"jarUpload",type:"file",accept:".jar",style:{display:"none"},onChange:d=>a(d)}),e(oe,{variant:"secondary",onClick:t,children:I("uploadGeneratedThemeJar")})]})},yi=({name:x,color:I,label:t,...a})=>{const{t:d}=de(),{control:r,setValue:c}=Ct(),i=We({control:r,name:x});return H(Wa,{children:[e(fa,{isFill:!0,children:e(Ae,{...a,name:x,label:d(t)})}),e("input",{type:"color",value:i||I,onChange:o=>c(x,o.target.value)})]})},Ma=x=>{x==="light"?(document.querySelector('meta[name="color-scheme"]').setAttribute("content","light"),document.documentElement.classList.remove("pf-v5-theme-dark")):document.documentElement.classList.add("pf-v5-theme-dark")},Ua=({realm:x,save:I,theme:t})=>{const{t:a}=de(),d=Fe(),{handleSubmit:r,watch:c}=d,i=c(),o=jn(),[p,k,w]=rt(),y=window.matchMedia("(prefers-color-scheme: dark)"),u=ct(()=>t==="light"?pi():gi(),[]),g=()=>{d.reset({[t]:u.reduce((m,C)=>({...m,[C.variable]:C.defaultValue}),{})})},s=()=>{g()},f=m=>{d.setValue("bgimage",m.bgimage),d.setValue("favicon",m.favicon),d.setValue("logo",m.logo),d.reset(m)},h=m=>{const C=JSON.parse(x.attributes?.style||"{}");I({...x,favicon:m.favicon,logo:m.logo,bgimage:m.bgimage,fileName:m.name,attributes:{...x.attributes,style:JSON.stringify({...C,...m})}})};return at(()=>(s(),Ma(t),()=>{Ma(y.matches?"dark":"light")}),[x]),H(ve,{children:[p&&e(mi,{onSave:async m=>{await r(C=>h({...C,name:m}))(),w(!1)},onClose:k}),H(xe,{variant:"light",children:[e(_t,{className:"pf-v5-u-mb-lg",children:e(Ge,{children:a("themeColorInfo")})}),y.matches&&t==="light"&&e(ut,{variant:"info",isInline:!0,title:a("themePreviewInfo")}),H(ea,{className:"pf-v5-u-pt-lg",children:[e(Ue,{children:e(_e,{isHorizontal:!0,role:"manage-realm",children:H(Ve,{...d,children:[e(se,{label:a("favicon"),children:e(da,{name:"favicon"})}),e(se,{label:a("logo"),children:e(da,{name:"logo",onChange:m=>o?.setLogo(m)})}),e(se,{label:a("backgroundImage"),children:e(da,{name:"bgimage"})}),u.map(m=>e(yi,{color:m.defaultValue,name:`${t}.${m.variable}`,label:m.name},m.name))]})})}),e(Ue,{grow:{default:"grow"},style:{zIndex:0},children:e(bi,{cssVars:i?.[t]||{}})})]}),e($t,{name:"colors",saveText:a("downloadThemeJar"),save:k,reset:s,children:e(vi,{onUpload:f})})]})]})},Va=({realm:x,save:I})=>{const{t}=de(),a=Fe(),{handleSubmit:d,setValue:r}=a,c=mt().themes,i=()=>{Rt(x,r)};at(i,[]);const o=p=>[{key:"",value:t("choose")},...p];return e(xe,{variant:"light",children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:d(I),children:[H(Ve,{...a,children:[e(bt,{name:"attributes.darkMode",labelIcon:t("darkModeEnabledHelp"),label:t("darkModeEnabled"),defaultValue:"true",stringify:!0}),e(Me,{id:"kc-login-theme",name:"loginTheme",label:t("loginTheme"),labelIcon:t("loginThemeHelp"),controller:{defaultValue:""},options:o(c.login.map(p=>({key:p.name,value:p.name})))}),e(Me,{id:"kc-account-theme",name:"accountTheme",label:t("accountTheme"),labelIcon:t("accountThemeHelp"),placeholderText:t("selectATheme"),controller:{defaultValue:""},options:o(c.account.map(p=>({key:p.name,value:p.name})))}),e(Me,{id:"kc-admin-theme",name:"adminTheme",label:t("adminTheme"),labelIcon:t("adminThemeHelp"),placeholderText:t("selectATheme"),controller:{defaultValue:""},options:o(c.admin.map(p=>({key:p.name,value:p.name})))}),e(Me,{id:"kc-email-theme",name:"emailTheme",label:t("emailTheme"),labelIcon:t("emailThemeHelp"),placeholderText:t("selectATheme"),controller:{defaultValue:""},options:o(c.email.map(p=>({key:p.name,value:p.name})))})]}),H(He,{children:[e(oe,{variant:"primary",type:"submit","data-testid":"themes-tab-save",children:t("save")}),e(oe,{variant:"link",onClick:i,children:t("revert")})]})]})})};function ki({realm:x,save:I}){const{t}=de(),{realm:a}=Ce(),{environment:d}=ba(),r=Qt(),c=async w=>{const y=new hn,u=JSON.parse(w.attributes?.style??"{}"),{favicon:g,logo:s,bgimage:f,fileName:h}=w,m="img/logo"+s?.name?.substring(s?.name?.lastIndexOf(".")),C="img/bgimage"+f?.name?.substring(f?.name?.lastIndexOf("."));g&&y.file("theme/quick-theme/common/resources/img/favicon.ico",g),s&&y.file(`theme/quick-theme/common/resources/${m}`,s),f&&y.file(`theme/quick-theme/common/resources/${C}`,f),y.file("theme/quick-theme/admin/theme.properties",`
parent=keycloak.v2
import=common/quick-theme

${s?"logo="+m:""}
styles=css/theme-styles.css
`),y.file("theme/quick-theme/account/theme.properties",`
parent=keycloak.v3
import=common/quick-theme

${s?"logo="+m:""}
styles=css/theme-styles.css
`),y.file("theme/quick-theme/login/theme.properties",`
parent=keycloak.v2
import=common/quick-theme

styles=css/login.css css/theme-styles.css
`),y.file("META-INF/keycloak-themes.json",`{
  "themes": [{
      "name" : "quick-theme",
      "types": [ "login", "account", "admin", "common" ]
  }]
}`),y.file("theme-settings.json",JSON.stringify({...u,logo:s?`theme/quick-theme/common/resources/${m}`:"",bgimage:f?`theme/quick-theme/common/resources/${C}`:"",favicon:g?"theme/quick-theme/common/resources/img/favicon.ico":""}));const _=L=>Object.entries(L||{}).map(([A,D])=>`--pf-v5-global--${A}: ${D};`).join(`
`),S=(await fetch(qa(d.resourceUrl,"/theme/login.css"))).text();y.file("theme/quick-theme/common/resources/css/login.css",S),y.file("theme/quick-theme/common/resources/css/theme-styles.css",`:root {
        --keycloak-bg-logo-url: url('../${C}');
        --keycloak-logo-url: url('../${m}');
        --keycloak-logo-height: 63px;
        --keycloak-logo-width: 300px;
        ${_(u.light)}
      }
      .pf-v5-theme-dark {
        ${_(u.dark)}
      }
      `),await y.generateAsync({type:"blob"}).then(L=>{const A=URL.createObjectURL(L),D=document.createElement("a");D.href=A,D.download=h||"quick-theme.jar",D.click(),URL.revokeObjectURL(A)})},i=w=>({realm:a,tab:w}),o=dt(Mt(i("settings"))),p=dt(Mt(i("lightColors"))),k=dt(Mt(i("darkColors")));return r(nt.QuickTheme)?H(Pt,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:Mt({realm:a,tab:"settings"}),children:[e(me,{id:"themes-settings",title:H(pe,{children:[t("themes")," "]}),"data-testid":"themes-settings-tab",...o,children:e(Va,{realm:x,save:I})}),e(me,{id:"lightColors",title:e(pe,{children:t("themeColorsLight")}),"data-testid":"lightColors-tab",...p,children:e(Ea,{children:e(Ua,{realm:x,save:c,theme:"light"})})}),e(me,{id:"darkColors",title:e(pe,{children:t("themeColorsDark")}),"data-testid":"darkColors-tab",...k,children:e(Ea,{children:e(Ua,{realm:x,save:c,theme:"dark"})})})]}):e(Va,{realm:x,save:I})}const _i=({realm:x,save:I})=>{const{t}=de(),{addAlert:a}=Oe(),d=mt(),r=Qt(),{whoAmI:c}=Ot(),[i,o]=J(!1),p=Gn(d.providers.signature.providers),{control:k,register:w,reset:y,formState:u,handleSubmit:g}=Ct(),s=()=>{a(t("oid4vciFormValidationError"),Ie.danger)},f=We({control:k,name:"offlineSessionMaxLifespanEnabled",defaultValue:x.offlineSessionMaxLifespanEnabled}),h=We({control:k,name:"ssoSessionIdleTimeout",defaultValue:36e3}),m=We({control:k,name:"revokeRefreshToken",defaultValue:!1}),C=[{title:t("general"),panel:H(_e,{isHorizontal:!0,role:"manage-realm",onSubmit:g(I),children:[e(se,{label:t("defaultSigAlg"),fieldId:"kc-default-signature-algorithm",labelIcon:e(he,{helpText:t("defaultSigAlgHelp"),fieldLabelId:"algorithm"}),children:e(fe,{name:"defaultSignatureAlgorithm",defaultValue:"RS256",control:k,render:({field:_})=>e(qe,{toggleId:"kc-default-sig-alg",onToggle:()=>o(!i),onSelect:S=>{_.onChange(S.toString()),o(!1)},selections:_.value?.toString(),variant:Qe.single,"aria-label":t("defaultSigAlg"),isOpen:i,"data-testid":"select-default-sig-alg",children:p.map((S,L)=>e(Le,{selected:S===_.value,value:S,children:S},`default-sig-alg-${L}`))})})}),r(nt.DeviceFlow)&&H(ve,{children:[e(se,{label:t("oAuthDeviceCodeLifespan"),fieldId:"oAuthDeviceCodeLifespan",labelIcon:e(he,{helpText:t("oAuthDeviceCodeLifespanHelp"),fieldLabelId:"oAuthDeviceCodeLifespan"}),children:e(fe,{name:"oauth2DeviceCodeLifespan",defaultValue:0,control:k,render:({field:_})=>e(ke,{id:"oAuthDeviceCodeLifespan","data-testid":"oAuthDeviceCodeLifespan",value:_.value||0,onChange:_.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("oAuthDevicePollingInterval"),fieldId:"oAuthDevicePollingInterval",labelIcon:e(he,{helpText:t("oAuthDevicePollingIntervalHelp"),fieldLabelId:"oAuthDevicePollingInterval"}),children:e(fe,{name:"oauth2DevicePollingInterval",defaultValue:0,control:k,render:({field:_})=>e(Aa,{id:"oAuthDevicePollingInterval",value:_.value,min:0,onPlus:()=>_.onChange(Number(_?.value)+1),onMinus:()=>_.onChange(Number(_?.value)>0?Number(_?.value)-1:0),onChange:S=>{const L=Number(S.currentTarget.value);_.onChange(isNaN(L)?0:L)},placeholder:t("oAuthDevicePollingInterval")})})}),e(se,{label:t("shortVerificationUri"),fieldId:"shortVerificationUri",labelIcon:e(he,{helpText:t("shortVerificationUriTooltipHelp"),fieldLabelId:"shortVerificationUri"}),children:e(Dt,{id:"shortVerificationUri",placeholder:t("shortVerificationUri"),...w("attributes.shortVerificationUri")})}),e(se,{label:t("parRequestUriLifespan"),fieldId:"parRequestUriLifespan",labelIcon:e(he,{helpText:t("parRequestUriLifespanHelp"),fieldLabelId:"parRequestUriLifespan"}),children:e(fe,{name:"attributes.parRequestUriLifespan",control:k,render:({field:_})=>e(ke,{id:"parRequestUriLifespan",className:"par-request-uri-lifespan","data-testid":"par-request-uri-lifespan-input","aria-label":"par-request-uri-lifespan",value:_.value,onChange:_.onChange})})})]})]})},{title:t("refreshTokens"),panel:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:g(I),children:[e(se,{hasNoPaddingTop:!0,label:t("revokeRefreshToken"),fieldId:"kc-revoke-refresh-token",labelIcon:e(he,{helpText:t("revokeRefreshTokenHelp"),fieldLabelId:"revokeRefreshToken"}),children:e(fe,{name:"revokeRefreshToken",control:k,defaultValue:!1,render:({field:_})=>e(Re,{id:"kc-revoke-refresh-token","data-testid":"revoke-refresh-token-switch","aria-label":t("revokeRefreshToken"),label:t("enabled"),labelOff:t("disabled"),isChecked:_.value,onChange:_.onChange})})}),m&&e(se,{label:t("refreshTokenMaxReuse"),labelIcon:e(he,{helpText:t("refreshTokenMaxReuseHelp"),fieldLabelId:"refreshTokenMaxReuse"}),fieldId:"refreshTokenMaxReuse",children:e(fe,{name:"refreshTokenMaxReuse",defaultValue:0,control:k,render:({field:_})=>e(Aa,{type:"text",id:"refreshTokenMaxReuseMs",value:_.value,onPlus:()=>_.onChange(_.value+1),onMinus:()=>_.onChange(_.value-1),onChange:S=>_.onChange(Number(S.target.value))})})})]})},{title:t("accessTokens"),panel:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:g(I),children:[H(se,{label:t("accessTokenLifespan"),fieldId:"accessTokenLifespan",labelIcon:e(he,{helpText:t("accessTokenLifespanHelp"),fieldLabelId:"accessTokenLifespan"}),children:[e(fe,{name:"accessTokenLifespan",control:k,render:({field:_})=>e(ke,{validated:_.value>h?"warning":"default",className:"kc-access-token-lifespan","data-testid":"access-token-lifespan-input","aria-label":"access-token-lifespan",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})}),e(Wn,{children:e(qn,{children:e(Zn,{children:t("recommendedSsoTimeout",{time:xr(h,c.locale)})})})})]}),e(se,{label:t("accessTokenLifespanImplicitFlow"),fieldId:"accessTokenLifespanImplicitFlow",labelIcon:e(he,{helpText:t("accessTokenLifespanImplicitFlow"),fieldLabelId:"accessTokenLifespanImplicitFlow"}),children:e(fe,{name:"accessTokenLifespanForImplicitFlow",control:k,render:({field:_})=>e(ke,{className:"kc-access-token-lifespan-implicit","data-testid":"access-token-lifespan-implicit-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("clientLoginTimeout"),fieldId:"clientLoginTimeout",labelIcon:e(he,{helpText:t("clientLoginTimeoutHelp"),fieldLabelId:"clientLoginTimeout"}),children:e(fe,{name:"accessCodeLifespan",control:k,render:({field:_})=>e(ke,{className:"kc-client-login-timeout","data-testid":"client-login-timeout-input","aria-label":"client-login-timeout",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),f&&e(se,{label:t("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:e(he,{helpText:t("offlineSessionMaxHelp"),fieldLabelId:"offlineSessionMax"}),children:e(fe,{name:"offlineSessionMaxLifespan",control:k,render:({field:_})=>e(ke,{className:"kc-offline-session-max","data-testid":"offline-session-max-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})})]})},{title:t("actionTokens"),panel:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:g(I),children:[e(se,{label:t("userInitiatedActionLifespan"),id:"kc-user-initiated-action-lifespan",fieldId:"userInitiatedActionLifespan",labelIcon:e(he,{helpText:t("userInitiatedActionLifespanHelp"),fieldLabelId:"userInitiatedActionLifespan"}),children:e(fe,{name:"actionTokenGeneratedByUserLifespan",control:k,render:({field:_})=>e(ke,{className:"kc-user-initiated-action-lifespan","data-testid":"user-initiated-action-lifespan","aria-label":"user-initiated-action-lifespan",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("defaultAdminInitiated"),fieldId:"defaultAdminInitiated",id:"default-admin-initiated-label",labelIcon:e(he,{helpText:t("defaultAdminInitiatedActionLifespanHelp"),fieldLabelId:"defaultAdminInitiated"}),children:e(fe,{name:"actionTokenGeneratedByAdminLifespan",control:k,render:({field:_})=>e(ke,{className:"kc-default-admin-initiated","data-testid":"default-admin-initated-input","aria-label":"default-admin-initated-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),e(Ge,{className:"kc-override-action-tokens-subtitle",component:va.h1,children:t("overrideActionTokens")}),e(se,{label:t("emailVerification"),fieldId:"emailVerification",id:"email-verification",labelIcon:e(he,{helpText:t("emailVerificationHelp"),fieldLabelId:"emailVerification"}),children:e(fe,{name:`attributes.${Ut("actionTokenGeneratedByUserLifespan.verify-email")}`,defaultValue:"",control:k,render:({field:_})=>e(ke,{className:"kc-email-verification","data-testid":"email-verification-input",value:_.value,onChange:S=>_.onChange(S.toString()),units:["minute","hour","day"]})})}),e(se,{label:t("idpAccountEmailVerification"),fieldId:"idpAccountEmailVerification",id:"idp-acct-label",labelIcon:e(he,{helpText:t("idpAccountEmailVerificationHelp"),fieldLabelId:"idpAccountEmailVerification"}),children:e(fe,{name:`attributes.${Ut("actionTokenGeneratedByUserLifespan.idp-verify-account-via-email")}`,defaultValue:"",control:k,render:({field:_})=>e(ke,{className:"kc-idp-email-verification","data-testid":"idp-email-verification-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("forgotPassword"),fieldId:"forgotPassword",id:"forgot-password-label",labelIcon:e(he,{helpText:t("forgotPasswordHelp"),fieldLabelId:"forgotPassword"}),children:e(fe,{name:`attributes.${Ut("actionTokenGeneratedByUserLifespan.reset-credentials")}`,defaultValue:"",control:k,render:({field:_})=>e(ke,{className:"kc-forgot-pw","data-testid":"forgot-pw-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),e(se,{label:t("executeActions"),fieldId:"executeActions",id:"execute-actions",labelIcon:e(he,{helpText:t("executeActionsHelp"),fieldLabelId:"executeActions"}),children:e(fe,{name:`attributes.${Ut("actionTokenGeneratedByUserLifespan.execute-actions")}`,defaultValue:"",control:k,render:({field:_})=>e(ke,{className:"kc-execute-actions","data-testid":"execute-actions-input",value:_.value,onChange:_.onChange,units:["minute","hour","day"]})})}),!r(nt.OpenId4VCI)&&e($t,{name:"tokens-tab",isSubmit:!0,isDisabled:!u.isDirty,reset:()=>y(x)})]})},{title:t("oid4vciAttributes"),isHidden:!r(nt.OpenId4VCI),panel:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg",onSubmit:g(I,s),children:[e(Jt,{name:gt("attributes.vc.c-nonce-lifetime-seconds"),label:t("oid4vciNonceLifetime"),labelIcon:t("oid4vciNonceLifetimeHelp"),controller:{defaultValue:60,rules:{min:30}},min:30,units:["second","minute","hour"]}),e(Jt,{name:gt("attributes.preAuthorizedCodeLifespanS"),label:t("preAuthorizedCodeLifespan"),labelIcon:t("preAuthorizedCodeLifespanHelp"),controller:{defaultValue:30,rules:{min:30}},min:30,units:["second","minute","hour"]}),e($t,{name:"tokens-tab",isSubmit:!0,isDisabled:!u.isDirty,reset:()=>y(x)})]})}];return e($n,{label:t("jumpToSection"),className:"pf-v5-u-px-lg pf-v5-u-pb-lg",sections:C})},wi=()=>{const{adminClient:x}=Te(),{t:I}=de(),[t,a]=rt(),[d,r]=rt(),[c,i]=J(),[o,p]=J([]),[k,w]=J(0),[y,u]=J(0),g=()=>u(y+1),{realm:s}=Ce(),{addAlert:f,addError:h}=Oe(),{enabled:m}=Jn(),{hasAccess:C}=ya(),_=C("view-users","manage-realm");et(()=>x.realms.getDefaultGroups({realm:s}),O=>{i(O),w(k+1)},[y]);const S=()=>Promise.resolve(c),L=async()=>{try{await Promise.all(o.map(O=>x.realms.removeDefaultGroup({realm:s,id:O.id}))),f(I("groupRemove",{count:o.length}),Ie.success),p([])}catch(O){h("groupRemoveError",O)}g()},A=async O=>{try{await Promise.all(O.map(W=>x.realms.addDefaultGroup({realm:s,id:W.id}))),f(I("defaultGroupAdded",{count:O.length}),Ie.success)}catch(W){h("defaultGroupAddedError",W)}g()},[D,P]=De({titleKey:I("removeConfirmTitle",{count:o.length}),messageKey:I("removeConfirm",{count:o.length}),continueButtonLabel:"delete",continueButtonVariant:Ee.danger,onConfirm:L});return c?H(ve,{children:[e(P,{}),d&&e(Er,{type:"selectMany",text:{title:"addDefaultGroups",ok:"add"},onConfirm:async O=>{await A(O||[]),r()},onClose:r}),m&&e(Yn,{bodyContent:H(Yt,{i18nKey:"defaultGroupsHelp",children:[" ",e(Be,{to:La({realm:s})}),"."]}),children:e(_t,{className:"keycloak__section_intro__help",style:{paddingLeft:"var(--pf-v5-c-page__main-section--PaddingLeft)"},children:H(Ge,{children:[e(Ar,{})," ",I("whatIsDefaultGroups")]})})}),e(st,{canSelectAll:!0,onSelect:O=>p([...O]),loader:S,ariaLabelKey:"defaultGroups",searchPlaceholderKey:"searchForGroups",toolbarItem:_&&H(ve,{children:[e(ze,{children:e(oe,{"data-testid":"openCreateGroupModal",variant:"primary",onClick:r,children:I("addGroups")})}),e(ze,{children:e(Za,{onOpenChange:a,toggle:O=>e(Ja,{ref:O,isExpanded:t,variant:"plain",onClick:a,isDisabled:o.length===0,children:e(Ya,{})}),isOpen:t,shouldFocusToggleOnSelect:!0,children:e($a,{children:e(Lt,{component:"button",onClick:()=>{D(),a()},children:I("remove")},"action")})})})]}),actions:_?[{title:I("remove"),onRowClick:O=>(p([O]),D(),Promise.resolve(!1))}]:[],columns:[{name:"name",displayKey:"groupName"},{name:"path",displayKey:"path"}],emptyState:e(Ze,{hasIcon:!0,message:I("noDefaultGroups"),instructions:H(Yt,{i18nKey:"noDefaultGroupsInstructions",children:[" ",e(Be,{className:"pf-v5-u-font-weight-light",to:La({realm:s}),role:"navigation","aria-label":I("identityBrokeringLink")}),"Add groups..."]}),primaryActionText:_?I("addGroups"):"",onPrimaryAction:r})},k)]}):e(tt,{})},Ci=()=>{const{adminClient:x}=Te(),{t:I}=de(),[t,a]=J(10),{realmRepresentation:d}=Ce(),[r,c]=J(0),{addAlert:i,addError:o}=Oe(),{realm:p}=Ce(),k=async w=>{const y=w;try{await x.roles.createComposite({roleId:d?.defaultRole.id,realm:p},y),c(r+1),i(I("addAssociatedRolesSuccess"),Ie.success)}catch(u){o("addAssociatedRolesError",u)}};return H(zt,{activeKey:t,onSelect:(w,y)=>a(y),children:[e(me,{id:"roles",eventKey:10,title:e(pe,{children:I("defaultRoles")}),"data-testid":"default-roles-tab",children:e(Ir,{name:d?.defaultRole.name,id:d?.defaultRole.id,type:"roles",isManager:!0,save:w=>k(w.map(y=>y.role))})},r),e(me,{id:"groups",eventKey:20,title:e(pe,{children:I("defaultGroups")}),"data-testid":"default-groups-tab",children:e(wi,{})})]})};function mn({ariaLabelKey:x="userEventsRegistered",eventTypes:I,addTypes:t,onSelect:a,onDelete:d,onDeleteAll:r}){const{t:c}=de(),[i,o]=J([]),p=I.map(k=>({id:k,name:c(`eventTypes.${k}.name`),description:c(`eventTypes.${k}.description`)}));return e(st,{ariaLabelKey:x,searchPlaceholderKey:"searchEventType",loader:p,onSelect:a||o,canSelectAll:!0,toolbarItem:H(ve,{children:[t&&e(ze,{children:e(oe,{id:"addTypes",onClick:t,"data-testid":"addTypes",children:c("addSavedTypes")})}),r&&e(ze,{children:e(oe,{onClick:()=>r(i),"data-testid":"removeAll",variant:"secondary",isDisabled:i.length===0,children:c("remove")})})]}),actions:d?[{title:c("remove"),onRowClick:d}]:[],columns:[{name:"name",displayKey:"eventType"},{name:"description",cellFormatters:[sn(c)]}],emptyState:e(Ze,{message:c("emptyEvents"),instructions:c("emptyEventsInstructions")})})}const Ti=({onConfirm:x,onClose:I,configured:t})=>{const{t:a}=de(),{enums:d}=mt(),[r,c]=J([]);return e(ht,{variant:yt.medium,title:a("addTypes"),isOpen:!0,onClose:I,actions:[e(oe,{"data-testid":"addEventTypeConfirm",variant:"primary",onClick:()=>x(r),children:a("add")},"confirm"),e(oe,{"data-testid":"moveCancel",variant:"link",onClick:I,children:a("cancel")},"cancel")],children:e(mn,{ariaLabelKey:"addTypes",onSelect:i=>c(i),eventTypes:d.eventType.filter(i=>!t.includes(i))})})},Ha=({type:x,form:I,reset:t,clear:a})=>{const{t:d}=de(),{control:r,watch:c,setValue:i,formState:{isDirty:o}}=I,p=x==="admin"?"adminEventsEnabled":"eventsEnabled",k=c(p),[w,y]=De({titleKey:"events-disable-title",messageKey:"events-disable-confirm",continueButtonLabel:"confirm",onConfirm:()=>i(p,!1,{shouldDirty:!0})});return H(Ve,{...I,children:[e(y,{}),e(se,{hasNoPaddingTop:!0,label:d("saveEvents"),fieldId:p,labelIcon:e(he,{helpText:d(`save-${x}-eventsHelp`),fieldLabelId:"saveEvents"}),children:e(fe,{name:p,defaultValue:!1,control:r,render:({field:u})=>e(Re,{"data-testid":p,id:`${p}-switch`,label:d("on"),labelOff:d("off"),isChecked:u.value,onChange:(g,s)=>{s?u.onChange(s):w()},"aria-label":d("saveEvents")})})}),x==="admin"&&e(bt,{name:"adminEventsDetailsEnabled",label:d("includeRepresentation"),labelIcon:d("includeRepresentationHelp")}),k&&e(Jt,{name:x==="user"?"eventsExpiration":"adminEventsExpiration",label:d("expiration"),labelIcon:d("expirationHelp"),defaultValue:"",units:["minute","hour","day"],controller:{defaultValue:""}}),H(He,{children:[e(oe,{variant:"primary",type:"submit",id:`save-${x}`,"data-testid":`save-${x}`,isDisabled:!o,children:d("save")}),e(oe,{variant:"link",onClick:t,children:d("revert")})]}),e(it,{}),e(se,{label:d(x==="user"?"clearUserEvents":"clearAdminEvents"),fieldId:`clear-${x}-events`,labelIcon:e(he,{helpText:d(`${x}-clearEventsHelp`),fieldLabelId:`clear-${x}-events`}),children:e(oe,{variant:"danger",id:`clear-${x}-events`,"data-testid":`clear-${x}-events`,onClick:()=>a(),children:d(x==="user"?"clearUserEvents":"clearAdminEvents")})})]})},Si=({form:x,reset:I})=>{const{t}=de(),[a,d]=J(),{adminClient:r}=Te();return et(()=>Xn(r,"ui-ext/available-event-listeners"),d,[]),a?H(Ve,{...x,children:[e(Me,{name:"eventsListeners",label:t("eventListeners"),labelIcon:t("eventListenersHelpTextHelp"),controller:{defaultValue:""},className:"kc_eventListeners_select",chipGroupProps:{numChips:3,expandedText:t("hide"),collapsedText:t("showRemaining")},variant:Qe.typeaheadMulti,options:a.map(c=>c.id)}),H(He,{children:[e(oe,{variant:"primary",type:"submit","data-testid":"saveEventListenerBtn",children:t("save")}),e(oe,{variant:"link","data-testid":"revertEventListenerBtn",onClick:I,children:t("revert")})]})]}):e(tt,{})},xi=({realm:x})=>{const{adminClient:I}=Te(),{t}=de(),a=Fe(),{setValue:d,handleSubmit:r}=a,[c,i]=J(0),o=()=>i(new Date().getTime()),[p,k]=J(0),w=()=>k(new Date().getTime()),[y,u]=J("event"),[g,s]=J(),[f,h]=J(),[m,C]=J(!1),{addAlert:_,addError:S}=Oe(),{realm:L,refresh:A}=Ce(),D=Q=>{s(Q),Rt(Q||{},d)},P=async Q=>{h(Q),O()},[O,W]=De({titleKey:"deleteEvents",messageKey:"deleteEventsConfirm",continueButtonLabel:"clear",continueButtonVariant:Ee.danger,onConfirm:async()=>{try{switch(f){case"admin":await I.realms.clearAdminEvents({realm:L});break;case"user":await I.realms.clearEvents({realm:L});break}_(t(`${f}-events-cleared`),Ie.success)}catch(Q){S(`${f}-events-cleared-error`,Q)}}});et(()=>I.realms.getConfigEvents({realm:L}),Q=>{D({...Q,adminEventsExpiration:x.attributes?.adminEventsExpiration}),w()},[c]);const T=async Q=>{const j=!on(g?.eventsListeners,Q.eventsListeners),{adminEventsExpiration:re,...q}=Q;x.attributes?.adminEventsExpiration!==re&&await I.realms.update({realm:L},{...x,attributes:{...x.attributes||{},adminEventsExpiration:re}});try{await I.realms.updateConfigEvents({realm:L},q),D({...g,...q,adminEventsExpiration:re}),_(t(j?"saveEventListenersSuccess":"eventConfigSuccessfully"),Ie.success)}catch(ae){S(t(j?"saveEventListenersError":"eventConfigError"),ae)}A()},F=async Q=>{const j=Q.map(q=>q.id),re=g.enabledEventTypes?.concat(j);await l(re)},l=async(Q=[])=>{const j={...a.getValues(),enabledEventTypes:Q};await T(j),C(!1),o()},U=async(Q=[])=>{const j=Q.map(q=>q.id),re=g?.enabledEventTypes?.filter(q=>!j.includes(q));await l(re),s({...g,enabledEventTypes:re})};return H(ve,{children:[e(W,{}),m&&e(Ti,{onConfirm:Q=>F(Q),configured:g?.enabledEventTypes||[],onClose:()=>C(!1)}),H(zt,{activeKey:y,onSelect:(Q,j)=>u(j),children:[e(me,{eventKey:"event",title:e(pe,{children:t("eventListeners")}),"data-testid":"rs-event-listeners-tab",children:e(xe,{children:e(_e,{role:"manage-events",isHorizontal:!0,onSubmit:r(T),children:e(Si,{form:a,reset:()=>D(g)})})})}),H(me,{eventKey:"user",title:e(pe,{children:t("userEventsSettings")}),"data-testid":"rs-events-tab",children:[e(xe,{children:e(_e,{role:"manage-events",isHorizontal:!0,onSubmit:r(T),children:e(Ha,{type:"user",form:a,reset:()=>D(g),clear:()=>P("user")})})}),e(xe,{children:e(mn,{addTypes:()=>C(!0),eventTypes:g?.enabledEventTypes||[],onDelete:Q=>U([Q]),onDeleteAll:U},p)})]}),e(me,{eventKey:"admin",title:e(pe,{children:t("adminEventsSettings")}),"data-testid":"rs-admin-events-tab",children:e(xe,{children:e(_e,{role:"manage-events",isHorizontal:!0,onSubmit:r(T),children:e(Ha,{type:"admin",form:a,reset:()=>D(g),clear:()=>P("admin")})})})})]})]})},At=["ACTIVE","PASSIVE","DISABLED"],Ii=({onFilter:x})=>{const{t:I}=de(),[t,a]=J(At[0]),[d,r]=rt();return e(qe,{width:300,"data-testid":"filter-type-select",isOpen:d,className:"kc-filter-type-select",variant:Qe.single,onToggle:r,toggleIcon:e(ln,{}),onSelect:c=>{const i=At.find(o=>o===c.toString())||At[0];a(i),x(i),r()},selections:t,"aria-label":I("selectFilterType"),children:At.map(c=>e(Le,{"data-testid":`${c}-option`,value:c,children:I(`keysFilter.${c}`)},c))})},Ei=({realmComponents:x})=>{const{adminClient:I}=Te(),{t}=de(),a=wt(),d=Lr(),[r,c]=J(""),[i,o]=J(""),{realm:p}=Ce(),[k,w]=J([]),[y,u]=J(At[0]),g=ct(()=>k?.filter(({status:C})=>C===y),[k,y]);et(async()=>(await I.realms.getKeys({realm:p})).keys?.map(_=>{const S=x.find(L=>L.id===_.providerId);return{..._,provider:S?.name}}),w,[]);const[s,f]=De({titleKey:t("publicKey"),messageKey:r,continueButtonLabel:"close",continueButtonVariant:Ee.primary,onConfirm:()=>Promise.resolve()}),[h,m]=De({titleKey:t("certificate"),messageKey:i,continueButtonLabel:"close",continueButtonVariant:Ee.primary,onConfirm:()=>Promise.resolve()});return k?H(xe,{variant:"light",padding:{default:"noPadding"},children:[e(f,{}),e(m,{}),e(st,{isNotCompact:!0,className:"kc-keys-list",loader:g,ariaLabelKey:"keysList",searchPlaceholderKey:"searchKey",searchTypeComponent:e(Ii,{onFilter:C=>u(C)}),columns:[{name:"algorithm",displayKey:"algorithm",cellFormatters:[Vt()],transforms:[ot(15)]},{name:"type",displayKey:"type",cellFormatters:[Vt()],transforms:[ot(10)]},{name:"kid",displayKey:"kid",cellFormatters:[Vt()],transforms:[ot(10)]},{name:"use",displayKey:"use",cellFormatters:[Vt()],transforms:[ot(10)]},{name:"provider",displayKey:"provider",cellRenderer:({provider:C})=>C||"-",transforms:[ot(10)]},{name:"validTo",displayKey:"validTo",cellRenderer:({validTo:C})=>C?d(new Date(C)):"-",transforms:[ot(10)]},{name:"publicKeys",displayKey:"publicKeys",cellRenderer:({publicKey:C,certificate:_})=>_?H("div",{className:"button-wrapper",children:[e(oe,{onClick:()=>{s(),c(C)},variant:"secondary",id:C,children:t("publicKey")}),e(oe,{onClick:()=>{h(),o(_)},variant:"secondary",id:_,className:"kc-certificate",children:t("certificate")})]}):C?e(oe,{onClick:()=>{s(),c(C)},variant:"secondary",id:"kc-public-key",children:t("publicKey")}):"",transforms:[ot(20)]}],isSearching:!!g,emptyState:e(Ze,{hasIcon:!0,message:t("noKeys"),instructions:t("noKeysDescription"),primaryActionText:t("addProvider"),onPrimaryAction:()=>a(ma({realm:p,tab:"providers"}))})})]}):e(tt,{})},Ai="_dialog_cvqlu_3",Li={dialog:Ai},Pi=({providerType:x,onClose:I})=>{const{t}=de();return e(ht,{className:Li.dialog,variant:yt.medium,title:t("addProvider"),isOpen:!0,onClose:I,children:e(Pr,{providerType:x,onClose:I})})},Oi=({onConfirm:x,onClose:I})=>{const{t}=de(),d=mt().componentTypes?.[ka]??[];return e(ht,{variant:"medium",title:t("addProvider"),isOpen:!0,onClose:I,children:e(tn,{onSelectDataListItem:(r,c)=>{x(c)},"aria-label":t("addPredefinedMappers"),isCompact:!0,children:d.map(r=>e(an,{"aria-label":r.id,id:r.id,children:e(nn,{children:e(rn,{dataListCells:[e(pa,{"data-testid":`option-${r.id}`,children:r.id},`name-${r.id}`),e(pa,{width:2,children:r.helpText},`helpText-${r.helpText}`)]})})},r.id))})})},Ri=({realmComponents:x,refresh:I})=>{const{adminClient:t}=Te(),{t:a}=de(),{addAlert:d,addError:r}=Oe(),{realm:c}=Ce(),[i,o]=J(""),[p,k]=J([]),[w,y]=rt(),g=mt().componentTypes?.[ka]??[],[s,f]=rt(),[h,m]=J(),[C,_]=J(),S=ct(()=>x.map(W=>{const T=g.find(F=>W.providerId===F.id);return{...W,providerDescription:T?.helpText}}),[x]),[L,A]=De({titleKey:"deleteProviderTitle",messageKey:a("deleteProviderConfirm",{provider:C?.name}),continueButtonLabel:"delete",continueButtonVariant:Ee.danger,onConfirm:async()=>{try{await t.components.del({id:C.id,realm:c}),I(),d(a("deleteProviderSuccess"),Ie.success)}catch(W){r("deleteProviderError",W)}}}),D=()=>{if(i!==""){o(i);const W=S.filter(T=>T.name?.includes(i)||T.providerId?.includes(i));k(W)}else o(""),k(S)},P=W=>{W.key==="Enter"&&D()},O=W=>{o(W)};return H(ve,{children:[s&&e(Oi,{onClose:()=>f(),onConfirm:W=>{y(),m(W),f()}}),w&&h&&e(Pi,{providerType:h,onClose:()=>{y(),I()}}),e(A,{}),H(xe,{variant:"light",padding:{default:"noPadding"},children:[e(Xa,{children:H(Qn,{className:"providers-toolbar",children:[e(ze,{children:H(Wa,{children:[e(fa,{isFill:!0,children:e(Dt,{name:"inputGroupName",id:"inputGroupName","data-testid":"provider-search-input",type:"search","aria-label":a("search"),placeholder:a("search"),onChange:(W,T)=>O(T),onKeyDown:P})}),e(fa,{children:e(oe,{variant:Ee.control,"aria-label":a("search"),onClick:D,children:e(Qa,{})})})]})}),e(ze,{children:e(oe,{"data-testid":"addProviderDropdown",className:"add-provider-dropdown",onClick:()=>f(),children:a("addProvider")})})]})}),e(cn,{variant:"compact",className:"kc-draggable-table",keyField:"id",data:p.length===0?S:p,onDragFinish:async(W,T)=>{const F=S.map(l=>{const U={...l};return delete U.providerDescription,t.components.update({id:l.id},{...U,config:{priority:[(T.length-T.indexOf(l.id)+100).toString()]}})});try{await Promise.all(F),I(),d(a("saveProviderListSuccess"),Ie.success)}catch(l){r("saveProviderError",l)}},columns:[{name:"name",displayKey:"name",cellRenderer:W=>e(Be,{"data-testid":"provider-name-link",to:er({realm:c,id:W.id,providerType:W.providerId}),children:W.name},W.name)},{name:"providerId",displayKey:"provider"},{name:"providerDescription",displayKey:"providerDescription"}],actions:[{title:a("delete"),onClick:(W,T,F)=>{_(F),L()}}]})]})]})},Di=x=>[...x].sort((t,a)=>{const d=Number(t.config?.priority),r=Number(a.config?.priority);return(isNaN(r)?0:r)-(isNaN(d)?0:d)}),zi=()=>{const{adminClient:x}=Te(),{t:I}=de(),{realm:t}=Ce(),[a,d]=J(),[r,c]=J(0),i=()=>{c(r+1)};et(()=>x.components.find({type:ka,realm:t}),w=>d(Di(w)),[r]);const o=w=>dt(ma({realm:t,tab:w})),p=o("list"),k=o("providers");return a?H(Pt,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:ma({realm:t,tab:"list"}),children:[e(me,{id:"keysList","data-testid":"rs-keys-list-tab","aria-label":"keys-list-subtab",title:e(pe,{children:I("keysList")}),...p,children:e(Ei,{realmComponents:a})}),e(me,{id:"providers","data-testid":"rs-providers-tab","aria-label":"rs-providers-tab",title:e(pe,{children:I("providers")}),...k,children:e(Ri,{realmComponents:a,refresh:i})})]}):e(tt,{})},Ka={theme:"",themeType:"",locale:"",hasWords:[]},Ni=({defaultSupportedLocales:x,defaultLocales:I})=>{const{adminClient:t}=Te(),{t:a}=de(),{realm:d}=Ce(),r=mt(),{whoAmI:c}=Ot(),i=Rr(),[o,p]=J(!1),[k,w]=J(!1),[y,u]=J(!1),[g,s]=J(!1),[f,h]=J(!1),[m,C]=J({}),[_,S]=J(0),L=r.themes,A=ct(()=>L?i(Object.keys(L),K=>K):[],[L]),D=ct(()=>L?i(Object.values(L).flatMap(K=>K.map(M=>M.name)).filter((K,M,$)=>$.indexOf(K)===M),K=>K):[],[L]),P=ct(()=>Array.from(new Set([...I,...x])),[I,x]),O={theme:a("theme"),themeType:a("themeType"),locale:a("language"),hasWords:a("hasWords")},{getValues:W,reset:T,formState:{isDirty:F,isValid:l},control:U}=Fe({mode:"onChange",defaultValues:Ka}),Q=async()=>{try{const K=W();if(["theme","themeType","locale"].some(ce=>!K[ce]))return[];const ne=await t.serverInfo.findEffectiveMessageBundles({realm:d,...K,locale:K.locale||je,source:!0}),be=K.hasWords.length>0?ne.filter(ce=>K.hasWords.some(Y=>ce.value.includes(Y)||ce.key.includes(Y))):ne;return i([...be],Dr("key"))}catch{return[]}};function j(){p(!1),N()}function re(){T(),N()}function q(K){const M={...W()};delete M[K],T({...Ka,...M}),N()}function ae(K,M){const $=W(),ne=$[K],be=Array.isArray(ne)?ne.filter(ie=>ie!==M):ne;T({...$,[K]:be}),N()}function N(){const K=zr(W(),M=>M!==""||Array.isArray(M)&&M.length>0);C(K),S(_+1)}const R=()=>H(ea,{direction:{default:"column"},spaceItems:{default:"spaceItemsNone"},children:[e(Ue,{children:e(_t,{children:e(Ge,{className:"pf-v5-u-mb-md pf-v5-u-mt-0 pf-v5-u-mr-md",component:va.p,children:a("effectiveMessageBundlesDescription")})})}),e(Ue,{children:e(Or,{buttonText:a("searchForEffectiveMessageBundles"),setSearchDropdownOpen:p,searchDropdownOpen:o,marginRight:"2.5rem",width:"15vw",children:H(ft,{isHorizontal:!0,className:"pf-v5-u-w-25vw","data-testid":"effectiveMessageBundlesSearchForm",onSubmit:K=>K.preventDefault(),children:[e(se,{label:a("theme"),fieldId:"kc-theme",isRequired:!0,children:e(fe,{name:"theme",control:U,defaultValue:"",rules:{validate:K=>(K||"").length>0},render:({field:K})=>e(qe,{"data-testid":"effective_message_bundles-theme-searchField",chipGroupProps:{numChips:1,expandedText:a("hide"),collapsedText:a("showRemaining")},variant:Qe.single,typeAheadAriaLabel:"Select",onToggle:M=>u(M),selections:K.value,onSelect:M=>{K.onChange(M.toString()),u(!1)},onClear:()=>{K.onChange("")},isOpen:y,"aria-label":a("selectTheme"),chipGroupComponent:e(It,{children:e(pt,{onClick:M=>{M.stopPropagation(),K.onChange("")},children:K.value},K.value)}),children:[e(Le,{label:a("selectTheme"),isDisabled:!0,children:a("selectTheme")},"theme_placeholder")].concat(D.map(M=>e(Le,{value:M,children:M},M)))})})}),e(se,{label:a("themeType"),fieldId:"kc-themeType",isRequired:!0,children:e(fe,{name:"themeType",control:U,defaultValue:"",rules:{validate:K=>(K||"").length>0},render:({field:K})=>e(qe,{"data-testid":"effective-message-bundles-feature-searchField",chipGroupProps:{numChips:1,expandedText:a("hide"),collapsedText:a("showRemaining")},variant:Qe.single,typeAheadAriaLabel:"Select",onToggle:M=>s(M),selections:K.value,onSelect:M=>{K.onChange(M.toString()),s(!1)},onClear:()=>{K.onChange("")},isOpen:g,"aria-label":a("selectThemeType"),chipGroupComponent:e(It,{children:e(pt,{onClick:M=>{M.stopPropagation(),K.onChange("")},children:K.value},K.value)}),children:[e(Le,{label:a("selectThemeType"),isDisabled:!0,children:a("selectThemeType")},"themeType_placeholder")].concat(A.map(M=>e(Le,{value:M,children:M},M)))})})}),e(se,{label:a("language"),fieldId:"kc-language",isRequired:!0,children:e(fe,{name:"locale",control:U,defaultValue:"",rules:{validate:K=>(K||"").length>0},render:({field:K})=>e(qe,{"data-testid":"effective-message-bundles-language-searchField",chipGroupProps:{numChips:1,expandedText:a("hide"),collapsedText:a("showRemaining")},variant:Qe.single,typeAheadAriaLabel:"Select",onToggle:M=>h(M),selections:K.value,onSelect:M=>{K.onChange(M.toString()),h(!1)},onClear:()=>{K.onChange("")},isOpen:f,"aria-label":a("selectLanguage"),chipGroupComponent:e(It,{children:K.value?e(pt,{onClick:M=>{M.stopPropagation(),K.onChange("")},children:Xe(K.value,c.locale)},K.value):null}),children:[e(Le,{label:a("selectLanguage"),isDisabled:!0,children:a("selectLanguage")},"language_placeholder")].concat(P.map(M=>e(Le,{value:M,children:Xe(M,c.locale)},M)))})})}),e(se,{label:a("hasWords"),fieldId:"kc-hasWords",children:e(fe,{name:"hasWords",control:U,render:({field:K})=>H("div",{children:[e(Dt,{id:"kc-hasWords","data-testid":"effective-message-bundles-hasWords-searchField",value:K.value.join(" "),onChange:M=>{const ne=M.target.value;if(ne.trim().length===0)K.onChange([]);else{const be=ne.split(" ").map(ie=>ie.trim());K.onChange(be)}}}),e(It,{children:K.value.map((M,$)=>e(pt,{onClick:ne=>{ne.stopPropagation();const be=K.value.filter((ie,ce)=>ce!==$);K.onChange(be)},children:M},$))})]})})}),H(He,{className:"pf-v5-u-mt-sm",children:[e(oe,{variant:"primary",onClick:()=>{w(!0),j()},"data-testid":"search-effective-message-bundles-btn",isDisabled:!l,children:a("search")}),e(oe,{variant:"secondary",onClick:re,"data-testid":"reset-search-effective-message-bundles-btn",isDisabled:!F,children:a("reset")})]})]})})}),e(Ue,{children:Object.entries(m).length>0&&e(ve,{children:Object.entries(m).map(K=>{const[M,$]=K;return e(It,{className:"pf-v5-u-mt-md pf-v5-u-mr-md",categoryName:O[M],isClosable:!0,onClick:()=>q(M),children:typeof $=="string"?e(pt,{isReadOnly:!0,children:M==="locale"?Xe($,c.locale)?.toLowerCase():$}):$.map(ne=>e(pt,{onClick:()=>ae(M,ne),children:ne},ne))},M)})})})]});return k?e(st,{loader:Q,ariaLabelKey:"effectiveMessageBundles",toolbarItem:R(),columns:[{name:"key",displayKey:"key"},{name:"value",displayKey:"value"}],emptyState:e(Ze,{message:a("noSearchResults"),instructions:a("noSearchResultsInstructions")}),isSearching:Object.keys(m).length>0},_):H(ve,{children:[e("div",{className:"pf-v5-u-py-lg pf-v5-u-pl-md",children:R()}),e(it,{}),e(Ze,{message:a("emptyEffectiveMessageBundles"),instructions:a("emptyEffectiveMessageBundlesInstructions"),isSearchVariant:!0})]})},Fi=({handleModalToggle:x,save:I,form:t})=>{const{t:a}=de();return e(ht,{variant:yt.small,title:a("addTranslation"),isOpen:!0,onClose:x,actions:[e(oe,{"data-testid":"add-translation-confirm-button",variant:"primary",type:"submit",form:"translation-form",children:a("create")},"confirm"),e(oe,{id:"modal-cancel","data-testid":"cancel",variant:Ee.link,onClick:()=>{x()},children:a("cancel")},"cancel")],children:e(ft,{id:"translation-form",isHorizontal:!0,onSubmit:t.handleSubmit(I),children:H(Ve,{...t,children:[e(Ae,{name:"key",label:a("key"),autoFocus:!0,rules:{required:a("required")}}),e(Ae,{name:"value",label:a("value"),rules:{required:a("required")}})]})})})},Bi=({internationalizationEnabled:x,watchSupportedLocales:I,realm:t,tableData:a})=>{const{adminClient:d}=Te(),{t:r}=de(),[c,i]=J(!1),[o,p]=J(!1),[k,w]=J([]),[y,u]=J(je),[g,s]=J(!1),{getValues:f,handleSubmit:h}=Fe(),[m,C]=J(!1),[_,S]=J([]),[L,A]=J(0),[D,P]=J(10),[O,W]=J(0),[T,F]=J(""),l=Fe({mode:"onChange"}),{addAlert:U,addError:Q}=Oe(),{realm:j}=Ce(),{whoAmI:re}=Ot(),[q,ae]=J([]),[N,R]=J(!1),[K,M]=J({}),[$,ne]=J(""),be=()=>{A(L+1)};at(()=>{(async()=>{try{let b=await d.realms.getRealmLocalizationTexts({first:O,max:D,realm:t.realm,selectedLocale:y||f("defaultLocale")||re.locale});if(w(Object.entries(b)),T){const E=Z=>Object.entries(b).filter(z=>z[Z].includes(T)),V=Qr(E(0).concat(E(1)),on);b=Object.fromEntries(V)}return Object.entries(b).slice(O,O+D)}catch{return[]}})().then(b=>{const E=b.map(V=>({rowEditBtnAriaLabel:()=>r("rowEditBtnAriaLabel",{translation:V[1]}),rowSaveBtnAriaLabel:()=>r("rowSaveBtnAriaLabel",{translation:V[1]}),rowCancelBtnAriaLabel:()=>r("rowCancelBtnAriaLabel",{translation:V[1]}),cells:[{title:V[0],props:{value:V[0]}},{title:V[1],props:{value:V[1]}}]}));S(E)})},[L,a,O,D,T]);const ie=()=>{i(!c)},ce=[e(ga,{label:r("defaultLocale"),children:e(Le,{value:je,children:Xe(je,re.displayName)},je)},"group1"),e(it,{},"divider"),e(ga,{label:r("supportedLocales"),children:I.map(v=>e(Le,{value:v,children:Xe(v,re.locale)},v))},"group2")],Y=async v=>{try{await d.realms.addLocalization({realm:j,selectedLocale:y||f("defaultLocale")||je,key:v.key},v.value),d.setConfig({realmName:j}),be(),l.setValue("key",""),l.setValue("value",""),await ra.reloadResources(),U(r("addTranslationSuccess"),Ie.success)}catch(b){Q("addTranslationError",b)}},[ue,Se]=De({titleKey:"deleteConfirmTranslationTitle",messageKey:r("translationDeleteConfirmDialog",{count:q.length}),continueButtonLabel:"delete",continueButtonVariant:Ee.danger,onCancel:()=>{ae([]),R(!1)},onConfirm:async()=>{try{for(const v of q)delete ra.store.data[re.locale][j][v],await d.realms.deleteRealmLocalizationTexts({realm:j,selectedLocale:y,key:v});R(!1),ae([]),be(),U(r("deleteAllTranslationsSuccess"),Ie.success)}catch(v){Q("deleteAllTranslationsError",v)}}}),Pe=(v,b)=>{const E=(_[b].cells?.[0]).props.value;v.target.checked?ae(V=>[...V,E]):ae(V=>V.filter(Z=>Z!==E)),R(_.length===q.length+(v.target.checked?1:-1))},n=()=>{ae(N?[]:_.map(v=>(v.cells?.[0]).props.value)),R(!N)},G=v=>q.includes(v),B=async(v,b)=>{const E=Oa(_),V=Oa(E[b]);(V.cells?.[1]).props.value=v,E[b]=V;try{const Z=(V.cells?.[0]).props.value,z=(V.cells?.[1]).props.value;await d.realms.addLocalization({realm:t.realm,selectedLocale:y||f("defaultLocale")||je,key:Z},z),await ra.reloadResources(),U(r("updateTranslationSuccess"),Ie.success),S(E)}catch(Z){Q("updateTranslationError",Z)}M(Z=>({...Z,[b]:!1}))};return H(ve,{children:[e(Se,{}),c&&e(Fi,{handleModalToggle:ie,save:async v=>{await Y(v),ie()},form:l}),e(_t,{children:e(Ge,{className:"pf-v5-u-mt-lg pf-v5-u-ml-md",component:va.p,children:r("realmOverridesDescription")})}),H(tr,{count:k.length,first:O,max:D,onNextClick:W,onPreviousClick:W,onPerPageSelect:(v,b)=>{W(v),P(b)},inputGroupName:"search",inputGroupOnEnter:v=>{F(v),W(0),P(10)},inputGroupPlaceholder:r("searchForTranslation"),toolbarItem:H(ve,{children:[e(oe,{"data-testid":"add-translationBtn",onClick:()=>{i(!0),R(!1),ae([])},children:r("addTranslation")}),e(ze,{children:e(Za,{onOpenChange:v=>s(v),toggle:v=>e(Ja,{ref:v,onClick:()=>s(!g),variant:"plain",isExpanded:g,"data-testid":"toolbar-deleteBtn","aria-label":"kebab",children:e(Ya,{})}),isOpen:g,isPlain:!0,children:e($a,{children:e(Lt,{component:"button","data-testid":"delete-selected-TranslationBtn",isDisabled:k.length===0||q.length===0,onClick:()=>{ue(),s(!1)},children:r("delete")},"action")})})})]}),searchTypeComponent:e(ze,{children:e(qe,{width:180,isOpen:o,className:"kc-filter-by-locale-select",variant:Qe.single,isDisabled:!x,onToggle:v=>p(v),onSelect:v=>{u(v.toString()),C(!0),be(),p(!1)},selections:m?Xe(y,re.locale):t.defaultLocale!==""?Xe(je,re.locale):r("placeholderText"),children:ce})}),children:[k.length===0&&!T&&e(Ze,{hasIcon:!0,message:r("noTranslations"),instructions:r("noTranslationsInstructions"),onPrimaryAction:ie}),k.length===0&&T&&e(Ze,{hasIcon:!0,icon:Qa,isSearchVariant:!0,message:r("noSearchResults"),instructions:r("noRealmOverridesSearchResultsInstructions")}),k.length!==0&&H(ar,{"aria-label":r("editableRowsTable"),"data-testid":"editable-rows-table",children:[e(nr,{children:H(Pa,{children:[e(Ht,{className:"pf-v5-u-px-lg",children:e("input",{type:"checkbox","aria-label":r("selectAll"),checked:N,onChange:n,"data-testid":"selectAll"})}),e(Ht,{className:"pf-v5-u-py-lg",children:r("key")}),e(Ht,{className:"pf-v5-u-py-lg",children:r("value")}),e(Ht,{"aria-hidden":"true"})]})}),e(rr,{children:_.map((v,b)=>H(Pa,{children:[e(Kt,{className:"pf-v5-u-px-lg",select:{rowIndex:b,onSelect:E=>Pe(E,b),isSelected:G((v.cells?.[0]).props.value)}}),e(Kt,{className:"pf-m-sm pf-v5-u-px-sm",dataLabel:r("key"),children:(v.cells?.[0]).props.value}),e(Kt,{className:"pf-m-sm pf-v5-u-px-sm",dataLabel:r("value"),children:e(ft,{isHorizontal:!0,className:"kc-form-translationValue",onSubmit:h(async()=>{await B($,b)}),children:e(se,{fieldId:"kc-translationValue",className:"pf-v5-u-display-inline-block",children:K[b]?H(ve,{children:[e(Dt,{"aria-label":r("editTranslationValue"),type:"text",className:"pf-v5-u-w-initial","data-testid":`editTranslationValueInput-${b}`,value:$,onChange:(E,V)=>{ne(V)}},`edit-input-${b}`),e(oe,{variant:"link",className:"pf-m-plain","data-testid":`editTranslationAcceptBtn-${b}`,type:"submit","aria-label":r("acceptBtn"),icon:e(ir,{})}),e(oe,{variant:"link",className:"pf-m-plain","data-testid":`editTranslationCancelBtn-${b}`,icon:e(sr,{}),"aria-label":r("cancelBtn"),onClick:()=>{M(E=>({...E,[b]:!1}))}})]}):H(ve,{children:[e("span",{children:(v.cells?.[1]).props.value}),e(oe,{onClick:()=>{const E=(_[b].cells?.[1]).props.value;ne(E),M(V=>({...V,[b]:!0}))},"aria-label":r("editBtn"),variant:"link",className:"pf-m-plain","data-testid":`editTranslationBtn-${b}`,children:e(Fr,{})},`edit-button-${b}`)]})})})},b),e(Kt,{isActionCell:!0,children:e(or,{items:[{title:r("delete"),onClick:()=>{ae([(v.cells?.[0]).props.value]),k.length===1&&R(!0),ue(),s(!1)}}]})})]},(v.cells?.[0]).props.value))})]})]})]})},Mi=({save:x,realm:I,tableData:t})=>{const{t:a}=de(),{whoAmI:d}=Ot(),[r,c]=J(0),i=Ct(),{control:o,reset:p,handleSubmit:k,formState:w}=i,y=I.supportedLocales?.length?I.supportedLocales:[je],u=mt().themes,g=ct(()=>{const m=Object.values(u).flatMap(C=>C.flatMap(({locales:_})=>_||[]));return Array.from(new Set(m))},[u]),s=We({control:o,name:"supportedLocales",defaultValue:y}),f=We({control:o,name:"internationalizationEnabled",defaultValue:I.internationalizationEnabled}),h=We({name:"defaultLocale",control:o,defaultValue:"en"});return H(zt,{activeKey:r,onSelect:(m,C)=>c(C),children:[e(me,{id:"locales",eventKey:0,title:e(pe,{children:a("locales")}),"data-testid":"rs-localization-locales-tab",children:H(_e,{isHorizontal:!0,role:"manage-realm",className:"pf-v5-u-mt-lg pf-v5-u-ml-md",onSubmit:k(x),children:[H(Ve,{...i,children:[e(ua,{name:"internationalizationEnabled",label:a("internationalization"),labelIcon:a("internationalizationHelp"),labelOn:a("enabled"),labelOff:a("disabled"),"aria-label":a("internationalization")}),f&&H(ve,{children:[e(Me,{name:"supportedLocales",isScrollable:!0,label:a("supportedLocales"),labelIcon:a("supportedLocalesHelp"),controller:{defaultValue:y,rules:{required:a("required"),validate:m=>m.every(C=>g.includes(C))||a("invalidLocale")}},variant:"typeaheadMulti",placeholderText:a("selectLocales"),options:g.map(m=>({key:m,value:Xe(m,d.locale)||m}))}),e(Me,{name:"defaultLocale",label:a("defaultLocale"),labelIcon:a("defaultLocaleHelp"),controller:{defaultValue:je,rules:{required:a("required"),validate:m=>s?.includes(m)||a("required")}},"data-testid":"select-default-locale",options:s.map(m=>({key:m,value:Xe(m,d.locale)||m}))})]})]}),H(He,{children:[e(oe,{variant:"primary",isDisabled:!w.isDirty,type:"submit","data-testid":"localization-tab-save",children:a("save")}),e(oe,{variant:"link",onClick:()=>p(I),children:a("revert")})]})]})}),e(me,{id:"realm-overrides",eventKey:1,title:H(pe,{children:[a("realmOverrides")," "]}),"data-testid":"rs-localization-realm-overrides-tab",children:e(Bi,{internationalizationEnabled:f||!1,watchSupportedLocales:s||[],realm:I,tableData:t})}),e(me,{id:"effective-message-bundles",eventKey:2,title:e(pe,{children:a("effectiveMessageBundles")}),"data-testid":"rs-localization-effective-message-bundles-tab",children:e(Ni,{defaultSupportedLocales:y,defaultLocales:[h]})})]})},lt=({fieldName:x,url:I})=>{const{t}=de(),a=x.substring(x.indexOf(".")+1);return e(Ae,{name:x,label:t(a),labelIcon:e(Yt,{i18nKey:`${a}Help`,components:{formattedlink:e(qt,{href:I,title:t("learnMore")})}})})},Ui=({realm:x,save:I})=>{const{t}=de(),a=Ct(),{reset:d,formState:{isDirty:r},handleSubmit:c}=a;return H(_e,{isHorizontal:!0,role:"manage-realm",className:"keycloak__security-defences__form",onSubmit:c(I),children:[e(lt,{fieldName:"browserSecurityHeaders.xFrameOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options"}),e(lt,{fieldName:"browserSecurityHeaders.contentSecurityPolicy",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy"}),e(lt,{fieldName:"browserSecurityHeaders.contentSecurityPolicyReportOnly",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only"}),e(lt,{fieldName:"browserSecurityHeaders.xContentTypeOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options"}),e(lt,{fieldName:"browserSecurityHeaders.xRobotsTag",url:"https://developers.google.com/search/docs/advanced/robots/robots_meta_tag"}),e(lt,{fieldName:"browserSecurityHeaders.strictTransportSecurity",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security"}),e(lt,{fieldName:"browserSecurityHeaders.referrerPolicy",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy"}),H(He,{children:[e(oe,{variant:"primary",type:"submit","data-testid":"headers-form-tab-save",isDisabled:!r,children:t("save")}),e(oe,{variant:"link",onClick:()=>d(x),children:t("revert")})]})]})},Gt=({name:x,style:I,min:t})=>{const{t:a}=de();return e(Jt,{name:x,style:I,label:a(x),labelIcon:a(`${x}Help`),min:t,controller:{defaultValue:"",rules:{required:a("required"),min:t}}})},Vi=({realm:x,save:I})=>{const{t}=de(),a=Fe(),{setValue:d,handleSubmit:r,formState:{isDirty:c}}=a,[i,o]=J(!1),[p,k]=J(!1);let w;(f=>{f.Disabled="Disabled",f.PermanentLockout="PermanentLockout",f.TemporaryLockout="TemporaryLockout",f.PermanentAfterTemporaryLockout="PermanentAfterTemporaryLockout"})(w||(w={}));const y=["Disabled","PermanentLockout","TemporaryLockout","PermanentAfterTemporaryLockout"],u=["MULTIPLE","LINEAR"],g=()=>{Rt(x,d),k(!1)};at(g,[x]);const s=a.getValues("bruteForceProtected")?a.getValues("permanentLockout")?a.getValues("maxTemporaryLockouts")==0?"PermanentLockout":"PermanentAfterTemporaryLockout":"TemporaryLockout":"Disabled";return e(Ve,{...a,children:H(_e,{role:"manage-realm",isHorizontal:!0,onSubmit:r(I),children:[e(se,{label:t("bruteForceMode"),fieldId:"kc-brute-force-mode",labelIcon:e(he,{helpText:t("bruteForceModeHelpText"),fieldLabelId:"bruteForceMode"}),children:e(qe,{toggleId:"kc-brute-force-mode",onToggle:()=>o(!i),onSelect:f=>{switch(f){case"Disabled":a.setValue("bruteForceProtected",!1),a.setValue("permanentLockout",!1),a.setValue("maxTemporaryLockouts",0);break;case"TemporaryLockout":a.setValue("bruteForceProtected",!0),a.setValue("permanentLockout",!1),a.setValue("maxTemporaryLockouts",0);break;case"PermanentLockout":a.setValue("bruteForceProtected",!0),a.setValue("permanentLockout",!0),a.setValue("maxTemporaryLockouts",0);break;case"PermanentAfterTemporaryLockout":a.setValue("bruteForceProtected",!0),a.setValue("permanentLockout",!0),a.setValue("maxTemporaryLockouts",1);break}k(!0),o(!1)},selections:s,variant:Qe.single,isOpen:i,"data-testid":"select-brute-force-mode","aria-label":t("selectUnmanagedAttributePolicy"),children:y.map(f=>e(Le,{value:f,children:t(`bruteForceMode.${f}`)},f))})}),s!=="Disabled"&&H(ve,{children:[e(ia,{name:"failureFactor",label:t("failureFactor"),labelIcon:t("failureFactorHelp"),controller:{defaultValue:0,rules:{required:t("required"),min:0}}}),s==="PermanentAfterTemporaryLockout"&&e(ia,{name:"maxTemporaryLockouts",label:t("maxTemporaryLockouts"),labelIcon:t("maxTemporaryLockoutsHelp"),controller:{defaultValue:0,rules:{min:0}}}),(s==="TemporaryLockout"||s==="PermanentAfterTemporaryLockout")&&H(ve,{children:[e(Me,{name:"bruteForceStrategy",label:t("bruteForceStrategy"),labelIcon:t("bruteForceStrategyHelp",{failureFactor:a.getValues("failureFactor")}),controller:{defaultValue:""},options:u.map(f=>({key:f,value:t(`bruteForceStrategy.${f}`)}))}),e(Gt,{name:"waitIncrementSeconds",min:0}),e(Gt,{name:"maxFailureWaitSeconds",min:0}),e(Gt,{name:"maxDeltaTimeSeconds",min:0})]}),e(ia,{name:"quickLoginCheckMilliSeconds",label:t("quickLoginCheckMilliSeconds"),labelIcon:t("quickLoginCheckMilliSecondsHelp"),controller:{defaultValue:0,rules:{min:0}}}),e(Gt,{name:"minimumQuickLoginWaitSeconds",min:0})]}),H(He,{children:[e(oe,{variant:"primary",type:"submit","data-testid":"brute-force-tab-save",isDisabled:!c&&!p,children:t("save")}),e(oe,{variant:"link",onClick:g,children:t("revert")})]})]})})},Hi=({realm:x,save:I})=>{const{t}=de(),[a,d]=J(10);return H(zt,{activeKey:a,onSelect:(r,c)=>d(c),children:[e(me,{id:"headers",eventKey:10,"data-testid":"security-defenses-headers-tab",title:e(pe,{children:t("headers")}),children:e(xe,{variant:"light",children:e(Ui,{realm:x,save:I})})}),e(me,{id:"bruteForce",eventKey:20,"data-testid":"security-defenses-brute-force-tab",title:e(pe,{children:t("bruteForceDetection")}),children:e(xe,{variant:"light",children:e(Vi,{realm:x,save:I})})})]})},Ki=({setTableData:x})=>{const{adminClient:I}=Te(),{config:t,save:a}=Ca(),{t:d}=de(),r=_a(),c=wt(),{realm:i}=Ce(),[o,p]=J(0),[k,w]=J();at(()=>p(f=>f+1),[t]);async function y(){return t?.groups??[]}const[u,g]=De({titleKey:"deleteDialogTitle",children:H(Yt,{i18nKey:"deleteDialogDescription",children:[" ",e("strong",{children:{group:k?.name}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:Ee.danger,onConfirm:async()=>{const f=(t?.groups??[]).filter(C=>C!==k),h=k?.displayHeader?.substring(2,k?.displayHeader.length-1),m=k?.displayDescription?.substring(2,k?.displayDescription.length-1);try{await Promise.all(r.map(async C=>{try{if(await I.realms.getRealmLocalizationTexts({realm:i,selectedLocale:C})){await I.realms.deleteRealmLocalizationTexts({realm:i,selectedLocale:C,key:h}),await I.realms.deleteRealmLocalizationTexts({realm:i,selectedLocale:C,key:m});const S=await I.realms.getRealmLocalizationTexts({realm:i,selectedLocale:C});x([S])}}catch{console.error(`Error removing translations for ${C}`)}})),await a({...t,groups:f},{successMessageKey:"deleteSuccess",errorMessageKey:"deleteAttributeGroupError"})}catch(C){console.error(`Error removing translations or updating attributes group: ${C}`)}}});function s(f){w(f),u()}return H(xe,{variant:"light",className:"pf-v5-u-p-0",children:[e(g,{}),e(st,{loader:y,ariaLabelKey:"tableTitle",toolbarItem:e(ze,{children:e(oe,{component:f=>e(Be,{"data-testid":"create-attributes-groups-action",...f,to:Ra({realm:i})}),children:d("createGroupText")})}),columns:[{name:"name",displayKey:"columnName",cellRenderer:f=>e(Be,{to:lr({realm:i,name:f.name}),children:f.name})},{name:"displayHeader",displayKey:"columnDisplayName"},{name:"displayDescription",displayKey:"columnDisplayDescription"}],actions:[{title:d("delete"),onRowClick:s}],emptyState:e(Ze,{message:d("emptyStateMessage"),instructions:d("emptyStateInstructions"),primaryActionText:d("createGroupText"),onPrimaryAction:()=>c(Ra({realm:i}))})},o)]})},ji=["username","email"],Gi=({setTableData:x})=>{const{adminClient:I}=Te(),{config:t,save:a}=Ca(),{realm:d}=Ce(),{t:r}=de(),c=_a(),i=wt(),[o,p]=J("allGroups"),[k,w]=rt(),[y,u]=J(t?.attributes),[g,s]=J(""),[f,h]=De({titleKey:r("deleteAttributeConfirmTitle"),messageKey:r("deleteAttributeConfirm",{attributeName:g}),continueButtonLabel:r("delete"),continueButtonVariant:Ee.danger,onConfirm:async()=>{if(!t?.attributes)return;const L=t.attributes.find(D=>D.name===g)?.displayName,A=L?.substring(2,L.length-1);try{await Promise.all(c.map(async P=>{try{if(await I.realms.getRealmLocalizationTexts({realm:d,selectedLocale:P})){await I.realms.deleteRealmLocalizationTexts({realm:d,selectedLocale:P,key:A});const W=await I.realms.getRealmLocalizationTexts({realm:d,selectedLocale:P});x([W])}}catch{console.error(`Error removing translations for ${P}`)}}));const D=t.attributes.filter(P=>P.name!==g);await a({...t,attributes:D,groups:t.groups},{successMessageKey:"deleteAttributeSuccess",errorMessageKey:"deleteAttributeError"}),s("")}catch(D){console.error(`Error removing translations or updating attributes: ${D}`)}}});if(!t)return e(tt,{});const m=t.attributes??[],C=t.groups??[],_=async(L,A)=>{const D=m.findIndex(O=>O.name===L.name);let P={};P=m[D],m.splice(D,1),m.splice(A,0,P),await a({...t,attributes:m,groups:C},{successMessageKey:"updatedUserProfileSuccess",errorMessageKey:"updatedUserProfileError"})},S=L=>e(Be,{to:Da({realm:d,attributeName:L.name}),children:L.name},L.name);return H(ve,{children:[e(Xa,{children:H(cr,{children:[e(ze,{children:e(qe,{toggleId:"kc-group-filter",width:200,"data-testid":"filter-select",isOpen:k,variant:Qe.single,onToggle:w,toggleIcon:e(ln,{}),onSelect:L=>{const A=L.toString();p(A),u(A==="allGroups"?m:m.filter(D=>D.group===A)),w()},selections:o==="allGroups"?r(o):o,children:[e(Le,{"data-testid":"all-groups",value:"allGroups",children:r("allGroups")},"allGroups"),...dr(m.filter(L=>!!L.group),"group").map(L=>e(Le,{value:L.group,children:L.group},L.group))]})}),e(ze,{className:"kc-toolbar-attributesTab",children:e(oe,{"data-testid":"createAttributeBtn",variant:"primary",component:L=>e(Be,{...L,to:ur({realm:d})}),children:r("createAttribute")})})]})}),e(it,{}),e(h,{}),e(cn,{keyField:"name",onDragFinish:async(L,A)=>{const D=m.map(T=>T.name),P=A.indexOf(L),O=D.indexOf(L),W=m[O];W.name&&await _(W,P)},actions:[{title:r("edit"),onClick:(L,A,D)=>{i(Da({realm:d,attributeName:D.name}))}},{title:r("delete"),isActionable:({name:L})=>!ji.includes(L),onClick:(L,A,D)=>{s(D.name),f()}}],columns:[{name:"name",displayKey:r("attributeName"),cellRenderer:S},{name:"displayName",displayKey:r("attributeDisplayName")},{name:"group",displayKey:r("attributeGroup")}],data:y??m})]})},Wi=()=>{const{config:x,save:I,isSaving:t}=Ca(),{t:a}=de(),{addError:d}=Oe(),[r,c]=J(kt(x));function i(){c(x?kt(x):"")}async function o(){const p=r;if(p)try{await I(JSON.parse(p))}catch(k){d("invalidJsonError",k);return}}return H(xe,{variant:"light",children:[e(wa,{language:"json",value:r,onChange:p=>c(p??""),height:480}),e(ft,{children:H(He,{children:[e(oe,{"data-testid":"save",variant:"primary",onClick:o,isDisabled:t,children:a("save")}),e(oe,{variant:"link",onClick:i,isDisabled:t,children:a("revert")})]})})]})},qi=({setTableData:x})=>{const{realm:I}=Ce(),{t}=de(),a=i=>dt(za({realm:I,tab:i})),d=a("attributes"),r=a("attributes-group"),c=a("json-editor");return e(Br,{children:H(Pt,{defaultLocation:za({realm:I,tab:"attributes"}),mountOnEnter:!0,children:[e(me,{title:e(pe,{children:t("attributes")}),"data-testid":"attributesTab",...d,children:e(Gi,{setTableData:x})}),e(me,{title:e(pe,{children:t("attributesGroup")}),"data-testid":"attributesGroupTab",...r,children:e(Ki,{setTableData:x})}),e(me,{title:e(pe,{children:t("jsonEditor")}),"data-testid":"jsonEditorTab",...c,children:e(Wi,{})})]})})},Zi=({save:x,onChange:I,value:t,realmName:a,refresh:d})=>{const{adminClient:r}=Te(),{environment:c}=ba(),{t:i}=de(),{addAlert:o,addError:p}=Oe(),k=wt(),[w,y]=J(!1),[u,g]=J(!1),{hasAccess:s}=ya(),f=s("manage-realm"),[h,m]=De({titleKey:"disableConfirmTitle",messageKey:"disableConfirmRealm",continueButtonLabel:"disable",onConfirm:()=>{I(!t),x()}}),[C,_]=De({titleKey:"deleteConfirmTitle",messageKey:"deleteConfirmRealmSetting",continueButtonLabel:"delete",continueButtonVariant:Ee.danger,onConfirm:async()=>{try{await r.realms.del({realm:a}),o(i("deletedSuccessRealmSetting"),Ie.success),k(hr({realm:c.masterRealm})),d()}catch(S){p("deleteErrorRealmSetting",S)}}});return H(ve,{children:[e(m,{}),e(_,{}),e(oi,{open:w,toggleDialog:()=>y(!w)}),e(si,{isOpen:u,onClose:()=>g(!1)}),e(yr,{titleKey:a,subKey:"realmSettingsExplain",helpUrl:fr.realmSettingsUrl,divider:!1,dropdownItems:[e(Lt,{"data-testid":"openPartialImportModal",isDisabled:!f,onClick:()=>{y(!0)},children:i("partialImport")},"import"),e(Lt,{"data-testid":"openPartialExportModal",isDisabled:!f,onClick:()=>g(!0),children:i("partialExport")},"export"),e(it,{},"separator"),e(Lt,{isDisabled:!f,onClick:C,children:i("delete")},"delete")],isEnabled:t,isReadOnly:!f,onToggle:S=>{S?(I(S),x()):h()}})]})},$i=()=>{const{adminClient:x}=Te(),{t:I}=de(),{addAlert:t,addError:a}=Oe(),{realm:d,realmRepresentation:r,refresh:c}=Ce(),i=_a(),o=wt(),p=Qt(),[k,w]=J(void 0),y=Fe({mode:"onChange"}),{control:u,setValue:g,getValues:s}=y,[f,h]=J(0),m=()=>{h(f+1)},C=(ne=r)=>{Rt(ne,g)};at(()=>{C(),(async()=>{try{await Promise.all(i.map(async be=>{try{const ie=await x.realms.getRealmLocalizationTexts({realm:d,selectedLocale:be});ie&&w([ie])}catch{return[]}}))}catch{return[]}})()},[g,r]);const _=async ne=>{ne=mr(ne),ne.attributes?.["acr.loa.map"]&&typeof ne.attributes["acr.loa.map"]!="string"&&(ne.attributes["acr.loa.map"]=JSON.stringify(Object.fromEntries(ne.attributes["acr.loa.map"].filter(({key:ie})=>ie!=="").map(({key:ie,value:ce})=>[ie,ce]))));try{const ie={...r,...ne,id:ne.realm};ie.smtpServer?.port===""&&(ie.smtpServer={...ie.smtpServer,port:null});const ce=await pr(qa(x.baseUrl,`admin/realms/${d}/ui-ext`),{method:"PUT",body:JSON.stringify(ie),headers:{"Content-Type":"application/json",...gr(await x.getAccessToken())}});if(!ce.ok)throw new Error(ce.statusText);t(I("realmSaveSuccess"),Ie.success)}catch(ie){a("realmSaveError",ie)}d!==(ne.realm||r?.realm)&&o(sa({realm:ne.realm,tab:"general"})),c()},S=ne=>dt(sa({realm:d,tab:ne})),L=S("general"),A=S("login"),D=S("email"),P=S("themes"),O=S("keys"),W=S("events"),T=S("localization"),F=S("security-defenses"),l=S("sessions"),U=S("tokens"),Q=S("client-policies"),j=S("user-profile"),re=S("user-registration"),{hasAccess:q,hasSomeAccess:ae}=ya(),N=q("view-realm")&&ae("view-events","manage-events"),R=q("view-realm")&&ae("view-clients","manage-clients"),K=ne=>dt(ha({realm:d,tab:ne})),M=K("profiles"),$=K("policies");return H(Ve,{...y,children:[e(fe,{name:"enabled",defaultValue:!0,control:u,render:({field:ne})=>e(Zi,{value:ne.value,onChange:ne.onChange,realmName:d,refresh:m,save:()=>_(s())})}),e(xe,{variant:"light",className:"pf-v5-u-p-0",children:H(Pt,{isBox:!0,mountOnEnter:!0,"aria-label":"realm-settings-tabs",defaultLocation:sa({realm:d,tab:"general"}),children:[e(me,{title:e(pe,{children:I("general")}),"data-testid":"rs-general-tab",...L,children:e(ai,{realm:r,save:_})}),e(me,{title:e(pe,{children:I("login")}),"data-testid":"rs-login-tab",...A,children:e(ii,{refresh:c,realm:r})}),e(me,{title:e(pe,{children:I("email")}),"data-testid":"rs-email-tab",...D,children:e(ti,{realm:r,save:_})}),e(me,{title:e(pe,{children:I("themes")}),"data-testid":"rs-themes-tab",...P,children:e(ki,{realm:r,save:_})}),e(me,{title:e(pe,{children:I("keys")}),"data-testid":"rs-keys-tab",...O,children:e(zi,{})}),N&&e(me,{title:e(pe,{children:I("events")}),"data-testid":"rs-realm-events-tab",...W,children:e(xi,{realm:r})}),e(me,{title:e(pe,{children:I("localization")}),"data-testid":"rs-localization-tab",...T,children:e(Mi,{save:_,realm:r,tableData:k},f)}),e(me,{title:e(pe,{children:I("securityDefences")}),"data-testid":"rs-security-defenses-tab",...F,children:e(Hi,{realm:r,save:_})}),e(me,{title:e(pe,{children:I("sessions")}),"data-testid":"rs-sessions-tab",...l,children:e(ui,{realm:r,save:_},f)}),e(me,{title:e(pe,{children:I("tokens")}),"data-testid":"rs-tokens-tab",...U,children:e(_i,{save:_,realm:r})}),p(nt.ClientPolicies)&&e(me,{title:e(pe,{children:I("clientPolicies")}),"data-testid":"rs-clientPolicies-tab",...Q,children:H(Pt,{mountOnEnter:!0,defaultLocation:ha({realm:d,tab:"profiles"}),children:[e(me,{id:"profiles","data-testid":"rs-policies-clientProfiles-tab","aria-label":I("clientProfilesSubTab"),title:e(pe,{children:I("profiles")}),tooltip:e(Na,{content:I("clientPoliciesProfilesHelpText")}),...M,children:e(di,{})}),e(me,{id:"policies","data-testid":"rs-policies-clientPolicies-tab","aria-label":I("clientPoliciesSubTab"),...$,title:e(pe,{children:I("policies")}),tooltip:e(Na,{content:I("clientPoliciesPoliciesHelpText")}),children:e(li,{})})]})}),e(me,{title:e(pe,{children:I("userProfile")}),"data-testid":"rs-user-profile-tab",...j,children:e(qi,{setTableData:w})}),R&&e(me,{title:e(pe,{children:I("userRegistration")}),"data-testid":"rs-userRegistration-tab",...re,children:e(Ci,{})})]})})]})};function Ks(){return e($i,{})}export{Ks as default};
//# sourceMappingURL=RealmSettingsSection-QXout0jT.js.map
