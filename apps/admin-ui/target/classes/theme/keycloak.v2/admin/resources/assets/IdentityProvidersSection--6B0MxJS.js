import{jsxs as d,Fragment as u,jsx as a}from"react/jsx-runtime";import{aw as U,av as $,cu as J,cN as Q,cO as Z,u as q,a as v,e as W,d as f,b as X,_ as Y,y as ee,B as w,o as ae,ap as te,P as re,H as x,I as L,J as N,bO as ie,a1 as ne,a2 as S,cP as se,x as oe,c5 as le,v as de,T as y,cc as ce,aM as me,aN as pe,al as ge,g as he,cQ as z,D as ue,L as K,cK as ye,c0 as ve,cR as fe}from"./main-o1hptXRo.js";import be,{useState as m,Fragment as Ie}from"react";import{u as Pe}from"./ConfirmDialog-BkU7melV.js";import{G as Ce,C as Oe}from"./ClickableCard-DgPHEb-r.js";import{V as ke}from"./ViewHeader-BDBsroi3.js";import{M as De}from"./ManageOrderDialog-DZujO-TJ.js";import{b as we,s as A}from"./sortBy-DjlFeX8O.js";import{M as xe}from"./MenuGroup-ldqwBZhf.js";import"react-dom";import"./DataListControl-DO3by3XW.js";import"./DataListItemRow-B_0B-ko6.js";import"./Droppable-daSE-az7.js";import"./_baseFlatten-BLlCkxtA.js";const B=e=>{var{children:t,className:i,label:s,labelHeadingLevel:o="h1"}=e,l=U(e,["children","className","label","labelHeadingLevel"]);return be.createElement(xe,Object.assign({className:$(i),label:s,labelHeadingLevel:o},l),t)};B.displayName="DropdownGroup";function Le(e,t,i,s){for(var o=-1,l=e==null?0:e.length;++o<l;){var c=e[o];t(s,c,i(c),e)}return s}function Ne(e,t,i,s){return we(e,function(o,l,c){t(s,o,i(o),c)}),s}function Se(e,t){return function(i,s){var o=Q(i)?Le:Ne,l={};return o(i,e,J(s),l)}}var ze=Object.prototype,Ae=ze.hasOwnProperty,Ke=Se(function(e,t,i){Ae.call(e,i)?e[i].push(t):Z(e,i,[t])});const Be=e=>{const{t}=v(),{realm:i}=f();return d(K,{to:ye({realm:i,providerId:e.providerId,alias:e.alias,tab:"settings"}),children:[e.displayName||e.alias,!e.enabled&&a(ve,{isRead:!0,className:"pf-v5-u-ml-sm",children:t("disabled")},`${e.providerId}-disabled`)]},e.providerId)},Re=e=>{const{t}=v(),{realm:i}=f();return e?.organizationId?a(K,{to:fe({realm:i,id:e.organizationId,tab:"identityProviders"}),children:t("organization")},e.providerId):"â€”"};function We(){const{adminClient:e}=q(),{t}=v(),i=Ke(W().identityProviders,"groupName"),{realm:s}=f(),o=X(),[l,c]=m(0),p=()=>c(l+1),[h,b]=m(!1),[I,P]=m(!1),[R,C]=m(!1),[g,T]=m(!1),[O,F]=m(),{addAlert:V,addError:j}=Y();ee(async()=>e.identityProviders.find({max:1}),r=>{T(r.length===1)},[l]);const G=async(r,n,k)=>{const D={first:r,max:n,realmOnly:h};return k&&(D.search=k),await e.identityProviders.find(D)},H=r=>o(z({realm:s,providerId:r})),M=()=>Object.keys(i).map(r=>a(B,{label:r,children:A(i[r],"name").map(n=>a(ue,{value:n.id,component:"a","data-testid":n.id,onClick:()=>o(z({realm:s,providerId:n.id})),children:n.name},n.id))},r)),[E,_]=Pe({titleKey:"deleteProvider",messageKey:t("deleteConfirm",{provider:O?.alias}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{await e.identityProviders.del({alias:O.alias}),p(),V(t("deletedSuccessIdentityProvider"),ae.success)}catch(r){j("deleteErrorIdentityProvider",r)}}});return d(u,{children:[a(_,{}),R&&a(De,{hideRealmBasedIdps:h,onClose:()=>{C(!1),p()}}),a(ke,{titleKey:"identityProviders",subKey:"listExplain",helpUrl:te.identityProvidersUrl}),d(re,{variant:g?"light":"default",className:g?"pf-v5-u-p-0":"",children:[!g&&d(u,{children:[a(x,{children:a(L,{component:N.p,children:t("getStarted")})}),Object.keys(i).map(r=>d(Ie,{children:[a(x,{children:d(L,{className:"pf-v5-u-mt-lg",component:N.h2,children:[r,":"]})}),a("hr",{className:"pf-v5-u-mb-lg"}),a(Ce,{hasGutter:!0,children:A(i[r],"name").map(n=>a(Oe,{"data-testid":`${n.id}-card`,onClick:()=>H(n.id),children:a(ie,{children:d(ne,{hasGutter:!0,children:[a(S,{children:a(se,{icon:n.id})}),a(S,{isFilled:!0,children:n.name})]})})},n.id))})]},r))]}),g&&a(oe,{loader:G,isPaginated:!0,ariaLabelKey:"identityProviders",searchPlaceholderKey:"searchForProvider",toolbarItem:d(u,{children:[a(y,{alignSelf:"center",children:a(ce,{label:t("hideOrganizationLinkedIdps"),id:"hideOrganizationLinkedIdps","data-testid":"hideOrganizationLinkedIdps",isChecked:h,onChange:(r,n)=>{b(n),p()}})}),a(y,{children:a(me,{"data-testid":"addProviderDropdown",onOpenChange:r=>P(r),toggle:r=>a(ge,{ref:r,onClick:()=>P(!I),variant:"primary",children:t("addProvider")}),isOpen:I,children:a(pe,{children:M()})})}),a(y,{children:a(he,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>C(!0),children:t("manageDisplayOrder")})})]}),actions:[{title:t("delete"),onRowClick:r=>{F(r),E()}}],columns:[{name:"alias",displayKey:"name",cellRenderer:Be},{name:"providerId",displayKey:"providerDetails",cellFormatters:[le()]},{name:"organizationId",displayKey:"linkedOrganization",cellRenderer:Re}],emptyState:a(de,{message:t("identityProviders"),instructions:t("emptyRealmBasedIdps"),isSearchVariant:!0,secondaryActions:[{text:t("clearAllFilters"),onClick:()=>{b(!1),p()},type:w.link}]})},l)]})]})}export{We as default};
//# sourceMappingURL=IdentityProvidersSection--6B0MxJS.js.map
