{"version":3,"file":"useSortedResourceTypes-DOYOPDde.js","sources":["../../../../../../../src/permissions-configuration/resource-types/GroupSelect.tsx","../../../../../../../src/permissions-configuration/resource-types/RoleSelect.tsx","../../../../../../../src/permissions-configuration/resource-types/ClientSelectComponent.tsx","../../../../../../../src/permissions-configuration/resource-types/ResourceType.tsx","../../../../../../../src/utils/useSortedResourceTypes.ts"],"sourcesContent":["import GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport {\r\n  FormErrorText,\r\n  HelpItem,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, FormGroup } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport type { ComponentProps } from \"../../components/dynamic/components\";\r\nimport { GroupPickerDialog } from \"../../components/group/GroupPickerDialog\";\r\n\r\ntype GroupSelectProps = Omit<ComponentProps, \"convertToName\"> & {\r\n  variant?: \"typeahead\" | \"typeaheadMulti\";\r\n  isRequired?: boolean;\r\n};\r\n\r\nconst convertGroups = (groups: GroupRepresentation[]): string[] =>\r\n  groups.map(({ id }) => id!);\r\n\r\nexport const GroupSelect = ({\r\n  name,\r\n  label,\r\n  helpText,\r\n  defaultValue,\r\n  isDisabled = false,\r\n  isRequired,\r\n  variant = \"typeaheadMulti\",\r\n}: GroupSelectProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const {\r\n    control,\r\n    setValue,\r\n    getValues,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  const values: string[] = getValues(name!);\r\n  const [open, setOpen] = useState(false);\r\n  const [groups, setGroups] = useState<GroupRepresentation[]>([]);\r\n\r\n  useFetch(\r\n    () => {\r\n      if (values && values.length > 0) {\r\n        return Promise.all(\r\n          (values as string[]).map((id) => adminClient.groups.findOne({ id })),\r\n        );\r\n      }\r\n      return Promise.resolve([]);\r\n    },\r\n    (groups) => {\r\n      setGroups(groups.flat().filter((g) => g) as GroupRepresentation[]);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const selectOne = variant === \"typeahead\";\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(label!)}\r\n      labelIcon={<HelpItem helpText={t(helpText!)} fieldLabelId=\"groups\" />}\r\n      fieldId=\"groups\"\r\n      isRequired={isRequired}\r\n    >\r\n      <Controller\r\n        name={name!}\r\n        control={control}\r\n        defaultValue={defaultValue}\r\n        rules={{\r\n          validate: (value?: string[]) =>\r\n            !isRequired || (value && value.length > 0),\r\n        }}\r\n        render={({ field }) => (\r\n          <>\r\n            {open && (\r\n              <GroupPickerDialog\r\n                type={selectOne ? \"selectOne\" : \"selectMany\"}\r\n                text={{\r\n                  title: \"addGroupsToGroupPolicy\",\r\n                  ok: \"add\",\r\n                }}\r\n                onConfirm={(selectGroup) => {\r\n                  if (selectOne) {\r\n                    field.onChange(convertGroups(selectGroup || []));\r\n                    setGroups(selectGroup || []);\r\n                  } else {\r\n                    field.onChange([\r\n                      ...(field.value || []),\r\n                      ...convertGroups(selectGroup || []),\r\n                    ]);\r\n                    setGroups([...groups, ...(selectGroup || [])]);\r\n                  }\r\n                  setOpen(false);\r\n                }}\r\n                onClose={() => {\r\n                  setOpen(false);\r\n                }}\r\n                filterGroups={groups}\r\n              />\r\n            )}\r\n            <Button\r\n              data-testid=\"select-group-button\"\r\n              isDisabled={isDisabled}\r\n              variant=\"secondary\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n              }}\r\n            >\r\n              {t(\"addGroups\")}\r\n            </Button>\r\n          </>\r\n        )}\r\n      />\r\n      {groups.length > 0 && (\r\n        <Table variant=\"compact\">\r\n          <Thead>\r\n            <Tr>\r\n              <Th>{t(\"groups\")}</Th>\r\n              <Th aria-hidden=\"true\" />\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n            {groups.map((group) => (\r\n              <Tr key={group.id}>\r\n                <Td>{group.path}</Td>\r\n                <Td>\r\n                  <Button\r\n                    variant=\"link\"\r\n                    className=\"keycloak__client-authorization__policy-row-remove\"\r\n                    icon={<MinusCircleIcon />}\r\n                    onClick={() => {\r\n                      setValue(name!, [\r\n                        ...convertGroups(\r\n                          (groups || []).filter(({ id }) => id !== group.id),\r\n                        ),\r\n                      ]);\r\n                      setGroups([\r\n                        ...groups.filter(({ id }) => id !== group.id),\r\n                      ]);\r\n                    }}\r\n                  />\r\n                </Td>\r\n              </Tr>\r\n            ))}\r\n          </Tbody>\r\n        </Table>\r\n      )}\r\n      {errors[name!] && <FormErrorText message={t(\"requiredGroups\")} />}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import {\r\n  FormErrorText,\r\n  HelpItem,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, FormGroup } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport {\r\n  AddRoleButton,\r\n  AddRoleMappingModal,\r\n  FilterType,\r\n} from \"../../components/role-mapping/AddRoleMappingModal\";\r\nimport { Row, ServiceRole } from \"../../components/role-mapping/RoleMapping\";\r\n\r\ntype RoleSelectorProps = {\r\n  name: string;\r\n  isRadio?: boolean;\r\n};\r\n\r\nexport const RoleSelect = ({ name, isRadio = false }: RoleSelectorProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const {\r\n    getValues,\r\n    setValue,\r\n    formState: { errors },\r\n  } = useFormContext<{ [key: string]: string[] }>();\r\n  const values = getValues(name) || [];\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedRoles, setSelectedRoles] = useState<Row[]>([]);\r\n  const [filterType, setFilterType] = useState<FilterType>(\"clients\");\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (values.length > 0) {\r\n        const roles = await Promise.all(\r\n          values.map((id) => adminClient.roles.findOneById({ id })),\r\n        );\r\n        return Promise.all(\r\n          roles.map(async (role) => ({\r\n            role: role!,\r\n            client: role!.clientRole\r\n              ? await adminClient.clients.findOne({ id: role?.containerId! })\r\n              : undefined,\r\n          })),\r\n        );\r\n      }\r\n      return [];\r\n    },\r\n    setSelectedRoles,\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <FormGroup\r\n      label={isRadio ? t(\"role\") : t(\"roles\")}\r\n      labelIcon={\r\n        <HelpItem\r\n          helpText={isRadio ? t(\"selectRole\") : t(\"policyRolesHelp\")}\r\n          fieldLabelId=\"roles\"\r\n        />\r\n      }\r\n      fieldId={name}\r\n      isRequired\r\n    >\r\n      {isModalOpen && (\r\n        <AddRoleMappingModal\r\n          id=\"role\"\r\n          type=\"roles\"\r\n          title={t(\"selectRole\")}\r\n          actionLabel={t(\"select\")}\r\n          isRadio={isRadio}\r\n          onAssign={(rows) => {\r\n            setValue(name, [\r\n              ...(!isRadio ? values : []),\r\n              ...rows\r\n                .filter((row) => row.role.id !== undefined)\r\n                .map((row) => row.role.id!),\r\n            ]);\r\n\r\n            setSelectedRoles(isRadio ? rows : [...selectedRoles, ...rows]);\r\n            setIsModalOpen(false);\r\n          }}\r\n          onClose={() => setIsModalOpen(false)}\r\n          filterType={filterType}\r\n        />\r\n      )}\r\n      <AddRoleButton\r\n        label={isRadio ? t(\"selectRole\") : t(\"addRoles\")}\r\n        data-testid=\"select-role-button\"\r\n        variant=\"secondary\"\r\n        onFilerTypeChange={(type) => {\r\n          setFilterType(type);\r\n          setIsModalOpen(true);\r\n        }}\r\n      />\r\n      {selectedRoles.length > 0 && (\r\n        <Table variant=\"compact\">\r\n          <Thead>\r\n            <Tr>\r\n              <Th>{t(\"roles\")}</Th>\r\n              <Th aria-hidden=\"true\" />\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n            {selectedRoles.map((row) => (\r\n              <Tr key={row.role.id}>\r\n                <Td>\r\n                  <ServiceRole role={row.role} client={row.client} />\r\n                </Td>\r\n                <Td>\r\n                  <Button\r\n                    variant=\"link\"\r\n                    className=\"keycloak__client-authorization__policy-row-remove\"\r\n                    icon={<MinusCircleIcon />}\r\n                    onClick={() => {\r\n                      setValue(\r\n                        name,\r\n                        values.filter((id) => id !== row.role.id),\r\n                      );\r\n                      setSelectedRoles(\r\n                        selectedRoles.filter((s) => s.role.id !== row.role.id),\r\n                      );\r\n                    }}\r\n                  />\r\n                </Td>\r\n              </Tr>\r\n            ))}\r\n          </Tbody>\r\n        </Table>\r\n      )}\r\n      {errors[name] && <FormErrorText message={t(\"requiredRoles\")} />}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import { ClientSelect } from \"../../components/client/ClientSelect\";\r\nimport { ComponentProps } from \"../../components/dynamic/components\";\r\n\r\nexport const ClientSelectComponent = (props: ComponentProps) => (\r\n  <ClientSelect {...props} clientKey=\"id\" />\r\n);\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { FormGroup, Radio } from \"@patternfly/react-core\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useState, type JSX } from \"react\";\r\nimport { GroupSelect } from \"./GroupSelect\";\r\nimport { UserSelect } from \"../../components/users/UserSelect\";\r\nimport { RoleSelect } from \"./RoleSelect\";\r\nimport { ClientSelectComponent } from \"./ClientSelectComponent\";\r\n\r\ntype ResourceTypeProps = {\r\n  withEnforceAccessTo?: boolean;\r\n  resourceType: string;\r\n};\r\n\r\nexport const COMPONENTS: {\r\n  [index: string]: (props: any) => JSX.Element;\r\n} = {\r\n  users: UserSelect,\r\n  clients: ClientSelectComponent,\r\n  groups: GroupSelect,\r\n  roles: RoleSelect,\r\n} as const;\r\n\r\nexport const isValidComponentType = (value: string) => value in COMPONENTS;\r\n\r\nexport const ResourceType = ({\r\n  resourceType,\r\n  withEnforceAccessTo = true,\r\n}: ResourceTypeProps) => {\r\n  const { t } = useTranslation();\r\n  const form = useFormContext();\r\n  const resourceIds: string[] = form.getValues(\"resources\");\r\n  const normalizedResourceType = resourceType.toLowerCase();\r\n\r\n  const [isSpecificResources, setIsSpecificResources] = useState(\r\n    resourceIds?.some((id) => id !== resourceType) || !withEnforceAccessTo,\r\n  );\r\n\r\n  function getComponentType() {\r\n    if (isValidComponentType(normalizedResourceType)) {\r\n      return COMPONENTS[normalizedResourceType];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const ComponentType = getComponentType();\r\n\r\n  return (\r\n    <>\r\n      {withEnforceAccessTo && (\r\n        <FormGroup\r\n          label={t(\"enforceAccessTo\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"enforceAccessToHelpText\")}\r\n              fieldLabelId=\"enforce-access-to\"\r\n            />\r\n          }\r\n          fieldId=\"EnforceAccessTo\"\r\n          hasNoPaddingTop\r\n          isRequired\r\n        >\r\n          <Radio\r\n            id=\"allResources\"\r\n            data-testid=\"allResources\"\r\n            isChecked={!isSpecificResources}\r\n            name=\"EnforceAccessTo\"\r\n            label={t(`allResourceType`, { resourceType })}\r\n            onChange={() => {\r\n              setIsSpecificResources(false);\r\n              form.setValue(\"resources\", []);\r\n            }}\r\n            className=\"pf-v5-u-mb-md\"\r\n          />\r\n          <Radio\r\n            id=\"specificResources\"\r\n            data-testid=\"specificResources\"\r\n            isChecked={isSpecificResources}\r\n            name=\"EnforceAccessTo\"\r\n            label={t(`specificResourceType`, { resourceType })}\r\n            onChange={() => {\r\n              setIsSpecificResources(true);\r\n              form.setValue(\"resources\", []);\r\n            }}\r\n            className=\"pf-v5-u-mb-md\"\r\n          />\r\n        </FormGroup>\r\n      )}\r\n      {isSpecificResources && ComponentType && (\r\n        <ComponentType\r\n          name={withEnforceAccessTo ? \"resources\" : \"resource\"}\r\n          label={`${normalizedResourceType}Resources`}\r\n          helpText={t(\"resourceTypeHelpText\", {\r\n            resourceType: normalizedResourceType,\r\n          })}\r\n          defaultValue={[]}\r\n          variant={withEnforceAccessTo ? \"typeaheadMulti\" : \"typeahead\"}\r\n          isRequired={withEnforceAccessTo}\r\n          isRadio={!withEnforceAccessTo}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { sortBy } from \"lodash-es\";\r\n\r\ntype UseSortedResourceTypesProps = {\r\n  clientId: string;\r\n};\r\n\r\nexport default function useSortedResourceTypes({\r\n  clientId,\r\n}: UseSortedResourceTypesProps) {\r\n  const { adminClient } = useAdminClient();\r\n  const [resourceServer, setResourceServer] =\r\n    useState<ResourceServerRepresentation>();\r\n\r\n  useFetch(\r\n    () =>\r\n      adminClient.clients.getResourceServer({\r\n        id: clientId,\r\n      }),\r\n    setResourceServer,\r\n    [clientId],\r\n  );\r\n\r\n  const resourceTypes = useMemo(() => {\r\n    const allResourceTypes = resourceServer?.authorizationSchema?.resourceTypes;\r\n    return allResourceTypes\r\n      ? sortBy(Object.values(allResourceTypes), \"type\")\r\n      : [];\r\n  }, [resourceServer]);\r\n\r\n  return resourceTypes;\r\n}\r\n"],"names":["convertGroups","groups","id","GroupSelect","name","label","helpText","defaultValue","isDisabled","isRequired","variant","adminClient","useAdminClient","t","useTranslation","control","setValue","getValues","errors","useFormContext","values","open","setOpen","useState","setGroups","useFetch","g","selectOne","jsxs","FormGroup","HelpItem","jsx","Controller","value","field","Fragment","GroupPickerDialog","selectGroup","Button","Table","Thead","Tr","Th","Tbody","group","Td","MinusCircleIcon","FormErrorText","RoleSelect","isRadio","isModalOpen","setIsModalOpen","selectedRoles","setSelectedRoles","filterType","setFilterType","roles","role","AddRoleMappingModal","rows","row","AddRoleButton","type","ServiceRole","s","ClientSelectComponent","props","ClientSelect","COMPONENTS","UserSelect","isValidComponentType","ResourceType","resourceType","withEnforceAccessTo","form","resourceIds","normalizedResourceType","isSpecificResources","setIsSpecificResources","getComponentType","ComponentType","Radio","useSortedResourceTypes","clientId","resourceServer","setResourceServer","useMemo","allResourceTypes","sortBy"],"mappings":"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"}