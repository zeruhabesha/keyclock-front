import{jsxs as p,Fragment as x,jsx as t}from"react/jsx-runtime";import{u as B,d as v,a as A,b as E,_ as R,B as U,o as y,ap as V,P as L,x as P,v as I,fd as n,L as g,S as T,g as j}from"./main-o1hptXRo.js";import{useState as b}from"react";import{V as N}from"./ViewHeader-BDBsroi3.js";import{u as _}from"./ConfirmDialog-BkU7melV.js";import"react-dom";function J(){const{adminClient:s}=B(),{realm:a}=v(),{t:o}=A(),m=E(),{addAlert:w,addError:f}=R(),[u,h]=b(0),k=()=>h(u+1),[l,i]=b(),C=async()=>(await s.workflows.find()).sort((d,r)=>{const c=d.name??"",S=r.name??"";return c.localeCompare(S)}),D=async e=>{const d=!(e.enabled??!0),r={...e,enabled:d};try{await s.workflows.update({id:e.id},r),w(r.enabled?o("workflowEnabled"):o("workflowDisabled"),y.success),k()}catch(c){f("workflowUpdateError",c)}},[K,W]=_({titleKey:"workflowDeleteConfirm",messageKey:o("workflowDeleteConfirmDialog",{selectedRoleName:l?l.name:""}),continueButtonLabel:"delete",continueButtonVariant:U.danger,onConfirm:async()=>{try{await s.workflows.delById({id:l.id}),i(void 0),w(o("workflowDeletedSuccess"),y.success),k()}catch(e){f("workflowDeleteError",e)}}});return p(x,{children:[t(N,{titleKey:"titleWorkflows",subKey:"workflowsExplain",helpUrl:V.workflowsUrl}),p(L,{variant:"light",padding:{default:"noPadding"},children:[t(W,{}),t(P,{toolbarItem:t(j,{"data-testid":"create-workflow",component:e=>t(g,{...e,to:n({realm:a,mode:"create",id:"new"})}),children:o("createWorkflow")}),columns:[{name:"name",displayKey:"name",cellRenderer:e=>t(g,{to:n({realm:a,mode:"update",id:e.id}),children:e.name})},{name:"id",displayKey:"id"},{name:"status",displayKey:"status",cellRenderer:e=>t(T,{label:o("enabled"),labelOff:o("disabled"),isChecked:e.enabled??!0,onChange:()=>D(e)})}],actions:[{title:o("delete"),onRowClick:e=>{i(e),K()}},{title:o("copy"),onRowClick:e=>{i(e),m(n({realm:a,mode:"copy",id:e.id}))}}],loader:C,ariaLabelKey:"workflows",emptyState:t(I,{message:o("emptyWorkflows"),instructions:o("emptyWorkflowsInstructions"),primaryActionText:o("createWorkflow"),onPrimaryAction:()=>m(n({realm:a,mode:"create",id:"new"}))})},u)]})]})}export{J as default};
//# sourceMappingURL=WorkflowsSection-Cu06eExY.js.map
