import{jsx as t,jsxs as b,Fragment as B}from"react/jsx-runtime";import{a as g,a0 as S,O as y,R as L,S as Y,W as T,cS as Z,bw as H,bx as P,Y as X,Z as U,g as w,bp as D,bq as ee,ak as R,cT as G,aC as M,aD as N,a3 as x,a6 as te,ae as O,ab as ne,af as ae,ag as le,cU as oe,C as K,a1 as re,a2 as _,a7 as Q,Q as V,cV as se,N as ie,c2 as ce,bi as de,bQ as ue,bR as E,u as pe,y as me,b3 as he}from"./main-o1hptXRo.js";import{C as fe}from"./ClientSelect-BY77LEpN.js";import{I as ge,M as Ce}from"./IdentityProviderSelect-rmWlUbIg.js";import{useState as k,useEffect as ve}from"react";import{G as Ie}from"./GroupPickerDialog-U3luvxlw.js";import{A as be,a as ye}from"./ActionListItem-Cy-NQlq4.js";import{M as Te}from"./MultiLineInput-OP0faqms.js";import{A as Se,S as ke,a as Le}from"./RoleMapping-BOcI-Nkp.js";import{a as $e}from"./CodeEditor-C4IS5oxi.js";const Ne=({name:e,label:n,helpText:s,isDisabled:r=!1,defaultValue:o,isNew:l=!0,convertToName:d})=>{const{t:a}=g(),{control:i}=S();return t(y,{hasNoPaddingTop:!0,label:a(n),fieldId:e,labelIcon:t(T,{helpText:a(s),fieldLabelId:`${n}`}),children:t(L,{name:d(e),"data-testid":e,defaultValue:l?o:!1,control:i,render:({field:p})=>t(Y,{id:e,isDisabled:r,label:a("on"),labelOff:a("off"),isChecked:p.value==="true"||p.value===!0||p.value?.[0]==="true",onChange:(C,u)=>p.onChange(""+u),"data-testid":e,"aria-label":a(n)})})})},we=e=>t(fe,{...e,name:e.convertToName(e.name)}),qe=e=>t(ge,{...e,convertToName:e.convertToName,name:e.name}),Ae=({name:e,label:n,helpText:s,defaultValue:r,required:o,isDisabled:l=!1,convertToName:d})=>{const{t:a}=g(),{control:i}=S(),[p,C]=k(""),[u,f]=k(!1);return t(y,{label:a(n),labelIcon:t(T,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:t(L,{name:d(e),control:i,defaultValue:r||"",render:({field:c})=>t(Z,{id:e,value:c.value,type:"text",filename:p,isDisabled:l,onFileInputChange:(v,I)=>C(I.name),onReadStarted:()=>f(!0),onReadFinished:()=>f(!1),onClearClick:()=>{c.onChange(""),C("")},isLoading:u,allowEditingUploadedText:!1,onTextChange:v=>{c.onChange(v)},onDataChange:(v,I)=>{c.onChange(I)}})})})},Me=({name:e,label:n,helpText:s,required:r,convertToName:o})=>{const{t:l}=g(),[d,a]=k(!1),[i,p]=k(),{control:C}=S();return t(L,{name:o(e),defaultValue:"",control:C,render:({field:u})=>b(B,{children:[d&&t(Ie,{type:"selectOne",text:{title:"selectGroup",ok:"select"},onConfirm:f=>{u.onChange(f?.[0].path),p(f),a(!1)},onClose:()=>a(!1),filterGroups:i}),t(y,{label:l(n),labelIcon:t(T,{helpText:l(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:b(H,{children:[t(P,{children:t(X,{children:u.value&&t(U,{onClick:()=>u.onChange(void 0),children:u.value})})}),t(P,{children:t(w,{id:"kc-join-groups-button",onClick:()=>a(!d),variant:"secondary","data-testid":"join-groups-button",children:l("selectGroup")})})]})})]})})},Re=({name:e,label:n,helpText:s,defaultValue:r,options:o,required:l,isDisabled:d=!1,convertToName:a})=>{const{t:i}=g(),{control:p}=S(),[C,u]=k(!1);return t(y,{label:i(n),labelIcon:t(T,{helpText:i(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(L,{name:a(e),"data-testid":e,defaultValue:r||o?.[0]||"",control:p,render:({field:f})=>t(D,{toggleId:e,isDisabled:d,onToggle:c=>u(c),onSelect:c=>{f.onChange(c),u(!1)},selections:f.value,variant:ee.single,"aria-label":i(n),isOpen:C,children:o?.map(c=>t(R,{selected:c===f.value,value:c,children:c},c))})})})},xe=({name:e,label:n,helpText:s,required:r,isDisabled:o,defaultValue:l,convertToName:d})=>{const{t:a}=g(),{getValues:i,setValue:p,register:C}=S(),[u,f]=k([]),c=d(e);ve(()=>{C(c);const h=JSON.parse(i(c)||l||"[]");f(h.map(m=>({...m,id:G()})))},[]);const v=()=>f([...u,{key:"",value:"",id:G()}]),I=(h=u)=>{p(c,JSON.stringify(h.filter(m=>m.key!=="").map(({id:m,...q})=>q)))},$=(h,m)=>{F(h,{...u[h],key:m})},J=(h,m)=>{F(h,{...u[h],value:m})},F=(h,m)=>f([...u.slice(0,h),m,...u.slice(h+1)]),z=h=>{const m=[...u.slice(0,h),...u.slice(h+1)];f(m),I(m)};return u.length!==0?b(y,{label:a(n),labelIcon:t(T,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:r,children:[b(M,{direction:{default:"column"},children:[b(M,{children:[t(N,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:a("key")})}),t(N,{grow:{default:"grow"},children:t("strong",{children:a("value")})})]}),u.map((h,m)=>b(M,{"data-testid":"row",children:[t(N,{grow:{default:"grow"},children:t(x,{name:`${c}.${m}.key`,placeholder:a("keyPlaceholder"),"aria-label":a("key"),defaultValue:h.key,"data-testid":`${c}.${m}.key`,onChange:(q,A)=>$(m,A),onBlur:()=>I()})}),t(N,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(x,{name:`${c}.${m}.value`,placeholder:a("valuePlaceholder"),"aria-label":a("value"),defaultValue:h.value,"data-testid":`${c}.${m}.value`,onChange:(q,A)=>J(m,A),onBlur:()=>I()})}),t(N,{children:t(w,{variant:"link",title:a("removeAttribute"),isDisabled:o,onClick:()=>z(m),"data-testid":`${c}.${m}.remove`,children:t(te,{})})})]},h.id))]}),t(be,{children:t(ye,{children:t(w,{"data-testid":`${c}-add-row`,className:"pf-v5-u-px-0 pf-v5-u-mt-sm",variant:"link",icon:t(O,{}),onClick:()=>v(),children:a("addAttribute",{label:n})})})})]}):b(ne,{"data-testid":`${e}-empty-state`,className:"pf-v5-u-p-0",variant:"xs",children:[t(ae,{children:a("missingAttributes",{label:n})}),t(le,{children:t(w,{"data-testid":`${e}-add-row`,variant:"link",icon:t(O,{}),size:"sm",onClick:v,isDisabled:o,children:a("addAttribute",{label:n})})})]})};function Ve(e){return e&&Array.isArray(e)?e:[e]}const Fe=({name:e,label:n,defaultValue:s,helpText:r,stringify:o,required:l,isDisabled:d=!1,convertToName:a})=>{const{t:i}=g(),p=a(e);return t(y,{label:i(n),labelIcon:t(T,{helpText:i(r),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(Te,{"aria-label":i(n),name:p,isDisabled:d,defaultValue:Ve(s),addButtonLabel:i("addMultivaluedLabel",{fieldLabel:i(n).toLowerCase()}),stringify:o})})},Pe=({name:e,label:n,helpText:s,defaultValue:r,required:o,isDisabled:l=!1,convertToName:d})=>{const{t:a}=g();return t(oe,{name:d(e),label:a(n),labelIcon:a(s),isDisabled:l,defaultValue:r?.toString(),rules:{required:{value:!!o,message:a("required")}}})},j=e=>e?.includes(".")?e.split("."):["",e||""],Ge=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,Oe=({name:e,label:n,helpText:s,defaultValue:r,required:o,isDisabled:l=!1,convertToName:d})=>{const{t:a}=g(),[i,p]=K(),[C,u]=k("clients"),{control:f,formState:{errors:c}}=S(),v=d(e);return b(y,{label:a(n),labelIcon:t(T,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:[t(L,{name:v,defaultValue:r||"",control:f,render:({field:I})=>b(re,{children:[i&&t(Se,{id:"id",type:"roles",filterType:C,name:e,onAssign:$=>I.onChange(Ge($[0])),onClose:p,isRadio:!0}),I.value!==""&&t(_,{children:t(U,{textMaxWidth:"500px",onClick:()=>I.onChange(""),children:t(ke,{role:{name:j(I.value)[1]},client:{clientId:j(I.value)[0]}})})}),t(_,{children:t(Le,{label:"selectRole.label",onFilerTypeChange:$=>{u($),p()},variant:"secondary","data-testid":"add-roles",isDisabled:l})})]})}),c[v]&&t(Q,{message:a("required")})]})},_e=({name:e,label:n,helpText:s,defaultValue:r,required:o,isDisabled:l=!1,convertToName:d})=>{const{t:a}=g(),{control:i}=S();return t(y,{label:a(n),labelIcon:t(T,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:s}),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:t(L,{name:d(e),defaultValue:r,control:i,render:({field:p})=>t($e,{id:e,"data-testid":e,readOnly:l,onChange:p.onChange,value:Array.isArray(p.value)?p.value[0]:p.value,language:"js",height:600})})})},Ee=({name:e,label:n,helpText:s,convertToName:r,...o})=>{const{t:l}=g();return t(V,{name:r(e),label:l(n),labelIcon:l(s),"data-testid":e,rules:{required:{value:!!o.required,message:l("required")}},...o})},je=({name:e,label:n,helpText:s,defaultValue:r,required:o,isDisabled:l=!1,convertToName:d})=>{const{t:a}=g(),{register:i}=S();return t(y,{label:a(n),labelIcon:t(T,{helpText:a(s),fieldLabelId:`${n}`}),fieldId:e,required:o,children:t(se,{id:e,"data-testid":e,isDisabled:l,defaultValue:r?.toString(),...i(d(e))})})},Be=({name:e,label:n,helpText:s})=>{const{t:r}=g(),{control:o}=S(),{value:l}=ie({control:o,name:e,defaultValue:""});return t(y,{label:r(n),fieldId:e,labelIcon:t(T,{helpText:r(s),fieldLabelId:`${n}`}),className:"keycloak__identity-providers__url_component",children:t(ce,{title:r(s),href:l,isInline:!0})})},Ue=({selectItems:e,...n})=>{const{t:s}=g(),[r,o]=K(),{field:l}=de(n),[d,a]=k(!e.map(({key:i})=>i).includes(l.value));return b(ue,{children:[t(E,{lg:d?2:12,children:t(D,{onToggle:()=>o(),isOpen:r,onSelect:i=>{i&&a(!1),l.onChange(i),o()},selections:d?"":[l.value],children:[t(R,{onClick:()=>a(!0),children:s("customAttribute")},"custom"),...e.map(i=>t(R,{value:i.key,children:i.value},i.key))]})}),d&&t(E,{lg:10,children:t(x,{id:"customValue","data-testid":n.name,placeholder:s("keyPlaceholder"),value:l.value,onChange:l.onChange,autoFocus:!0})})]})},De=({name:e,label:n,helpText:s,required:r=!1,convertToName:o})=>{const{adminClient:l}=pe(),{t:d}=g(),{formState:{errors:a}}=S(),[i,p]=k(),C=o(e);me(()=>l.users.getProfile(),c=>p(c),[]);const u=c=>c?.attributes?c.attributes.map(v=>({key:v.name,value:v.name})):[];if(!i)return null;const f=()=>C.split(".").reduce((c,v)=>c?.[v],a);return b(y,{label:d(n),isRequired:r,labelIcon:t(T,{helpText:d(s),fieldLabelId:n}),fieldId:C,children:[t(Ue,{name:C,rules:r?{required:!0}:{},selectItems:u(i)}),f()&&t(Q,{message:d("required")})]})},Ke=({name:e,label:n,helpText:s,convertToName:r,...o})=>{const{t:l}=g();return t(V,{name:r(e),type:"number",pattern:"\\d*",label:l(n),labelIcon:l(s),"data-testid":e,rules:{required:{value:!!o.required,message:l("required")}},...o})},Qe=({name:e,label:n,helpText:s,convertToName:r,...o})=>{const{t:l}=g();return t(V,{name:r(e),type:"number",label:l(n),labelIcon:l(s),"data-testid":e,...o})},W={String:Ee,Text:je,boolean:Ne,Integer:Ke,Number:Qe,List:Re,Role:Oe,Script:_e,Map:xe,Group:Me,ClientList:we,IdentityProviderMultiList:qe,UserProfileAttributeList:De,MultivaluedList:Ce,MultivaluedString:Fe,File:Ae,Password:Pe,Url:Be},We=e=>e in W,ot=({convertToName:e,properties:n,...s})=>t(B,{children:n.map(r=>{const o=r.type;if(We(o)){const l=W[o];return t(l,{...r,...s,convertToName:e||Je},r.name)}else console.warn(`There is no editor registered for ${o}`)})}),Je=e=>he(`config.${e}`);export{ot as D,Ue as K,Je as c};
//# sourceMappingURL=DynamicComponents-CnLlz98z.js.map
