{"version":3,"file":"RoleForm-CeKzSlwp.js","sources":["../../../../../../../src/components/role-form/RoleForm.tsx"],"sourcesContent":["import { ActionGroup, Button, PageSection } from \"@patternfly/react-core\";\r\nimport {\r\n  SubmitHandler,\r\n  UseFormReturn,\r\n  useFormContext,\r\n  useWatch,\r\n} from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, To } from \"react-router-dom\";\r\nimport {\r\n  FormSubmitButton,\r\n  TextAreaControl,\r\n  TextControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\n\r\nimport { FormAccess } from \"../form/FormAccess\";\r\nimport { AttributeForm } from \"../key-value-form/AttributeForm\";\r\nimport { ViewHeader } from \"../view-header/ViewHeader\";\r\n\r\nexport type RoleFormProps = {\r\n  form: UseFormReturn<AttributeForm>;\r\n  onSubmit: SubmitHandler<AttributeForm>;\r\n  cancelLink: To;\r\n  role: \"manage-realm\" | \"manage-clients\";\r\n  editMode: boolean;\r\n};\r\n\r\nexport const RoleForm = ({\r\n  form: { formState },\r\n  onSubmit,\r\n  cancelLink,\r\n  role,\r\n  editMode,\r\n}: RoleFormProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, handleSubmit } = useFormContext<AttributeForm>();\r\n\r\n  const roleName = useWatch({\r\n    control,\r\n    defaultValue: undefined,\r\n    name: \"name\",\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {!editMode && <ViewHeader titleKey={t(\"createRole\")} />}\r\n      <PageSection variant=\"light\">\r\n        <FormAccess\r\n          isHorizontal\r\n          onSubmit={handleSubmit(onSubmit)}\r\n          role={role}\r\n          className=\"pf-v5-u-mt-lg\"\r\n          fineGrainedAccess={true} // We would never want to show this form in read-only mode\r\n        >\r\n          <TextControl\r\n            name=\"name\"\r\n            label={t(\"roleName\")}\r\n            rules={{\r\n              required: !editMode ? t(\"required\") : undefined,\r\n              validate(value) {\r\n                if (!value?.trim()) {\r\n                  return t(\"required\");\r\n                }\r\n              },\r\n            }}\r\n            isDisabled={editMode}\r\n          />\r\n          <TextAreaControl\r\n            name=\"description\"\r\n            label={t(\"description\")}\r\n            rules={{\r\n              maxLength: {\r\n                value: 255,\r\n                message: t(\"maxLength\", { length: 255 }),\r\n              },\r\n            }}\r\n            isDisabled={roleName?.includes(\"default-roles\") ?? false}\r\n          />\r\n          <ActionGroup>\r\n            <FormSubmitButton\r\n              formState={formState}\r\n              data-testid=\"save\"\r\n              allowInvalid\r\n              allowNonDirty\r\n            >\r\n              {t(\"save\")}\r\n            </FormSubmitButton>\r\n            <Button\r\n              data-testid=\"cancel\"\r\n              variant=\"link\"\r\n              component={(props) => <Link {...props} to={cancelLink} />}\r\n            >\r\n              {t(\"cancel\")}\r\n            </Button>\r\n          </ActionGroup>\r\n        </FormAccess>\r\n      </PageSection>\r\n    </>\r\n  );\r\n};\r\n"],"names":["RoleForm","formState","onSubmit","cancelLink","role","editMode","t","useTranslation","control","handleSubmit","useFormContext","roleName","useWatch","jsxs","Fragment","jsx","ViewHeader","PageSection","FormAccess","TextControl","value","TextAreaControl","ActionGroup","FormSubmitButton","Button","props","Link"],"mappings":"mQA2BO,MAAMA,EAAW,CAAC,CACvB,KAAM,CAAE,UAAAC,CAAA,EACR,SAAAC,EACA,WAAAC,EACA,KAAAC,EACA,SAAAC,CACF,IAAqB,CACnB,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAAE,QAAAC,EAAS,aAAAC,CAAA,EAAiBC,EAAA,EAE5BC,EAAWC,EAAS,CACxB,QAAAJ,EACA,aAAc,OACd,KAAM,MAAA,CACP,EAED,OACEK,EAAAC,EAAA,CACG,SAAA,CAAA,CAACT,GAAYU,EAACC,EAAA,CAAW,SAAUV,EAAE,YAAY,EAAG,EACrDS,EAACE,EAAA,CAAY,QAAQ,QACnB,SAAAJ,EAACK,EAAA,CACC,aAAY,GACZ,SAAUT,EAAaP,CAAQ,EAC/B,KAAAE,EACA,UAAU,gBACV,kBAAmB,GAEnB,SAAA,CAAAW,EAACI,EAAA,CACC,KAAK,OACL,MAAOb,EAAE,UAAU,EACnB,MAAO,CACL,SAAWD,EAA2B,OAAhBC,EAAE,UAAU,EAClC,SAASc,EAAO,CACd,GAAI,CAACA,GAAO,OACV,OAAOd,EAAE,UAAU,CAEvB,CAAA,EAEF,WAAYD,CAAA,CAAA,EAEdU,EAACM,EAAA,CACC,KAAK,cACL,MAAOf,EAAE,aAAa,EACtB,MAAO,CACL,UAAW,CACT,MAAO,IACP,QAASA,EAAE,YAAa,CAAE,OAAQ,IAAK,CAAA,CACzC,EAEF,WAAYK,GAAU,SAAS,eAAe,GAAK,EAAA,CAAA,IAEpDW,EAAA,CACC,SAAA,CAAAP,EAACQ,EAAA,CACC,UAAAtB,EACA,cAAY,OACZ,aAAY,GACZ,cAAa,GAEZ,WAAE,MAAM,CAAA,CAAA,EAEXc,EAACS,EAAA,CACC,cAAY,SACZ,QAAQ,OACR,UAAYC,GAAUV,EAACW,GAAM,GAAGD,EAAO,GAAItB,EAAY,EAEtD,WAAE,QAAQ,CAAA,CAAA,CACb,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACF,CAEJ"}