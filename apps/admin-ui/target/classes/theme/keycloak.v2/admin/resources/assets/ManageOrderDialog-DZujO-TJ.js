import{jsx as r,jsxs as g}from"react/jsx-runtime";import{u as M,a as T,_ as B,y as I,p as P,M as k,k as N,H as S,I as A,g as u,B as j}from"./main-o1hptXRo.js";import{useState as c}from"react";import{s as w}from"./sortBy-DjlFeX8O.js";import{D as E}from"./DataListControl-DO3by3XW.js";import{b as F,c as H,a as V,D as W}from"./Droppable-daSE-az7.js";import{D as _,a as z,b as R,c as q,d as G}from"./DataListItemRow-B_0B-ko6.js";const $=({orgId:m,hideRealmBasedIdps:h=!1,onClose:l})=>{const{adminClient:d}=M(),{t:e}=T(),{addAlert:f,addError:v}=B(),[C,s]=c(""),[p,b]=c(),[n,D]=c([]),y=({index:a})=>(s(e("onDragStart",{item:n[a]})),!0),L=({index:a})=>{s(e("onDragMove",{item:n[a]}))},x=(a,t)=>{if(t){const i=[...n],[o]=i.splice(a.index,1);return i.splice(t.index,0,o),s(e("onDragFinish",{list:i})),D(i),!0}else return s(e("onDragCancel")),!1};return I(()=>m?d.organizations.listIdentityProviders({orgId:m}):d.identityProviders.find({realmOnly:h}),a=>{b(a),D(w(a,["config.guiOrder","alias"]).map(t=>t.alias))},[]),p?g(k,{variant:N.small,title:e("manageDisplayOrder"),isOpen:!0,onClose:l,actions:[r(u,{id:"modal-confirm","data-testid":"confirm",onClick:async()=>{const a=n.map((t,i)=>{const o=p.find(O=>O.alias===t);return o.config.guiOrder=i,d.identityProviders.update({alias:t},o)});try{await Promise.all(a),f(e("orderChangeSuccess"))}catch(t){v("orderChangeError",t)}l()},children:e("save")},"confirm"),r(u,{id:"modal-cancel","data-testid":"cancel",variant:j.link,onClick:l,children:e("cancel")},"cancel")],children:[r(S,{className:"pf-v5-u-pb-lg",children:r(A,{children:e("orderDialogIntro")})}),r(F,{onDrag:y,onDragMove:L,onDrop:x,children:r(H,{hasNoWrapper:!0,children:r(_,{"aria-label":e("manageOrderTableAria"),"data-testid":"manageOrderDataList",isCompact:!0,children:n.map(a=>r(V,{hasNoWrapper:!0,children:r(z,{"aria-label":a,id:a,children:g(R,{children:[r(E,{children:r(W,{"aria-label":e("dragHelp")})}),r(q,{dataListCells:[r(G,{"data-testid":a,children:a},a)]})]})})},a))})})}),r("div",{className:"pf-v5-screen-reader","aria-live":"assertive",children:C})]}):r(P,{})};export{$ as M};
//# sourceMappingURL=ManageOrderDialog-DZujO-TJ.js.map
