import{jsxs as t,jsx as e}from"react/jsx-runtime";import{useState as A}from"react";import{a as u,M as T,k as C,aW as I,o as p,F as w,O as b,u as y,j as O,d as S,_ as V,b as x,l as F,bb as d,P as H,X as L,W as M,A as D,g as m,L as j}from"./main-o1hptXRo.js";import{C as E,F as N}from"./FormAccess-BnhQnYb9.js";import{T as P}from"./TimeSelectorControl-B1N9IKgG.js";import{V as W}from"./ViewHeader-BDBsroi3.js";import{M as B}from"./MultiLineInput-OP0faqms.js";import"react-dom";import"./TimeSelector-1gdltitc.js";const G=({token:n,toggleDialog:a})=>{const{t:i}=u();return t(T,{title:i("initialAccessTokenDetails"),isOpen:!0,onClose:a,variant:C.medium,children:[e(I,{title:i("copyInitialAccessToken"),component:"h2",isInline:!0,variant:p.warning}),e(w,{className:"pf-v5-u-mt-md",children:e(b,{label:i("initialAccessToken"),fieldId:"initialAccessToken",children:e(E,{id:"initialAccessToken","data-testid":"initialAccessToken",isReadOnly:!0,children:n})})})]})};function Z(){const{adminClient:n}=y(),{t:a}=u(),i=O({mode:"onChange"}),{handleSubmit:k,formState:{isValid:g}}=i,{realm:s}=S(),{addAlert:f,addError:h}=V(),v=x(),[l,c]=A("");return t(F,{...i,children:[l&&e(G,{token:l,toggleDialog:()=>{c(""),f(a("tokenSaveSuccess"),p.success),v(d({realm:s,tab:"initial-access-token"}))}}),e(W,{titleKey:"createToken",subKey:"createTokenHelp"}),e(H,{variant:"light",children:t(N,{isHorizontal:!0,role:"create-client",onSubmit:k(async o=>{try{const r=await n.realms.createClientsInitialAccess({realm:s},o);c(r.token)}catch(r){h("tokenSaveError",r)}}),children:[e(P,{name:"expiration",label:a("expiration"),labelIcon:a("tokenExpirationHelp"),controller:{defaultValue:86400,rules:{min:{value:1,message:a("expirationValueNotValid")}}}}),e(L,{name:"count",label:a("count"),labelIcon:a("countHelp"),controller:{rules:{min:1},defaultValue:1}}),e(b,{label:a("webOrigins"),fieldId:"kc-web-origins",labelIcon:e(M,{helpText:a("webOriginsHelp"),fieldLabelId:"webOrigins"}),children:e(B,{id:"kc-web-origins",name:"webOrigins","aria-label":a("webOrigins"),addButtonLabel:"addWebOrigins"})}),t(D,{children:[e(m,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!g,children:a("save")}),e(m,{"data-testid":"cancel",variant:"link",component:o=>e(j,{...o,to:d({realm:s,tab:"initial-access-token"})}),children:a("cancel")})]})]})})]})}export{Z as default};
//# sourceMappingURL=CreateInitialAccessToken-C4pqNCf4.js.map
