{"version":3,"file":"EditUser-DTVs8lbN.js","sources":["../../../../../../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isEmpty.js","../../../../../../../src/organizations/OrganizationModal.tsx","../../../../../../../src/user/Organizations.tsx","../../../../../../../src/user/UserAttributes.tsx","../../../../../../../src/user/UserConsents.tsx","../../../../../../../src/user/user-credentials/CredentialDataDialog.tsx","../../../../../../../src/user/user-credentials/CredentialRow.tsx","../../../../../../../src/user/user-credentials/InlineLabelEdit.tsx","../../../../../../../src/user/user-credentials/LifespanField.tsx","../../../../../../../src/user/user-credentials/ResetCredentialDialog.tsx","../../../../../../../src/user/user-credentials/ResetPasswordDialog.tsx","../../../../../../../src/user/UserCredentials.tsx","../../../../../../../src/user/UserGroups.tsx","../../../../../../../src/user/UserIdPModal.tsx","../../../../../../../src/user/UserIdentityProviderLinks.tsx","../../../../../../../src/user/UserRoleMapping.tsx","../../../../../../../src/user/UserSessions.tsx","../../../../../../../src/user/EditUser.tsx"],"sourcesContent":["import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","import OrganizationRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/organizationRepresentation\";\r\nimport UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, Modal, ModalVariant } from \"@patternfly/react-core\";\r\nimport { TableText } from \"@patternfly/react-table\";\r\nimport { differenceBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\n\r\ntype OrganizationModalProps = {\r\n  isJoin?: boolean;\r\n  existingOrgs: OrganizationRepresentation[];\r\n  onAdd: (orgs: OrganizationRepresentation[]) => Promise<void>;\r\n  onClose: () => void;\r\n};\r\n\r\nexport const OrganizationModal = ({\r\n  isJoin = true,\r\n  existingOrgs,\r\n  onAdd,\r\n  onClose,\r\n}: OrganizationModalProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n\r\n  const [selectedRows, setSelectedRows] = useState<UserRepresentation[]>([]);\r\n\r\n  const loader = async (first?: number, max?: number, search?: string) => {\r\n    const params = {\r\n      first,\r\n      search,\r\n      max: max! + existingOrgs.length,\r\n    };\r\n\r\n    const orgs = await adminClient.organizations.find(params);\r\n    return differenceBy(orgs, existingOrgs, \"id\");\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={isJoin ? t(\"joinOrganization\") : t(\"sendInvitation\")}\r\n      isOpen\r\n      onClose={onClose}\r\n      actions={[\r\n        <Button\r\n          data-testid=\"join\"\r\n          key=\"confirm\"\r\n          variant=\"primary\"\r\n          onClick={async () => {\r\n            await onAdd(selectedRows);\r\n            onClose();\r\n          }}\r\n        >\r\n          {isJoin ? t(\"join\") : t(\"send\")}\r\n        </Button>,\r\n        <Button\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant=\"link\"\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <KeycloakDataTable\r\n        loader={loader}\r\n        isPaginated\r\n        ariaLabelKey=\"organizationsList\"\r\n        searchPlaceholderKey=\"searchOrganization\"\r\n        canSelectAll\r\n        onSelect={(rows) => setSelectedRows([...rows])}\r\n        columns={[\r\n          {\r\n            name: \"name\",\r\n            displayKey: \"organizationName\",\r\n          },\r\n          {\r\n            name: \"description\",\r\n            cellRenderer: (row) => (\r\n              <TableText wrapModifier=\"truncate\">{row.description}</TableText>\r\n            ),\r\n          },\r\n        ]}\r\n      />\r\n    </Modal>\r\n  );\r\n};\r\n","import OrganizationRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/organizationRepresentation\";\r\nimport UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport {\r\n  ListEmptyState,\r\n  OrganizationTable,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { OrganizationModal } from \"../organizations/OrganizationModal\";\r\nimport { toEditOrganization } from \"../organizations/routes/EditOrganization\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { UserParams } from \"./routes/User\";\r\nimport { toUsers } from \"./routes/Users\";\r\nimport { CheckboxFilterComponent } from \"../components/dynamic/CheckboxFilterComponent\";\r\nimport { capitalizeFirstLetterFormatter } from \"../util\";\r\nimport { SearchInputComponent } from \"../components/dynamic/SearchInputComponent\";\r\n\r\ntype OrganizationProps = {\r\n  user: UserRepresentation;\r\n};\r\n\r\ntype MembershipTypeRepresentation = OrganizationRepresentation &\r\n  UserRepresentation & {\r\n    membershipType?: string;\r\n  };\r\n\r\nexport const Organizations = ({ user }: OrganizationProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { id } = useParams<UserParams>();\r\n  const navigate = useNavigate();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [joinToggle, toggle, setJoinToggle] = useToggle();\r\n  const [shouldJoin, setShouldJoin] = useState(true);\r\n  const [openOrganizationPicker, setOpenOrganizationPicker] = useState(false);\r\n  const [userOrgs, setUserOrgs] = useState<OrganizationRepresentation[]>([]);\r\n  const [selectedOrgs, setSelectedOrgs] = useState<\r\n    OrganizationRepresentation[]\r\n  >([]);\r\n  const [searchText, setSearchText] = useState<string>(\"\");\r\n  const [searchTriggerText, setSearchTriggerText] = useState<string>(\"\");\r\n  const [filteredMembershipTypes, setFilteredMembershipTypes] = useState<\r\n    string[]\r\n  >([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const membershipOptions = [\r\n    { value: \"Managed\", label: \"Managed\" },\r\n    { value: \"Unmanaged\", label: \"Unmanaged\" },\r\n  ];\r\n\r\n  const onToggleClick = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  const onSelect = (_event: any, value: string) => {\r\n    if (filteredMembershipTypes.includes(value)) {\r\n      setFilteredMembershipTypes(\r\n        filteredMembershipTypes.filter((item) => item !== value),\r\n      );\r\n    } else {\r\n      setFilteredMembershipTypes([...filteredMembershipTypes, value]);\r\n    }\r\n    setIsOpen(false);\r\n    refresh();\r\n  };\r\n\r\n  useFetch(\r\n    async () => {\r\n      const userOrganizations =\r\n        await adminClient.organizations.memberOrganizations({ userId: id! });\r\n\r\n      const userOrganizationsWithMembershipTypes = await Promise.all(\r\n        userOrganizations.map(async (org) => {\r\n          const orgId = org.id;\r\n          const memberships: MembershipTypeRepresentation[] =\r\n            await adminClient.organizations.listMembers({\r\n              orgId: orgId!,\r\n            });\r\n\r\n          const userMemberships = memberships.filter(\r\n            (membership) => membership.username === user.username,\r\n          );\r\n\r\n          const membershipType = userMemberships.map((membership) => {\r\n            const formattedMembershipType = capitalizeFirstLetterFormatter()(\r\n              membership.membershipType,\r\n            );\r\n            return formattedMembershipType;\r\n          });\r\n\r\n          return { ...org, membershipType };\r\n        }),\r\n      );\r\n\r\n      let filteredOrgs = userOrganizationsWithMembershipTypes;\r\n      if (filteredMembershipTypes.length > 0) {\r\n        filteredOrgs = filteredOrgs.filter((org) =>\r\n          org.membershipType?.some((type) =>\r\n            filteredMembershipTypes.includes(type as string),\r\n          ),\r\n        );\r\n      }\r\n\r\n      if (searchTriggerText) {\r\n        filteredOrgs = filteredOrgs.filter((org) =>\r\n          org.name?.toLowerCase().includes(searchTriggerText.toLowerCase()),\r\n        );\r\n      }\r\n\r\n      return filteredOrgs;\r\n    },\r\n    setUserOrgs,\r\n    [key, filteredMembershipTypes, searchTriggerText],\r\n  );\r\n\r\n  const handleChange = (value: string) => {\r\n    setSearchText(value);\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    setSearchTriggerText(searchText);\r\n    refresh();\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setSearchText(\"\");\r\n    setSearchTriggerText(\"\");\r\n    refresh();\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"removeConfirmOrganizationTitle\",\r\n    messageKey: t(\"organizationRemoveConfirm\", { count: selectedOrgs.length }),\r\n    continueButtonLabel: \"remove\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await Promise.all(\r\n          selectedOrgs.map((org) =>\r\n            adminClient.organizations.delMember({\r\n              orgId: org.id!,\r\n              userId: id!,\r\n            }),\r\n          ),\r\n        );\r\n        addAlert(t(\"organizationRemovedSuccess\"));\r\n        const user = await adminClient.users.findOne({ id: id! });\r\n        if (!user) {\r\n          navigate(toUsers({ realm: realm }));\r\n        }\r\n        setSelectedOrgs([]);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"organizationRemoveError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {openOrganizationPicker && (\r\n        <OrganizationModal\r\n          isJoin={shouldJoin}\r\n          existingOrgs={userOrgs}\r\n          onClose={() => setOpenOrganizationPicker(false)}\r\n          onAdd={async (orgs) => {\r\n            try {\r\n              await Promise.all(\r\n                orgs.map((org) => {\r\n                  const form = new FormData();\r\n                  form.append(\"id\", id!);\r\n                  return shouldJoin\r\n                    ? adminClient.organizations.addMember({\r\n                        orgId: org.id!,\r\n                        userId: `\"${user.id!}\"`,\r\n                      })\r\n                    : adminClient.organizations.inviteExistingUser(\r\n                        { orgId: org.id! },\r\n                        form,\r\n                      );\r\n                }),\r\n              );\r\n              addAlert(\r\n                t(\r\n                  shouldJoin\r\n                    ? \"userAddedOrganization\"\r\n                    : \"userInvitedOrganization\",\r\n                  { count: orgs.length },\r\n                ),\r\n              );\r\n              refresh();\r\n            } catch (error) {\r\n              addError(\r\n                shouldJoin ? \"userAddedOrganizationError\" : \"userInvitedError\",\r\n                error,\r\n              );\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n      <DeleteConfirm />\r\n      <OrganizationTable\r\n        link={({ organization, children }) => (\r\n          <Link\r\n            key={organization.id}\r\n            to={toEditOrganization({\r\n              realm,\r\n              id: organization.id!,\r\n              tab: \"settings\",\r\n            })}\r\n          >\r\n            {children}\r\n          </Link>\r\n        )}\r\n        loader={userOrgs}\r\n        isSearching={\r\n          searchTriggerText.length > 0 || filteredMembershipTypes.length > 0\r\n        }\r\n        onSelect={(orgs) => setSelectedOrgs(orgs)}\r\n        deleteLabel=\"remove\"\r\n        onDelete={(org) => {\r\n          setSelectedOrgs([org]);\r\n          toggleDeleteDialog();\r\n        }}\r\n        toolbarItem={\r\n          <>\r\n            <ToolbarItem>\r\n              <SearchInputComponent\r\n                value={searchText}\r\n                placeholder={t(\"searchMembers\")}\r\n                onChange={handleChange}\r\n                onSearch={handleSearch}\r\n                onClear={clearInput}\r\n                aria-label={t(\"searchMembers\")}\r\n              />\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Dropdown\r\n                onOpenChange={setJoinToggle}\r\n                toggle={(ref) => (\r\n                  <MenuToggle\r\n                    ref={ref}\r\n                    id=\"toggle-id\"\r\n                    onClick={toggle}\r\n                    variant=\"primary\"\r\n                  >\r\n                    {t(\"joinOrganization\")}\r\n                  </MenuToggle>\r\n                )}\r\n                isOpen={joinToggle}\r\n              >\r\n                <DropdownList>\r\n                  <DropdownItem\r\n                    key=\"join\"\r\n                    onClick={() => {\r\n                      setShouldJoin(true);\r\n                      setOpenOrganizationPicker(true);\r\n                    }}\r\n                  >\r\n                    {t(\"joinOrganization\")}\r\n                  </DropdownItem>\r\n                  <DropdownItem\r\n                    key=\"invite\"\r\n                    onClick={() => {\r\n                      setShouldJoin(false);\r\n                      setOpenOrganizationPicker(true);\r\n                    }}\r\n                  >\r\n                    {t(\"sendInvite\")}\r\n                  </DropdownItem>\r\n                </DropdownList>\r\n              </Dropdown>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Button\r\n                data-testid=\"removeOrganization\"\r\n                variant=\"secondary\"\r\n                isDisabled={selectedOrgs.length === 0}\r\n                onClick={() => toggleDeleteDialog()}\r\n              >\r\n                {t(\"remove\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <CheckboxFilterComponent\r\n                filterPlaceholderText={t(\"filterByMembershipType\")}\r\n                isOpen={isOpen}\r\n                options={membershipOptions}\r\n                onOpenChange={(nextOpen) => setIsOpen(nextOpen)}\r\n                onToggleClick={onToggleClick}\r\n                onSelect={onSelect}\r\n                selectedItems={filteredMembershipTypes}\r\n                width={\"260px\"}\r\n              />\r\n            </ToolbarItem>\r\n          </>\r\n        }\r\n      >\r\n        <ListEmptyState\r\n          message={t(\"emptyUserOrganizations\")}\r\n          instructions={t(\"emptyUserOrganizationsInstructions\")}\r\n          secondaryActions={[\r\n            {\r\n              text: t(\"joinOrganization\"),\r\n              onClick: () => {\r\n                setShouldJoin(true);\r\n                setOpenOrganizationPicker(true);\r\n              },\r\n            },\r\n            {\r\n              text: t(\"sendInvitation\"),\r\n              onClick: () => {\r\n                setShouldJoin(false);\r\n                setOpenOrganizationPicker(true);\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n      </OrganizationTable>\r\n    </>\r\n  );\r\n};\r\n","import type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { PageSection, PageSectionVariants } from \"@patternfly/react-core\";\r\nimport { UseFormReturn, useFormContext } from \"react-hook-form\";\r\n\r\nimport {\r\n  AttributeForm,\r\n  AttributesForm,\r\n} from \"../components/key-value-form/AttributeForm\";\r\nimport { UserFormFields, toUserFormFields } from \"./form-state\";\r\nimport {\r\n  UnmanagedAttributePolicy,\r\n  UserProfileConfig,\r\n} from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\r\n\r\ntype UserAttributesProps = {\r\n  user: UserRepresentation;\r\n  save: (user: UserFormFields) => void;\r\n  upConfig?: UserProfileConfig;\r\n};\r\n\r\nexport const UserAttributes = ({\r\n  user,\r\n  save,\r\n  upConfig,\r\n}: UserAttributesProps) => {\r\n  const form = useFormContext<UserFormFields>();\r\n\r\n  return (\r\n    <PageSection variant={PageSectionVariants.light}>\r\n      <AttributesForm\r\n        form={form as UseFormReturn<AttributeForm>}\r\n        save={save}\r\n        fineGrainedAccess={user.access?.manage}\r\n        reset={() =>\r\n          form.reset({\r\n            ...form.getValues(),\r\n            attributes: toUserFormFields(user).attributes,\r\n          })\r\n        }\r\n        name=\"unmanagedAttributes\"\r\n        isDisabled={\r\n          UnmanagedAttributePolicy.AdminView ==\r\n          upConfig?.unmanagedAttributePolicy\r\n        }\r\n      />\r\n    </PageSection>\r\n  );\r\n};\r\n","import type UserConsentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userConsentRepresentation\";\r\nimport {\r\n  AlertVariant,\r\n  ButtonVariant,\r\n  Chip,\r\n  ChipGroup,\r\n} from \"@patternfly/react-core\";\r\nimport { CubesIcon } from \"@patternfly/react-icons\";\r\nimport { cellWidth } from \"@patternfly/react-table\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Action, KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { emptyFormatter } from \"../util\";\r\nimport useFormatDate from \"../utils/useFormatDate\";\r\nimport { useParams } from \"../utils/useParams\";\r\n\r\nexport const UserConsents = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const [selectedClient, setSelectedClient] =\r\n    useState<UserConsentRepresentation>();\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const formatDate = useFormatDate();\r\n  const [key, setKey] = useState(0);\r\n\r\n  const { id } = useParams<{ id: string }>();\r\n  const alphabetize = (consentsList: UserConsentRepresentation[]) => {\r\n    return sortBy(consentsList, (client) => client.clientId?.toUpperCase());\r\n  };\r\n\r\n  const refresh = () => setKey(new Date().getTime());\r\n\r\n  const loader = async () => {\r\n    const getConsents = await adminClient.users.listConsents({ id });\r\n\r\n    return alphabetize(getConsents);\r\n  };\r\n\r\n  const clientScopesRenderer = ({\r\n    grantedClientScopes,\r\n  }: UserConsentRepresentation) => {\r\n    return (\r\n      <ChipGroup className=\"kc-consents-chip-group\">\r\n        {grantedClientScopes!.map((currentChip) => (\r\n          <Chip key={currentChip} isReadOnly className=\"kc-consents-chip\">\r\n            {currentChip}\r\n          </Chip>\r\n        ))}\r\n      </ChipGroup>\r\n    );\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"revokeClientScopesTitle\",\r\n    messageKey: t(\"revokeClientScopes\", {\r\n      clientId: selectedClient?.clientId,\r\n    }),\r\n    continueButtonLabel: \"revoke\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.users.revokeConsent({\r\n          id,\r\n          clientId: selectedClient!.clientId!,\r\n        });\r\n\r\n        refresh();\r\n\r\n        addAlert(t(\"deleteGrantsSuccess\"), AlertVariant.success);\r\n      } catch (error) {\r\n        addError(\"deleteGrantsError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <DeleteConfirm />\r\n      <KeycloakDataTable\r\n        loader={loader}\r\n        key={key}\r\n        ariaLabelKey=\"roleList\"\r\n        searchPlaceholderKey=\" \"\r\n        columns={[\r\n          {\r\n            name: \"clientId\",\r\n            displayKey: \"Client\",\r\n            cellFormatters: [emptyFormatter()],\r\n            transforms: [cellWidth(20)],\r\n          },\r\n          {\r\n            name: \"grantedClientScopes\",\r\n            displayKey: \"grantedClientScopes\",\r\n            cellRenderer: clientScopesRenderer,\r\n            transforms: [cellWidth(30)],\r\n          },\r\n          {\r\n            name: \"createdDate\",\r\n            displayKey: \"created\",\r\n            transforms: [cellWidth(20)],\r\n            cellRenderer: ({ createdDate }) =>\r\n              createdDate ? formatDate(new Date(createdDate)) : \"—\",\r\n          },\r\n          {\r\n            name: \"lastUpdatedDate\",\r\n            displayKey: \"lastUpdated\",\r\n            transforms: [cellWidth(10)],\r\n            cellRenderer: ({ lastUpdatedDate }) =>\r\n              lastUpdatedDate ? formatDate(new Date(lastUpdatedDate)) : \"—\",\r\n          },\r\n        ]}\r\n        actions={[\r\n          {\r\n            title: t(\"revoke\"),\r\n            onRowClick: (client) => {\r\n              setSelectedClient(client);\r\n              toggleDeleteDialog();\r\n            },\r\n          } as Action<UserConsentRepresentation>,\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            hasIcon={true}\r\n            icon={CubesIcon}\r\n            message={t(\"noConsents\")}\r\n            instructions={t(\"noConsentsText\")}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { Modal, ModalVariant } from \"@patternfly/react-core\";\r\nimport {\r\n  Table,\r\n  TableVariant,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\n\r\ntype CredentialDataDialogProps = {\r\n  title: string;\r\n  credentialData: [string, string][];\r\n  onClose: () => void;\r\n};\r\n\r\nexport const CredentialDataDialog = ({\r\n  title,\r\n  credentialData,\r\n  onClose,\r\n}: CredentialDataDialogProps) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.medium}\r\n      title={title}\r\n      data-testid=\"passwordDataDialog\"\r\n      isOpen\r\n      onClose={onClose}\r\n    >\r\n      <Table\r\n        aria-label={title}\r\n        data-testid=\"password-data-dialog\"\r\n        variant={TableVariant.compact}\r\n      >\r\n        <Thead>\r\n          <Tr>\r\n            <Th>{t(\"showPasswordDataName\")}</Th>\r\n            <Th>{t(\"showPasswordDataValue\")}</Th>\r\n          </Tr>\r\n        </Thead>\r\n        <Tbody>\r\n          {credentialData.map((cred, index) => {\r\n            return (\r\n              <Tr key={index}>\r\n                <Td>{cred[0]}</Td>\r\n                <Td>{cred[1]}</Td>\r\n              </Tr>\r\n            );\r\n          })}\r\n        </Tbody>\r\n      </Table>\r\n    </Modal>\r\n  );\r\n};\r\n","import { ReactNode, useMemo } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Td } from \"@patternfly/react-table\";\r\nimport {\r\n  Button,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n} from \"@patternfly/react-core\";\r\nimport type CredentialRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/credentialRepresentation\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport useLocaleSort from \"../../utils/useLocaleSort\";\r\nimport { CredentialDataDialog } from \"./CredentialDataDialog\";\r\nimport useFormatDate from \"../../utils/useFormatDate\";\r\nimport { EllipsisVIcon } from \"@patternfly/react-icons\";\r\n\r\ntype CredentialRowProps = {\r\n  credential: CredentialRepresentation;\r\n  resetPassword: () => void;\r\n  toggleDelete: () => void;\r\n  children: ReactNode;\r\n};\r\n\r\nexport const CredentialRow = ({\r\n  credential,\r\n  resetPassword,\r\n  toggleDelete,\r\n  children,\r\n}: CredentialRowProps) => {\r\n  const formatDate = useFormatDate();\r\n  const { t } = useTranslation();\r\n  const [showData, toggleShow] = useToggle();\r\n  const [kebabOpen, toggleKebab] = useToggle();\r\n  const localeSort = useLocaleSort();\r\n\r\n  const rows = useMemo(() => {\r\n    if (!credential.credentialData) {\r\n      return [];\r\n    }\r\n\r\n    const credentialData: Record<string, unknown> = JSON.parse(\r\n      credential.credentialData,\r\n    );\r\n    return localeSort(Object.entries(credentialData), ([key]) => key).map<\r\n      [string, string]\r\n    >(([key, value]) => {\r\n      if (typeof value === \"string\") {\r\n        return [key, value];\r\n      }\r\n\r\n      return [key, JSON.stringify(value)];\r\n    });\r\n  }, [credential.credentialData]);\r\n\r\n  return (\r\n    <>\r\n      {showData && Object.keys(credential).length !== 0 && (\r\n        <CredentialDataDialog\r\n          title={credential.userLabel || t(\"passwordDataTitle\")}\r\n          credentialData={rows}\r\n          onClose={() => {\r\n            toggleShow();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <Td>{children}</Td>\r\n      <Td>{formatDate(new Date(credential.createdDate!))}</Td>\r\n      <Td>\r\n        <Button\r\n          className=\"kc-showData-btn\"\r\n          variant=\"link\"\r\n          data-testid=\"showDataBtn\"\r\n          onClick={toggleShow}\r\n        >\r\n          {t(\"showDataBtn\")}\r\n        </Button>\r\n      </Td>\r\n      {credential.type === \"password\" ? (\r\n        <Td isActionCell>\r\n          <Button\r\n            variant=\"secondary\"\r\n            data-testid=\"resetPasswordBtn\"\r\n            onClick={resetPassword}\r\n          >\r\n            {t(\"resetPasswordBtn\")}\r\n          </Button>\r\n        </Td>\r\n      ) : (\r\n        <Td />\r\n      )}\r\n      <Td isActionCell>\r\n        <Dropdown\r\n          popperProps={{\r\n            position: \"right\",\r\n          }}\r\n          onOpenChange={toggleKebab}\r\n          toggle={(ref) => (\r\n            <MenuToggle\r\n              ref={ref}\r\n              isExpanded={kebabOpen}\r\n              onClick={toggleKebab}\r\n              variant=\"plain\"\r\n              aria-label=\"Kebab toggle\"\r\n            >\r\n              <EllipsisVIcon />\r\n            </MenuToggle>\r\n          )}\r\n          isOpen={kebabOpen}\r\n        >\r\n          <DropdownList>\r\n            <DropdownItem\r\n              key={credential.id}\r\n              data-testid=\"deleteDropdownItem\"\r\n              component=\"button\"\r\n              onClick={() => {\r\n                toggleDelete();\r\n                toggleKebab();\r\n              }}\r\n            >\r\n              {t(\"deleteBtn\")}\r\n            </DropdownItem>\r\n          </DropdownList>\r\n        </Dropdown>\r\n      </Td>\r\n    </>\r\n  );\r\n};\r\n","import type CredentialRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/credentialRepresentation\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  TextInput,\r\n} from \"@patternfly/react-core\";\r\nimport { CheckIcon, PencilAltIcon, TimesIcon } from \"@patternfly/react-icons\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype UserLabelForm = {\r\n  userLabel: string;\r\n};\r\n\r\ntype InlineLabelEditProps = {\r\n  userId: string;\r\n  credential: CredentialRepresentation;\r\n  isEditable: boolean;\r\n  toggle: () => void;\r\n};\r\n\r\nexport const InlineLabelEdit = ({\r\n  userId,\r\n  credential,\r\n  isEditable,\r\n  toggle,\r\n}: InlineLabelEditProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { register, handleSubmit } = useForm<UserLabelForm>();\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const saveUserLabel = async (userLabel: UserLabelForm) => {\r\n    try {\r\n      await adminClient.users.updateCredentialLabel(\r\n        {\r\n          id: userId,\r\n          credentialId: credential.id!,\r\n        },\r\n        userLabel.userLabel || \"\",\r\n      );\r\n      addAlert(t(\"updateCredentialUserLabelSuccess\"), AlertVariant.success);\r\n      toggle();\r\n    } catch (error) {\r\n      addError(\"updateCredentialUserLabelError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      isHorizontal\r\n      className=\"kc-form-userLabel\"\r\n      onSubmit={handleSubmit(saveUserLabel)}\r\n    >\r\n      <FormGroup fieldId=\"kc-userLabel\" className=\"kc-userLabel-row\">\r\n        <div className=\"kc-form-group-userLabel\">\r\n          {isEditable ? (\r\n            <>\r\n              <TextInput\r\n                data-testid=\"userLabelFld\"\r\n                defaultValue={credential.userLabel}\r\n                className=\"kc-userLabel\"\r\n                aria-label={t(\"userLabel\")}\r\n                {...register(\"userLabel\")}\r\n              />\r\n              <div className=\"kc-userLabel-actionBtns\">\r\n                <Button\r\n                  data-testid=\"editUserLabelAcceptBtn\"\r\n                  variant=\"link\"\r\n                  className=\"kc-editUserLabelAcceptBtn\"\r\n                  aria-label={t(\"acceptBtn\")}\r\n                  type=\"submit\"\r\n                  icon={<CheckIcon />}\r\n                />\r\n                <Button\r\n                  data-testid=\"editUserLabelCancelBtn\"\r\n                  variant=\"link\"\r\n                  className=\"kc-editUserLabel-cancelBtn\"\r\n                  aria-label={t(\"cancelBtn\")}\r\n                  onClick={toggle}\r\n                  icon={<TimesIcon />}\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {credential.userLabel}\r\n              <Button\r\n                aria-label={t(\"editUserLabel\")}\r\n                variant=\"link\"\r\n                className=\"kc-editUserLabel-btn\"\r\n                onClick={toggle}\r\n                data-testid=\"editUserLabelBtn\"\r\n                icon={<PencilAltIcon />}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n      </FormGroup>\r\n    </Form>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { TimeSelectorControl } from \"../../components/time-selector/TimeSelectorControl\";\r\n\r\nexport const LifespanField = () => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <TimeSelectorControl\r\n      name=\"lifespan\"\r\n      label={t(\"lifespan\")}\r\n      labelIcon={t(\"lifespanHelp\")}\r\n      units={[\"minute\", \"hour\", \"day\"]}\r\n      menuAppendTo=\"parent\"\r\n      controller={{}}\r\n    />\r\n  );\r\n};\r\n","import type { RequiredActionAlias } from \"@keycloak/keycloak-admin-client/lib/defs/requiredActionProviderRepresentation\";\r\nimport { AlertVariant, Form, ModalVariant } from \"@patternfly/react-core\";\r\nimport { isEmpty } from \"lodash-es\";\r\nimport { FormProvider, useForm, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { LifespanField } from \"./LifespanField\";\r\nimport { RequiredActionMultiSelect } from \"./RequiredActionMultiSelect\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\n\r\ntype ResetCredentialDialogProps = {\r\n  userId: string;\r\n  onClose: () => void;\r\n};\r\n\r\ntype CredentialResetForm = {\r\n  actions: RequiredActionAlias[];\r\n  lifespan: number | undefined;\r\n};\r\n\r\nexport const ResetCredentialDialog = ({\r\n  userId,\r\n  onClose,\r\n}: ResetCredentialDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { realmRepresentation: realm } = useRealm();\r\n  const { t } = useTranslation();\r\n  const form = useForm<CredentialResetForm>({\r\n    defaultValues: {\r\n      actions: [],\r\n      lifespan: realm?.actionTokenGeneratedByAdminLifespan,\r\n    },\r\n  });\r\n  const { handleSubmit, control } = form;\r\n\r\n  const resetActionWatcher = useWatch({\r\n    control,\r\n    name: \"actions\",\r\n  });\r\n  const resetIsNotDisabled = !isEmpty(resetActionWatcher);\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const sendCredentialsResetEmail = async ({\r\n    actions,\r\n    lifespan,\r\n  }: CredentialResetForm) => {\r\n    if (isEmpty(actions)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await adminClient.users.executeActionsEmail({\r\n        id: userId,\r\n        actions,\r\n        lifespan,\r\n      });\r\n      addAlert(t(\"credentialResetEmailSuccess\"), AlertVariant.success);\r\n      onClose();\r\n    } catch (error) {\r\n      addError(\"credentialResetEmailError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ConfirmDialogModal\r\n      variant={ModalVariant.medium}\r\n      titleKey=\"credentialReset\"\r\n      open\r\n      onCancel={onClose}\r\n      toggleDialog={onClose}\r\n      continueButtonLabel=\"credentialResetConfirm\"\r\n      onConfirm={async () => {\r\n        await handleSubmit(sendCredentialsResetEmail)();\r\n      }}\r\n      confirmButtonDisabled={!resetIsNotDisabled}\r\n    >\r\n      <Form\r\n        id=\"userCredentialsReset-form\"\r\n        isHorizontal\r\n        data-testid=\"credential-reset-modal\"\r\n      >\r\n        <FormProvider {...form}>\r\n          <RequiredActionMultiSelect\r\n            name=\"actions\"\r\n            label=\"resetAction\"\r\n            help=\"resetActions\"\r\n          />\r\n          <LifespanField />\r\n        </FormProvider>\r\n      </Form>\r\n    </ConfirmDialogModal>\r\n  );\r\n};\r\n","import { RequiredActionAlias } from \"@keycloak/keycloak-admin-client/lib/defs/requiredActionProviderRepresentation\";\r\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport {\r\n  AlertVariant,\r\n  ButtonVariant,\r\n  Form,\r\n  FormGroup,\r\n} from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { FormErrorText, PasswordInput } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ConfirmDialogModal,\r\n  useConfirmDialog,\r\n} from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport useToggle from \"../../utils/useToggle\";\r\n\r\ntype ResetPasswordDialogProps = {\r\n  user: UserRepresentation;\r\n  isResetPassword: boolean;\r\n  onAddRequiredActions?: (requiredActions: string[]) => void;\r\n  refresh: () => void;\r\n  onClose: () => void;\r\n};\r\n\r\nexport type CredentialsForm = {\r\n  password: string;\r\n  passwordConfirmation: string;\r\n  temporaryPassword: boolean;\r\n};\r\n\r\nconst credFormDefaultValues: CredentialsForm = {\r\n  password: \"\",\r\n  passwordConfirmation: \"\",\r\n  temporaryPassword: true,\r\n};\r\n\r\nexport const ResetPasswordDialog = ({\r\n  user,\r\n  isResetPassword,\r\n  onAddRequiredActions,\r\n  refresh,\r\n  onClose,\r\n}: ResetPasswordDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const form = useForm<CredentialsForm>({\r\n    defaultValues: credFormDefaultValues,\r\n    mode: \"onChange\",\r\n  });\r\n  const {\r\n    register,\r\n    formState: { isValid, errors },\r\n    watch,\r\n    handleSubmit,\r\n    clearErrors,\r\n    setError,\r\n  } = form;\r\n\r\n  const [confirm, toggle] = useToggle(true);\r\n  const password = watch(\"password\", \"\");\r\n  const passwordConfirmation = watch(\"passwordConfirmation\", \"\");\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const [toggleConfirmSaveModal, ConfirmSaveModal] = useConfirmDialog({\r\n    titleKey: isResetPassword ? \"resetPasswordConfirm\" : \"setPasswordConfirm\",\r\n    messageKey: isResetPassword\r\n      ? t(\"resetPasswordConfirmText\", { username: user.username })\r\n      : t(\"setPasswordConfirmText\", { username: user.username }),\r\n    continueButtonLabel: isResetPassword ? \"resetPassword\" : \"savePassword\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: () => handleSubmit(saveUserPassword)(),\r\n  });\r\n\r\n  const saveUserPassword = async ({\r\n    password,\r\n    temporaryPassword,\r\n  }: CredentialsForm) => {\r\n    try {\r\n      await adminClient.users.resetPassword({\r\n        id: user.id!,\r\n        credential: {\r\n          temporary: temporaryPassword,\r\n          type: \"password\",\r\n          value: password,\r\n        },\r\n      });\r\n      if (temporaryPassword) {\r\n        onAddRequiredActions?.([RequiredActionAlias.UPDATE_PASSWORD]);\r\n      }\r\n      const credentials = await adminClient.users.getCredentials({\r\n        id: user.id!,\r\n      });\r\n      const credentialLabel = credentials.find((c) => c.type === \"password\");\r\n      const isLocalCredential =\r\n        credentialLabel && credentialLabel.federationLink === undefined;\r\n\r\n      if (isLocalCredential) {\r\n        await adminClient.users.updateCredentialLabel(\r\n          {\r\n            id: user.id!,\r\n            credentialId: credentialLabel.id!,\r\n          },\r\n          t(\"defaultPasswordLabel\"),\r\n        );\r\n      }\r\n      addAlert(\r\n        isResetPassword\r\n          ? t(\"resetCredentialsSuccess\")\r\n          : t(\"savePasswordSuccess\"),\r\n        AlertVariant.success,\r\n      );\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\r\n        isResetPassword ? \"resetPasswordError\" : \"savePasswordError\",\r\n        error,\r\n      );\r\n    }\r\n\r\n    onClose();\r\n  };\r\n\r\n  const { onChange, ...rest } = register(\"password\", { required: true });\r\n  return (\r\n    <>\r\n      <ConfirmSaveModal />\r\n      <ConfirmDialogModal\r\n        titleKey={\r\n          isResetPassword\r\n            ? t(\"resetPasswordFor\", { username: user.username })\r\n            : t(\"setPasswordFor\", { username: user.username })\r\n        }\r\n        open={confirm}\r\n        onCancel={onClose}\r\n        toggleDialog={toggle}\r\n        onConfirm={toggleConfirmSaveModal}\r\n        confirmButtonDisabled={!isValid}\r\n        continueButtonLabel=\"save\"\r\n      >\r\n        <Form\r\n          id=\"userCredentials-form\"\r\n          isHorizontal\r\n          className=\"keycloak__user-credentials__reset-form\"\r\n        >\r\n          <FormGroup\r\n            name=\"password\"\r\n            label={t(\"password\")}\r\n            fieldId=\"password\"\r\n            isRequired\r\n          >\r\n            <PasswordInput\r\n              data-testid=\"passwordField\"\r\n              id=\"password\"\r\n              onChange={async (e) => {\r\n                await onChange(e);\r\n                if (\r\n                  e.currentTarget &&\r\n                  passwordConfirmation !== e.currentTarget.value\r\n                ) {\r\n                  setError(\"passwordConfirmation\", {\r\n                    message: t(\"confirmPasswordDoesNotMatch\"),\r\n                  });\r\n                } else {\r\n                  clearErrors(\"passwordConfirmation\");\r\n                }\r\n              }}\r\n              {...rest}\r\n            />\r\n            {errors.password && <FormErrorText message={t(\"required\")} />}\r\n          </FormGroup>\r\n          <FormGroup\r\n            name=\"passwordConfirmation\"\r\n            label={\r\n              isResetPassword\r\n                ? t(\"resetPasswordConfirmation\")\r\n                : t(\"passwordConfirmation\")\r\n            }\r\n            fieldId=\"passwordConfirmation\"\r\n            isRequired\r\n          >\r\n            <PasswordInput\r\n              data-testid=\"passwordConfirmationField\"\r\n              id=\"passwordConfirmation\"\r\n              {...register(\"passwordConfirmation\", {\r\n                required: true,\r\n                validate: (value) =>\r\n                  value === password || t(\"confirmPasswordDoesNotMatch\"),\r\n              })}\r\n            />\r\n            {errors.passwordConfirmation && (\r\n              <FormErrorText\r\n                message={errors.passwordConfirmation.message as string}\r\n              />\r\n            )}\r\n          </FormGroup>\r\n          <FormProvider {...form}>\r\n            <DefaultSwitchControl\r\n              name=\"temporaryPassword\"\r\n              label={t(\"temporaryPassword\")}\r\n              labelIcon={t(\"temporaryPasswordHelpText\")}\r\n              className=\"pf-v5-u-mb-md\"\r\n              defaultValue=\"true\"\r\n            />\r\n          </FormProvider>\r\n        </Form>\r\n      </ConfirmDialogModal>\r\n    </>\r\n  );\r\n};\r\n","import type CredentialRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/credentialRepresentation\";\r\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { HelpItem, useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Divider,\r\n  PageSection,\r\n  PageSectionVariants,\r\n} from \"@patternfly/react-core\";\r\nimport styles from \"@patternfly/react-styles/css/components/Table/table\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport {\r\n  Fragment,\r\n  DragEvent as ReactDragEvent,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { toUpperCase } from \"../util\";\r\nimport { FederatedUserLink } from \"./FederatedUserLink\";\r\nimport { CredentialRow } from \"./user-credentials/CredentialRow\";\r\nimport { InlineLabelEdit } from \"./user-credentials/InlineLabelEdit\";\r\nimport { ResetCredentialDialog } from \"./user-credentials/ResetCredentialDialog\";\r\nimport { ResetPasswordDialog } from \"./user-credentials/ResetPasswordDialog\";\r\nimport useFormatDate from \"../utils/useFormatDate\";\r\n\r\nimport \"./user-credentials.css\";\r\n\r\ntype UserCredentialsProps = {\r\n  user: UserRepresentation;\r\n  setUser: (user: UserRepresentation) => void;\r\n};\r\n\r\ntype ExpandableCredentialRepresentation = {\r\n  key: string;\r\n  value: CredentialRepresentation[];\r\n  isExpanded: boolean;\r\n};\r\n\r\ntype UserLabelEdit = {\r\n  status: boolean;\r\n  rowKey: string;\r\n};\r\n\r\ntype UserCredentialsRowProps = {\r\n  credential: CredentialRepresentation;\r\n  userId: string;\r\n  toggleDelete: (credential: CredentialRepresentation) => void;\r\n  resetPassword: () => void;\r\n  isUserLabelEdit?: UserLabelEdit;\r\n  setIsUserLabelEdit: (isUserLabelEdit: UserLabelEdit) => void;\r\n  refresh: () => void;\r\n};\r\n\r\nconst UserCredentialsRow = ({\r\n  credential,\r\n  userId,\r\n  toggleDelete,\r\n  resetPassword,\r\n  isUserLabelEdit,\r\n  setIsUserLabelEdit,\r\n  refresh,\r\n}: UserCredentialsRowProps) => (\r\n  <CredentialRow\r\n    key={credential.id}\r\n    credential={credential}\r\n    toggleDelete={() => toggleDelete(credential)}\r\n    resetPassword={resetPassword}\r\n  >\r\n    <InlineLabelEdit\r\n      credential={credential}\r\n      userId={userId}\r\n      isEditable={\r\n        (isUserLabelEdit?.status && isUserLabelEdit.rowKey === credential.id) ||\r\n        false\r\n      }\r\n      toggle={() => {\r\n        setIsUserLabelEdit({\r\n          status: !isUserLabelEdit?.status,\r\n          rowKey: credential.id!,\r\n        });\r\n        if (isUserLabelEdit?.status) {\r\n          refresh();\r\n        }\r\n      }}\r\n    />\r\n  </CredentialRow>\r\n);\r\n\r\nexport const UserCredentials = ({ user, setUser }: UserCredentialsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [key, setKey] = useState(0);\r\n  const formatDate = useFormatDate();\r\n  const refresh = () => setKey(key + 1);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [openCredentialReset, setOpenCredentialReset] = useState(false);\r\n  const [userCredentials, setUserCredentials] = useState<\r\n    CredentialRepresentation[]\r\n  >([]);\r\n  const [groupedUserCredentials, setGroupedUserCredentials] = useState<\r\n    ExpandableCredentialRepresentation[]\r\n  >([]);\r\n  const [selectedCredential, setSelectedCredential] =\r\n    useState<CredentialRepresentation>({});\r\n  const [isResetPassword, setIsResetPassword] = useState(false);\r\n  const [isUserLabelEdit, setIsUserLabelEdit] = useState<UserLabelEdit>();\r\n\r\n  const bodyRef = useRef<HTMLTableSectionElement>(null);\r\n  const [state, setState] = useState({\r\n    draggedItemId: \"\",\r\n    draggingToItemIndex: -1,\r\n    dragging: false,\r\n    tempItemOrder: [\"\"],\r\n  });\r\n\r\n  useFetch(\r\n    () => {\r\n      if (user.enabled) {\r\n        return adminClient.users.getCredentials({ id: user.id! });\r\n      }\r\n      return Promise.resolve([]);\r\n    },\r\n    (credentials) => {\r\n      credentials = [\r\n        ...credentials.filter((c: CredentialRepresentation) => {\r\n          return c.federationLink === undefined;\r\n        }),\r\n      ];\r\n      setUserCredentials(credentials);\r\n\r\n      const groupedCredentials = credentials.reduce((r, a) => {\r\n        r[a.type!] = r[a.type!] || [];\r\n        r[a.type!].push(a);\r\n        return r;\r\n      }, Object.create(null));\r\n\r\n      const groupedCredentialsArray = Object.keys(groupedCredentials).map(\r\n        (key) => ({ key, value: groupedCredentials[key] }),\r\n      );\r\n\r\n      setGroupedUserCredentials(\r\n        groupedCredentialsArray.map((groupedCredential) => ({\r\n          ...groupedCredential,\r\n          isExpanded: false,\r\n        })),\r\n      );\r\n    },\r\n    [key],\r\n  );\r\n\r\n  const toggleModal = () => setIsOpen(!isOpen);\r\n\r\n  const toggleCredentialsResetModal = () => {\r\n    setOpenCredentialReset(!openCredentialReset);\r\n  };\r\n\r\n  const resetPassword = () => {\r\n    setIsResetPassword(true);\r\n    toggleModal();\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: t(\"deleteCredentialsConfirmTitle\"),\r\n    messageKey: t(\"deleteCredentialsConfirm\"),\r\n    continueButtonLabel: t(\"delete\"),\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.users.deleteCredential({\r\n          id: user.id!,\r\n          credentialId: selectedCredential.id!,\r\n        });\r\n        addAlert(t(\"deleteCredentialsSuccess\"), AlertVariant.success);\r\n        setKey((key) => key + 1);\r\n      } catch (error) {\r\n        addError(\"deleteCredentialsError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  const itemOrder = useMemo(\r\n    () =>\r\n      groupedUserCredentials.flatMap((groupedCredential) => [\r\n        groupedCredential.value.map(({ id }) => id).toString(),\r\n        ...(groupedCredential.isExpanded\r\n          ? groupedCredential.value.map((c) => c.id!)\r\n          : []),\r\n      ]),\r\n    [groupedUserCredentials],\r\n  );\r\n\r\n  const onDragStart = (evt: ReactDragEvent) => {\r\n    evt.dataTransfer.effectAllowed = \"move\";\r\n    evt.dataTransfer.setData(\"text/plain\", evt.currentTarget.id);\r\n    const draggedItemId = evt.currentTarget.id;\r\n    evt.currentTarget.classList.add(styles.modifiers.ghostRow);\r\n    evt.currentTarget.setAttribute(\"aria-pressed\", \"true\");\r\n    setState({ ...state, draggedItemId, dragging: true });\r\n  };\r\n\r\n  const moveItem = (items: string[], targetItem: string, toIndex: number) => {\r\n    const fromIndex = items.indexOf(targetItem);\r\n    if (fromIndex === toIndex) {\r\n      return items;\r\n    }\r\n    const result = [...items];\r\n    result.splice(toIndex, 0, result.splice(fromIndex, 1)[0]);\r\n    return result;\r\n  };\r\n\r\n  const move = (itemOrder: string[]) => {\r\n    if (!bodyRef.current) return;\r\n    const ulNode = bodyRef.current;\r\n    const nodes = Array.from(ulNode.children);\r\n    if (nodes.every(({ id }, i) => id === itemOrder[i])) {\r\n      return;\r\n    }\r\n    ulNode.replaceChildren();\r\n    itemOrder.forEach((itemId) => {\r\n      ulNode.appendChild(nodes.find(({ id }) => id === itemId)!);\r\n    });\r\n  };\r\n\r\n  const onDragCancel = () => {\r\n    if (!bodyRef.current) return;\r\n    Array.from(bodyRef.current.children).forEach((el) => {\r\n      el.classList.remove(styles.modifiers.ghostRow);\r\n      el.setAttribute(\"aria-pressed\", \"false\");\r\n    });\r\n    setState({\r\n      ...state,\r\n      draggedItemId: \"\",\r\n      draggingToItemIndex: -1,\r\n      dragging: false,\r\n    });\r\n  };\r\n\r\n  const onDragLeave = (evt: ReactDragEvent) => {\r\n    if (!isValidDrop(evt)) {\r\n      move(itemOrder);\r\n      setState({ ...state, draggingToItemIndex: -1 });\r\n    }\r\n  };\r\n\r\n  const isValidDrop = (evt: ReactDragEvent) => {\r\n    if (!bodyRef.current) return false;\r\n    const ulRect = bodyRef.current.getBoundingClientRect();\r\n    return (\r\n      evt.clientX > ulRect.x &&\r\n      evt.clientX < ulRect.x + ulRect.width &&\r\n      evt.clientY > ulRect.y &&\r\n      evt.clientY < ulRect.y + ulRect.height\r\n    );\r\n  };\r\n\r\n  const onDrop = async (evt: ReactDragEvent) => {\r\n    if (isValidDrop(evt)) {\r\n      await onDragFinish(state.draggedItemId, state.tempItemOrder);\r\n    } else {\r\n      onDragCancel();\r\n    }\r\n  };\r\n\r\n  const onDragOver = (evt: ReactDragEvent) => {\r\n    evt.preventDefault();\r\n    const td = evt.target as HTMLTableCellElement;\r\n    const curListItem = td.closest(\"tr\");\r\n    if (\r\n      !curListItem ||\r\n      (bodyRef.current && !bodyRef.current.contains(curListItem)) ||\r\n      curListItem.id === state.draggedItemId\r\n    ) {\r\n      return;\r\n    } else {\r\n      const dragId = curListItem.id;\r\n      const draggingToItemIndex = Array.from(\r\n        bodyRef.current?.children || [],\r\n      ).findIndex((item) => item.id === dragId);\r\n      if (draggingToItemIndex === state.draggingToItemIndex) {\r\n        return;\r\n      }\r\n      const tempItemOrder = moveItem(\r\n        itemOrder,\r\n        state.draggedItemId,\r\n        draggingToItemIndex,\r\n      );\r\n      move(tempItemOrder);\r\n      setState({\r\n        ...state,\r\n        draggingToItemIndex,\r\n        tempItemOrder,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onAddRequiredActions = (requiredActions: string[]) => {\r\n    setUser({\r\n      ...user,\r\n      requiredActions: [...(user.requiredActions ?? []), ...requiredActions],\r\n    });\r\n  };\r\n\r\n  const onDragEnd = ({ target }: ReactDragEvent) => {\r\n    if (!(target instanceof HTMLTableRowElement)) {\r\n      return;\r\n    }\r\n    target.classList.remove(styles.modifiers.ghostRow);\r\n    target.setAttribute(\"aria-pressed\", \"false\");\r\n    setState({\r\n      ...state,\r\n      draggedItemId: \"\",\r\n      draggingToItemIndex: -1,\r\n      dragging: false,\r\n    });\r\n  };\r\n\r\n  const onDragFinish = async (dragged: string, newOrder: string[]) => {\r\n    const oldIndex = itemOrder.findIndex((key) => key === dragged);\r\n    const newIndex = newOrder.findIndex((key) => key === dragged);\r\n    const times = newIndex - oldIndex;\r\n\r\n    const ids = dragged.split(\",\");\r\n\r\n    try {\r\n      for (const id of ids)\r\n        for (let index = 0; index < Math.abs(times); index++) {\r\n          if (times > 0) {\r\n            await adminClient.users.moveCredentialPositionDown({\r\n              id: user.id!,\r\n              credentialId: id,\r\n              newPreviousCredentialId: itemOrder[newIndex],\r\n            });\r\n          } else {\r\n            await adminClient.users.moveCredentialPositionUp({\r\n              id: user.id!,\r\n              credentialId: id,\r\n            });\r\n          }\r\n        }\r\n\r\n      refresh();\r\n      addAlert(t(\"updatedCredentialMoveSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"updatedCredentialMoveError\", error);\r\n    }\r\n  };\r\n\r\n  const onToggleDelete = (credential: CredentialRepresentation) => {\r\n    setSelectedCredential(credential);\r\n    toggleDeleteDialog();\r\n  };\r\n\r\n  const useFederatedCredentials = user.federationLink;\r\n  const [credentialTypes, setCredentialTypes] = useState<\r\n    CredentialRepresentation[]\r\n  >([]);\r\n\r\n  useFetch(\r\n    () => {\r\n      if (user.enabled) {\r\n        return adminClient.users.getCredentials({ id: user.id! });\r\n      }\r\n      return Promise.resolve([]);\r\n    },\r\n    (credentials) => {\r\n      credentials = [\r\n        ...credentials.filter((c: CredentialRepresentation) => {\r\n          return c.federationLink !== undefined;\r\n        }),\r\n      ];\r\n      setCredentialTypes(credentials);\r\n    },\r\n    [key],\r\n  );\r\n\r\n  if (!credentialTypes) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  const hasCredentialTypes = credentialTypes.length > 0;\r\n  const noCredentials = groupedUserCredentials.length === 0;\r\n  const noFederatedCredentials =\r\n    !user.credentials || user.credentials.length === 0;\r\n  const emptyState =\r\n    noCredentials && noFederatedCredentials && !hasCredentialTypes;\r\n\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <ResetPasswordDialog\r\n          user={user}\r\n          isResetPassword={isResetPassword}\r\n          onAddRequiredActions={onAddRequiredActions}\r\n          refresh={refresh}\r\n          onClose={() => setIsOpen(false)}\r\n        />\r\n      )}\r\n      {openCredentialReset && (\r\n        <ResetCredentialDialog\r\n          userId={user.id!}\r\n          onClose={() => setOpenCredentialReset(false)}\r\n        />\r\n      )}\r\n      <DeleteConfirm />\r\n      {user.email && !emptyState && (\r\n        <Button\r\n          className=\"kc-resetCredentialBtn-header\"\r\n          variant=\"primary\"\r\n          data-testid=\"credentialResetBtn\"\r\n          onClick={() => setOpenCredentialReset(true)}\r\n        >\r\n          {t(\"credentialResetBtn\")}\r\n        </Button>\r\n      )}\r\n      {userCredentials.length !== 0 &&\r\n        !userCredentials.find((credential) => credential.type === \"password\") &&\r\n        !credentialTypes.find(\r\n          (credential) => credential.type === \"password\",\r\n        ) && (\r\n          <>\r\n            <Button\r\n              className=\"kc-setPasswordBtn-tbl\"\r\n              data-testid=\"setPasswordBtn-table\"\r\n              variant=\"primary\"\r\n              form=\"userCredentials-form\"\r\n              onClick={() => {\r\n                setIsOpen(true);\r\n              }}\r\n            >\r\n              {t(\"setPassword\")}\r\n            </Button>\r\n            <Divider />\r\n          </>\r\n        )}\r\n      {groupedUserCredentials.length !== 0 && (\r\n        <PageSection variant={PageSectionVariants.light}>\r\n          <Table variant={\"compact\"}>\r\n            <Thead>\r\n              <Tr className=\"kc-table-header\">\r\n                <Th>\r\n                  <HelpItem\r\n                    helpText={t(\"userCredentialsHelpText\")}\r\n                    fieldLabelId=\"userCredentialsHelpTextLabel\"\r\n                  />\r\n                </Th>\r\n                <Th aria-hidden=\"true\" />\r\n                <Th>{t(\"type\")}</Th>\r\n                <Th>{t(\"userLabel\")}</Th>\r\n                <Th>{t(\"createdAt\")}</Th>\r\n                <Th>{t(\"data\")}</Th>\r\n                <Th aria-hidden=\"true\" />\r\n                <Th aria-hidden=\"true\" />\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody\r\n              ref={bodyRef}\r\n              onDragOver={onDragOver}\r\n              onDrop={onDragOver}\r\n              onDragLeave={onDragLeave}\r\n            >\r\n              {groupedUserCredentials.map((groupedCredential, rowIndex) => (\r\n                <Fragment key={groupedCredential.key}>\r\n                  <Tr\r\n                    id={groupedCredential.value.map(({ id }) => id).toString()}\r\n                    draggable={groupedUserCredentials.length > 1}\r\n                    onDrop={onDrop}\r\n                    onDragEnd={onDragEnd}\r\n                    onDragStart={onDragStart}\r\n                  >\r\n                    <Td\r\n                      className={\r\n                        groupedUserCredentials.length === 1 ? \"one-row\" : \"\"\r\n                      }\r\n                      draggableRow={{\r\n                        id: `draggable-row-${groupedCredential.value.map(\r\n                          ({ id }) => id,\r\n                        )}`,\r\n                      }}\r\n                    />\r\n                    {groupedCredential.value.length > 1 ? (\r\n                      <Td\r\n                        className=\"kc-expandRow-btn\"\r\n                        expand={{\r\n                          rowIndex,\r\n                          isExpanded: groupedCredential.isExpanded,\r\n                          onToggle: (_, rowIndex) => {\r\n                            const rows = groupedUserCredentials.map(\r\n                              (credential, index) =>\r\n                                index === rowIndex\r\n                                  ? {\r\n                                      ...credential,\r\n                                      isExpanded: !credential.isExpanded,\r\n                                    }\r\n                                  : credential,\r\n                            );\r\n                            setGroupedUserCredentials(rows);\r\n                          },\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <Td />\r\n                    )}\r\n                    <Td\r\n                      dataLabel={`columns-${groupedCredential.key}`}\r\n                      className=\"kc-notExpandableRow-credentialType\"\r\n                      data-testid=\"credentialType\"\r\n                    >\r\n                      {toUpperCase(groupedCredential.key)}\r\n                    </Td>\r\n                    {groupedCredential.value.length <= 1 &&\r\n                      groupedCredential.value.map((credential) => (\r\n                        <UserCredentialsRow\r\n                          key={credential.id}\r\n                          credential={credential}\r\n                          userId={user.id!}\r\n                          toggleDelete={onToggleDelete}\r\n                          resetPassword={resetPassword}\r\n                          isUserLabelEdit={isUserLabelEdit}\r\n                          setIsUserLabelEdit={setIsUserLabelEdit}\r\n                          refresh={refresh}\r\n                        />\r\n                      ))}\r\n                  </Tr>\r\n                  {groupedCredential.isExpanded &&\r\n                    groupedCredential.value.map((credential) => (\r\n                      <Tr\r\n                        key={credential.id}\r\n                        id={credential.id}\r\n                        draggable\r\n                        onDrop={onDrop}\r\n                        onDragEnd={onDragEnd}\r\n                        onDragStart={onDragStart}\r\n                      >\r\n                        <Td />\r\n                        <Td\r\n                          className=\"kc-draggable-dropdown-type-icon\"\r\n                          draggableRow={{\r\n                            id: `draggable-row-${groupedCredential.value.map(\r\n                              ({ id }) => id,\r\n                            )}`,\r\n                          }}\r\n                        />\r\n                        <Td\r\n                          dataLabel={`child-columns-${credential.id}`}\r\n                          className=\"kc-expandableRow-credentialType\"\r\n                        >\r\n                          {toUpperCase(credential.type!)}\r\n                        </Td>\r\n                        <UserCredentialsRow\r\n                          credential={credential}\r\n                          userId={user.id!}\r\n                          toggleDelete={onToggleDelete}\r\n                          resetPassword={resetPassword}\r\n                          isUserLabelEdit={isUserLabelEdit}\r\n                          setIsUserLabelEdit={setIsUserLabelEdit}\r\n                          refresh={refresh}\r\n                        />\r\n                      </Tr>\r\n                    ))}\r\n                </Fragment>\r\n              ))}\r\n            </Tbody>\r\n          </Table>\r\n        </PageSection>\r\n      )}\r\n      {useFederatedCredentials && hasCredentialTypes && (\r\n        <PageSection variant={PageSectionVariants.light}>\r\n          <Table variant=\"compact\">\r\n            <Thead>\r\n              <Tr>\r\n                <Th>{t(\"type\")}</Th>\r\n                <Th>{t(\"providedBy\")}</Th>\r\n                <Th>{t(\"createdAt\")}</Th>\r\n                <Th aria-hidden=\"true\" />\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              {credentialTypes.map((credential) => (\r\n                <Tr key={credential.type}>\r\n                  <Td>\r\n                    <b>{credential.type}</b>\r\n                  </Td>\r\n                  <Td>\r\n                    <FederatedUserLink user={user} />\r\n                  </Td>\r\n                  <Td>{formatDate(new Date(credential.createdDate!))}</Td>\r\n                  {credential.type === \"password\" && (\r\n                    <Td modifier=\"fitContent\">\r\n                      <Button variant=\"secondary\" onClick={toggleModal}>\r\n                        {t(\"setPassword\")}\r\n                      </Button>\r\n                    </Td>\r\n                  )}\r\n                </Tr>\r\n              ))}\r\n            </Tbody>\r\n          </Table>\r\n        </PageSection>\r\n      )}\r\n      {emptyState && (\r\n        <ListEmptyState\r\n          hasIcon\r\n          message={t(\"noCredentials\")}\r\n          instructions={t(\"noCredentialsText\")}\r\n          primaryActionText={t(\"setPassword\")}\r\n          onPrimaryAction={toggleModal}\r\n          secondaryActions={\r\n            user.email\r\n              ? [\r\n                  {\r\n                    text: t(\"credentialResetBtn\"),\r\n                    onClick: toggleCredentialsResetModal,\r\n                    type: ButtonVariant.link,\r\n                  },\r\n                ]\r\n              : undefined\r\n          }\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { useHelp } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Checkbox,\r\n  Popover,\r\n} from \"@patternfly/react-core\";\r\nimport { QuestionCircleIcon } from \"@patternfly/react-icons\";\r\nimport { cellWidth } from \"@patternfly/react-table\";\r\nimport { intersectionBy, sortBy, uniqBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { GroupPath } from \"../components/group/GroupPath\";\r\nimport { GroupPickerDialog } from \"../components/group/GroupPickerDialog\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAccess } from \"../context/access/Access\";\r\n\r\ntype UserGroupsProps = {\r\n  user: UserRepresentation;\r\n};\r\n\r\nexport const UserGroups = ({ user }: UserGroupsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [selectedGroups, setSelectedGroups] = useState<GroupRepresentation[]>(\r\n    [],\r\n  );\r\n\r\n  const [isDirectMembership, setDirectMembership] = useState(true);\r\n  const [directMembershipList, setDirectMembershipList] = useState<\r\n    GroupRepresentation[]\r\n  >([]);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const { enabled } = useHelp();\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-users\");\r\n\r\n  const alphabetize = (groupsList: GroupRepresentation[]) => {\r\n    return sortBy(groupsList, (group) => group.path?.toUpperCase());\r\n  };\r\n\r\n  const loader = async (first?: number, max?: number, search?: string) => {\r\n    const params: { [name: string]: string | number } = {\r\n      first: first!,\r\n      max: max!,\r\n    };\r\n\r\n    const searchParam = search || \"\";\r\n    if (searchParam) {\r\n      params.search = searchParam;\r\n    }\r\n\r\n    const joinedUserGroups = await adminClient.users.listGroups({\r\n      ...params,\r\n      id: user.id!,\r\n    });\r\n\r\n    setDirectMembershipList([...joinedUserGroups]);\r\n\r\n    const indirect: GroupRepresentation[] = [];\r\n    if (!isDirectMembership)\r\n      joinedUserGroups.forEach((g) => {\r\n        const paths = (\r\n          g.path?.substring(1).match(/((~\\/)|[^/])+/g) || []\r\n        ).slice(0, -1);\r\n\r\n        indirect.push(\r\n          ...paths.map((p) => ({\r\n            name: p,\r\n            path: g.path?.substring(0, g.path.indexOf(p) + p.length),\r\n          })),\r\n        );\r\n      });\r\n\r\n    return alphabetize(uniqBy([...joinedUserGroups, ...indirect], \"path\"));\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: t(\"leaveGroup\", {\r\n      count: selectedGroups.length,\r\n      name: selectedGroups[0]?.name,\r\n    }),\r\n    messageKey: t(\"leaveGroupConfirmDialog\", {\r\n      count: selectedGroups.length,\r\n      groupname: selectedGroups[0]?.name,\r\n      username: user.username,\r\n    }),\r\n    continueButtonLabel: \"leave\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await Promise.all(\r\n          selectedGroups.map((group) =>\r\n            adminClient.users.delFromGroup({\r\n              id: user.id!,\r\n              groupId: group.id!,\r\n            }),\r\n          ),\r\n        );\r\n\r\n        setSelectedGroups([]);\r\n        addAlert(t(\"removedGroupMembership\"), AlertVariant.success);\r\n      } catch (error) {\r\n        addError(\"removedGroupMembershipError\", error);\r\n      }\r\n      refresh();\r\n    },\r\n  });\r\n\r\n  const leave = (group: GroupRepresentation[]) => {\r\n    setSelectedGroups(group);\r\n    toggleDeleteDialog();\r\n  };\r\n\r\n  const addGroups = async (groups: GroupRepresentation[]): Promise<void> => {\r\n    try {\r\n      await Promise.all(\r\n        groups.map((group) =>\r\n          adminClient.users.addToGroup({\r\n            id: user.id!,\r\n            groupId: group.id!,\r\n          }),\r\n        ),\r\n      );\r\n\r\n      addAlert(t(\"addedGroupMembership\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"addedGroupMembershipError\", error);\r\n    }\r\n    refresh();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DeleteConfirm />\r\n      {open && (\r\n        <GroupPickerDialog\r\n          id={user.id}\r\n          type=\"selectMany\"\r\n          text={{\r\n            title: t(\"joinGroupsFor\", { username: user.username }),\r\n            ok: \"join\",\r\n          }}\r\n          canBrowse={isManager}\r\n          onClose={() => setOpen(false)}\r\n          onConfirm={async (groups = []) => {\r\n            await addGroups(groups);\r\n            setOpen(false);\r\n          }}\r\n        />\r\n      )}\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        className=\"keycloak_user-section_groups-table\"\r\n        isPaginated\r\n        ariaLabelKey=\"roleList\"\r\n        searchPlaceholderKey=\"searchGroup\"\r\n        canSelectAll\r\n        onSelect={(groups) =>\r\n          isDirectMembership\r\n            ? setSelectedGroups(groups)\r\n            : setSelectedGroups(\r\n                intersectionBy(groups, directMembershipList, \"id\"),\r\n              )\r\n        }\r\n        isRowDisabled={(group) =>\r\n          !isDirectMembership &&\r\n          directMembershipList.every((item) => item.id !== group.id)\r\n        }\r\n        toolbarItem={\r\n          <>\r\n            <Button\r\n              className=\"kc-join-group-button\"\r\n              onClick={toggleModal}\r\n              data-testid=\"add-group-button\"\r\n              isDisabled={!user.access?.manageGroupMembership}\r\n            >\r\n              {t(\"joinGroup\")}\r\n            </Button>\r\n            <Checkbox\r\n              label={t(\"directMembership\")}\r\n              key=\"direct-membership-check\"\r\n              id=\"kc-direct-membership-checkbox\"\r\n              onChange={() => {\r\n                setDirectMembership(!isDirectMembership);\r\n                refresh();\r\n              }}\r\n              isChecked={isDirectMembership}\r\n              className=\"pf-v5-u-mt-sm\"\r\n            />\r\n            <Button\r\n              onClick={() => leave(selectedGroups)}\r\n              data-testid=\"leave-group-button\"\r\n              variant=\"link\"\r\n              isDisabled={selectedGroups.length === 0}\r\n              className=\"pf-v5-u-ml-md\"\r\n            >\r\n              {t(\"leave\")}\r\n            </Button>\r\n\r\n            {enabled && (\r\n              <Popover\r\n                aria-label=\"Basic popover\"\r\n                position=\"bottom\"\r\n                bodyContent={<div>{t(\"whoWillAppearPopoverTextUsers\")}</div>}\r\n              >\r\n                <Button\r\n                  variant=\"link\"\r\n                  className=\"kc-who-will-appear-button\"\r\n                  key=\"who-will-appear-button\"\r\n                  icon={<QuestionCircleIcon />}\r\n                >\r\n                  {t(\"whoWillAppearLinkTextUsers\")}\r\n                </Button>\r\n              </Popover>\r\n            )}\r\n          </>\r\n        }\r\n        columns={[\r\n          {\r\n            name: \"groupMembership\",\r\n            displayKey: \"groupMembership\",\r\n            cellRenderer: (group: GroupRepresentation) => group.name || \"-\",\r\n            transforms: [cellWidth(40)],\r\n          },\r\n          {\r\n            name: \"path\",\r\n            displayKey: \"path\",\r\n            cellRenderer: (group: GroupRepresentation) => (\r\n              <GroupPath group={group} />\r\n            ),\r\n            transforms: [cellWidth(45)],\r\n          },\r\n\r\n          {\r\n            name: \"\",\r\n            cellRenderer: (group: GroupRepresentation) => {\r\n              const canLeaveGroup =\r\n                directMembershipList.some((item) => item.id === group.id) ||\r\n                directMembershipList.length === 0 ||\r\n                isDirectMembership;\r\n              return canLeaveGroup ? (\r\n                <Button\r\n                  data-testid={`leave-${group.name}`}\r\n                  onClick={() => leave([group])}\r\n                  variant=\"link\"\r\n                  isDisabled={!user.access?.manageGroupMembership}\r\n                >\r\n                  {t(\"leave\")}\r\n                </Button>\r\n              ) : (\r\n                \"-\"\r\n              );\r\n            },\r\n            transforms: [cellWidth(20)],\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            hasIcon\r\n            message={t(\"noGroups\")}\r\n            instructions={t(\"noGroupsText\")}\r\n            primaryActionText={t(\"joinGroup\")}\r\n            onPrimaryAction={toggleModal}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import type FederatedIdentityRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/federatedIdentityRepresentation\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  ModalVariant,\r\n  TextInput,\r\n} from \"@patternfly/react-core\";\r\nimport { capitalize } from \"lodash-es\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype UserIdpModalProps = {\r\n  userId: string;\r\n  federatedId: string;\r\n  onClose: () => void;\r\n  onRefresh: () => void;\r\n};\r\n\r\nexport const UserIdpModal = ({\r\n  userId,\r\n  federatedId,\r\n  onClose,\r\n  onRefresh,\r\n}: UserIdpModalProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const form = useForm<FederatedIdentityRepresentation>({\r\n    mode: \"onChange\",\r\n  });\r\n  const {\r\n    handleSubmit,\r\n    formState: { isValid },\r\n  } = form;\r\n\r\n  const onSubmit = async (\r\n    federatedIdentity: FederatedIdentityRepresentation,\r\n  ) => {\r\n    try {\r\n      await adminClient.users.addToFederatedIdentity({\r\n        id: userId,\r\n        federatedIdentityId: federatedId,\r\n        federatedIdentity,\r\n      });\r\n      addAlert(t(\"idpLinkSuccess\"), AlertVariant.success);\r\n      onClose();\r\n      onRefresh();\r\n    } catch (error) {\r\n      addError(\"couldNotLinkIdP\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={t(\"linkAccountTitle\", {\r\n        provider: capitalize(federatedId),\r\n      })}\r\n      onClose={onClose}\r\n      actions={[\r\n        <Button\r\n          key=\"confirm\"\r\n          data-testid=\"confirm\"\r\n          variant=\"primary\"\r\n          type=\"submit\"\r\n          form=\"group-form\"\r\n          isDisabled={!isValid}\r\n        >\r\n          {t(\"link\")}\r\n        </Button>,\r\n        <Button\r\n          key=\"cancel\"\r\n          data-testid=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n      isOpen\r\n    >\r\n      <Form id=\"group-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <FormProvider {...form}>\r\n          <FormGroup label={t(\"identityProvider\")} fieldId=\"identityProvider\">\r\n            <TextInput\r\n              id=\"identityProvider\"\r\n              data-testid=\"idpNameInput\"\r\n              value={capitalize(federatedId)}\r\n              readOnly\r\n            />\r\n          </FormGroup>\r\n          <TextControl\r\n            name=\"userId\"\r\n            label={t(\"userID\")}\r\n            helperText={t(\"userIdHelperText\")}\r\n            autoFocus\r\n            rules={{\r\n              required: t(\"required\"),\r\n            }}\r\n          />\r\n          <TextControl\r\n            name=\"userName\"\r\n            label={t(\"username\")}\r\n            helperText={t(\"usernameHelperText\")}\r\n            rules={{\r\n              required: t(\"required\"),\r\n            }}\r\n          />\r\n        </FormProvider>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n","import type FederatedIdentityRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/federatedIdentityRepresentation\";\r\nimport type IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\r\nimport type { IdentityProvidersQuery } from \"@keycloak/keycloak-admin-client/lib/resources/identityProviders\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Label,\r\n  PageSection,\r\n  Text,\r\n  TextContent,\r\n  Spinner,\r\n} from \"@patternfly/react-core\";\r\nimport { cellWidth } from \"@patternfly/react-table\";\r\nimport { capitalize } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FormPanel } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { useServerInfo } from \"../context/server-info/ServerInfoProvider\";\r\nimport { toIdentityProvider } from \"../identity-providers/routes/IdentityProvider\";\r\nimport { emptyFormatter, upperCaseFormatter } from \"../util\";\r\nimport { UserIdpModal } from \"./UserIdPModal\";\r\nimport { useAccess } from \"../context/access/Access\";\r\n\r\ntype UserIdentityProviderLinksProps = {\r\n  userId: string;\r\n};\r\n\r\nexport const UserIdentityProviderLinks = ({\r\n  userId,\r\n}: UserIdentityProviderLinksProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const [key, setKey] = useState(0);\r\n  const [linkedNames, setLinkedNames] = useState<string[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [federatedId, setFederatedId] = useState(\"\");\r\n  const [isLinkIdPModalOpen, setIsLinkIdPModalOpen] = useState(false);\r\n  const { realm } = useRealm();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { t } = useTranslation();\r\n  const { hasAccess, hasSomeAccess } = useAccess();\r\n\r\n  const canQueryIDPDetails = hasSomeAccess(\r\n    \"manage-identity-providers\",\r\n    \"view-identity-providers\",\r\n  );\r\n\r\n  useFetch(\r\n    () => adminClient.users.listFederatedIdentities({ id: userId }),\r\n    (linkedIdentities) => {\r\n      setLinkedNames(\r\n        linkedIdentities.map((identity) => identity.identityProvider!),\r\n      );\r\n      setIsLoading(false);\r\n    },\r\n    [userId, key],\r\n  );\r\n\r\n  const refresh = () => {\r\n    setKey(new Date().getTime());\r\n    setIsLoading(true);\r\n  };\r\n\r\n  type WithProviderId = FederatedIdentityRepresentation & {\r\n    providerId: string;\r\n  };\r\n\r\n  const identityProviders = useServerInfo().identityProviders;\r\n\r\n  const getFederatedIdentities = async () => {\r\n    const allFedIds = (await adminClient.users.listFederatedIdentities({\r\n      id: userId,\r\n    })) as WithProviderId[];\r\n\r\n    if (canQueryIDPDetails) {\r\n      const allProviders = await adminClient.identityProviders.find();\r\n      for (const element of allFedIds) {\r\n        element.providerId = allProviders.find(\r\n          (item) => item.alias === element.identityProvider,\r\n        )?.providerId!;\r\n      }\r\n    }\r\n\r\n    return allFedIds;\r\n  };\r\n\r\n  const linkedIdPsLoader = async () => {\r\n    return getFederatedIdentities();\r\n  };\r\n\r\n  const availableIdPsLoader = async (\r\n    first?: number,\r\n    max?: number,\r\n    search?: string,\r\n  ) => {\r\n    const params: IdentityProvidersQuery = {\r\n      first: first!,\r\n      max: max!,\r\n      realmOnly: false,\r\n      capability: \"USER_LINKING\",\r\n    };\r\n    if (search) {\r\n      params.search = search;\r\n    }\r\n    return await adminClient.identityProviders.find(params);\r\n  };\r\n\r\n  const [toggleUnlinkDialog, UnlinkConfirm] = useConfirmDialog({\r\n    titleKey: t(\"unlinkAccountTitle\", {\r\n      provider: capitalize(federatedId),\r\n    }),\r\n    messageKey: t(\"unlinkAccountConfirm\", {\r\n      provider: capitalize(federatedId),\r\n    }),\r\n    continueButtonLabel: \"unlink\",\r\n    continueButtonVariant: ButtonVariant.primary,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.users.delFromFederatedIdentity({\r\n          id: userId,\r\n          federatedIdentityId: federatedId,\r\n        });\r\n        addAlert(t(\"idpUnlinkSuccess\"), AlertVariant.success);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"mappingDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  const idpLinkRenderer = (idp: WithProviderId) => {\r\n    if (!canQueryIDPDetails)\r\n      return <span>{capitalize(idp.identityProvider)}</span>;\r\n\r\n    return (\r\n      <Link\r\n        to={toIdentityProvider({\r\n          realm,\r\n          providerId: idp.providerId,\r\n          alias: idp.identityProvider!,\r\n          tab: \"settings\",\r\n        })}\r\n      >\r\n        {capitalize(idp.identityProvider)}\r\n      </Link>\r\n    );\r\n  };\r\n\r\n  const badgeRenderer1 = (idp: FederatedIdentityRepresentation) => {\r\n    const groupName = identityProviders?.find(\r\n      (provider) => provider[\"id\"] === idp.identityProvider,\r\n    )?.groupName!;\r\n    return (\r\n      <Label color={groupName === \"Social\" ? \"blue\" : \"orange\"}>\r\n        {groupName === \"Social\" ? t(\"idpType.social\") : t(\"idpType.custom\")}\r\n      </Label>\r\n    );\r\n  };\r\n\r\n  const badgeRenderer2 = (idp: IdentityProviderRepresentation) => {\r\n    const groupName = identityProviders?.find(\r\n      (provider) => provider[\"id\"] === idp.providerId,\r\n    )?.groupName!;\r\n    return (\r\n      <Label color={groupName === \"User-defined\" ? \"orange\" : \"blue\"}>\r\n        {groupName === \"User-defined\"\r\n          ? \"Custom\"\r\n          : groupName! === \"Social\"\r\n            ? t(\"idpType.social\")\r\n            : groupName!}\r\n      </Label>\r\n    );\r\n  };\r\n\r\n  const unlinkRenderer = (fedIdentity: FederatedIdentityRepresentation) => {\r\n    if (!hasAccess(\"manage-users\")) return <span />;\r\n\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          setFederatedId(fedIdentity.identityProvider!);\r\n          toggleUnlinkDialog();\r\n        }}\r\n      >\r\n        {t(\"unlinkAccount\")}\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  const linkRenderer = (idp: IdentityProviderRepresentation) => {\r\n    if (linkedNames.includes(idp.alias!)) return <span />;\r\n\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          setFederatedId(idp.alias!);\r\n          setIsLinkIdPModalOpen(true);\r\n        }}\r\n      >\r\n        {t(\"linkAccount\")}\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  const linkedIdpColumns = () => {\r\n    const columns = [\r\n      {\r\n        name: \"identityProvider\",\r\n        displayKey: \"name\",\r\n        cellRenderer: idpLinkRenderer,\r\n        transforms: [cellWidth(20)],\r\n      },\r\n      {\r\n        name: \"userId\",\r\n        displayKey: \"userID\",\r\n        cellFormatters: [emptyFormatter()],\r\n        transforms: [cellWidth(30)],\r\n      },\r\n      {\r\n        name: \"userName\",\r\n        displayKey: \"username\",\r\n        cellFormatters: [emptyFormatter()],\r\n        transforms: [cellWidth(20)],\r\n      },\r\n      {\r\n        name: \"\",\r\n        cellRenderer: unlinkRenderer,\r\n        transforms: [cellWidth(20)],\r\n      },\r\n    ];\r\n\r\n    if (canQueryIDPDetails)\r\n      columns.splice(1, 0, {\r\n        name: \"type\",\r\n        displayKey: \"type\",\r\n        cellRenderer: badgeRenderer1,\r\n        transforms: [cellWidth(10)],\r\n      });\r\n\r\n    return columns;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isLinkIdPModalOpen && (\r\n        <UserIdpModal\r\n          userId={userId}\r\n          federatedId={federatedId}\r\n          onClose={() => setIsLinkIdPModalOpen(false)}\r\n          onRefresh={refresh}\r\n        />\r\n      )}\r\n      <UnlinkConfirm />\r\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n        <FormPanel title={t(\"linkedIdPs\")} className=\"kc-linked-idps\">\r\n          <TextContent>\r\n            <Text className=\"kc-available-idps-text\">\r\n              {t(\"linkedIdPsText\")}\r\n            </Text>\r\n          </TextContent>\r\n          <KeycloakDataTable\r\n            loader={linkedIdPsLoader}\r\n            key={key}\r\n            isPaginated={false}\r\n            ariaLabelKey=\"LinkedIdPs\"\r\n            className=\"kc-linked-IdPs-table\"\r\n            columns={linkedIdpColumns()}\r\n            emptyState={\r\n              <TextContent className=\"kc-no-providers-text\">\r\n                <Text>{t(\"noProvidersLinked\")}</Text>\r\n              </TextContent>\r\n            }\r\n          />\r\n        </FormPanel>\r\n        {hasAccess(\"manage-users\") && canQueryIDPDetails && (\r\n          <FormPanel className=\"kc-available-idps\" title={t(\"availableIdPs\")}>\r\n            <TextContent>\r\n              <Text className=\"kc-available-idps-text\">\r\n                {t(\"availableIdPsText\")}\r\n              </Text>\r\n            </TextContent>\r\n            {isLoading ? (\r\n              <Spinner />\r\n            ) : (\r\n              <KeycloakDataTable\r\n                loader={availableIdPsLoader}\r\n                key={key}\r\n                isPaginated\r\n                searchPlaceholderKey=\"searchForProvider\"\r\n                ariaLabelKey=\"LinkedIdPs\"\r\n                className=\"kc-linked-IdPs-table\"\r\n                columns={[\r\n                  {\r\n                    name: \"alias\",\r\n                    displayKey: \"name\",\r\n                    cellFormatters: [emptyFormatter(), upperCaseFormatter()],\r\n                    transforms: [cellWidth(20)],\r\n                  },\r\n                  {\r\n                    name: \"type\",\r\n                    displayKey: \"type\",\r\n                    cellRenderer: badgeRenderer2,\r\n                    transforms: [cellWidth(60)],\r\n                  },\r\n                  {\r\n                    name: \"\",\r\n                    cellRenderer: linkRenderer,\r\n                  },\r\n                ]}\r\n                emptyState={\r\n                  <TextContent className=\"kc-no-providers-text\">\r\n                    <Text>{t(\"noAvailableIdentityProviders\")}</Text>\r\n                  </TextContent>\r\n                }\r\n              />\r\n            )}\r\n          </FormPanel>\r\n        )}\r\n      </PageSection>\r\n    </>\r\n  );\r\n};\r\n","import type { RoleMappingPayload } from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\r\nimport { AlertVariant } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { RoleMapping, Row } from \"../components/role-mapping/RoleMapping\";\r\n\r\ntype UserRoleMappingProps = {\r\n  id: string;\r\n  name: string;\r\n};\r\n\r\nexport const UserRoleMapping = ({ id, name }: UserRoleMappingProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const assignRoles = async (rows: Row[]) => {\r\n    try {\r\n      const realmRoles = rows\r\n        .filter((row) => row.client === undefined)\r\n        .map((row) => row.role as RoleMappingPayload)\r\n        .flat();\r\n      await adminClient.users.addRealmRoleMappings({\r\n        id,\r\n        roles: realmRoles,\r\n      });\r\n      await Promise.all(\r\n        rows\r\n          .filter((row) => row.client !== undefined)\r\n          .map((row) =>\r\n            adminClient.users.addClientRoleMappings({\r\n              id,\r\n              clientUniqueId: row.client!.id!,\r\n              roles: [row.role as RoleMappingPayload],\r\n            }),\r\n          ),\r\n      );\r\n      addAlert(t(\"userRoleMappingUpdatedSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"roleMappingUpdatedError\", error);\r\n    }\r\n  };\r\n\r\n  return <RoleMapping name={name} id={id} type=\"users\" save={assignRoles} />;\r\n};\r\n","import { PageSection } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport SessionsTable from \"../sessions/SessionsTable\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport type { UserParams } from \"./routes/User\";\r\n\r\nexport const UserSessions = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { id } = useParams<UserParams>();\r\n  const { realm } = useRealm();\r\n  const { t } = useTranslation();\r\n\r\n  const loader = () => adminClient.users.listSessions({ id, realm });\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <SessionsTable\r\n        loader={loader}\r\n        hiddenColumns={[\"username\", \"type\"]}\r\n        emptyInstructions={t(\"noSessionsForUser\")}\r\n        logoutUser={id}\r\n      />\r\n    </PageSection>\r\n  );\r\n};\r\n","import type {\r\n  UserProfileConfig,\r\n  UserProfileMetadata,\r\n} from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\r\nimport {\r\n  isUserProfileError,\r\n  setUserProfileServerError,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  ButtonVariant,\r\n  DropdownItem,\r\n  Label,\r\n  PageSection,\r\n  Tab,\r\n  Tabs,\r\n  TabTitleText,\r\n  Tooltip,\r\n} from \"@patternfly/react-core\";\r\nimport { InfoCircleIcon } from \"@patternfly/react-icons\";\r\nimport { TFunction } from \"i18next\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeyValueType } from \"../components/key-value-form/key-value-convert\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  RoutableTabs,\r\n  useRoutableTab,\r\n} from \"../components/routable-tabs/RoutableTabs\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { UserProfileProvider } from \"../realm-settings/user-profile/UserProfileContext\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport { Organizations } from \"./Organizations\";\r\nimport { UserAttributes } from \"./UserAttributes\";\r\nimport { UserConsents } from \"./UserConsents\";\r\nimport { UserCredentials } from \"./UserCredentials\";\r\nimport { BruteForced, UserForm } from \"./UserForm\";\r\nimport { UserGroups } from \"./UserGroups\";\r\nimport { UserIdentityProviderLinks } from \"./UserIdentityProviderLinks\";\r\nimport { UserRoleMapping } from \"./UserRoleMapping\";\r\nimport { UserSessions } from \"./UserSessions\";\r\nimport { UserEvents } from \"../events/UserEvents\";\r\nimport {\r\n  UIUserRepresentation,\r\n  UserFormFields,\r\n  filterManagedAttributes,\r\n  toUserFormFields,\r\n  toUserRepresentation,\r\n} from \"./form-state\";\r\nimport { UserParams, UserTab, toUser } from \"./routes/User\";\r\nimport { toUsers } from \"./routes/Users\";\r\nimport { isLightweightUser } from \"./utils\";\r\n\r\nimport \"./user-section.css\";\r\nimport { AdminEvents } from \"../events/AdminEvents\";\r\n\r\nexport default function EditUser() {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const navigate = useNavigate();\r\n  const { hasAccess } = useAccess();\r\n  const { id } = useParams<UserParams>();\r\n  const { realm: realmName, realmRepresentation: realm } = useRealm();\r\n  // Validation of form fields is performed on server, thus we need to clear all errors before submit\r\n  const clearAllErrorsBeforeSubmit = async (values: UserFormFields) => ({\r\n    values,\r\n    errors: {},\r\n  });\r\n  const form = useForm<UserFormFields>({\r\n    mode: \"onChange\",\r\n    resolver: clearAllErrorsBeforeSubmit,\r\n  });\r\n  const [user, setUser] = useState<UIUserRepresentation>();\r\n  const [bruteForced, setBruteForced] = useState<BruteForced>();\r\n  const [isUnmanagedAttributesEnabled, setUnmanagedAttributesEnabled] =\r\n    useState<boolean>();\r\n  const [userProfileMetadata, setUserProfileMetadata] =\r\n    useState<UserProfileMetadata>();\r\n  const [refreshCount, setRefreshCount] = useState(0);\r\n  const refresh = () => setRefreshCount((count) => count + 1);\r\n  const lightweightUser = isLightweightUser(user?.id);\r\n  const [upConfig, setUpConfig] = useState<UserProfileConfig>();\r\n\r\n  const [realmHasOrganizations, setRealmHasOrganizations] = useState(false);\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n  const showOrganizations =\r\n    isFeatureEnabled(Feature.Organizations) && realm?.organizationsEnabled;\r\n\r\n  const toTab = (tab: UserTab) =>\r\n    toUser({\r\n      realm: realmName,\r\n      id: user?.id || \"\",\r\n      tab,\r\n    });\r\n\r\n  const [activeEventsTab, setActiveEventsTab] = useState(\"userEvents\");\r\n\r\n  const settingsTab = useRoutableTab(toTab(\"settings\"));\r\n  const attributesTab = useRoutableTab(toTab(\"attributes\"));\r\n  const credentialsTab = useRoutableTab(toTab(\"credentials\"));\r\n  const roleMappingTab = useRoutableTab(toTab(\"role-mapping\"));\r\n  const groupsTab = useRoutableTab(toTab(\"groups\"));\r\n  const organizationsTab = useRoutableTab(toTab(\"organizations\"));\r\n  const consentsTab = useRoutableTab(toTab(\"consents\"));\r\n  const identityProviderLinksTab = useRoutableTab(\r\n    toTab(\"identity-provider-links\"),\r\n  );\r\n  const sessionsTab = useRoutableTab(toTab(\"sessions\"));\r\n  const eventsTab = useRoutableTab(toTab(\"events\"));\r\n\r\n  useFetch(\r\n    async () =>\r\n      Promise.all([\r\n        adminClient.users.findOne({\r\n          id: id!,\r\n          userProfileMetadata: true,\r\n        }) as UIUserRepresentation | undefined,\r\n        adminClient.attackDetection.findOne({ id: id! }),\r\n        adminClient.users.getUnmanagedAttributes({ id: id! }),\r\n        adminClient.users.getProfile({ realm: realmName }),\r\n        showOrganizations\r\n          ? adminClient.organizations.find({ first: 0, max: 1 })\r\n          : [],\r\n      ]),\r\n    ([\r\n      userData,\r\n      attackDetection,\r\n      unmanagedAttributes,\r\n      upConfig,\r\n      organizations,\r\n    ]) => {\r\n      if (!userData || !realm || !attackDetection) {\r\n        throw new Error(t(\"notFound\"));\r\n      }\r\n\r\n      const { userProfileMetadata, ...user } = userData;\r\n      setUserProfileMetadata(userProfileMetadata);\r\n      user.unmanagedAttributes = unmanagedAttributes;\r\n      user.attributes = filterManagedAttributes(\r\n        user.attributes,\r\n        unmanagedAttributes,\r\n      );\r\n\r\n      if (upConfig.unmanagedAttributePolicy !== undefined) {\r\n        setUnmanagedAttributesEnabled(true);\r\n      }\r\n\r\n      setUser(user);\r\n      setUpConfig(upConfig);\r\n\r\n      const isBruteForceProtected = realm.bruteForceProtected;\r\n      const isLocked = isBruteForceProtected && attackDetection.disabled;\r\n\r\n      setBruteForced({ isBruteForceProtected, isLocked });\r\n      setRealmHasOrganizations(organizations.length === 1);\r\n\r\n      form.reset(toUserFormFields(user));\r\n    },\r\n    [refreshCount],\r\n  );\r\n\r\n  const save = async (data: UserFormFields) => {\r\n    try {\r\n      await adminClient.users.update(\r\n        { id: user!.id! },\r\n        toUserRepresentation(data),\r\n      );\r\n      addAlert(t(\"userSaved\"), AlertVariant.success);\r\n      refresh();\r\n    } catch (error) {\r\n      if (isUserProfileError(error)) {\r\n        if (\r\n          isUnmanagedAttributesEnabled &&\r\n          Array.isArray(data.unmanagedAttributes)\r\n        ) {\r\n          const unmanagedAttributeErrors: object[] = new Array(\r\n            data.unmanagedAttributes.length,\r\n          );\r\n          let someUnmanagedAttributeError = false;\r\n          setUserProfileServerError<UserFormFields>(\r\n            error,\r\n            (field, params) => {\r\n              if (field.startsWith(\"attributes.\")) {\r\n                const attributeName = field.substring(\"attributes.\".length);\r\n                (data.unmanagedAttributes as KeyValueType[]).forEach(\r\n                  (attr, index) => {\r\n                    if (attr.key === attributeName) {\r\n                      unmanagedAttributeErrors[index] = params;\r\n                      someUnmanagedAttributeError = true;\r\n                    }\r\n                  },\r\n                );\r\n              } else {\r\n                form.setError(field, params);\r\n              }\r\n            },\r\n            ((key, param) => t(key as string, param as any)) as TFunction,\r\n          );\r\n          if (someUnmanagedAttributeError) {\r\n            form.setError(\r\n              \"unmanagedAttributes\",\r\n              unmanagedAttributeErrors as any,\r\n            );\r\n          }\r\n        } else {\r\n          setUserProfileServerError<UserFormFields>(error, form.setError, ((\r\n            key,\r\n            param,\r\n          ) => t(key as string, param as any)) as TFunction);\r\n        }\r\n        addError(\"userNotSaved\", \"\");\r\n      } else {\r\n        addError(\"userCreateError\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const [toggleDisableDialog, DisableConfirm] = useConfirmDialog({\r\n    titleKey: \"disableConfirmUserTitle\",\r\n    messageKey: \"disableConfirmUser\",\r\n    continueButtonLabel: \"disable\",\r\n    onConfirm: async () => {\r\n      await save({\r\n        ...toUserFormFields(user!),\r\n        enabled: false,\r\n      });\r\n    },\r\n  });\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"deleteConfirmUsers\",\r\n    messageKey: \"deleteConfirmCurrentUser\",\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        if (lightweightUser) {\r\n          await adminClient.users.logout({ id: user!.id! });\r\n        } else {\r\n          await adminClient.users.del({ id: user!.id! });\r\n        }\r\n        addAlert(t(\"userDeletedSuccess\"), AlertVariant.success);\r\n        navigate(toUsers({ realm: realmName }));\r\n      } catch (error) {\r\n        addError(\"userDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  const [toggleImpersonateDialog, ImpersonateConfirm] = useConfirmDialog({\r\n    titleKey: \"impersonateConfirm\",\r\n    messageKey: \"impersonateConfirmDialog\",\r\n    continueButtonLabel: \"impersonate\",\r\n    onConfirm: async () => {\r\n      try {\r\n        const data = await adminClient.users.impersonation(\r\n          { id: user!.id! },\r\n          { user: user!.id!, realm: realmName },\r\n        );\r\n        if (data.sameRealm) {\r\n          window.location = data.redirect;\r\n        } else {\r\n          window.open(data.redirect, \"_blank\");\r\n        }\r\n      } catch (error) {\r\n        addError(\"impersonateError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (!user || !bruteForced) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ImpersonateConfirm />\r\n      <DeleteConfirm />\r\n      <DisableConfirm />\r\n      <ViewHeader\r\n        titleKey={user.username!}\r\n        className=\"kc-username-view-header\"\r\n        divider={false}\r\n        badges={\r\n          lightweightUser\r\n            ? [\r\n                {\r\n                  text: (\r\n                    <Tooltip content={t(\"transientUserTooltip\")}>\r\n                      <Label\r\n                        data-testid=\"user-details-label-transient-user\"\r\n                        icon={<InfoCircleIcon />}\r\n                      >\r\n                        {t(\"transientUser\")}\r\n                      </Label>\r\n                    </Tooltip>\r\n                  ),\r\n                },\r\n              ]\r\n            : []\r\n        }\r\n        dropdownItems={[\r\n          <DropdownItem\r\n            key=\"impersonate\"\r\n            isDisabled={!user.access?.impersonate}\r\n            onClick={() => toggleImpersonateDialog()}\r\n          >\r\n            {t(\"impersonate\")}\r\n          </DropdownItem>,\r\n          <DropdownItem\r\n            key=\"delete\"\r\n            isDisabled={!user.access?.manage}\r\n            onClick={() => toggleDeleteDialog()}\r\n          >\r\n            {t(\"delete\")}\r\n          </DropdownItem>,\r\n        ]}\r\n        onToggle={async (value) => {\r\n          if (!value) {\r\n            toggleDisableDialog();\r\n          } else {\r\n            await save({\r\n              ...toUserFormFields(user),\r\n              enabled: value,\r\n            });\r\n          }\r\n        }}\r\n        isEnabled={user.enabled}\r\n      />\r\n\r\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n        <UserProfileProvider>\r\n          <FormProvider {...form}>\r\n            <RoutableTabs\r\n              isBox\r\n              mountOnEnter\r\n              defaultLocation={toTab(\"settings\")}\r\n            >\r\n              <Tab\r\n                data-testid=\"user-details-tab\"\r\n                title={<TabTitleText>{t(\"details\")}</TabTitleText>}\r\n                {...settingsTab}\r\n              >\r\n                <PageSection variant=\"light\">\r\n                  <UserForm\r\n                    form={form}\r\n                    realm={realm!}\r\n                    user={user}\r\n                    bruteForce={bruteForced}\r\n                    userProfileMetadata={userProfileMetadata}\r\n                    refresh={refresh}\r\n                    save={save}\r\n                  />\r\n                </PageSection>\r\n              </Tab>\r\n              {isUnmanagedAttributesEnabled && (\r\n                <Tab\r\n                  data-testid=\"attributesTab\"\r\n                  title={<TabTitleText>{t(\"attributes\")}</TabTitleText>}\r\n                  {...attributesTab}\r\n                >\r\n                  <UserAttributes user={user} save={save} upConfig={upConfig} />\r\n                </Tab>\r\n              )}\r\n              <Tab\r\n                data-testid=\"credentials\"\r\n                isHidden={!user.access?.view}\r\n                title={<TabTitleText>{t(\"credentials\")}</TabTitleText>}\r\n                {...credentialsTab}\r\n              >\r\n                <UserCredentials user={user} setUser={setUser} />\r\n              </Tab>\r\n              <Tab\r\n                data-testid=\"role-mapping-tab\"\r\n                isHidden={!user.access?.view}\r\n                title={<TabTitleText>{t(\"roleMapping\")}</TabTitleText>}\r\n                {...roleMappingTab}\r\n              >\r\n                <UserRoleMapping id={user.id!} name={user.username!} />\r\n              </Tab>\r\n              {hasAccess(\"query-groups\") && (\r\n                <Tab\r\n                  data-testid=\"user-groups-tab\"\r\n                  title={<TabTitleText>{t(\"groups\")}</TabTitleText>}\r\n                  {...groupsTab}\r\n                >\r\n                  <UserGroups user={user} />\r\n                </Tab>\r\n              )}\r\n              {showOrganizations && realmHasOrganizations && (\r\n                <Tab\r\n                  data-testid=\"user-organizations-tab\"\r\n                  title={<TabTitleText>{t(\"organizations\")}</TabTitleText>}\r\n                  {...organizationsTab}\r\n                >\r\n                  <Organizations user={user} />\r\n                </Tab>\r\n              )}\r\n              <Tab\r\n                data-testid=\"user-consents-tab\"\r\n                title={<TabTitleText>{t(\"consents\")}</TabTitleText>}\r\n                {...consentsTab}\r\n              >\r\n                <UserConsents />\r\n              </Tab>\r\n              <Tab\r\n                data-testid=\"identity-provider-links-tab\"\r\n                title={\r\n                  <TabTitleText>{t(\"identityProviderLinks\")}</TabTitleText>\r\n                }\r\n                {...identityProviderLinksTab}\r\n              >\r\n                <UserIdentityProviderLinks userId={user.id!} />\r\n              </Tab>\r\n              <Tab\r\n                data-testid=\"user-sessions-tab\"\r\n                title={<TabTitleText>{t(\"sessions\")}</TabTitleText>}\r\n                {...sessionsTab}\r\n              >\r\n                <UserSessions />\r\n              </Tab>\r\n              {hasAccess(\"view-events\") && (\r\n                <Tab\r\n                  data-testid=\"events-tab\"\r\n                  title={<TabTitleText>{t(\"events\")}</TabTitleText>}\r\n                  {...eventsTab}\r\n                >\r\n                  <Tabs\r\n                    activeKey={activeEventsTab}\r\n                    onSelect={(_, key) => setActiveEventsTab(key as string)}\r\n                  >\r\n                    <Tab\r\n                      eventKey=\"userEvents\"\r\n                      title={<TabTitleText>{t(\"userEvents\")}</TabTitleText>}\r\n                    >\r\n                      <UserEvents user={user.id} />\r\n                    </Tab>\r\n                    <Tab\r\n                      eventKey=\"adminEvents\"\r\n                      title={<TabTitleText>{t(\"adminEvents\")}</TabTitleText>}\r\n                    >\r\n                      <AdminEvents resourcePath={`users/${user.id}`} />\r\n                    </Tab>\r\n                  </Tabs>\r\n                </Tab>\r\n              )}\r\n            </RoutableTabs>\r\n          </FormProvider>\r\n        </UserProfileProvider>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["mapTag","setTag","objectProto","hasOwnProperty","isEmpty","value","isArrayLike","isArray","isBuffer","isTypedArray","isArguments","tag","getTag","isPrototype","baseKeys","key","OrganizationModal","isJoin","existingOrgs","onAdd","onClose","adminClient","useAdminClient","t","useTranslation","selectedRows","setSelectedRows","useState","loader","first","max","search","params","orgs","differenceBy","jsx","Modal","ModalVariant","Button","KeycloakDataTable","rows","row","TableText","Organizations","user","id","useParams","navigate","useNavigate","addAlert","addError","useAlerts","realm","useRealm","setKey","refresh","joinToggle","toggle","setJoinToggle","useToggle","shouldJoin","setShouldJoin","openOrganizationPicker","setOpenOrganizationPicker","userOrgs","setUserOrgs","selectedOrgs","setSelectedOrgs","searchText","setSearchText","searchTriggerText","setSearchTriggerText","filteredMembershipTypes","setFilteredMembershipTypes","isOpen","setIsOpen","membershipOptions","onToggleClick","onSelect","_event","item","useFetch","userOrganizations","filteredOrgs","org","orgId","membershipType","membership","capitalizeFirstLetterFormatter","type","handleChange","handleSearch","clearInput","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","toUsers","error","jsxs","Fragment","form","OrganizationTable","organization","children","Link","toEditOrganization","ToolbarItem","SearchInputComponent","Dropdown","ref","MenuToggle","DropdownList","DropdownItem","CheckboxFilterComponent","nextOpen","ListEmptyState","UserAttributes","save","upConfig","useFormContext","PageSection","PageSectionVariants","AttributesForm","toUserFormFields","UnmanagedAttributePolicy","UserConsents","selectedClient","setSelectedClient","formatDate","useFormatDate","alphabetize","consentsList","sortBy","client","getConsents","clientScopesRenderer","grantedClientScopes","ChipGroup","currentChip","Chip","AlertVariant","emptyFormatter","cellWidth","createdDate","lastUpdatedDate","CubesIcon","CredentialDataDialog","title","credentialData","Table","TableVariant","Thead","Tr","Th","Tbody","cred","index","Td","CredentialRow","credential","resetPassword","toggleDelete","showData","toggleShow","kebabOpen","toggleKebab","localeSort","useLocaleSort","useMemo","EllipsisVIcon","InlineLabelEdit","userId","isEditable","register","handleSubmit","useForm","Form","userLabel","FormGroup","TextInput","CheckIcon","TimesIcon","PencilAltIcon","LifespanField","TimeSelectorControl","ResetCredentialDialog","control","resetActionWatcher","useWatch","resetIsNotDisabled","sendCredentialsResetEmail","actions","lifespan","ConfirmDialogModal","FormProvider","RequiredActionMultiSelect","credFormDefaultValues","ResetPasswordDialog","isResetPassword","onAddRequiredActions","isValid","errors","watch","clearErrors","setError","confirm","password","passwordConfirmation","toggleConfirmSaveModal","ConfirmSaveModal","saveUserPassword","temporaryPassword","RequiredActionAlias","credentialLabel","c","onChange","rest","PasswordInput","e","FormErrorText","DefaultSwitchControl","UserCredentialsRow","isUserLabelEdit","setIsUserLabelEdit","UserCredentials","setUser","openCredentialReset","setOpenCredentialReset","userCredentials","setUserCredentials","groupedUserCredentials","setGroupedUserCredentials","selectedCredential","setSelectedCredential","setIsResetPassword","bodyRef","useRef","state","setState","credentials","groupedCredentials","r","a","groupedCredentialsArray","groupedCredential","toggleModal","toggleCredentialsResetModal","itemOrder","onDragStart","evt","draggedItemId","styles","moveItem","items","targetItem","toIndex","fromIndex","result","move","ulNode","nodes","i","itemId","onDragCancel","el","onDragLeave","isValidDrop","ulRect","onDrop","onDragFinish","onDragOver","curListItem","dragId","draggingToItemIndex","tempItemOrder","requiredActions","onDragEnd","target","dragged","newOrder","oldIndex","newIndex","times","ids","onToggleDelete","useFederatedCredentials","credentialTypes","setCredentialTypes","KeycloakSpinner","hasCredentialTypes","noCredentials","noFederatedCredentials","emptyState","Divider","HelpItem","rowIndex","_","toUpperCase","FederatedUserLink","UserGroups","selectedGroups","setSelectedGroups","isDirectMembership","setDirectMembership","directMembershipList","setDirectMembershipList","open","setOpen","enabled","useHelp","hasAccess","useAccess","isManager","groupsList","group","searchParam","joinedUserGroups","indirect","g","paths","p","uniqBy","leave","addGroups","groups","GroupPickerDialog","intersectionBy","Checkbox","Popover","QuestionCircleIcon","GroupPath","UserIdpModal","federatedId","onRefresh","onSubmit","federatedIdentity","capitalize","TextControl","UserIdentityProviderLinks","linkedNames","setLinkedNames","isLoading","setIsLoading","setFederatedId","isLinkIdPModalOpen","setIsLinkIdPModalOpen","hasSomeAccess","canQueryIDPDetails","linkedIdentities","identity","identityProviders","useServerInfo","getFederatedIdentities","allFedIds","allProviders","element","linkedIdPsLoader","availableIdPsLoader","toggleUnlinkDialog","UnlinkConfirm","idpLinkRenderer","idp","toIdentityProvider","badgeRenderer1","groupName","provider","Label","badgeRenderer2","unlinkRenderer","fedIdentity","linkRenderer","linkedIdpColumns","columns","FormPanel","TextContent","Text","Spinner","upperCaseFormatter","UserRoleMapping","name","RoleMapping","realmRoles","UserSessions","SessionsTable","EditUser","realmName","values","bruteForced","setBruteForced","isUnmanagedAttributesEnabled","setUnmanagedAttributesEnabled","userProfileMetadata","setUserProfileMetadata","refreshCount","setRefreshCount","count","lightweightUser","isLightweightUser","setUpConfig","realmHasOrganizations","setRealmHasOrganizations","showOrganizations","useIsFeatureEnabled","Feature","toTab","tab","toUser","activeEventsTab","setActiveEventsTab","settingsTab","useRoutableTab","attributesTab","credentialsTab","roleMappingTab","groupsTab","organizationsTab","consentsTab","identityProviderLinksTab","sessionsTab","eventsTab","userData","attackDetection","unmanagedAttributes","organizations","filterManagedAttributes","isBruteForceProtected","isLocked","data","toUserRepresentation","isUserProfileError","unmanagedAttributeErrors","someUnmanagedAttributeError","setUserProfileServerError","field","attributeName","attr","param","toggleDisableDialog","DisableConfirm","toggleImpersonateDialog","ImpersonateConfirm","ViewHeader","Tooltip","InfoCircleIcon","UserProfileProvider","RoutableTabs","Tab","TabTitleText","UserForm","Tabs","UserEvents","AdminEvents"],"mappings":"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","x_google_ignoreList":[0]}