import{jsxs as h,Fragment as y,jsx as e}from"react/jsx-runtime";import{u as F,a as D,b as S,_ as b,d as C,B as w,o as g,x as K,c5 as B,aY as I,v as N,g as V,L as R,aS as k,cl as E,W as P}from"./main-o1hptXRo.js";import{useState as T}from"react";import{t as j}from"./translationFormatter-DQJeO7lr.js";import{u as _}from"./ConfirmDialog-BkU7melV.js";const $=({defaultRoleName:c,toDetail:m,...a})=>{const{t:l}=D(),{realm:n}=C(),{hasAccess:d,hasSomeAccess:s}=k(),i=d("view-realm")&&s("view-clients","manage-clients");return a.name!==c?e(R,{to:m(a.id),children:a.name}):h(y,{children:[i?e(R,{to:E({realm:n,tab:"user-registration"}),children:a.name}):e("span",{children:a.name})," ",e(P,{helpText:l("defaultRole"),fieldLabelId:"defaultRole"})]})},G=({loader:c,paginated:m=!0,parentRoleId:a,messageBundle:l="roles",toCreate:n,toDetail:d,isReadOnly:s})=>{const{adminClient:i}=F(),{t}=D(),L=S(),{addAlert:f,addError:v}=b(),{realmRepresentation:u}=C(),[r,p]=T(),[A,x]=_({titleKey:"roleDeleteConfirm",messageKey:t("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{a?await i.roles.delCompositeRoles({id:a},[r]):await i.roles.delById({id:r.id}),p(void 0),f(t("roleDeletedSuccess"),g.success)}catch(o){v("roleDeleteError",o)}}});return h(y,{children:[e(x,{}),e(K,{loader:c,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:m,toolbarItem:!s&&e(V,{"data-testid":"create-role",component:o=>e(R,{...o,to:n}),children:t("createRole")}),actions:s?void 0:[{title:t("delete"),onRowClick:o=>{p(o),u?.defaultRole&&o.name===u.defaultRole.name?f(t("defaultRoleDeleteError"),g.danger):A()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:o=>e($,{...o,defaultRoleName:u?.defaultRole?.name,toDetail:d,messageBundle:l})},{name:"composite",displayKey:"composite",cellFormatters:[B(),I()]},{name:"description",cellFormatters:[j(t)]}],emptyState:e(N,{hasIcon:!0,message:t(`noRoles-${l}`),instructions:s?"":t(`noRolesInstructions-${l}`),primaryActionText:s?"":t("createRole"),onPrimaryAction:()=>L(n)})},r?r.id:"roleList")]})};export{G as R};
//# sourceMappingURL=RolesList-CYFLyo7k.js.map
