{"version":3,"file":"PermissionsConfigurationSection-CrVuiKtY.js","sources":["../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/Label/LabelGroup.js","../../../../../../../src/permissions-configuration/permission-configuration/AuthorizationScopesDetails.tsx","../../../../../../../src/permissions-configuration/resource-types/SearchDropdown.tsx","../../../../../../../src/permissions-configuration/permission-configuration/NewPermissionConfigurationDialog.tsx","../../../../../../../src/permissions-configuration/permission-configuration/PermissionsConfigurationTab.tsx","../../../../../../../src/permissions-configuration/permission-evaluation/PermissionEvaluationResult.tsx","../../../../../../../src/permissions-configuration/permission-evaluation/PermissionsEvaluationTab.tsx","../../../../../../../src/permissions-configuration/PermissionsConfigurationSection.tsx"],"sourcesContent":["import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Label/label-group.mjs';\nimport labelStyles from '@patternfly/react-styles/css/components/Label/label.mjs';\nimport { css } from '@patternfly/react-styles';\nimport { Button } from '../Button';\nimport { Label } from './Label';\nimport { Tooltip } from '../Tooltip';\nimport TimesCircleIcon from '@patternfly/react-icons/dist/esm/icons/times-circle-icon';\nimport { fillTemplate } from '../../helpers';\nimport { GenerateId } from '../../helpers/GenerateId/GenerateId';\nclass LabelGroup extends React.Component {\n    constructor(props) {\n        super(props);\n        this.headingRef = React.createRef();\n        this.toggleCollapse = () => {\n            this.setState((prevState) => ({\n                isOpen: !prevState.isOpen,\n                isTooltipVisible: Boolean(this.headingRef.current && this.headingRef.current.offsetWidth < this.headingRef.current.scrollWidth)\n            }));\n        };\n        this.state = {\n            isOpen: this.props.defaultIsOpen,\n            isTooltipVisible: false\n        };\n    }\n    componentDidMount() {\n        this.setState({\n            isTooltipVisible: Boolean(this.headingRef.current && this.headingRef.current.offsetWidth < this.headingRef.current.scrollWidth)\n        });\n    }\n    renderLabel(id) {\n        const { categoryName, tooltipPosition } = this.props;\n        const { isTooltipVisible } = this.state;\n        return isTooltipVisible ? (React.createElement(Tooltip, { position: tooltipPosition, content: categoryName },\n            React.createElement(\"span\", { tabIndex: 0, ref: this.headingRef, className: css(styles.labelGroupLabel) },\n                React.createElement(\"span\", { \"aria-hidden\": \"true\", id: id }, categoryName)))) : (React.createElement(\"span\", { ref: this.headingRef, className: css(styles.labelGroupLabel), \"aria-hidden\": \"true\", id: id }, categoryName));\n    }\n    render() {\n        const _a = this.props, { categoryName, children, className, isClosable, isCompact, closeBtnAriaLabel, 'aria-label': ariaLabel, onClick, numLabels, expandedText, collapsedText, \n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        defaultIsOpen, tooltipPosition, isVertical, isEditable, hasEditableTextArea, editableTextAreaProps, addLabelControl } = _a, \n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        rest = __rest(_a, [\"categoryName\", \"children\", \"className\", \"isClosable\", \"isCompact\", \"closeBtnAriaLabel\", 'aria-label', \"onClick\", \"numLabels\", \"expandedText\", \"collapsedText\", \"defaultIsOpen\", \"tooltipPosition\", \"isVertical\", \"isEditable\", \"hasEditableTextArea\", \"editableTextAreaProps\", \"addLabelControl\"]);\n        const { isOpen } = this.state;\n        const renderedChildren = React.Children.toArray(children);\n        const numChildren = renderedChildren.length;\n        const collapsedTextResult = fillTemplate(collapsedText, {\n            remaining: numChildren - numLabels\n        });\n        const renderLabelGroup = (id) => {\n            const labelArray = !isOpen ? renderedChildren.slice(0, numLabels) : renderedChildren;\n            const content = (React.createElement(React.Fragment, null,\n                categoryName && this.renderLabel(id),\n                React.createElement(\"ul\", Object.assign({ className: css(styles.labelGroupList) }, (categoryName && { 'aria-labelledby': id }), (!categoryName && { 'aria-label': ariaLabel }), { role: \"list\" }, rest),\n                    labelArray.map((child, i) => (React.createElement(\"li\", { className: css(styles.labelGroupListItem), key: i }, child))),\n                    numChildren > numLabels && (React.createElement(\"li\", { className: css(styles.labelGroupListItem) },\n                        React.createElement(Label, { isOverflowLabel: true, onClick: this.toggleCollapse, className: css(isCompact && labelStyles.modifiers.compact) }, isOpen ? expandedText : collapsedTextResult))),\n                    addLabelControl && React.createElement(\"li\", { className: css(styles.labelGroupListItem) }, addLabelControl),\n                    isEditable && hasEditableTextArea && (React.createElement(\"li\", { className: css(styles.labelGroupListItem, styles.modifiers.textarea) },\n                        React.createElement(\"textarea\", Object.assign({ className: css(styles.labelGroupTextarea), rows: 1, tabIndex: 0 }, editableTextAreaProps)))))));\n            const close = (React.createElement(\"div\", { className: css(styles.labelGroupClose) },\n                React.createElement(Button, { variant: \"plain\", \"aria-label\": closeBtnAriaLabel, onClick: onClick, id: `remove_group_${id}`, \"aria-labelledby\": `remove_group_${id} ${id}` },\n                    React.createElement(TimesCircleIcon, { \"aria-hidden\": \"true\" }))));\n            return (React.createElement(\"div\", { className: css(styles.labelGroup, className, categoryName && styles.modifiers.category, isVertical && styles.modifiers.vertical, isEditable && styles.modifiers.editable) },\n                React.createElement(\"div\", { className: css(styles.labelGroupMain) }, content),\n                isClosable && close));\n        };\n        return numChildren === 0 && addLabelControl === undefined ? null : (React.createElement(GenerateId, null, (randomId) => renderLabelGroup(this.props.id || randomId)));\n    }\n}\nLabelGroup.displayName = 'LabelGroup';\nLabelGroup.defaultProps = {\n    expandedText: 'Show Less',\n    collapsedText: '${remaining} more',\n    categoryName: '',\n    defaultIsOpen: false,\n    numLabels: 3,\n    isClosable: false,\n    isCompact: false,\n    onClick: (_e) => undefined,\n    closeBtnAriaLabel: 'Close label group',\n    tooltipPosition: 'top',\n    'aria-label': 'Label group category',\n    isVertical: false,\n    isEditable: false,\n    hasEditableTextArea: false\n};\nexport { LabelGroup };\n//# sourceMappingURL=LabelGroup.js.map","import { useTranslation } from \"react-i18next\";\r\nimport { capitalize } from \"lodash-es\";\r\nimport {\r\n  Label,\r\n  LabelGroup,\r\n  Popover,\r\n  Text,\r\n  TextContent,\r\n  TextList,\r\n  TextListItem,\r\n  TextListItemVariants,\r\n  TextListVariants,\r\n} from \"@patternfly/react-core\";\r\n\r\ntype AuthorizationScopesDetailsProps = {\r\n  row: {\r\n    resourceType: string;\r\n    associatedScopes?: { name: string }[];\r\n  };\r\n};\r\n\r\nexport const AuthorizationScopesDetails = ({\r\n  row,\r\n}: AuthorizationScopesDetailsProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const associatedScopes = row.associatedScopes || [];\r\n\r\n  return (\r\n    <LabelGroup>\r\n      {associatedScopes.map((scope, index) => (\r\n        <Popover\r\n          key={index}\r\n          aria-label={`Authorization scope popover for ${scope.name}`}\r\n          position=\"top\"\r\n          hasAutoWidth\r\n          bodyContent={\r\n            <TextContent>\r\n              <Text className=\"pf-v5-u-font-size-md pf-v5-u-font-weight-bold\">\r\n                {t(\"authorizationScopeDetailsTitle\")}\r\n              </Text>\r\n              <Text className=\"pf-v5-u-font-size-sm\">\r\n                {t(\"authorizationScopeDetailsSubtitle\")}\r\n              </Text>\r\n              <TextList\r\n                component={TextListVariants.dl}\r\n                className=\"pf-v5-u-font-size-sm\"\r\n              >\r\n                <TextListItem component={TextListItemVariants.dt}>\r\n                  {t(\"authorizationScopeDetailsName\")}\r\n                </TextListItem>\r\n                <TextListItem component={TextListItemVariants.dd}>\r\n                  {capitalize(scope.name)}\r\n                </TextListItem>\r\n                <TextListItem component={TextListItemVariants.dt}>\r\n                  {t(\"authorizationScopeDetailsDescription\")}\r\n                </TextListItem>\r\n                <TextListItem component={TextListItemVariants.dd}>\r\n                  {\" \"}\r\n                  {t(`authorizationScope.${row.resourceType}.${scope.name}`)}\r\n                </TextListItem>\r\n              </TextList>\r\n            </TextContent>\r\n          }\r\n        >\r\n          <Label color=\"blue\">{capitalize(scope.name)}</Label>\r\n        </Popover>\r\n      ))}\r\n    </LabelGroup>\r\n  );\r\n};\r\n","import PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { SelectControl, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Button,\r\n  Dropdown,\r\n  Form,\r\n  MenuToggle,\r\n} from \"@patternfly/react-core\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { FormProvider, useForm, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { ResourceType } from \"./ResourceType\";\r\n\r\nexport type SearchForm = {\r\n  name?: string;\r\n  resources?: string;\r\n  scope?: string;\r\n  type?: string;\r\n  uri?: string;\r\n  owner?: string;\r\n  resourceType?: string;\r\n};\r\n\r\ntype SearchDropdownProps = {\r\n  resources?: UserRepresentation[];\r\n  types: PolicyRepresentation[];\r\n  search: SearchForm;\r\n  onSearch: (form: SearchForm) => void;\r\n  resourceType?: string;\r\n};\r\n\r\nexport const SearchDropdown = ({\r\n  types,\r\n  search,\r\n  onSearch,\r\n}: SearchDropdownProps) => {\r\n  const { t } = useTranslation();\r\n  const form = useForm<SearchForm>({\r\n    mode: \"onChange\",\r\n    defaultValues: search,\r\n  });\r\n\r\n  const {\r\n    reset,\r\n    formState: { isDirty },\r\n    handleSubmit,\r\n  } = form;\r\n\r\n  const [open, toggle] = useToggle();\r\n  const [resourceScopes, setResourceScopes] = useState<string[]>([]);\r\n  const selectedType = useWatch({\r\n    control: form.control,\r\n    name: \"resourceType\",\r\n    defaultValue: \"\",\r\n  });\r\n  const [key, setKey] = useState(0);\r\n  const ref = useRef(\"clients\");\r\n\r\n  const submit = (form: SearchForm) => {\r\n    toggle();\r\n    onSearch(form);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const type = types?.find((item) => item.type === selectedType);\r\n    setResourceScopes(type?.scopes || []);\r\n  }, [selectedType, types]);\r\n\r\n  useEffect(() => {\r\n    reset(search);\r\n    setKey((prevKey) => prevKey + 1);\r\n  }, [search]);\r\n\r\n  return (\r\n    <Dropdown\r\n      toggle={(ref) => (\r\n        <MenuToggle\r\n          data-testid=\"searchdropdown_dorpdown\"\r\n          ref={ref}\r\n          onClick={toggle}\r\n          className=\"keycloak__client_authentication__searchdropdown\"\r\n        >\r\n          {t(\"searchClientAuthorizationPermission\")}\r\n        </MenuToggle>\r\n      )}\r\n      isOpen={open}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form\r\n          key={key}\r\n          isHorizontal\r\n          className=\"keycloak__client_authentication__searchdropdown_form\"\r\n          onSubmit={handleSubmit(submit)}\r\n        >\r\n          <TextControl name=\"name\" label={t(\"name\")} />\r\n          <SelectControl\r\n            name=\"resourceType\"\r\n            label={t(\"type\")}\r\n            controller={{\r\n              defaultValue: \"\",\r\n            }}\r\n            options={[\r\n              { key: \"\", value: t(\"choose\") },\r\n              ...types.map(({ type, name }) => ({\r\n                key: type!,\r\n                value: name! || type!,\r\n              })),\r\n            ]}\r\n            onSelect={(value, onChange) => {\r\n              if (ref.current !== value) {\r\n                ref.current = value as string;\r\n                form.setValue(\"resources\", undefined);\r\n              }\r\n              onChange(value);\r\n            }}\r\n          />\r\n          {selectedType !== \"\" && (\r\n            <>\r\n              <ResourceType\r\n                resourceType={selectedType || \"clients\"}\r\n                withEnforceAccessTo={false}\r\n              />\r\n              <SelectControl\r\n                name={\"scope\"}\r\n                label={t(\"authorizationScope\")}\r\n                controller={{\r\n                  defaultValue: \"\",\r\n                }}\r\n                options={[\r\n                  ...(resourceScopes || []).map((resourceScope) => ({\r\n                    key: resourceScope!,\r\n                    value: resourceScope!,\r\n                  })),\r\n                ]}\r\n              />\r\n            </>\r\n          )}\r\n\r\n          <ActionGroup>\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"submit\"\r\n              data-testid=\"search-btn\"\r\n              isDisabled={!isDirty}\r\n            >\r\n              {t(\"search\")}\r\n            </Button>\r\n            <Button\r\n              variant=\"link\"\r\n              data-testid=\"revert-btn\"\r\n              onClick={() => {\r\n                reset({});\r\n                onSearch({});\r\n              }}\r\n            >\r\n              {t(\"clear\")}\r\n            </Button>\r\n          </ActionGroup>\r\n        </Form>\r\n      </FormProvider>\r\n    </Dropdown>\r\n  );\r\n};\r\n","import { ResourceTypesRepresentation } from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  Modal,\r\n  ModalVariant,\r\n  TextContent,\r\n  Text,\r\n  TextVariants,\r\n  Alert,\r\n} from \"@patternfly/react-core\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\n\r\ntype NewPermissionConfigurationDialogProps = {\r\n  resourceTypes?: ResourceTypesRepresentation[];\r\n  toggleDialog: () => void;\r\n  onSelect: (resourceType: ResourceTypesRepresentation) => void;\r\n};\r\n\r\nexport const NewPermissionConfigurationDialog = ({\r\n  resourceTypes,\r\n  onSelect,\r\n  toggleDialog,\r\n}: NewPermissionConfigurationDialogProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Modal\r\n      aria-label={t(\"createPermission\")}\r\n      variant={ModalVariant.medium}\r\n      header={\r\n        <TextContent>\r\n          <Text component={TextVariants.h1}>{t(\"chooseAResourceType\")}</Text>\r\n          <Alert\r\n            variant=\"info\"\r\n            isInline\r\n            title={t(\"chooseAResourceTypeInstructions\")}\r\n            component=\"p\"\r\n          />\r\n        </TextContent>\r\n      }\r\n      isOpen\r\n      onClose={toggleDialog}\r\n    >\r\n      <Table aria-label={t(\"permissions\")} variant=\"compact\">\r\n        <Thead>\r\n          <Tr>\r\n            <Th>{t(\"resourceType\")}</Th>\r\n            <Th>{t(\"description\")}</Th>\r\n          </Tr>\r\n        </Thead>\r\n        <Tbody>\r\n          {Object.keys(resourceTypes || {}).map((key: any) => {\r\n            const resourceType = resourceTypes![key];\r\n            return (\r\n              <Tr\r\n                key={resourceType.type}\r\n                data-testid={resourceType.type}\r\n                onRowClick={() => {\r\n                  onSelect(resourceType);\r\n                }}\r\n                isClickable\r\n              >\r\n                <Td>{resourceType.type}</Td>\r\n                <Td style={{ textWrap: \"wrap\" }}>\r\n                  {t(`resourceType.${resourceType.type}`)}\r\n                </Td>\r\n              </Tr>\r\n            );\r\n          })}\r\n        </Tbody>\r\n      </Table>\r\n    </Modal>\r\n  );\r\n};\r\n","import type PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport ResourceRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceRepresentation\";\r\nimport ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\r\nimport {\r\n  KeycloakSpinner,\r\n  ListEmptyState,\r\n  PaginatingTableToolbar,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  PageSection,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  ExpandableRowContent,\r\n  Table,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport useSortedResourceTypes from \"../../utils/useSortedResourceTypes\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { AuthorizationScopesDetails } from \"../permission-configuration/AuthorizationScopesDetails\";\r\nimport { SearchDropdown, SearchForm } from \"../resource-types/SearchDropdown\";\r\nimport { toCreatePermissionConfiguration } from \"../routes/NewPermissionConfiguration\";\r\nimport { toPermissionConfigurationDetails } from \"../routes/PermissionConfigurationDetails\";\r\nimport { NewPermissionConfigurationDialog } from \"./NewPermissionConfigurationDialog\";\r\n\r\ntype PermissionsConfigurationProps = {\r\n  clientId: string;\r\n};\r\n\r\ntype ExpandablePolicyRepresentation = PolicyRepresentation & {\r\n  policies?: PolicyRepresentation[];\r\n  resources?: ResourceRepresentation[];\r\n  scopes?: ScopeRepresentation[];\r\n  isExpanded: boolean;\r\n};\r\n\r\nexport const PermissionsConfigurationTab = ({\r\n  clientId,\r\n}: PermissionsConfigurationProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n  const [permissions, setPermissions] =\r\n    useState<ExpandablePolicyRepresentation[]>();\r\n  const [selectedPermission, setSelectedPermission] =\r\n    useState<PolicyRepresentation>();\r\n  const [search, setSearch] = useState<SearchForm>({});\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [max, setMax] = useState(10);\r\n  const [first, setFirst] = useState(0);\r\n  const [newDialog, toggleDialog] = useToggle();\r\n  const resourceTypes = useSortedResourceTypes({ clientId });\r\n\r\n  useFetch(\r\n    async () => {\r\n      const permissions = await adminClient.clients.listPermissionScope({\r\n        first,\r\n        max: max + 1,\r\n        id: clientId,\r\n        ...search,\r\n      });\r\n\r\n      const processedPermissions = await Promise.all(\r\n        (permissions || []).map(async (permission) => {\r\n          const policies = await adminClient.clients.getAssociatedPolicies({\r\n            id: clientId,\r\n            permissionId: permission.id!,\r\n          });\r\n\r\n          const scopes = await adminClient.clients.getAssociatedScopes({\r\n            id: clientId,\r\n            permissionId: permission.id!,\r\n          });\r\n\r\n          const resources = await adminClient.clients.getAssociatedResources({\r\n            id: clientId,\r\n            permissionId: permission.id!,\r\n          });\r\n\r\n          return {\r\n            ...permission,\r\n            policies,\r\n            scopes,\r\n            resources,\r\n            isExpanded: false,\r\n          };\r\n        }),\r\n      );\r\n\r\n      return processedPermissions;\r\n    },\r\n    (permissions) => {\r\n      setPermissions(permissions as any[]);\r\n    },\r\n    [key, search, first, max],\r\n  );\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"deletePermission\",\r\n    messageKey: t(\"deleteAdminPermissionConfirm\", {\r\n      permission: selectedPermission?.name,\r\n    }),\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    continueButtonLabel: \"confirm\",\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.delPermission({\r\n          id: clientId,\r\n          type: selectedPermission?.type!,\r\n          permissionId: selectedPermission?.id!,\r\n        });\r\n        addAlert(t(\"permissionDeletedSuccess\"), AlertVariant.success);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"permissionDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (!permissions) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  const noData = permissions.length === 0;\r\n  const searching = Object.keys(search).length !== 0;\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <DeleteConfirm />\r\n      {(!noData || searching) && (\r\n        <>\r\n          {newDialog && (\r\n            <NewPermissionConfigurationDialog\r\n              resourceTypes={resourceTypes}\r\n              onSelect={(resourceType) =>\r\n                navigate(\r\n                  toCreatePermissionConfiguration({\r\n                    realm,\r\n                    permissionClientId: clientId,\r\n                    resourceType: resourceType.type!,\r\n                  }),\r\n                )\r\n              }\r\n              toggleDialog={toggleDialog}\r\n            />\r\n          )}\r\n          <PaginatingTableToolbar\r\n            count={permissions.length}\r\n            first={first}\r\n            max={max}\r\n            onNextClick={setFirst}\r\n            onPreviousClick={setFirst}\r\n            onPerPageSelect={(first, max) => {\r\n              setFirst(first);\r\n              setMax(max);\r\n            }}\r\n            toolbarItem={\r\n              <>\r\n                <ToolbarItem>\r\n                  <SearchDropdown\r\n                    types={resourceTypes}\r\n                    search={search}\r\n                    onSearch={setSearch}\r\n                  />\r\n                </ToolbarItem>\r\n                <ToolbarItem>\r\n                  <Button\r\n                    data-testid=\"createScopeBasedPermissionBtn\"\r\n                    key=\"confirm\"\r\n                    variant=\"primary\"\r\n                    onSelect={(resourceType) =>\r\n                      navigate(\r\n                        toCreatePermissionConfiguration({\r\n                          realm,\r\n                          permissionClientId: clientId,\r\n                          resourceType: resourceType.type!,\r\n                        }),\r\n                      )\r\n                    }\r\n                    onClick={toggleDialog}\r\n                  >\r\n                    {t(\"createPermission\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n              </>\r\n            }\r\n          >\r\n            {!noData && (\r\n              <Table aria-label={t(\"permissions\")} variant=\"compact\">\r\n                <Thead>\r\n                  <Tr>\r\n                    <Th aria-hidden=\"true\" />\r\n                    <Th>{t(\"adminPermissionName\")}</Th>\r\n                    <Th>{t(\"resourceType\")}</Th>\r\n                    <Th>{t(\"authorizationScopes\")}</Th>\r\n                    <Th>{t(\"description\")}</Th>\r\n                    <Th aria-hidden=\"true\" />\r\n                  </Tr>\r\n                </Thead>\r\n                {permissions.map((permission, rowIndex) => (\r\n                  <Tbody key={permission.id} isExpanded={permission.isExpanded}>\r\n                    <Tr>\r\n                      <Td\r\n                        expand={{\r\n                          rowIndex,\r\n                          isExpanded: permission.isExpanded,\r\n                          onToggle: (_, rowIndex) => {\r\n                            const rows = permissions.map((p, index) =>\r\n                              index === rowIndex\r\n                                ? { ...p, isExpanded: !p.isExpanded }\r\n                                : p,\r\n                            );\r\n                            setPermissions(rows);\r\n                          },\r\n                        }}\r\n                      />\r\n                      <Td data-testid={`name-column-${permission.name}`}>\r\n                        <Link\r\n                          to={toPermissionConfigurationDetails({\r\n                            realm,\r\n                            permissionClientId: clientId,\r\n                            permissionId: permission.id!,\r\n                            resourceType: permission.resourceType!,\r\n                          })}\r\n                        >\r\n                          {permission.name}\r\n                        </Link>\r\n                      </Td>\r\n                      <Td>{permission.resourceType}</Td>\r\n                      <Td>\r\n                        <AuthorizationScopesDetails\r\n                          row={{\r\n                            resourceType: permission.resourceType || \"\",\r\n                            associatedScopes: permission.scopes?.map(\r\n                              (scope: ScopeRepresentation) => ({\r\n                                name: scope.name || \"\",\r\n                              }),\r\n                            ),\r\n                          }}\r\n                        />\r\n                      </Td>\r\n                      <Td>{permission.description || \"â€”\"}</Td>\r\n                      <Td\r\n                        actions={{\r\n                          items: [\r\n                            {\r\n                              title: t(\"delete\"),\r\n                              onClick: async () => {\r\n                                setSelectedPermission(permission);\r\n                                toggleDeleteDialog();\r\n                              },\r\n                            },\r\n                          ],\r\n                        }}\r\n                      ></Td>\r\n                    </Tr>\r\n                    <Tr\r\n                      key={`child-${permission.id}`}\r\n                      isExpanded={permission.isExpanded}\r\n                    >\r\n                      <Td />\r\n                      <Td colSpan={5}>\r\n                        <ExpandableRowContent>\r\n                          {permission.isExpanded && (\r\n                            <>\r\n                              <Th>{t(\"resources\")}</Th>\r\n                              {permission.resources &&\r\n                              permission.resources?.length > 0 ? (\r\n                                permission.resources!.map(\r\n                                  (resource: ResourceRepresentation, index) => (\r\n                                    <Td key={index}>\r\n                                      <span style={{ marginLeft: \"8px\" }}>\r\n                                        {resource.displayName || resource.name}\r\n                                      </span>\r\n                                    </Td>\r\n                                  ),\r\n                                )\r\n                              ) : (\r\n                                <Td>\r\n                                  <span style={{ marginLeft: \"8px\" }}>\r\n                                    {t(\"allResources\")}\r\n                                  </span>\r\n                                </Td>\r\n                              )}\r\n                              <br />\r\n                              <Th>{t(\"assignedPolicies\")}</Th>\r\n                              {permission.policies!.map(\r\n                                (policy: PolicyRepresentation, index) => (\r\n                                  <Td key={index}>\r\n                                    <span style={{ marginLeft: \"8px\" }}>\r\n                                      {policy.name}\r\n                                    </span>\r\n                                  </Td>\r\n                                ),\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </ExpandableRowContent>\r\n                      </Td>\r\n                    </Tr>\r\n                  </Tbody>\r\n                ))}\r\n              </Table>\r\n            )}\r\n          </PaginatingTableToolbar>\r\n        </>\r\n      )}\r\n      {noData && !searching && (\r\n        <>\r\n          {newDialog && (\r\n            <NewPermissionConfigurationDialog\r\n              resourceTypes={resourceTypes}\r\n              onSelect={(resourceType) =>\r\n                navigate(\r\n                  toCreatePermissionConfiguration({\r\n                    realm,\r\n                    permissionClientId: clientId,\r\n                    resourceType: resourceType.type!,\r\n                  }),\r\n                )\r\n              }\r\n              toggleDialog={toggleDialog}\r\n            />\r\n          )}\r\n          <ListEmptyState\r\n            message={t(\"emptyPermissions\")}\r\n            instructions={t(\"emptyPermissionsInstructions\")}\r\n            primaryActionText={t(\"createPermission\")}\r\n            onPrimaryAction={toggleDialog}\r\n          />\r\n        </>\r\n      )}\r\n      {noData && searching && (\r\n        <ListEmptyState\r\n          isSearchVariant\r\n          message={t(\"noSearchResults\")}\r\n          instructions={t(\"noPermissionSearchResultsInstructions\")}\r\n        />\r\n      )}\r\n    </PageSection>\r\n  );\r\n};\r\n","import PolicyEvaluationResponse from \"@keycloak/keycloak-admin-client/lib/defs/policyEvaluationResponse\";\r\nimport { useMemo } from \"react\";\r\nimport { Alert, List, ListItem, Text } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { sortBy } from \"lodash-es\";\r\n\r\ntype PermissionEvaluationResultProps = {\r\n  evaluateResult: PolicyEvaluationResponse;\r\n};\r\n\r\nexport const PermissionEvaluationResult = ({\r\n  evaluateResult,\r\n}: PermissionEvaluationResultProps) => {\r\n  const { t } = useTranslation();\r\n  const evaluatedResults = evaluateResult?.results || [];\r\n  const evaluatedResult = evaluatedResults[0] || {};\r\n  const alertTitle =\r\n    evaluatedResult?.resource?.name ?? t(\"permissionEvaluationAlertTitle\");\r\n  const alertVariant =\r\n    evaluateResult?.status === \"PERMIT\" ? \"success\" : \"warning\";\r\n\r\n  const evaluatedAllowedScopes = useMemo(\r\n    () => sortBy(evaluatedResult?.allowedScopes || [], \"name\"),\r\n    [evaluatedResult],\r\n  );\r\n  const evaluatedDeniedScopes = useMemo(\r\n    () => sortBy(evaluatedResult?.deniedScopes || [], \"name\"),\r\n    [evaluatedResult],\r\n  );\r\n  const evaluatedPolicies = useMemo(\r\n    () => sortBy(evaluatedResult?.policies || [], \"name\"),\r\n    [evaluatedResult],\r\n  );\r\n\r\n  const evaluatedPermission = function (title: string, status: string) {\r\n    const permissions = evaluatedPolicies.filter((p) => p.status === status);\r\n\r\n    if (permissions.length == 0) {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Text className=\"pf-v5-u-pt-sm\">\r\n          <strong>{t(title)}</strong>:\r\n        </Text>\r\n        <List className=\"pf-v5-u-mt-sm\">\r\n          {permissions.map((p) => (\r\n            <ListItem key={p.policy?.id}>\r\n              {t(\"evaluatedPolicy\", {\r\n                name: p.policy?.name,\r\n                status: p.status,\r\n              })}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Alert isInline variant={alertVariant} title={alertTitle} component=\"h6\">\r\n      {evaluatedAllowedScopes.length > 0 && (\r\n        <>\r\n          <Text>\r\n            <b>{t(\"grantedScope\")}</b>\r\n          </Text>\r\n          <List className=\"pf-v5-u-mt-sm\">\r\n            {evaluatedAllowedScopes.map((scope) => (\r\n              <ListItem key={scope.id}>{scope.name}</ListItem>\r\n            ))}\r\n          </List>\r\n        </>\r\n      )}\r\n\r\n      {evaluatedDeniedScopes.length > 0 && (\r\n        <>\r\n          <Text className=\"pf-v5-u-pt-sm\">\r\n            <strong>{t(\"deniedScope\")}</strong>\r\n          </Text>\r\n\r\n          <List className=\"pf-v5-u-mt-sm\">\r\n            {evaluatedDeniedScopes.map((scope) => (\r\n              <ListItem key={scope.id}>{scope.name}</ListItem>\r\n            ))}\r\n          </List>\r\n        </>\r\n      )}\r\n\r\n      {evaluatedPermission(\"grantedPermissions\", \"PERMIT\")}\r\n      {evaluatedPermission(\"deniedPermissions\", \"DENY\")}\r\n    </Alert>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type EvaluationResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/evaluationResultRepresentation\";\r\nimport PolicyEvaluationResponse from \"@keycloak/keycloak-admin-client/lib/defs/policyEvaluationResponse\";\r\nimport type ResourceEvaluation from \"@keycloak/keycloak-admin-client/lib/defs/resourceEvaluation\";\r\nimport {\r\n  ListEmptyState,\r\n  SelectControl,\r\n  useAlerts,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Alert,\r\n  AlertActionCloseButton,\r\n  Button,\r\n  PageSection,\r\n  Panel,\r\n  PanelHeader,\r\n  PanelMainBody,\r\n  Split,\r\n  SplitItem,\r\n  Title,\r\n} from \"@patternfly/react-core\";\r\nimport { BellIcon } from \"@patternfly/react-icons\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { FormProvider, useForm, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { UserSelect } from \"../../components/users/UserSelect\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { ForbiddenSection } from \"../../ForbiddenSection\";\r\nimport useSortedResourceTypes from \"../../utils/useSortedResourceTypes\";\r\nimport { PermissionEvaluationResult } from \"./PermissionEvaluationResult\";\r\nimport { COMPONENTS } from \"../resource-types/ResourceType\";\r\n\r\ninterface EvaluateFormInputs\r\n  extends Omit<ResourceEvaluation, \"context\" | \"resources\"> {\r\n  authScopes: string[];\r\n  user: string[];\r\n  clients: string[];\r\n  groups: string[];\r\n  users: string[];\r\n  roles: string[];\r\n  resourceType?: string;\r\n}\r\n\r\ntype Props = {\r\n  client: ClientRepresentation;\r\n  save: () => void;\r\n} & EvaluationResultRepresentation;\r\n\r\nexport const PermissionsEvaluationTab = (props: Props) => {\r\n  const { hasAccess } = useAccess();\r\n\r\n  if (!hasAccess(\"view-users\")) {\r\n    return <ForbiddenSection permissionNeeded=\"view-users\" />;\r\n  }\r\n\r\n  return <PermissionEvaluateContent {...props} />;\r\n};\r\n\r\nconst PermissionEvaluateContent = ({ client }: Props) => {\r\n  const { t } = useTranslation();\r\n  const { adminClient } = useAdminClient();\r\n  const realm = useRealm();\r\n  const { addError } = useAlerts();\r\n  const form = useForm<EvaluateFormInputs>({\r\n    mode: \"onChange\",\r\n    defaultValues: {\r\n      user: [],\r\n      resourceType: \"\",\r\n      authScopes: [],\r\n    },\r\n  });\r\n  const { control, getValues, reset, trigger } = form;\r\n  const [evaluateResult, setEvaluateResult] =\r\n    useState<PolicyEvaluationResponse>();\r\n  const [isAlertOpened, setIsAlertOpened] = useState(true);\r\n  const [isEvaluated, setIsEvaluated] = useState(false);\r\n  const resourceTypes = useSortedResourceTypes({ clientId: client.id! });\r\n\r\n  const selectedResourceType = useWatch({\r\n    control: control,\r\n    name: \"resourceType\",\r\n    defaultValue: \"\",\r\n  });\r\n\r\n  const authScopes = useMemo(() => {\r\n    const resource = resourceTypes.find((r) => r.type === selectedResourceType);\r\n    return resource?.scopes || [];\r\n  }, [selectedResourceType, resourceTypes]);\r\n\r\n  const ResourceTypeComponent =\r\n    COMPONENTS[selectedResourceType?.toLowerCase() || \"\"];\r\n\r\n  const evaluate = async () => {\r\n    if (!(await trigger())) {\r\n      return;\r\n    }\r\n\r\n    const formValues = getValues();\r\n    const getSingleValue = (source: string | string[]) => {\r\n      return Array.isArray(source) ? source?.[0] : source;\r\n    };\r\n\r\n    const getResourceName = (resourceType: string) => {\r\n      switch (resourceType) {\r\n        case \"Groups\":\r\n          return getSingleValue(formValues.groups);\r\n        case \"Users\":\r\n          return getSingleValue(formValues.users);\r\n        case \"Clients\":\r\n          return getSingleValue(formValues.clients);\r\n        case \"Roles\":\r\n          return getSingleValue(formValues.roles);\r\n        default:\r\n          return undefined;\r\n      }\r\n    };\r\n\r\n    const resourceName = getResourceName(formValues.resourceType!);\r\n\r\n    const resEval: ResourceEvaluation = {\r\n      roleIds: formValues.roleIds ?? [],\r\n      userId: formValues.user![0],\r\n      resourceType: formValues.resourceType,\r\n      resources: [\r\n        {\r\n          name: resourceName,\r\n          scopes: formValues.authScopes!.map((scope) => ({ name: scope })),\r\n        },\r\n      ],\r\n      entitlements: false,\r\n      context: {\r\n        attributes: {},\r\n      },\r\n    };\r\n\r\n    try {\r\n      const evaluation = await adminClient.clients.evaluateResource(\r\n        { id: client.id!, realm: realm.realm },\r\n        resEval,\r\n      );\r\n\r\n      setEvaluateResult(evaluation);\r\n      setIsEvaluated(true);\r\n    } catch (error) {\r\n      addError(\"evaluateError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageSection>\r\n      <Split hasGutter>\r\n        <SplitItem>\r\n          <FormProvider {...form}>\r\n            <Panel>\r\n              <PanelMainBody style={{ width: \"50rem\" }}>\r\n                <FormAccess isHorizontal role=\"view-clients\">\r\n                  {isAlertOpened && (\r\n                    <Alert\r\n                      variant=\"info\"\r\n                      isInline\r\n                      title={t(\"permissionsEvaluationInstructions\")}\r\n                      component=\"p\"\r\n                      actionClose={\r\n                        <AlertActionCloseButton\r\n                          onClose={() => setIsAlertOpened(false)}\r\n                        />\r\n                      }\r\n                    />\r\n                  )}\r\n                  <UserSelect\r\n                    name=\"user\"\r\n                    label={t(\"user\")}\r\n                    helpText={t(\"selectUser\")}\r\n                    defaultValue={[]}\r\n                    variant=\"typeahead\"\r\n                    isRequired\r\n                  />\r\n                  <SelectControl\r\n                    name=\"resourceType\"\r\n                    label={t(\"resourceType\")}\r\n                    labelIcon={t(\"resourceTypeSelectHelp\")}\r\n                    variant=\"single\"\r\n                    controller={{\r\n                      defaultValue: resourceTypes.length\r\n                        ? resourceTypes[0]?.type\r\n                        : \"\",\r\n                      rules: { required: true },\r\n                    }}\r\n                    options={resourceTypes.map((resource) => resource.type!)}\r\n                  />\r\n                  {ResourceTypeComponent && (\r\n                    <ResourceTypeComponent\r\n                      name={selectedResourceType?.toLowerCase()}\r\n                      label={t(`${selectedResourceType}`)}\r\n                      helpText={t(`select${selectedResourceType}`)}\r\n                      defaultValue={[]}\r\n                      variant=\"typeahead\"\r\n                      isRequired\r\n                      isRadio\r\n                    />\r\n                  )}\r\n                  <SelectControl\r\n                    name=\"authScopes\"\r\n                    label={t(\"authScope\")}\r\n                    labelIcon={t(\"authScopeSelectHelp\")}\r\n                    controller={{ defaultValue: [] }}\r\n                    variant=\"single\"\r\n                    options={authScopes}\r\n                  />\r\n                </FormAccess>\r\n              </PanelMainBody>\r\n            </Panel>\r\n            <ActionGroup>\r\n              <Button\r\n                data-testid=\"permission-eval\"\r\n                id=\"permission-eval\"\r\n                className=\"pf-v5-u-mr-md\"\r\n                isDisabled={!form.formState.isValid}\r\n                onClick={() => evaluate()}\r\n              >\r\n                {t(\"evaluate\")}\r\n              </Button>\r\n              <Button\r\n                data-testid=\"permission-eval-revert\"\r\n                id=\"permission-eval-revert\"\r\n                className=\"pf-v5-u-mr-md\"\r\n                variant=\"link\"\r\n                onClick={() => {\r\n                  reset();\r\n                  setEvaluateResult({});\r\n                  setIsEvaluated(false);\r\n                }}\r\n              >\r\n                {t(\"revert\")}\r\n              </Button>\r\n            </ActionGroup>\r\n          </FormProvider>\r\n        </SplitItem>\r\n        <SplitItem>\r\n          <Panel>\r\n            <PanelHeader>\r\n              <Title headingLevel=\"h1\" size=\"md\">\r\n                {t(\"permissionEvaluationPreview\")}\r\n              </Title>\r\n            </PanelHeader>\r\n            <PanelMainBody>\r\n              {!isEvaluated ? (\r\n                <ListEmptyState\r\n                  icon={BellIcon}\r\n                  message={t(\"noPermissionsEvaluationResults\")}\r\n                  instructions={t(\"noPermissionsEvaluationResultsInstructions\")}\r\n                />\r\n              ) : (\r\n                <PermissionEvaluationResult evaluateResult={evaluateResult!} />\r\n              )}\r\n            </PanelMainBody>\r\n          </Panel>\r\n        </SplitItem>\r\n      </Split>\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  PageSection,\r\n  Tab,\r\n  TabTitleText,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { AuthorizationPolicies } from \"../clients/authorization/Policies\";\r\nimport { FormFields, SaveOptions } from \"../clients/ClientDetails\";\r\nimport { ConfirmDialogModal } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport {\r\n  RoutableTabs,\r\n  useRoutableTab,\r\n} from \"../components/routable-tabs/RoutableTabs\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { toPermissionsConfigurationTabs } from \"../permissions-configuration/routes/PermissionsConfigurationTabs\";\r\nimport { convertFormValuesToObject, convertToFormValues } from \"../util\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { PermissionsConfigurationTab } from \"./permission-configuration/PermissionsConfigurationTab\";\r\nimport { PermissionsEvaluationTab } from \"./permission-evaluation/PermissionsEvaluationTab\";\r\n\r\nexport default function PermissionsConfigurationSection() {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const { hasAccess } = useAccess();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [adminPermissionsClient, setAdminPermissionsClient] = useState<\r\n    ClientRepresentation | undefined\r\n  >();\r\n  const [changeAuthenticatorOpen, toggleChangeAuthenticatorOpen] = useToggle();\r\n  const form = useForm<FormFields>();\r\n  const { realmRepresentation } = useRealm();\r\n\r\n  const clientAuthenticatorType = useWatch({\r\n    control: form.control,\r\n    name: \"clientAuthenticatorType\",\r\n    defaultValue: \"client-secret\",\r\n  });\r\n\r\n  const hasManageAuthorization = hasAccess(\"manage-authorization\");\r\n  const hasViewUsers = hasAccess(\"view-users\");\r\n  const permissionsResourcesTab = useRoutableTab(\r\n    toPermissionsConfigurationTabs({\r\n      realm,\r\n      permissionClientId: realmRepresentation?.adminPermissionsClient?.id!,\r\n      tab: \"permissions\",\r\n    }),\r\n  );\r\n  const permissionsPoliciesTab = useRoutableTab(\r\n    toPermissionsConfigurationTabs({\r\n      realm,\r\n      permissionClientId: realmRepresentation?.adminPermissionsClient?.id!,\r\n      tab: \"policies\",\r\n    }),\r\n  );\r\n  const permissionsEvaluateTab = useRoutableTab(\r\n    toPermissionsConfigurationTabs({\r\n      realm,\r\n      permissionClientId: realmRepresentation?.adminPermissionsClient?.id!,\r\n      tab: \"evaluation\",\r\n    }),\r\n  );\r\n\r\n  useFetch(\r\n    async () => {\r\n      const clients = await adminClient.clients.find({\r\n        clientId: \"admin-permissions\",\r\n      });\r\n      return clients[0];\r\n    },\r\n    (adminPermissionsClient) => {\r\n      setAdminPermissionsClient(adminPermissionsClient!);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const setupForm = (client: ClientRepresentation) => {\r\n    form.reset({ ...client });\r\n    convertToFormValues(client, form.setValue);\r\n  };\r\n\r\n  const save = async (\r\n    { confirmed = false, messageKey = \"clientSaveSuccess\" }: SaveOptions = {\r\n      confirmed: false,\r\n      messageKey: \"clientSaveSuccess\",\r\n    },\r\n  ) => {\r\n    if (!(await form.trigger())) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !adminPermissionsClient?.publicClient &&\r\n      adminPermissionsClient?.clientAuthenticatorType !==\r\n        clientAuthenticatorType &&\r\n      !confirmed\r\n    ) {\r\n      toggleChangeAuthenticatorOpen();\r\n      return;\r\n    }\r\n\r\n    const values = convertFormValuesToObject(form.getValues());\r\n\r\n    const submittedClient =\r\n      convertFormValuesToObject<ClientRepresentation>(values);\r\n\r\n    try {\r\n      const newClient: ClientRepresentation = {\r\n        ...adminPermissionsClient,\r\n        ...submittedClient,\r\n      };\r\n\r\n      newClient.clientId = newClient.clientId?.trim();\r\n\r\n      await adminClient.clients.update(\r\n        { id: adminPermissionsClient!.clientId! },\r\n        newClient,\r\n      );\r\n      setupForm(newClient);\r\n      setAdminPermissionsClient(newClient);\r\n      addAlert(t(messageKey), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"clientSaveError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    adminPermissionsClient && (\r\n      <>\r\n        <ConfirmDialogModal\r\n          continueButtonLabel=\"yes\"\r\n          cancelButtonLabel=\"no\"\r\n          titleKey={t(\"changeAuthenticatorConfirmTitle\", {\r\n            clientAuthenticatorType: clientAuthenticatorType,\r\n          })}\r\n          open={changeAuthenticatorOpen}\r\n          toggleDialog={toggleChangeAuthenticatorOpen}\r\n          onConfirm={() => save({ confirmed: true })}\r\n        >\r\n          <>\r\n            {t(\"changeAuthenticatorConfirm\", {\r\n              clientAuthenticatorType: clientAuthenticatorType,\r\n            })}\r\n          </>\r\n        </ConfirmDialogModal>\r\n        <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n          <FormProvider {...form}>\r\n            <ViewHeader\r\n              titleKey={t(\"permissions\")}\r\n              subKey={t(\"permissionsSubTitle\")}\r\n            />\r\n            <RoutableTabs\r\n              mountOnEnter\r\n              unmountOnExit\r\n              defaultLocation={toPermissionsConfigurationTabs({\r\n                realm,\r\n                permissionClientId: adminPermissionsClient.id!,\r\n                tab: \"permissions\",\r\n              })}\r\n            >\r\n              <Tab\r\n                id=\"resources\"\r\n                data-testid=\"permissionsResources\"\r\n                title={<TabTitleText>{t(\"permissions\")}</TabTitleText>}\r\n                {...permissionsResourcesTab}\r\n              >\r\n                <PermissionsConfigurationTab\r\n                  clientId={adminPermissionsClient.id!}\r\n                />\r\n              </Tab>\r\n              <Tab\r\n                id=\"policies\"\r\n                data-testid=\"permissionsPolicies\"\r\n                title={<TabTitleText>{t(\"policies\")}</TabTitleText>}\r\n                {...permissionsPoliciesTab}\r\n              >\r\n                <AuthorizationPolicies\r\n                  clientId={adminPermissionsClient.id!}\r\n                  isDisabled={!hasManageAuthorization}\r\n                />\r\n              </Tab>\r\n              {hasViewUsers && (\r\n                <Tab\r\n                  id=\"evaluation\"\r\n                  data-testid=\"permissionsEvaluation\"\r\n                  title={<TabTitleText>{t(\"evaluation\")}</TabTitleText>}\r\n                  {...permissionsEvaluateTab}\r\n                >\r\n                  <PermissionsEvaluationTab\r\n                    client={adminPermissionsClient}\r\n                    save={save}\r\n                  />\r\n                </Tab>\r\n              )}\r\n            </RoutableTabs>\r\n          </FormProvider>\r\n        </PageSection>\r\n      </>\r\n    )\r\n  );\r\n}\r\n"],"names":["LabelGroup","React","props","prevState","id","categoryName","tooltipPosition","isTooltipVisible","Tooltip","css","styles","_a","children","className","isClosable","isCompact","closeBtnAriaLabel","ariaLabel","onClick","numLabels","expandedText","collapsedText","defaultIsOpen","isVertical","isEditable","hasEditableTextArea","editableTextAreaProps","addLabelControl","rest","__rest","isOpen","renderedChildren","numChildren","collapsedTextResult","fillTemplate","renderLabelGroup","labelArray","content","child","i","Label","labelStyles","close","Button","TimesCircleIcon","GenerateId","randomId","_e","AuthorizationScopesDetails","row","useTranslation","associatedScopes","scope","index","jsx","Popover","TextContent","Text","jsxs","TextList","TextListVariants","TextListItem","TextListItemVariants","capitalize","SearchDropdown","types","search","onSearch","t","form","useForm","reset","isDirty","handleSubmit","open","toggle","useToggle","resourceScopes","setResourceScopes","useState","selectedType","useWatch","key","setKey","ref","useRef","submit","useEffect","type","item","prevKey","Dropdown","MenuToggle","FormProvider","Form","TextControl","SelectControl","name","value","onChange","Fragment","ResourceType","resourceScope","ActionGroup","NewPermissionConfigurationDialog","resourceTypes","onSelect","toggleDialog","Modal","ModalVariant","TextVariants","Alert","Table","Thead","Tr","Th","Tbody","resourceType","Td","PermissionsConfigurationTab","clientId","adminClient","useAdminClient","navigate","useNavigate","addAlert","addError","useAlerts","realm","useRealm","permissions","setPermissions","selectedPermission","setSelectedPermission","setSearch","refresh","max","setMax","first","setFirst","newDialog","useSortedResourceTypes","useFetch","permission","policies","scopes","resources","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","AlertVariant","error","KeycloakSpinner","noData","searching","PageSection","toCreatePermissionConfiguration","PaginatingTableToolbar","ToolbarItem","rowIndex","_","rows","p","Link","toPermissionConfigurationDetails","ExpandableRowContent","resource","policy","ListEmptyState","PermissionEvaluationResult","evaluateResult","evaluatedResult","alertTitle","alertVariant","evaluatedAllowedScopes","useMemo","sortBy","evaluatedDeniedScopes","evaluatedPolicies","evaluatedPermission","title","status","List","ListItem","PermissionsEvaluationTab","hasAccess","useAccess","PermissionEvaluateContent","ForbiddenSection","client","control","getValues","trigger","setEvaluateResult","isAlertOpened","setIsAlertOpened","isEvaluated","setIsEvaluated","selectedResourceType","authScopes","r","ResourceTypeComponent","COMPONENTS","evaluate","formValues","getSingleValue","source","resourceName","resEval","evaluation","Split","SplitItem","Panel","PanelMainBody","FormAccess","AlertActionCloseButton","UserSelect","PanelHeader","Title","BellIcon","PermissionsConfigurationSection","adminPermissionsClient","setAdminPermissionsClient","changeAuthenticatorOpen","toggleChangeAuthenticatorOpen","realmRepresentation","clientAuthenticatorType","hasManageAuthorization","hasViewUsers","permissionsResourcesTab","useRoutableTab","toPermissionsConfigurationTabs","permissionsPoliciesTab","permissionsEvaluateTab","setupForm","convertToFormValues","save","confirmed","messageKey","values","convertFormValuesToObject","submittedClient","newClient","ConfirmDialogModal","ViewHeader","RoutableTabs","Tab","TabTitleText","AuthorizationPolicies"],"mappings":"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","x_google_ignoreList":[0]}