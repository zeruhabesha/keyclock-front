import{jsx as a,jsxs as c,Fragment as F}from"react/jsx-runtime";import{u as C,a as y,_ as E,e as K,eN as d,j as S,y as T,l as V,Q as u,A as j,g as v,o as f,b as q,P as w,eM as H}from"./main-o1hptXRo.js";import{D as O}from"./DynamicComponents-CnLlz98z.js";import{F as _}from"./FormAccess-BnhQnYb9.js";import{V as k}from"./ViewHeader-BDBsroi3.js";import{u as P}from"./useParams-CGVhlaFZ.js";import"react";import"react-dom";import"./ClientSelect-BY77LEpN.js";import"./IdentityProviderSelect-rmWlUbIg.js";import"./GroupPickerDialog-U3luvxlw.js";import"./DataListItemRow-B_0B-ko6.js";import"./ActionListItem-Cy-NQlq4.js";import"./MultiLineInput-OP0faqms.js";import"./RoleMapping-BOcI-Nkp.js";import"./translationFormatter-DQJeO7lr.js";import"./ConfirmDialog-BkU7melV.js";import"./useLocaleSort-C-diWts5.js";import"./CodeEditor-C4IS5oxi.js";const x=({providerType:i,onClose:o})=>{const{adminClient:t}=C(),{t:r}=y(),{id:s}=P(),{addAlert:p,addError:b}=E(),g=K().componentTypes?.[d]??[],l=S({mode:"onChange"}),{handleSubmit:h,reset:I}=l,A=async e=>{e.config&&Object.entries(e.config).forEach(([n,m])=>e.config[n]=Array.isArray(m)?m:[m]);try{s?(await t.components.update({id:s},{...e,providerType:d}),p(r("saveProviderSuccess"),f.success)):(await t.components.create({...e,providerId:i,providerType:d}),p(r("saveProviderSuccess"),f.success),o?.())}catch(n){b("saveProviderError",n)}};return T(async()=>{if(s)return await t.components.findOne({id:s})},e=>{e&&I({...e})},[]),a(_,{isHorizontal:!0,role:"manage-realm",onSubmit:h(A),children:c(V,{...l,children:[s&&a(u,{name:"id",label:r("providerId"),labelIcon:r("providerIdHelp"),rules:{required:r("required")},readOnly:!0}),a(u,{name:"name",defaultValue:i,label:r("name"),labelIcon:r("keyProviderMapperNameHelp"),rules:{required:r("required")}}),a(O,{properties:g.find(e=>e.id===i)?.properties||[]}),c(j,{children:[a(v,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:r("save")}),a(v,{onClick:()=>o?.(),variant:"link",children:r("cancel")})]})]})})};function ir(){const{t:i}=y(),o=P(),t=q();return c(F,{children:[a(k,{titleKey:i("editProvider"),subKey:o.providerType}),a(w,{variant:"light",children:a(x,{...o,onClose:()=>t(H({realm:o.realm,tab:"providers"}))})})]})}export{x as KeyProviderForm,ir as default};
//# sourceMappingURL=KeyProviderForm-BdvE2HbQ.js.map
