import{jsxs as c,Fragment as u,jsx as i}from"react/jsx-runtime";import{a as v,a0 as D,u as C,_ as J,C as U,N as p,Q as f,aO as P,O as q,g as x,o as m}from"./main-o1hptXRo.js";import{D as F}from"./SwitchControl-CU1bUhmR.js";import{I as H}from"./ImportKeyDialog-Cx3JB4OO.js";const W=({readOnly:r=!1})=>{const{t:e}=v(),{control:o,setValue:a}=D(),{adminClient:d}=C(),{addAlert:l,addError:n}=J(),[g,y,b]=U(),K=p({control:o,name:"config.useJwksUrl",defaultValue:"true"}),k=p({control:o,name:"config.publicKeySignatureVerifier"}),w=async I=>{try{const t=new FormData,{file:S,...V}=I;for(const[h,j]of Object.entries(V))t.append(h,j);t.append("file",S);const s=await d.identityProviders.uploadCertificate({},t);s.jwks?(a("config.publicKeySignatureVerifier",s.jwks),a("config.publicKeySignatureVerifierKeyId",""),l(e("importSuccess"),m.success)):s.publicKey?(a("config.publicKeySignatureVerifier",s.publicKey),l(e("importSuccess"),m.success)):n("importError",e("emptyResources"))}catch(t){n("importError",t)}};return c(u,{children:[i(F,{name:"config.useJwksUrl",label:e("useJwksUrl"),labelIcon:e("useJwksUrlHelp"),isDisabled:r,defaultValue:"true",stringify:!0}),K==="true"?i(f,{name:"config.jwksUrl",label:e("jwksUrl"),labelIcon:e("jwksUrlHelp"),type:"url",readOnly:r,rules:{required:e("required")}}):c(u,{children:[g&&i(H,{toggleDialog:y,save:w,title:"importKey",description:"importKeysDescription"}),!k?.trim().startsWith("{")&&i(f,{name:"config.publicKeySignatureVerifierKeyId",label:e("validatingPublicKeyId"),labelIcon:e("validatingPublicKeyIdHelp"),readOnly:r}),i(P,{name:"config.publicKeySignatureVerifier",label:e("validatingPublicKey"),labelIcon:e("validatingPublicKeyHelp"),rules:{required:e("required")},readOnly:r}),!r&&i(q,{fieldId:"kc-import-certificate-button",children:i(x,{variant:"secondary","data-testid":"import-certificate-button",onClick:()=>b(!0),children:e("import")})})]})]})};export{W as J};
//# sourceMappingURL=JwksSettings-DiafDiDg.js.map
