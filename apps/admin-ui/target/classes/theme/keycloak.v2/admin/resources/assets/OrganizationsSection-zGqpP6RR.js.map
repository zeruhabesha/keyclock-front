{"version":3,"file":"OrganizationsSection-zGqpP6RR.js","sources":["../../../../../../../src/organizations/OrganizationsSection.tsx"],"sourcesContent":["import OrganizationRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/organizationRepresentation\";\r\nimport {\r\n  ListEmptyState,\r\n  OrganizationTable,\r\n  useAlerts,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  PageSection,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { toEditOrganization } from \"../organizations/routes/EditOrganization\";\r\nimport { toAddOrganization } from \"./routes/AddOrganization\";\r\n\r\nexport default function OrganizationSection() {\r\n  const { adminClient } = useAdminClient();\r\n  const { realm } = useRealm();\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const navigate = useNavigate();\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [selectedOrg, setSelectedOrg] = useState<OrganizationRepresentation>();\r\n\r\n  async function loader(first?: number, max?: number, search?: string) {\r\n    return await adminClient.organizations.find({ first, max, search });\r\n  }\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"organizationDelete\",\r\n    messageKey: \"organizationDeleteConfirm\",\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.organizations.delById({\r\n          id: selectedOrg!.id!,\r\n        });\r\n        addAlert(t(\"organizationDeletedSuccess\"));\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"organizationDeleteError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <ViewHeader\r\n        titleKey=\"organizationsList\"\r\n        subKey=\"organizationsExplain\"\r\n        divider\r\n      />\r\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n        <DeleteConfirm />\r\n        <OrganizationTable\r\n          link={({ organization, children }) => (\r\n            <Link\r\n              key={organization.id}\r\n              to={toEditOrganization({\r\n                realm,\r\n                id: organization.id!,\r\n                tab: \"settings\",\r\n              })}\r\n            >\r\n              {children}\r\n            </Link>\r\n          )}\r\n          key={key}\r\n          loader={loader}\r\n          searchPlaceholderKey=\"searchOrganization\"\r\n          isPaginated\r\n          toolbarItem={\r\n            <ToolbarItem>\r\n              <Button\r\n                data-testid=\"addOrganization\"\r\n                component={(props) => (\r\n                  <Link {...props} to={toAddOrganization({ realm })} />\r\n                )}\r\n              >\r\n                {t(\"createOrganization\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n          }\r\n          onDelete={(org) => {\r\n            setSelectedOrg(org);\r\n            toggleDeleteDialog();\r\n          }}\r\n        >\r\n          <ListEmptyState\r\n            message={t(\"emptyOrganizations\")}\r\n            instructions={t(\"emptyOrganizationsInstructions\")}\r\n            primaryActionText={t(\"createOrganization\")}\r\n            onPrimaryAction={() => navigate(toAddOrganization({ realm }))}\r\n          />\r\n        </OrganizationTable>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["OrganizationSection","adminClient","useAdminClient","realm","useRealm","t","useTranslation","addAlert","addError","useAlerts","navigate","useNavigate","key","setKey","useState","refresh","selectedOrg","setSelectedOrg","loader","first","max","search","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","error","jsxs","Fragment","jsx","ViewHeader","PageSection","OrganizationTable","organization","children","Link","toEditOrganization","ToolbarItem","Button","props","toAddOrganization","org","ListEmptyState"],"mappings":"qVAsBA,SAAwBA,GAAsB,CAC5C,KAAM,CAAE,YAAAC,CAAA,EAAgBC,EAAA,EAClB,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZ,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAAE,SAAAC,EAAU,SAAAC,CAAA,EAAaC,EAAA,EACzBC,EAAWC,EAAA,EAEX,CAACC,EAAKC,CAAM,EAAIC,EAAS,CAAC,EAC1BC,EAAU,IAAMF,EAAOD,EAAM,CAAC,EAE9B,CAACI,EAAaC,CAAc,EAAIH,EAAA,EAEtC,eAAeI,EAAOC,EAAgBC,EAAcC,EAAiB,CACnE,OAAO,MAAMpB,EAAY,cAAc,KAAK,CAAE,MAAAkB,EAAO,IAAAC,EAAK,OAAAC,EAAQ,CACpE,CAEA,KAAM,CAACC,EAAoBC,CAAa,EAAIC,EAAiB,CAC3D,SAAU,qBACV,WAAY,4BACZ,oBAAqB,SACrB,sBAAuBC,EAAc,OACrC,UAAW,SAAY,CACrB,GAAI,CACF,MAAMxB,EAAY,cAAc,QAAQ,CACtC,GAAIe,EAAa,EAAA,CAClB,EACDT,EAASF,EAAE,4BAA4B,CAAC,EACxCU,EAAA,CACF,OAASW,EAAO,CACdlB,EAAS,0BAA2BkB,CAAK,CAC3C,CACF,CAAA,CACD,EAED,OACEC,EAAAC,EAAA,CACE,SAAA,CAAAC,EAACC,EAAA,CACC,SAAS,oBACT,OAAO,uBACP,QAAO,EAAA,CAAA,EAETH,EAACI,EAAA,CAAY,QAAQ,QAAQ,UAAU,cACrC,SAAA,CAAAF,EAACN,EAAA,EAAc,EACfM,EAACG,EAAA,CACC,KAAM,CAAC,CAAE,aAAAC,EAAc,SAAAC,KACrBL,EAACM,EAAA,CAEC,GAAIC,EAAmB,CACrB,MAAAjC,EACA,GAAI8B,EAAa,GACjB,IAAK,UAAA,CACN,EAEA,SAAAC,CAAA,EAPID,EAAa,EAAA,EAWtB,OAAAf,EACA,qBAAqB,qBACrB,YAAW,GACX,cACGmB,EAAA,CACC,SAAAR,EAACS,EAAA,CACC,cAAY,kBACZ,UAAYC,GACVV,EAACM,EAAA,CAAM,GAAGI,EAAO,GAAIC,EAAkB,CAAE,MAAArC,CAAA,CAAO,CAAA,CAAG,EAGpD,WAAE,oBAAoB,CAAA,CAAA,EAE3B,EAEF,SAAWsC,GAAQ,CACjBxB,EAAewB,CAAG,EAClBnB,EAAA,CACF,EAEA,SAAAO,EAACa,EAAA,CACC,QAASrC,EAAE,oBAAoB,EAC/B,aAAcA,EAAE,gCAAgC,EAChD,kBAAmBA,EAAE,oBAAoB,EACzC,gBAAiB,IAAMK,EAAS8B,EAAkB,CAAE,MAAArC,CAAA,CAAO,CAAC,CAAA,CAAA,CAC9D,EA1BKS,CAAA,CA2BP,CAAA,CACF,CAAA,EACF,CAEJ"}