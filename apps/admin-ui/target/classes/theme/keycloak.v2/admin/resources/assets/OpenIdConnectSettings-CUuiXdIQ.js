import{jsxs as n,Fragment as u,jsx as o}from"react/jsx-runtime";import{u as y,a as h,a0 as v,aE as E,O as F,a7 as x,W as C}from"./main-o1hptXRo.js";import{J as D}from"./JsonFileUpload-CXVaTh71.js";import{D as S}from"./DiscoveryEndpointField-CeImOp4h.js";import{D as O}from"./OIDCGeneralSettings-ItScBFVN.js";const j=({isOIDC:a})=>{const{adminClient:l}=y(),{t}=h(),d="oidc",{setValue:c,setError:m,clearErrors:p,formState:{errors:i}}=v(),f=e=>{Object.keys(e).map(r=>c(`config.${r}`,e[r]))},g=async e=>{if(p("discoveryError"),!e)return;const r=new FormData;r.append("providerId",d),r.append("file",new Blob([JSON.stringify(e)]));try{const s=await l.identityProviders.importFromUrl(r);f(s)}catch(s){m("discoveryError",{type:"manual",message:s.message})}};return n(u,{children:[o(E,{headingLevel:"h2",size:"xl",className:"kc-form-panel__title",children:t(a?"oidcSettings":"oAuthSettings")}),o(S,{id:"oidc",fileUpload:n(F,{label:t("importConfig"),fieldId:"kc-import-config",labelIcon:o(C,{helpText:t("importConfigHelp"),fieldLabelId:"importConfig"}),children:[o(D,{id:"kc-import-config",helpText:t("identity=providers-help:jsonFileUpload"),hideDefaultPreview:!0,unWrap:!0,validated:i.discoveryError?"error":"default",onChange:e=>g(e)}),i.discoveryError&&o(x,{message:i.discoveryError.message})]}),children:e=>o(O,{readOnly:e,isOIDC:a})})]})};export{j as O};
//# sourceMappingURL=OpenIdConnectSettings-CUuiXdIQ.js.map
