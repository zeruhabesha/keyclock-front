{"version":3,"file":"GroupsSection-B6FLgJ--.js","sources":["../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/Drawer/DrawerPanelBody.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/Drawer/DrawerHead.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.1/node_modules/@patternfly/react-styles/css/components/TreeView/tree-view.mjs","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TreeView/TreeViewList.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TreeView/TreeViewListItem.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TreeView/TreeViewRoot.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TreeView/TreeView.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-icons@5.4_f39c5b970058b42208dac3bfc1f9d8fb/node_modules/@patternfly/react-icons/dist/esm/icons/tree-icon.js","../../../../../../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/unionBy.js","../../../../../../../src/components/bread-crumb/GroupBreadCrumbs.tsx","../../../../../../../src/groups/groupIdUtils.ts","../../../../../../../src/groups/GroupAttributes.tsx","../../../../../../../src/groups/GroupRoleMapping.tsx","../../../../../../../src/groups/GroupsModal.tsx","../../../../../../../src/groups/components/DeleteGroup.tsx","../../../../../../../src/groups/components/GroupToolbar.tsx","../../../../../../../src/groups/components/MoveDialog.tsx","../../../../../../../src/groups/GroupTable.tsx","../../../../../../../src/groups/MembershipsModal.tsx","../../../../../../../src/groups/Members.tsx","../../../../../../../src/groups/components/GroupTree.tsx","../../../../../../../src/groups/GroupsSection.tsx"],"sourcesContent":["import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Drawer/drawer.mjs';\nimport { css } from '@patternfly/react-styles';\nexport const DrawerPanelBody = (_a) => {\n    var { className = '', children, hasNoPadding = false } = _a, props = __rest(_a, [\"className\", \"children\", \"hasNoPadding\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(styles.drawerBody, hasNoPadding && styles.modifiers.noPadding, className) }, props), children));\n};\nDrawerPanelBody.displayName = 'DrawerPanelBody';\n//# sourceMappingURL=DrawerPanelBody.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Drawer/drawer.mjs';\nimport { css } from '@patternfly/react-styles';\nimport { DrawerPanelBody } from './DrawerPanelBody';\nexport const DrawerHead = (_a) => {\n    var { className = '', children, hasNoPadding = false } = _a, props = __rest(_a, [\"className\", \"children\", \"hasNoPadding\"]);\n    return (React.createElement(DrawerPanelBody, { hasNoPadding: hasNoPadding },\n        React.createElement(\"div\", Object.assign({ className: css(styles.drawerHead, className) }, props), children)));\n};\nDrawerHead.displayName = 'DrawerHead';\n//# sourceMappingURL=DrawerHead.js.map","import './tree-view.css';\nexport default {\n  \"badge\": \"pf-v5-c-badge\",\n  \"dirRtl\": \"pf-v5-m-dir-rtl\",\n  \"modifiers\": {\n    \"compact\": \"pf-m-compact\",\n    \"guides\": \"pf-m-guides\",\n    \"expanded\": \"pf-m-expanded\",\n    \"noBackground\": \"pf-m-no-background\",\n    \"current\": \"pf-m-current\",\n    \"read\": \"pf-m-read\",\n    \"selectable\": \"pf-m-selectable\",\n    \"truncate\": \"pf-m-truncate\"\n  },\n  \"themeDark\": \"pf-v5-theme-dark\",\n  \"treeView\": \"pf-v5-c-tree-view\",\n  \"treeViewAction\": \"pf-v5-c-tree-view__action\",\n  \"treeViewContent\": \"pf-v5-c-tree-view__content\",\n  \"treeViewListItem\": \"pf-v5-c-tree-view__list-item\",\n  \"treeViewNode\": \"pf-v5-c-tree-view__node\",\n  \"treeViewNodeCheck\": \"pf-v5-c-tree-view__node-check\",\n  \"treeViewNodeContainer\": \"pf-v5-c-tree-view__node-container\",\n  \"treeViewNodeContent\": \"pf-v5-c-tree-view__node-content\",\n  \"treeViewNodeCount\": \"pf-v5-c-tree-view__node-count\",\n  \"treeViewNodeIcon\": \"pf-v5-c-tree-view__node-icon\",\n  \"treeViewNodeText\": \"pf-v5-c-tree-view__node-text\",\n  \"treeViewNodeTitle\": \"pf-v5-c-tree-view__node-title\",\n  \"treeViewNodeToggle\": \"pf-v5-c-tree-view__node-toggle\",\n  \"treeViewNodeToggleIcon\": \"pf-v5-c-tree-view__node-toggle-icon\",\n  \"treeViewSearch\": \"pf-v5-c-tree-view__search\"\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport { Divider } from '../Divider';\nimport styles from '@patternfly/react-styles/css/components/TreeView/tree-view.mjs';\nexport const TreeViewList = (_a) => {\n    var { isNested = false, isMultiSelectable = false, toolbar, children, 'aria-label': ariaLabel, 'aria-labelledby': ariaLabelledby } = _a, props = __rest(_a, [\"isNested\", \"isMultiSelectable\", \"toolbar\", \"children\", 'aria-label', 'aria-labelledby']);\n    return (React.createElement(React.Fragment, null,\n        toolbar && (React.createElement(React.Fragment, null,\n            toolbar,\n            React.createElement(Divider, null))),\n        React.createElement(\"ul\", Object.assign({ className: css(`${styles.treeView}__list`), role: isNested ? 'group' : 'tree', \"aria-multiselectable\": isNested ? undefined : isMultiSelectable, \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledby }, props), children)));\n};\nTreeViewList.displayName = 'TreeViewList';\n//# sourceMappingURL=TreeViewList.js.map","import React, { useState, useEffect } from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/TreeView/tree-view.mjs';\nimport AngleRightIcon from '@patternfly/react-icons/dist/esm/icons/angle-right-icon';\nimport { Badge } from '../Badge';\nimport { GenerateId } from '../../helpers/GenerateId/GenerateId';\nconst TreeViewListItemBase = ({ name, title, id, isExpanded, defaultExpanded = false, children = null, onSelect, onExpand, onCollapse, onCheck, hasCheckbox = false, checkProps = {\n    checked: false\n}, hasBadge = false, customBadgeContent, badgeProps = { isRead: true }, isSelectable = false, isCompact, activeItems = [], itemData, parentItem, icon, expandedIcon, action, compareItems, \n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nuseMemo }) => {\n    const [internalIsExpanded, setIsExpanded] = useState(defaultExpanded);\n    useEffect(() => {\n        if (isExpanded !== undefined && isExpanded !== null) {\n            setIsExpanded(isExpanded);\n        }\n        else if (defaultExpanded !== undefined && defaultExpanded !== null) {\n            setIsExpanded(internalIsExpanded || defaultExpanded);\n        }\n    }, [isExpanded, defaultExpanded]);\n    let Component = 'button';\n    if (hasCheckbox) {\n        Component = 'label';\n    }\n    else if (isSelectable) {\n        Component = 'div';\n    }\n    const ToggleComponent = hasCheckbox || isSelectable ? 'button' : 'span';\n    const renderToggle = (randomId) => (React.createElement(ToggleComponent, Object.assign({ className: css(styles.treeViewNodeToggle), onClick: (evt) => {\n            if (isSelectable || hasCheckbox) {\n                if (internalIsExpanded) {\n                    onCollapse && onCollapse(evt, itemData, parentItem);\n                }\n                else {\n                    onExpand && onExpand(evt, itemData, parentItem);\n                }\n                setIsExpanded(!internalIsExpanded);\n            }\n            if (isSelectable) {\n                evt.stopPropagation();\n            }\n        } }, ((hasCheckbox || isSelectable) && { 'aria-labelledby': `label-${randomId}` }), (ToggleComponent === 'button' && { type: 'button' }), { tabIndex: -1 }),\n        React.createElement(\"span\", { className: css(styles.treeViewNodeToggleIcon) },\n            React.createElement(AngleRightIcon, { \"aria-hidden\": \"true\" }))));\n    const isCheckboxChecked = checkProps.checked === null ? false : checkProps.checked;\n    const renderCheck = (randomId) => (React.createElement(\"span\", { className: css(styles.treeViewNodeCheck) },\n        React.createElement(\"input\", Object.assign({ type: \"checkbox\", onChange: (evt) => onCheck && onCheck(evt, itemData, parentItem), onClick: (evt) => evt.stopPropagation(), ref: (elem) => elem && (elem.indeterminate = checkProps.checked === null) }, checkProps, { checked: isCheckboxChecked, id: randomId, tabIndex: -1 }))));\n    const iconRendered = (React.createElement(\"span\", { className: css(styles.treeViewNodeIcon) },\n        !internalIsExpanded && icon,\n        internalIsExpanded && (expandedIcon || icon)));\n    const renderNodeContent = () => {\n        const content = (React.createElement(React.Fragment, null,\n            isCompact && title && React.createElement(\"span\", { className: css(styles.treeViewNodeTitle) }, title),\n            isSelectable ? (React.createElement(\"button\", { tabIndex: -1, className: css(styles.treeViewNodeText), type: \"button\" }, name)) : (React.createElement(\"span\", { className: css(styles.treeViewNodeText) }, name))));\n        return isCompact ? React.createElement(\"span\", { className: css(styles.treeViewNodeContent) }, content) : content;\n    };\n    const badgeRendered = (React.createElement(React.Fragment, null,\n        hasBadge && children && (React.createElement(\"span\", { className: css(styles.treeViewNodeCount) },\n            React.createElement(Badge, Object.assign({}, badgeProps), customBadgeContent ? customBadgeContent : children.props.data.length))),\n        hasBadge && !children && customBadgeContent !== undefined && (React.createElement(\"span\", { className: css(styles.treeViewNodeCount) },\n            React.createElement(Badge, Object.assign({}, badgeProps), customBadgeContent)))));\n    const isSelected = (!children || isSelectable) &&\n        activeItems &&\n        activeItems.length > 0 &&\n        activeItems.some((item) => compareItems && item && compareItems(item, itemData));\n    return (React.createElement(\"li\", Object.assign({ id: id, className: css(styles.treeViewListItem, internalIsExpanded && styles.modifiers.expanded), \"aria-expanded\": internalIsExpanded, role: \"treeitem\", tabIndex: -1 }, (hasCheckbox && { 'aria-checked': isCheckboxChecked }), (!hasCheckbox && { 'aria-selected': isSelected })),\n        React.createElement(\"div\", { className: css(styles.treeViewContent) },\n            React.createElement(GenerateId, { prefix: isSelectable ? 'selectable-id' : 'checkbox-id' }, (randomId) => (React.createElement(Component, Object.assign({ className: css(styles.treeViewNode, children && (isSelectable || hasCheckbox) && styles.modifiers.selectable, isSelected && styles.modifiers.current), onClick: (evt) => {\n                    if (!hasCheckbox) {\n                        onSelect && onSelect(evt, itemData, parentItem);\n                        if (!isSelectable && children && evt.isDefaultPrevented() !== true) {\n                            if (internalIsExpanded) {\n                                onCollapse && onCollapse(evt, itemData, parentItem);\n                            }\n                            else {\n                                onExpand && onExpand(evt, itemData, parentItem);\n                            }\n                            setIsExpanded(!internalIsExpanded);\n                        }\n                    }\n                } }, (hasCheckbox && { htmlFor: randomId }), ((hasCheckbox || (isSelectable && children)) && { id: `label-${randomId}` }), (Component === 'button' && { type: 'button' })),\n                React.createElement(\"span\", { className: css(styles.treeViewNodeContainer) },\n                    children && renderToggle(randomId),\n                    hasCheckbox && renderCheck(randomId),\n                    icon && iconRendered,\n                    renderNodeContent(),\n                    badgeRendered)))),\n            action && React.createElement(\"div\", { className: css(styles.treeViewAction) }, action)),\n        internalIsExpanded && children));\n};\nexport const TreeViewListItem = React.memo(TreeViewListItemBase, (prevProps, nextProps) => {\n    if (!nextProps.useMemo) {\n        return false;\n    }\n    const prevIncludes = prevProps.activeItems &&\n        prevProps.activeItems.length > 0 &&\n        prevProps.activeItems.some((item) => prevProps.compareItems && item && prevProps.compareItems(item, prevProps.itemData));\n    const nextIncludes = nextProps.activeItems &&\n        nextProps.activeItems.length > 0 &&\n        nextProps.activeItems.some((item) => nextProps.compareItems && item && nextProps.compareItems(item, nextProps.itemData));\n    if (prevIncludes || nextIncludes) {\n        return false;\n    }\n    if (prevProps.name !== nextProps.name ||\n        prevProps.title !== nextProps.title ||\n        prevProps.id !== nextProps.id ||\n        prevProps.isExpanded !== nextProps.isExpanded ||\n        prevProps.defaultExpanded !== nextProps.defaultExpanded ||\n        prevProps.onSelect !== nextProps.onSelect ||\n        prevProps.onCheck !== nextProps.onCheck ||\n        prevProps.onExpand !== nextProps.onExpand ||\n        prevProps.onCollapse !== nextProps.onCollapse ||\n        prevProps.hasCheckbox !== nextProps.hasCheckbox ||\n        prevProps.checkProps !== nextProps.checkProps ||\n        prevProps.hasBadge !== nextProps.hasBadge ||\n        prevProps.customBadgeContent !== nextProps.customBadgeContent ||\n        prevProps.badgeProps !== nextProps.badgeProps ||\n        prevProps.isCompact !== nextProps.isCompact ||\n        prevProps.icon !== nextProps.icon ||\n        prevProps.expandedIcon !== nextProps.expandedIcon ||\n        prevProps.action !== nextProps.action ||\n        prevProps.parentItem !== nextProps.parentItem ||\n        prevProps.itemData !== nextProps.itemData) {\n        return false;\n    }\n    return true;\n});\nTreeViewListItem.displayName = 'TreeViewListItem';\n//# sourceMappingURL=TreeViewListItem.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/TreeView/tree-view.mjs';\nimport { canUseDOM } from '../../helpers/util';\nimport { handleArrows } from '../../helpers';\nimport { KeyTypes } from '../../helpers/constants';\nclass TreeViewRoot extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.displayName = 'TreeViewRoot';\n        this.treeRef = React.createRef();\n        this.handleKeys = (event) => {\n            var _a, _b, _c, _d, _e, _f, _g;\n            if (!this.treeRef.current.contains(event.target) ||\n                !event.target.classList.contains(styles.treeViewNode)) {\n                return;\n            }\n            const activeElement = document.activeElement;\n            const key = event.key;\n            const treeItems = Array.from((_a = this.treeRef.current) === null || _a === void 0 ? void 0 : _a.getElementsByClassName(styles.treeViewNode)).filter((el) => !el.classList.contains('pf-m-disabled'));\n            if (key === KeyTypes.Space) {\n                activeElement.click();\n                event.preventDefault();\n            }\n            handleArrows(event, treeItems, (element) => activeElement === element, undefined, [], undefined, true, true);\n            if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n                const isExpandable = (_c = (_b = activeElement === null || activeElement === void 0 ? void 0 : activeElement.firstElementChild) === null || _b === void 0 ? void 0 : _b.firstElementChild) === null || _c === void 0 ? void 0 : _c.classList.contains(styles.treeViewNodeToggle);\n                const isExpanded = (_d = activeElement === null || activeElement === void 0 ? void 0 : activeElement.closest('li')) === null || _d === void 0 ? void 0 : _d.classList.contains('pf-m-expanded');\n                if (key === 'ArrowLeft') {\n                    if (isExpandable && isExpanded) {\n                        activeElement.click();\n                    }\n                    else {\n                        const parentList = (_e = activeElement === null || activeElement === void 0 ? void 0 : activeElement.closest('ul')) === null || _e === void 0 ? void 0 : _e.parentElement;\n                        if ((parentList === null || parentList === void 0 ? void 0 : parentList.tagName) !== 'DIV') {\n                            const parentButton = parentList === null || parentList === void 0 ? void 0 : parentList.querySelector('button');\n                            activeElement.tabIndex = -1;\n                            if (parentButton) {\n                                parentButton.tabIndex = 0;\n                                parentButton.focus();\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (isExpandable && !isExpanded) {\n                        activeElement.tabIndex = -1;\n                        activeElement.click();\n                        const childElement = (_g = (_f = activeElement === null || activeElement === void 0 ? void 0 : activeElement.closest('li')) === null || _f === void 0 ? void 0 : _f.querySelector('ul > li')) === null || _g === void 0 ? void 0 : _g.querySelector('button');\n                        if (childElement) {\n                            childElement.tabIndex = 0;\n                            childElement.focus();\n                        }\n                    }\n                }\n                event.preventDefault();\n            }\n        };\n        this.handleKeysCheckbox = (event) => {\n            var _a, _b, _c, _d, _e;\n            if (!this.treeRef.current.contains(event.target)) {\n                return;\n            }\n            const activeElement = document.activeElement;\n            const key = event.key;\n            if (key === KeyTypes.Space) {\n                activeElement.click();\n                event.preventDefault();\n            }\n            const treeNodes = Array.from((_a = this.treeRef.current) === null || _a === void 0 ? void 0 : _a.getElementsByClassName(styles.treeViewNode));\n            handleArrows(event, treeNodes, (element) => element.contains(activeElement), (element) => element.querySelector('button,input'), [], undefined, true, true);\n            if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n                if (key === 'ArrowLeft') {\n                    if ((activeElement === null || activeElement === void 0 ? void 0 : activeElement.tagName) === 'INPUT') {\n                        ((_b = activeElement === null || activeElement === void 0 ? void 0 : activeElement.parentElement) === null || _b === void 0 ? void 0 : _b.previousSibling) &&\n                            activeElement.parentElement.previousSibling.focus();\n                    }\n                    else if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.previousSibling) {\n                        if (((_c = activeElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.tagName) === 'SPAN') {\n                            activeElement.previousSibling.firstChild.focus();\n                        }\n                        else {\n                            activeElement.previousSibling.focus();\n                        }\n                    }\n                }\n                else {\n                    if ((activeElement === null || activeElement === void 0 ? void 0 : activeElement.tagName) === 'INPUT') {\n                        ((_d = activeElement.parentElement) === null || _d === void 0 ? void 0 : _d.nextSibling) && activeElement.parentElement.nextSibling.focus();\n                    }\n                    else if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.nextSibling) {\n                        if (((_e = activeElement.nextElementSibling) === null || _e === void 0 ? void 0 : _e.tagName) === 'SPAN') {\n                            activeElement.nextSibling.firstChild.focus();\n                        }\n                        else {\n                            activeElement.nextSibling.focus();\n                        }\n                    }\n                }\n                event.preventDefault();\n            }\n        };\n        this.variantStyleModifiers = {\n            default: '',\n            compact: styles.modifiers.compact,\n            compactNoBackground: [styles.modifiers.compact, styles.modifiers.noBackground]\n        };\n    }\n    componentDidMount() {\n        var _a;\n        if (canUseDOM) {\n            window.addEventListener('keydown', this.props.hasCheckboxes || this.props.hasSelectableNodes ? this.handleKeysCheckbox : this.handleKeys);\n        }\n        if (this.props.hasCheckboxes || this.props.hasSelectableNodes) {\n            const firstToggle = this.treeRef.current.getElementsByClassName(styles.treeViewNodeToggle)[0];\n            if (firstToggle) {\n                firstToggle.tabIndex = 0;\n            }\n            if (this.props.hasCheckboxes) {\n                const firstInput = this.treeRef.current.getElementsByTagName('INPUT')[0];\n                if (firstInput) {\n                    firstInput.tabIndex = 0;\n                }\n            }\n            if (this.props.hasSelectableNodes) {\n                const firstTextButton = this.treeRef.current.getElementsByClassName(styles.treeViewNodeText)[0];\n                if (firstTextButton) {\n                    firstTextButton.tabIndex = 0;\n                }\n            }\n        }\n        else {\n            ((_a = this.treeRef.current) === null || _a === void 0 ? void 0 : _a.getElementsByClassName(styles.treeViewNode)[0]).tabIndex = 0;\n        }\n    }\n    componentWillUnmount() {\n        if (canUseDOM) {\n            window.removeEventListener('keydown', this.props.hasCheckboxes || this.props.hasSelectableNodes ? this.handleKeysCheckbox : this.handleKeys);\n        }\n    }\n    render() {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const _a = this.props, { children, hasCheckboxes, hasGuides, variant, className, hasSelectableNodes } = _a, props = __rest(_a, [\"children\", \"hasCheckboxes\", \"hasGuides\", \"variant\", \"className\", \"hasSelectableNodes\"]);\n        return (React.createElement(\"div\", Object.assign({ className: css(styles.treeView, hasGuides && styles.modifiers.guides, this.variantStyleModifiers[variant], className), ref: this.treeRef }, props), children));\n    }\n}\nexport { TreeViewRoot };\n//# sourceMappingURL=TreeViewRoot.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { TreeViewList } from './TreeViewList';\nimport { TreeViewListItem } from './TreeViewListItem';\nimport { TreeViewRoot } from './TreeViewRoot';\nexport const TreeView = (_a) => {\n    var { data, isNested = false, hasCheckboxes = false, hasBadges = false, hasGuides = false, hasSelectableNodes = false, variant = 'default', defaultAllExpanded = false, allExpanded, icon, isMultiSelectable = false, expandedIcon, parentItem, onSelect, onCheck, onExpand, onCollapse, toolbar, activeItems, compareItems = (item, itemToCheck) => item.id === itemToCheck.id, className, useMemo, 'aria-label': ariaLabel, 'aria-labelledby': ariaLabelledby } = _a, props = __rest(_a, [\"data\", \"isNested\", \"hasCheckboxes\", \"hasBadges\", \"hasGuides\", \"hasSelectableNodes\", \"variant\", \"defaultAllExpanded\", \"allExpanded\", \"icon\", \"isMultiSelectable\", \"expandedIcon\", \"parentItem\", \"onSelect\", \"onCheck\", \"onExpand\", \"onCollapse\", \"toolbar\", \"activeItems\", \"compareItems\", \"className\", \"useMemo\", 'aria-label', 'aria-labelledby']);\n    const treeViewList = (React.createElement(TreeViewList, { isNested: isNested, toolbar: toolbar, isMultiSelectable: isMultiSelectable, \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledby }, data.map((item) => {\n        var _a, _b;\n        return (React.createElement(TreeViewListItem, Object.assign({ key: ((_a = item.id) === null || _a === void 0 ? void 0 : _a.toString()) || ((_b = item.name) === null || _b === void 0 ? void 0 : _b.toString()), name: item.name, title: item.title, id: item.id, isExpanded: allExpanded, isSelectable: hasSelectableNodes, defaultExpanded: item.defaultExpanded !== undefined ? item.defaultExpanded : defaultAllExpanded, onSelect: onSelect, onCheck: onCheck, onExpand: onExpand, onCollapse: onCollapse, hasCheckbox: item.hasCheckbox !== undefined ? item.hasCheckbox : hasCheckboxes, checkProps: item.checkProps, hasBadge: item.hasBadge !== undefined ? item.hasBadge : hasBadges, customBadgeContent: item.customBadgeContent, badgeProps: item.badgeProps, activeItems: activeItems, parentItem: parentItem, itemData: item, icon: item.icon !== undefined ? item.icon : icon, expandedIcon: item.expandedIcon !== undefined ? item.expandedIcon : expandedIcon, action: item.action, compareItems: compareItems, isCompact: variant === 'compact' || variant === 'compactNoBackground', useMemo: useMemo }, (item.children && {\n            children: (React.createElement(TreeView, { data: item.children, isNested: true, parentItem: item, hasCheckboxes: hasCheckboxes, hasBadges: hasBadges, hasGuides: hasGuides, hasSelectableNodes: hasSelectableNodes, variant: variant, allExpanded: allExpanded, defaultAllExpanded: defaultAllExpanded, onSelect: onSelect, onCheck: onCheck, onExpand: onExpand, onCollapse: onCollapse, activeItems: activeItems, icon: icon, expandedIcon: expandedIcon }))\n        }))));\n    })));\n    return (React.createElement(React.Fragment, null, parentItem ? (treeViewList) : (React.createElement(TreeViewRoot, Object.assign({ hasSelectableNodes: hasSelectableNodes, hasCheckboxes: hasCheckboxes, hasGuides: hasGuides, variant: variant, className: className }, props), treeViewList))));\n};\nTreeView.displayName = 'TreeView';\n//# sourceMappingURL=TreeView.js.map","import { createIcon } from '../createIcon';\n\nexport const TreeIconConfig = {\n  name: 'TreeIcon',\n  height: 512,\n  width: 384,\n  svgPath: 'M378.31 378.49L298.42 288h30.63c9.01 0 16.98-5 20.78-13.06 3.8-8.04 2.55-17.26-3.28-24.05L268.42 160h28.89c9.1 0 17.3-5.35 20.86-13.61 3.52-8.13 1.86-17.59-4.24-24.08L203.66 4.83c-6.03-6.45-17.28-6.45-23.32 0L70.06 122.31c-6.1 6.49-7.75 15.95-4.24 24.08C69.38 154.65 77.59 160 86.69 160h28.89l-78.14 90.91c-5.81 6.78-7.06 15.99-3.27 24.04C37.97 283 45.93 288 54.95 288h30.63L5.69 378.49c-6 6.79-7.36 16.09-3.56 24.26 3.75 8.05 12 13.25 21.01 13.25H160v24.45l-30.29 48.4c-5.32 10.64 2.42 23.16 14.31 23.16h95.96c11.89 0 19.63-12.52 14.31-23.16L224 440.45V416h136.86c9.01 0 17.26-5.2 21.01-13.25 3.8-8.17 2.44-17.47-3.56-24.26z',\n  yOffset: 0,\n  xOffset: 0,\n};\n\nexport const TreeIcon = createIcon(TreeIconConfig);\n\nexport default TreeIcon;","import baseFlatten from './_baseFlatten.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport last from './last.js';\n\n/**\n * This method is like `_.union` except that it accepts `iteratee` which is\n * invoked for each element of each `arrays` to generate the criterion by\n * which uniqueness is computed. Result values are chosen from the first\n * array in which the value occurs. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nvar unionBy = baseRest(function(arrays) {\n  var iteratee = last(arrays);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2));\n});\n\nexport default unionBy;\n","import { useEffect } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Breadcrumb, BreadcrumbItem } from \"@patternfly/react-core\";\r\n\r\nimport { useSubGroups } from \"../../groups/SubGroupsContext\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\n\r\nexport const GroupBreadCrumbs = () => {\r\n  const { t } = useTranslation();\r\n  const { clear, remove, subGroups } = useSubGroups();\r\n  const { realm } = useRealm();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const { pathname } = location;\r\n\r\n    if (!pathname.includes(\"/groups\") || pathname.endsWith(\"/groups\")) {\r\n      clear();\r\n    }\r\n  }, [location]);\r\n\r\n  return subGroups.length !== 0 ? (\r\n    <Breadcrumb>\r\n      <BreadcrumbItem key=\"home\">\r\n        <Link to={`/${realm}/groups`}>{t(\"groups\")}</Link>\r\n      </BreadcrumbItem>\r\n      {subGroups.map((group, i) => {\r\n        const isLastGroup = i === subGroups.length - 1;\r\n        return (\r\n          <BreadcrumbItem key={group.id} isActive={isLastGroup}>\r\n            {!isLastGroup && (\r\n              <Link\r\n                to={location.pathname.substring(\r\n                  0,\r\n                  location.pathname.indexOf(group.id!) + group.id!.length,\r\n                )}\r\n                onClick={() => remove(group)}\r\n              >\r\n                {group.name}\r\n              </Link>\r\n            )}\r\n            {isLastGroup &&\r\n              (group.id === \"search\" ? group.name : t(\"groupDetails\"))}\r\n          </BreadcrumbItem>\r\n        );\r\n      })}\r\n    </Breadcrumb>\r\n  ) : null;\r\n};\r\n","export const getId = (pathname: string) => {\r\n  const pathParts = pathname.substring(1).split(\"/\");\r\n  return pathParts.length > 1 ? pathParts.splice(2) : undefined;\r\n};\r\n\r\nexport const getLastId = (pathname: string) => {\r\n  const pathParts = getId(pathname);\r\n  return pathParts ? pathParts[pathParts.length - 1] : undefined;\r\n};\r\n","import GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  PageSection,\r\n  PageSectionVariants,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport {\r\n  AttributeForm,\r\n  AttributesForm,\r\n} from \"../components/key-value-form/AttributeForm\";\r\nimport { arrayToKeyValue } from \"../components/key-value-form/key-value-convert\";\r\nimport { convertFormValuesToObject } from \"../util\";\r\nimport { getLastId } from \"./groupIdUtils\";\r\n\r\nexport const GroupAttributes = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const form = useForm<AttributeForm>({\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const location = useLocation();\r\n  const id = getLastId(location.pathname)!;\r\n  const [currentGroup, setCurrentGroup] = useState<GroupRepresentation>();\r\n\r\n  useFetch(\r\n    () => adminClient.groups.findOne({ id }),\r\n    (group) => {\r\n      form.reset({\r\n        attributes: arrayToKeyValue(group?.attributes!),\r\n      });\r\n      setCurrentGroup(group);\r\n    },\r\n    [id],\r\n  );\r\n\r\n  const save = async (attributeForm: AttributeForm) => {\r\n    try {\r\n      const attributes = convertFormValuesToObject(attributeForm).attributes;\r\n      await adminClient.groups.update(\r\n        { id: id! },\r\n        { ...currentGroup, attributes },\r\n      );\r\n\r\n      setCurrentGroup({ ...currentGroup, attributes });\r\n      addAlert(t(\"groupUpdated\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"groupUpdateError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageSection variant={PageSectionVariants.light}>\r\n      <AttributesForm\r\n        form={form}\r\n        save={save}\r\n        fineGrainedAccess={currentGroup?.access?.manage}\r\n        reset={() =>\r\n          form.reset({\r\n            attributes: arrayToKeyValue(currentGroup?.attributes!),\r\n          })\r\n        }\r\n      />\r\n    </PageSection>\r\n  );\r\n};\r\n","import type { RoleMappingPayload } from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\r\nimport { AlertVariant } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { RoleMapping, Row } from \"../components/role-mapping/RoleMapping\";\r\n\r\ntype GroupRoleMappingProps = {\r\n  id: string;\r\n  name: string;\r\n};\r\n\r\nexport const GroupRoleMapping = ({ id, name }: GroupRoleMappingProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const assignRoles = async (rows: Row[]) => {\r\n    try {\r\n      const realmRoles = rows\r\n        .filter((row) => row.client === undefined)\r\n        .map((row) => row.role as RoleMappingPayload)\r\n        .flat();\r\n      await adminClient.groups.addRealmRoleMappings({\r\n        id,\r\n        roles: realmRoles,\r\n      });\r\n      await Promise.all(\r\n        rows\r\n          .filter((row) => row.client !== undefined)\r\n          .map((row) =>\r\n            adminClient.groups.addClientRoleMappings({\r\n              id,\r\n              clientUniqueId: row.client!.id!,\r\n              roles: [row.role as RoleMappingPayload],\r\n            }),\r\n          ),\r\n      );\r\n      addAlert(t(\"roleMappingUpdatedSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"roleMappingUpdatedError\", error);\r\n    }\r\n  };\r\n\r\n  return <RoleMapping name={name} id={id} type=\"groups\" save={assignRoles} />;\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport {\r\n  FormSubmitButton,\r\n  TextControl,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Alert,\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  Modal,\r\n  ModalVariant,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\n\r\ntype GroupsModalProps = {\r\n  id?: string;\r\n  rename?: GroupRepresentation;\r\n  duplicateId?: string;\r\n  handleModalToggle: () => void;\r\n  refresh: (group?: GroupRepresentation) => void;\r\n};\r\n\r\ntype RoleMappingPayload = {\r\n  id: string;\r\n  name?: string;\r\n  clientUniqueId?: string;\r\n};\r\n\r\ntype ClientRoleMapping = {\r\n  clientId: string;\r\n  roles: RoleMappingPayload[];\r\n};\r\n\r\nexport const GroupsModal = ({\r\n  id,\r\n  rename,\r\n  duplicateId,\r\n  handleModalToggle,\r\n  refresh,\r\n}: GroupsModalProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n  const [duplicateGroupDetails, setDuplicateGroupDetails] =\r\n    useState<GroupRepresentation | null>(null);\r\n\r\n  const form = useForm({\r\n    defaultValues: {\r\n      name: rename?.name || \"\",\r\n      description: rename?.description || \"\",\r\n    },\r\n  });\r\n  const { handleSubmit, formState } = form;\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (duplicateId) {\r\n        return adminClient.groups.findOne({ id: duplicateId });\r\n      }\r\n    },\r\n    (group) => {\r\n      if (group) {\r\n        setDuplicateGroupDetails(group);\r\n        form.reset({ name: t(\"copyOf\", { name: group.name }) });\r\n      }\r\n    },\r\n    [duplicateId],\r\n  );\r\n\r\n  const fetchClientRoleMappings = async (groupId: string) => {\r\n    try {\r\n      const clientRoleMappings: ClientRoleMapping[] = [];\r\n      const clients = await adminClient.clients.find();\r\n\r\n      for (const client of clients) {\r\n        const roles = await adminClient.groups.listClientRoleMappings({\r\n          id: groupId,\r\n          clientUniqueId: client.id!,\r\n        });\r\n\r\n        const clientRoles = roles\r\n          .filter((role) => role.id && role.name)\r\n          .map((role) => ({\r\n            id: role.id!,\r\n            name: role.name!,\r\n          }));\r\n\r\n        if (clientRoles.length > 0) {\r\n          clientRoleMappings.push({ clientId: client.id!, roles: clientRoles });\r\n        }\r\n      }\r\n\r\n      return clientRoleMappings;\r\n    } catch (error) {\r\n      addError(\"couldNotFetchClientRoleMappings\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const duplicateGroup = async (\r\n    sourceGroup: GroupRepresentation,\r\n    parentId?: string,\r\n    isSubGroup: boolean = false,\r\n  ) => {\r\n    try {\r\n      const newGroup: GroupRepresentation = {\r\n        ...sourceGroup,\r\n        name: isSubGroup\r\n          ? sourceGroup.name\r\n          : t(\"copyOf\", { name: sourceGroup.name }),\r\n        ...(parentId ? {} : { attributes: duplicateGroupDetails?.attributes }),\r\n      };\r\n\r\n      delete newGroup.id;\r\n\r\n      const createdGroup = parentId\r\n        ? await adminClient.groups.createChildGroup({ id: parentId }, newGroup)\r\n        : await adminClient.groups.create(newGroup);\r\n\r\n      const members = await adminClient.groups.listMembers({\r\n        id: sourceGroup.id!,\r\n      });\r\n\r\n      for (const member of members) {\r\n        await adminClient.users.addToGroup({\r\n          id: member.id!,\r\n          groupId: createdGroup.id,\r\n        });\r\n      }\r\n\r\n      if (isFeatureEnabled(Feature.AdminFineGrainedAuthz)) {\r\n        const permissions = await adminClient.groups.listPermissions({\r\n          id: sourceGroup.id!,\r\n        });\r\n\r\n        if (permissions) {\r\n          await adminClient.groups.updatePermission(\r\n            { id: createdGroup.id },\r\n            permissions,\r\n          );\r\n        }\r\n      }\r\n\r\n      const realmRoles = await adminClient.groups.listRealmRoleMappings({\r\n        id: sourceGroup.id!,\r\n      });\r\n\r\n      const realmRolesPayload: RoleMappingPayload[] = realmRoles.map(\r\n        (role) => ({ id: role.id!, name: role.name! }),\r\n      );\r\n\r\n      const clientRoleMappings = await fetchClientRoleMappings(sourceGroup.id!);\r\n\r\n      const clientRolesPayload: RoleMappingPayload[] =\r\n        clientRoleMappings?.flatMap((clientRoleMapping) =>\r\n          clientRoleMapping.roles.map((role) => ({\r\n            id: role.id!,\r\n            name: role.name!,\r\n            clientUniqueId: clientRoleMapping.clientId,\r\n          })),\r\n        );\r\n\r\n      const rolesToAssign: RoleMappingPayload[] = [\r\n        ...realmRolesPayload,\r\n        ...clientRolesPayload,\r\n      ];\r\n\r\n      await assignRoles(rolesToAssign, createdGroup.id);\r\n\r\n      const subGroups = await adminClient.groups.listSubGroups({\r\n        parentId: sourceGroup.id!,\r\n      });\r\n\r\n      for (const childGroup of subGroups) {\r\n        const childAttributes = childGroup.attributes;\r\n        await duplicateGroup(\r\n          { ...childGroup, attributes: childAttributes },\r\n          createdGroup.id,\r\n          true,\r\n        );\r\n      }\r\n\r\n      return createdGroup;\r\n    } catch (error) {\r\n      addError(\"couldNotDuplicateGroup\", error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const assignRoles = async (roles: RoleMappingPayload[], groupId: string) => {\r\n    try {\r\n      const realmRoles = roles.filter(\r\n        (role) => !role.clientUniqueId && role.name,\r\n      );\r\n      const clientRoles = roles.filter(\r\n        (role) => role.clientUniqueId && role.name,\r\n      );\r\n\r\n      await adminClient.groups.addRealmRoleMappings({\r\n        id: groupId,\r\n        roles: realmRoles.map(({ id, name }) => ({ id, name: name! })),\r\n      });\r\n\r\n      await Promise.all(\r\n        clientRoles.map((clientRole) => {\r\n          if (clientRole.clientUniqueId && clientRole.name) {\r\n            return adminClient.groups.addClientRoleMappings({\r\n              id: groupId,\r\n              clientUniqueId: clientRole.clientUniqueId,\r\n              roles: [{ id: clientRole.id, name: clientRole.name }],\r\n            });\r\n          }\r\n          return Promise.resolve();\r\n        }),\r\n      );\r\n    } catch (error) {\r\n      addError(\"roleMappingUpdatedError\", error);\r\n    }\r\n  };\r\n\r\n  const submitForm = async (group: GroupRepresentation) => {\r\n    group.name = group.name?.trim();\r\n\r\n    try {\r\n      if (duplicateId && duplicateGroupDetails) {\r\n        await duplicateGroup(duplicateGroupDetails);\r\n      } else if (!id) {\r\n        await adminClient.groups.create(group);\r\n      } else if (rename) {\r\n        await adminClient.groups.update(\r\n          { id },\r\n          { ...rename, name: group.name, description: group.description },\r\n        );\r\n      } else {\r\n        await adminClient.groups.updateChildGroup({ id }, group);\r\n      }\r\n\r\n      refresh(rename ? { ...rename, ...group } : undefined);\r\n      handleModalToggle();\r\n      addAlert(\r\n        t(\r\n          rename\r\n            ? \"groupUpdated\"\r\n            : duplicateId\r\n              ? \"groupDuplicated\"\r\n              : \"groupCreated\",\r\n        ),\r\n        AlertVariant.success,\r\n      );\r\n    } catch (error) {\r\n      addError(\"couldNotCreateGroup\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={\r\n        rename\r\n          ? t(\"editGroup\")\r\n          : duplicateId\r\n            ? t(\"duplicateAGroup\")\r\n            : t(\"createAGroup\")\r\n      }\r\n      isOpen\r\n      onClose={handleModalToggle}\r\n      actions={[\r\n        <FormSubmitButton\r\n          formState={formState}\r\n          data-testid={`${rename ? \"rename\" : duplicateId ? \"duplicate\" : \"create\"}Group`}\r\n          key=\"confirm\"\r\n          form=\"group-form\"\r\n          allowInvalid\r\n          allowNonDirty\r\n        >\r\n          {t(rename ? \"edit\" : duplicateId ? \"duplicate\" : \"create\")}\r\n        </FormSubmitButton>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={handleModalToggle}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form id=\"group-form\" isHorizontal onSubmit={handleSubmit(submitForm)}>\r\n          {duplicateId && (\r\n            <Alert\r\n              variant=\"warning\"\r\n              component=\"h2\"\r\n              isInline\r\n              title={t(\"duplicateGroupWarning\")}\r\n            />\r\n          )}\r\n          <TextControl\r\n            name=\"name\"\r\n            label={t(\"name\")}\r\n            rules={{ required: t(\"required\") }}\r\n            autoFocus\r\n          />\r\n          <TextControl name=\"description\" label={t(\"description\")} />\r\n        </Form>\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport { ButtonVariant } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\r\n\r\ntype DeleteConfirmProps = {\r\n  selectedRows: GroupRepresentation[];\r\n  show: boolean;\r\n  toggleDialog: () => void;\r\n  refresh: () => void;\r\n};\r\n\r\nexport const DeleteGroup = ({\r\n  selectedRows,\r\n  show,\r\n  toggleDialog,\r\n  refresh,\r\n}: DeleteConfirmProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const multiDelete = async () => {\r\n    try {\r\n      for (const group of selectedRows) {\r\n        await adminClient.groups.del({\r\n          id: group.id!,\r\n        });\r\n      }\r\n      refresh();\r\n      addAlert(t(\"groupDeleted\", { count: selectedRows.length }));\r\n    } catch (error) {\r\n      addError(\"groupDeleteError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ConfirmDialogModal\r\n      titleKey={t(\"deleteConfirmTitle\", { count: selectedRows.length })}\r\n      messageKey={t(\"deleteConfirmGroup\", {\r\n        count: selectedRows.length,\r\n        groupName: selectedRows[0]?.name,\r\n      })}\r\n      continueButtonLabel=\"delete\"\r\n      continueButtonVariant={ButtonVariant.danger}\r\n      onConfirm={multiDelete}\r\n      open={show}\r\n      toggleDialog={toggleDialog}\r\n    />\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { EllipsisVIcon } from \"@patternfly/react-icons\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { useSubGroups } from \"../SubGroupsContext\";\r\n\r\ntype GroupToolbarProps = {\r\n  toggleCreate: () => void;\r\n  toggleDelete: () => void;\r\n  kebabDisabled: boolean;\r\n};\r\n\r\nexport const GroupToolbar = ({\r\n  toggleCreate,\r\n  toggleDelete,\r\n  kebabDisabled,\r\n}: GroupToolbarProps) => {\r\n  const { t } = useTranslation();\r\n  const { currentGroup } = useSubGroups();\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-users\") || currentGroup()?.access?.manage;\r\n\r\n  const [openKebab, toggleKebab] = useToggle();\r\n\r\n  if (!isManager) return <div />;\r\n\r\n  return (\r\n    <>\r\n      <ToolbarItem>\r\n        <Button\r\n          data-testid=\"openCreateGroupModal\"\r\n          variant=\"primary\"\r\n          onClick={toggleCreate}\r\n        >\r\n          {t(\"createGroup\")}\r\n        </Button>\r\n      </ToolbarItem>\r\n      <ToolbarItem>\r\n        <Dropdown\r\n          onOpenChange={toggleKebab}\r\n          toggle={(ref) => (\r\n            <MenuToggle\r\n              data-testid=\"kebab\"\r\n              ref={ref}\r\n              isExpanded={openKebab}\r\n              onClick={toggleKebab}\r\n              isDisabled={kebabDisabled}\r\n              variant=\"plain\"\r\n              aria-label=\"Actions\"\r\n            >\r\n              <EllipsisVIcon />\r\n            </MenuToggle>\r\n          )}\r\n          isOpen={openKebab}\r\n        >\r\n          <DropdownList>\r\n            <DropdownItem\r\n              key=\"action\"\r\n              component=\"button\"\r\n              onClick={() => {\r\n                toggleDelete();\r\n                toggleKebab();\r\n              }}\r\n            >\r\n              {t(\"delete\")}\r\n            </DropdownItem>\r\n          </DropdownList>\r\n        </Dropdown>\r\n      </ToolbarItem>\r\n    </>\r\n  );\r\n};\r\n","import type KeycloakAdminClient from \"@keycloak/keycloak-admin-client\";\r\nimport type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { GroupPickerDialog } from \"../../components/group/GroupPickerDialog\";\r\n\r\ntype MoveDialogProps = {\r\n  source: GroupRepresentation;\r\n  onClose: () => void;\r\n  refresh: () => void;\r\n};\r\n\r\nconst moveToRoot = (\r\n  adminClient: KeycloakAdminClient,\r\n  source: GroupRepresentation,\r\n) =>\r\n  source.id\r\n    ? adminClient.groups.updateRoot(source)\r\n    : adminClient.groups.create(source);\r\n\r\nconst moveToGroup = async (\r\n  adminClient: KeycloakAdminClient,\r\n  source: GroupRepresentation,\r\n  dest: GroupRepresentation,\r\n) => adminClient.groups.updateChildGroup({ id: dest.id! }, source);\r\n\r\nexport const MoveDialog = ({ source, onClose, refresh }: MoveDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const moveGroup = async (group?: GroupRepresentation[]) => {\r\n    try {\r\n      await (group\r\n        ? moveToGroup(adminClient, source, group[0])\r\n        : moveToRoot(adminClient, source));\r\n      refresh();\r\n      addAlert(t(\"moveGroupSuccess\"));\r\n    } catch (error) {\r\n      addError(\"moveGroupError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GroupPickerDialog\r\n      type=\"selectOne\"\r\n      filterGroups={[source]}\r\n      text={{\r\n        title: \"moveToGroup\",\r\n        ok: \"moveHere\",\r\n      }}\r\n      onClose={onClose}\r\n      onConfirm={moveGroup}\r\n      isMove\r\n    />\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport {\r\n  GroupQuery,\r\n  SubGroupQuery,\r\n} from \"@keycloak/keycloak-admin-client/lib/resources/groups\";\r\nimport { SearchInput, ToolbarItem } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { GroupsModal } from \"./GroupsModal\";\r\nimport { useSubGroups } from \"./SubGroupsContext\";\r\nimport { DeleteGroup } from \"./components/DeleteGroup\";\r\nimport { GroupToolbar } from \"./components/GroupToolbar\";\r\nimport { MoveDialog } from \"./components/MoveDialog\";\r\nimport { getLastId } from \"./groupIdUtils\";\r\n\r\ntype GroupTableProps = {\r\n  refresh: () => void;\r\n};\r\n\r\nexport const GroupTable = ({ refresh: viewRefresh }: GroupTableProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const [selectedRows, setSelectedRows] = useState<GroupRepresentation[]>([]);\r\n  const [rename, setRename] = useState<GroupRepresentation>();\r\n  const [isCreateModalOpen, toggleCreateOpen] = useToggle();\r\n  const [duplicateId, setDuplicateId] = useState<string>();\r\n  const [showDelete, toggleShowDelete] = useToggle();\r\n  const [move, setMove] = useState<GroupRepresentation>();\r\n  const { currentGroup } = useSubGroups();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [search, setSearch] = useState<string>();\r\n  const location = useLocation();\r\n  const id = getLastId(location.pathname);\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-users\") || currentGroup()?.access?.manage;\r\n\r\n  const loader = async (first?: number, max?: number) => {\r\n    let groupsData = undefined;\r\n    if (id) {\r\n      const args: SubGroupQuery = {\r\n        search: search || \"\",\r\n        first: first,\r\n        max: max,\r\n        parentId: id,\r\n      };\r\n      groupsData = await adminClient.groups.listSubGroups(args);\r\n    } else {\r\n      const args: GroupQuery = {\r\n        search: search || \"\",\r\n        first: first || undefined,\r\n        max: max || undefined,\r\n      };\r\n      groupsData = await adminClient.groups.find(args);\r\n    }\r\n\r\n    return groupsData;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DeleteGroup\r\n        show={showDelete}\r\n        toggleDialog={toggleShowDelete}\r\n        selectedRows={selectedRows}\r\n        refresh={() => {\r\n          refresh();\r\n          viewRefresh();\r\n          setSelectedRows([]);\r\n        }}\r\n      />\r\n      {rename && (\r\n        <GroupsModal\r\n          id={rename.id}\r\n          rename={rename}\r\n          refresh={() => {\r\n            refresh();\r\n            viewRefresh();\r\n          }}\r\n          handleModalToggle={() => setRename(undefined)}\r\n        />\r\n      )}\r\n      {isCreateModalOpen && (\r\n        <GroupsModal\r\n          id={selectedRows[0]?.id || id}\r\n          handleModalToggle={toggleCreateOpen}\r\n          refresh={() => {\r\n            setSelectedRows([]);\r\n            refresh();\r\n            viewRefresh();\r\n          }}\r\n        />\r\n      )}\r\n      {duplicateId && (\r\n        <GroupsModal\r\n          id={duplicateId}\r\n          duplicateId={duplicateId}\r\n          refresh={() => {\r\n            refresh();\r\n            viewRefresh();\r\n          }}\r\n          handleModalToggle={() => setDuplicateId(undefined)}\r\n        />\r\n      )}\r\n      {move && (\r\n        <MoveDialog\r\n          source={move}\r\n          refresh={() => {\r\n            setMove(undefined);\r\n            refresh();\r\n            viewRefresh();\r\n          }}\r\n          onClose={() => setMove(undefined)}\r\n        />\r\n      )}\r\n      <KeycloakDataTable\r\n        key={`${id}${key}`}\r\n        onSelect={(rows) => setSelectedRows([...rows])}\r\n        canSelectAll\r\n        loader={loader}\r\n        ariaLabelKey=\"groups\"\r\n        isPaginated\r\n        isSearching={!!search}\r\n        toolbarItem={\r\n          <>\r\n            <ToolbarItem>\r\n              <SearchInput\r\n                data-testid=\"group-search\"\r\n                placeholder={t(\"filterGroups\")}\r\n                value={search}\r\n                onChange={(_, value) => {\r\n                  setSearch(value);\r\n                  if (value === \"\") {\r\n                    refresh();\r\n                  }\r\n                }}\r\n                onSearch={refresh}\r\n                onClear={() => {\r\n                  setSearch(\"\");\r\n                  refresh();\r\n                }}\r\n              />\r\n            </ToolbarItem>\r\n            <GroupToolbar\r\n              toggleCreate={toggleCreateOpen}\r\n              toggleDelete={toggleShowDelete}\r\n              kebabDisabled={selectedRows!.length === 0}\r\n            />\r\n          </>\r\n        }\r\n        actions={\r\n          !isManager\r\n            ? []\r\n            : [\r\n                {\r\n                  title: t(\"edit\"),\r\n                  onRowClick: async (group) => {\r\n                    setRename(group);\r\n                    return false;\r\n                  },\r\n                },\r\n                {\r\n                  title: t(\"moveTo\"),\r\n                  onRowClick: async (group) => {\r\n                    setMove(group);\r\n                    return false;\r\n                  },\r\n                },\r\n                {\r\n                  title: t(\"createChildGroup\"),\r\n                  onRowClick: async (group) => {\r\n                    setSelectedRows([group]);\r\n                    toggleCreateOpen();\r\n                    return false;\r\n                  },\r\n                },\r\n                ...(!id\r\n                  ? [\r\n                      {\r\n                        title: t(\"duplicate\"),\r\n                        onRowClick: async (group: GroupRepresentation) => {\r\n                          setDuplicateId(group.id);\r\n                          return false;\r\n                        },\r\n                      },\r\n                    ]\r\n                  : []),\r\n                {\r\n                  isSeparator: true,\r\n                },\r\n                {\r\n                  title: t(\"delete\"),\r\n                  onRowClick: async (group: GroupRepresentation) => {\r\n                    setSelectedRows([group]);\r\n                    toggleShowDelete();\r\n                    return true;\r\n                  },\r\n                },\r\n              ]\r\n        }\r\n        columns={[\r\n          {\r\n            name: \"name\",\r\n            displayKey: \"groupName\",\r\n            cellRenderer: (group) =>\r\n              group.access?.view ? (\r\n                <Link key={group.id} to={`${location.pathname}/${group.id}`}>\r\n                  {group.name}\r\n                </Link>\r\n              ) : (\r\n                <span>{group.name}</span>\r\n              ),\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            hasIcon={true}\r\n            message={t(`noGroupsInThis${id ? \"SubGroup\" : \"Realm\"}`)}\r\n            instructions={t(\r\n              `noGroupsInThis${id ? \"SubGroup\" : \"Realm\"}Instructions`,\r\n            )}\r\n            primaryActionText={t(\"createGroup\")}\r\n            onPrimaryAction={toggleCreateOpen}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { Modal, ModalVariant } from \"@patternfly/react-core\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Checkbox,\r\n  Popover,\r\n} from \"@patternfly/react-core\";\r\nimport { QuestionCircleIcon } from \"@patternfly/react-icons\";\r\nimport { cellWidth } from \"@patternfly/react-table\";\r\nimport { useHelp } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { sortBy, uniqBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { GroupPath } from \"../components/group/GroupPath\";\r\n\r\ntype CredentialDataDialogProps = {\r\n  user: UserRepresentation;\r\n  onClose: () => void;\r\n};\r\n\r\nexport const MembershipsModal = ({\r\n  user,\r\n  onClose,\r\n}: CredentialDataDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const { adminClient } = useAdminClient();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [isDirectMembership, setDirectMembership] = useState(true);\r\n  const { enabled } = useHelp();\r\n  const alphabetize = (groupsList: GroupRepresentation[]) => {\r\n    return sortBy(groupsList, (group) => group.path?.toUpperCase());\r\n  };\r\n\r\n  const loader = async (first?: number, max?: number, search?: string) => {\r\n    const params: { [name: string]: string | number } = {\r\n      first: first!,\r\n      max: max!,\r\n    };\r\n\r\n    const searchParam = search || \"\";\r\n    if (searchParam) {\r\n      params.search = searchParam;\r\n    }\r\n\r\n    const joinedUserGroups = await adminClient.users.listGroups({\r\n      ...params,\r\n      id: user.id!,\r\n    });\r\n\r\n    const indirect: GroupRepresentation[] = [];\r\n    if (!isDirectMembership)\r\n      joinedUserGroups.forEach((g) => {\r\n        const paths = (\r\n          g.path?.substring(1).match(/((~\\/)|[^/])+/g) || []\r\n        ).slice(0, -1);\r\n\r\n        indirect.push(\r\n          ...paths.map((p) => ({\r\n            name: p,\r\n            path: g.path?.substring(0, g.path.indexOf(p) + p.length),\r\n          })),\r\n        );\r\n      });\r\n\r\n    return alphabetize(uniqBy([...joinedUserGroups, ...indirect], \"path\"));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.large}\r\n      title={t(\"showMembershipsTitle\", { username: user.username })}\r\n      data-testid=\"showMembershipsDialog\"\r\n      isOpen\r\n      onClose={onClose}\r\n      actions={[\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant={ButtonVariant.primary}\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        className=\"keycloak_user-section_groups-table\"\r\n        isPaginated\r\n        ariaLabelKey=\"roleList\"\r\n        searchPlaceholderKey=\"searchGroup\"\r\n        toolbarItem={\r\n          <>\r\n            <Checkbox\r\n              label={t(\"directMembership\")}\r\n              key=\"direct-membership-check\"\r\n              id=\"kc-direct-membership-checkbox\"\r\n              onChange={() => {\r\n                setDirectMembership(!isDirectMembership);\r\n                refresh();\r\n              }}\r\n              isChecked={isDirectMembership}\r\n              className=\"pf-v5-u-mt-sm\"\r\n            />\r\n            {enabled && (\r\n              <Popover\r\n                aria-label=\"Basic popover\"\r\n                position=\"bottom\"\r\n                bodyContent={<div>{t(\"whoWillAppearPopoverTextUsers\")}</div>}\r\n              >\r\n                <Button\r\n                  variant=\"link\"\r\n                  className=\"kc-who-will-appear-button\"\r\n                  key=\"who-will-appear-button\"\r\n                  icon={<QuestionCircleIcon />}\r\n                >\r\n                  {t(\"whoWillAppearLinkTextUsers\")}\r\n                </Button>\r\n              </Popover>\r\n            )}\r\n          </>\r\n        }\r\n        columns={[\r\n          {\r\n            name: \"groupMembership\",\r\n            displayKey: \"groupMembership\",\r\n            cellRenderer: (group: GroupRepresentation) => group.name || \"-\",\r\n            transforms: [cellWidth(40)],\r\n          },\r\n          {\r\n            name: \"path\",\r\n            displayKey: \"path\",\r\n            cellRenderer: (group: GroupRepresentation) => (\r\n              <GroupPath group={group} />\r\n            ),\r\n            transforms: [cellWidth(45)],\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            hasIcon\r\n            message={t(\"noGroupMemberships\")}\r\n            instructions={t(\"noGroupMembershipsText\")}\r\n          />\r\n        }\r\n      />\r\n    </Modal>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { SubGroupQuery } from \"@keycloak/keycloak-admin-client/lib/resources/groups\";\r\nimport {\r\n  Action,\r\n  KeycloakDataTable,\r\n  ListEmptyState,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  Label,\r\n  MenuToggle,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { EllipsisVIcon, InfoCircleIcon } from \"@patternfly/react-icons\";\r\nimport { uniqBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { toUser } from \"../user/routes/User\";\r\nimport { emptyFormatter } from \"../util\";\r\nimport { MemberModal } from \"./MembersModal\";\r\nimport { useSubGroups } from \"./SubGroupsContext\";\r\nimport { getLastId } from \"./groupIdUtils\";\r\nimport { MembershipsModal } from \"./MembershipsModal\";\r\nimport useToggle from \"../utils/useToggle\";\r\n\r\nconst UserDetailLink = (user: UserRepresentation) => {\r\n  const { realm } = useRealm();\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Link key={user.id} to={toUser({ realm, id: user.id!, tab: \"settings\" })}>\r\n      {user.username}{\" \"}\r\n      {!user.enabled && (\r\n        <Label color=\"red\" icon={<InfoCircleIcon />}>\r\n          {t(\"disabled\")}\r\n        </Label>\r\n      )}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport const Members = () => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const location = useLocation();\r\n  const id = getLastId(location.pathname);\r\n  const [includeSubGroup, setIncludeSubGroup] = useState(false);\r\n  const { currentGroup: group } = useSubGroups();\r\n  const [currentGroup, setCurrentGroup] = useState<GroupRepresentation>();\r\n  const [addMembers, setAddMembers] = useState(false);\r\n  const [isKebabOpen, setIsKebabOpen] = useState(false);\r\n  const [selectedRows, setSelectedRows] = useState<UserRepresentation[]>([]);\r\n  const [selectedUser, setSelectedUser] = useState<UserRepresentation>();\r\n  const [showMemberships, toggleShowMemberships] = useToggle();\r\n  const { hasAccess } = useAccess();\r\n\r\n  useFetch(\r\n    () => adminClient.groups.findOne({ id: group()!.id! }),\r\n    setCurrentGroup,\r\n    [],\r\n  );\r\n\r\n  const isManager =\r\n    hasAccess(\"manage-users\") || currentGroup?.access!.manageMembership;\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(new Date().getTime());\r\n\r\n  // this queries the subgroups using the new search paradigm but doesn't\r\n  // account for pagination and therefore isn't going to scale well\r\n  const getSubGroups = async (groupId?: string, count = 0) => {\r\n    let nestedGroups: GroupRepresentation[] = [];\r\n    if (!count || !groupId) {\r\n      return nestedGroups;\r\n    }\r\n    const args: SubGroupQuery = {\r\n      parentId: groupId,\r\n      first: 0,\r\n      max: count,\r\n    };\r\n    const subGroups: GroupRepresentation[] =\r\n      await adminClient.groups.listSubGroups(args);\r\n    nestedGroups = nestedGroups.concat(subGroups);\r\n\r\n    await Promise.all(\r\n      subGroups.map((g) => getSubGroups(g.id, g.subGroupCount)),\r\n    ).then((values: GroupRepresentation[][]) => {\r\n      values.forEach((groups) => (nestedGroups = nestedGroups.concat(groups)));\r\n    });\r\n    return nestedGroups;\r\n  };\r\n\r\n  const loader = async (first?: number, max?: number) => {\r\n    if (!id) {\r\n      return [];\r\n    }\r\n\r\n    let members = await adminClient.groups.listMembers({\r\n      id: id!,\r\n      briefRepresentation: true,\r\n      first,\r\n      max,\r\n    });\r\n\r\n    if (includeSubGroup && currentGroup?.subGroupCount && currentGroup.id) {\r\n      const subGroups = await getSubGroups(\r\n        currentGroup.id,\r\n        currentGroup.subGroupCount,\r\n      );\r\n      await Promise.all(\r\n        subGroups.map((g) =>\r\n          adminClient.groups.listMembers({\r\n            id: g.id!,\r\n            briefRepresentation: true,\r\n          }),\r\n        ),\r\n      ).then((values: UserRepresentation[][]) => {\r\n        values.forEach((users) => (members = members.concat(users)));\r\n      });\r\n      members = uniqBy(members, (member) => member.username);\r\n    }\r\n\r\n    return members;\r\n  };\r\n\r\n  if (!currentGroup) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {addMembers && (\r\n        <MemberModal\r\n          membersQuery={(first, max) =>\r\n            adminClient.groups.listMembers({ id: id!, first, max })\r\n          }\r\n          onAdd={async (selectedRows) => {\r\n            try {\r\n              await Promise.all(\r\n                selectedRows.map((user) =>\r\n                  adminClient.users.addToGroup({ id: user.id!, groupId: id! }),\r\n                ),\r\n              );\r\n              addAlert(t(\"usersAdded\", { count: selectedRows.length }));\r\n            } catch (error) {\r\n              addError(\"usersAddedError\", error);\r\n            }\r\n          }}\r\n          onClose={() => {\r\n            setAddMembers(false);\r\n            refresh();\r\n          }}\r\n        />\r\n      )}\r\n      {showMemberships && (\r\n        <MembershipsModal\r\n          onClose={() => {\r\n            toggleShowMemberships();\r\n          }}\r\n          user={selectedUser!}\r\n        />\r\n      )}\r\n      <KeycloakDataTable\r\n        data-testid=\"members-table\"\r\n        key={`${id}${key}${includeSubGroup}`}\r\n        loader={loader}\r\n        ariaLabelKey=\"members\"\r\n        isPaginated\r\n        canSelectAll\r\n        onSelect={(rows) => setSelectedRows([...rows])}\r\n        toolbarItem={\r\n          isManager && (\r\n            <>\r\n              <ToolbarItem>\r\n                <Button\r\n                  data-testid=\"addMember\"\r\n                  variant=\"primary\"\r\n                  onClick={() => setAddMembers(true)}\r\n                >\r\n                  {t(\"addMember\")}\r\n                </Button>\r\n              </ToolbarItem>\r\n              <ToolbarItem>\r\n                <Checkbox\r\n                  data-testid=\"includeSubGroupsCheck\"\r\n                  label={t(\"includeSubGroups\")}\r\n                  id=\"kc-include-sub-groups\"\r\n                  isChecked={includeSubGroup}\r\n                  onChange={() => setIncludeSubGroup(!includeSubGroup)}\r\n                />\r\n              </ToolbarItem>\r\n              <ToolbarItem>\r\n                <Dropdown\r\n                  onOpenChange={(isOpen) => setIsKebabOpen(isOpen)}\r\n                  toggle={(ref) => (\r\n                    <MenuToggle\r\n                      data-testid=\"kebab\"\r\n                      ref={ref}\r\n                      variant=\"plain\"\r\n                      onClick={() => setIsKebabOpen(!isKebabOpen)}\r\n                      isExpanded={isKebabOpen}\r\n                      isDisabled={selectedRows.length === 0}\r\n                      aria-label=\"Actions\"\r\n                    >\r\n                      <EllipsisVIcon />\r\n                    </MenuToggle>\r\n                  )}\r\n                  shouldFocusToggleOnSelect\r\n                  isOpen={isKebabOpen}\r\n                >\r\n                  <DropdownList>\r\n                    <DropdownItem\r\n                      key=\"action\"\r\n                      component=\"button\"\r\n                      onClick={async () => {\r\n                        try {\r\n                          await Promise.all(\r\n                            selectedRows.map((user) =>\r\n                              adminClient.users.delFromGroup({\r\n                                id: user.id!,\r\n                                groupId: id!,\r\n                              }),\r\n                            ),\r\n                          );\r\n                          setIsKebabOpen(false);\r\n                          addAlert(\r\n                            t(\"usersLeft\", { count: selectedRows.length }),\r\n                          );\r\n                        } catch (error) {\r\n                          addError(\"usersLeftError\", error);\r\n                        }\r\n\r\n                        refresh();\r\n                      }}\r\n                    >\r\n                      {t(\"leave\")}\r\n                    </DropdownItem>\r\n                  </DropdownList>\r\n                </Dropdown>\r\n              </ToolbarItem>\r\n            </>\r\n          )\r\n        }\r\n        actions={[\r\n          ...(isManager\r\n            ? [\r\n                {\r\n                  title: t(\"leave\"),\r\n                  onRowClick: async (user) => {\r\n                    try {\r\n                      await adminClient.users.delFromGroup({\r\n                        id: user.id!,\r\n                        groupId: id!,\r\n                      });\r\n                      addAlert(t(\"usersLeft\", { count: 1 }));\r\n                    } catch (error) {\r\n                      addError(\"usersLeftError\", error);\r\n                    }\r\n                    return true;\r\n                  },\r\n                } as Action<UserRepresentation>,\r\n              ]\r\n            : []),\r\n          {\r\n            title: t(\"showMemberships\"),\r\n            onRowClick: (user) => {\r\n              setSelectedUser(user);\r\n              toggleShowMemberships();\r\n            },\r\n          } as Action<UserRepresentation>,\r\n        ]}\r\n        columns={[\r\n          {\r\n            name: \"username\",\r\n            displayKey: \"name\",\r\n            cellRenderer: UserDetailLink,\r\n          },\r\n          {\r\n            name: \"email\",\r\n            displayKey: \"email\",\r\n            cellFormatters: [emptyFormatter()],\r\n          },\r\n          {\r\n            name: \"firstName\",\r\n            displayKey: \"firstName\",\r\n            cellFormatters: [emptyFormatter()],\r\n          },\r\n          {\r\n            name: \"lastName\",\r\n            displayKey: \"lastName\",\r\n            cellFormatters: [emptyFormatter()],\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"noUsersFound\")}\r\n            instructions={isManager ? t(\"emptyInstructions\") : undefined}\r\n            primaryActionText={isManager ? t(\"addMember\") : undefined}\r\n            onPrimaryAction={() => setAddMembers(true)}\r\n            secondaryActions={[\r\n              {\r\n                text: t(\"includeSubGroups\"),\r\n                onClick: () => setIncludeSubGroup(true),\r\n              },\r\n            ]}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  InputGroup,\r\n  InputGroupItem,\r\n  MenuToggle,\r\n  Spinner,\r\n  Tooltip,\r\n  TreeView,\r\n  TreeViewDataItem,\r\n} from \"@patternfly/react-core\";\r\n\r\nimport {\r\n  PaginatingTableToolbar,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { AngleRightIcon, EllipsisVIcon } from \"@patternfly/react-icons\";\r\nimport { unionBy } from \"lodash-es\";\r\nimport { useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { fetchAdminUI } from \"../../context/auth/admin-ui-endpoint\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { GroupsModal } from \"../GroupsModal\";\r\nimport { useSubGroups } from \"../SubGroupsContext\";\r\nimport { toGroups } from \"../routes/Groups\";\r\nimport { DeleteGroup } from \"./DeleteGroup\";\r\nimport { MoveDialog } from \"./MoveDialog\";\r\n\r\nimport \"./group-tree.css\";\r\n\r\ntype ExtendedTreeViewDataItem = TreeViewDataItem & {\r\n  access?: Record<string, boolean>;\r\n};\r\n\r\ntype GroupTreeContextMenuProps = {\r\n  group: GroupRepresentation;\r\n  refresh: () => void;\r\n};\r\n\r\nexport function countGroups(groups: GroupRepresentation[]) {\r\n  let count = groups.length;\r\n  for (const group of groups) {\r\n    if (group.subGroups) {\r\n      count += countGroups(group.subGroups);\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nconst GroupTreeContextMenu = ({\r\n  group,\r\n  refresh,\r\n}: GroupTreeContextMenuProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [isOpen, toggleOpen] = useToggle();\r\n  const [renameOpen, toggleRenameOpen] = useToggle();\r\n  const [createOpen, toggleCreateOpen] = useToggle();\r\n  const [moveOpen, toggleMoveOpen] = useToggle();\r\n  const [deleteOpen, toggleDeleteOpen] = useToggle();\r\n  const navigate = useNavigate();\r\n  const { realm } = useRealm();\r\n\r\n  return (\r\n    <>\r\n      {renameOpen && (\r\n        <GroupsModal\r\n          id={group.id}\r\n          rename={group}\r\n          refresh={() => {\r\n            navigate(toGroups({ realm }));\r\n            refresh();\r\n          }}\r\n          handleModalToggle={toggleRenameOpen}\r\n        />\r\n      )}\r\n      {createOpen && (\r\n        <GroupsModal\r\n          id={group.id}\r\n          handleModalToggle={toggleCreateOpen}\r\n          refresh={refresh}\r\n        />\r\n      )}\r\n      {moveOpen && (\r\n        <MoveDialog source={group} refresh={refresh} onClose={toggleMoveOpen} />\r\n      )}\r\n      <DeleteGroup\r\n        show={deleteOpen}\r\n        toggleDialog={toggleDeleteOpen}\r\n        selectedRows={[group]}\r\n        refresh={() => {\r\n          navigate(toGroups({ realm }));\r\n          refresh();\r\n        }}\r\n      />\r\n      <Dropdown\r\n        popperProps={{\r\n          position: \"right\",\r\n        }}\r\n        onOpenChange={toggleOpen}\r\n        toggle={(ref) => (\r\n          <MenuToggle\r\n            ref={ref}\r\n            onClick={toggleOpen}\r\n            isExpanded={isOpen}\r\n            variant=\"plain\"\r\n            aria-label=\"Actions\"\r\n          >\r\n            <EllipsisVIcon />\r\n          </MenuToggle>\r\n        )}\r\n        isOpen={isOpen}\r\n      >\r\n        <DropdownList>\r\n          <DropdownItem key=\"rename\" onClick={toggleRenameOpen}>\r\n            {t(\"edit\")}\r\n          </DropdownItem>\r\n          <DropdownItem key=\"move\" onClick={toggleMoveOpen}>\r\n            {t(\"moveTo\")}\r\n          </DropdownItem>\r\n          <DropdownItem key=\"create\" onClick={toggleCreateOpen}>\r\n            {t(\"createChildGroup\")}\r\n          </DropdownItem>\r\n          <Divider key=\"separator\" />\r\n          <DropdownItem key=\"delete\" onClick={toggleDeleteOpen}>\r\n            {t(\"delete\")}\r\n          </DropdownItem>\r\n        </DropdownList>\r\n      </Dropdown>\r\n    </>\r\n  );\r\n};\r\n\r\ntype GroupTreeProps = {\r\n  refresh: () => void;\r\n  canViewDetails: boolean;\r\n};\r\n\r\nconst SUBGROUP_COUNT = 50;\r\n\r\nconst TreeLoading = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <>\r\n      <Spinner size=\"sm\" /> {t(\"spinnerLoading\")}\r\n    </>\r\n  );\r\n};\r\n\r\nconst LOADING_TREE = [\r\n  {\r\n    name: <TreeLoading />,\r\n  },\r\n];\r\n\r\nexport const GroupTree = ({\r\n  refresh: viewRefresh,\r\n  canViewDetails,\r\n}: GroupTreeProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const navigate = useNavigate();\r\n  const { addAlert } = useAlerts();\r\n  const { hasAccess } = useAccess();\r\n\r\n  const [data, setData] = useState<ExtendedTreeViewDataItem[]>();\r\n  const { subGroups, clear } = useSubGroups();\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [max, setMax] = useState(20);\r\n  const [first, setFirst] = useState(0);\r\n  const prefFirst = useRef(0);\r\n  const prefMax = useRef(20);\r\n  const [count, setCount] = useState(0);\r\n  const [exact, setExact] = useState(false);\r\n  const [activeItem, setActiveItem] = useState<ExtendedTreeViewDataItem>();\r\n\r\n  const [firstSub, setFirstSub] = useState(0);\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => {\r\n    setKey(key + 1);\r\n    viewRefresh();\r\n  };\r\n\r\n  const mapGroup = (\r\n    group: GroupRepresentation,\r\n    refresh: () => void,\r\n  ): ExtendedTreeViewDataItem => {\r\n    const hasSubGroups = group.subGroupCount;\r\n    return {\r\n      id: group.id,\r\n      name: (\r\n        <Tooltip content={group.name}>\r\n          <span>{group.name}</span>\r\n        </Tooltip>\r\n      ),\r\n      access: group.access || {},\r\n      children: hasSubGroups\r\n        ? search.length === 0\r\n          ? LOADING_TREE\r\n          : group.subGroups?.map((g) => mapGroup(g, refresh))\r\n        : undefined,\r\n      action: (hasAccess(\"manage-users\") || group.access?.manage) && (\r\n        <GroupTreeContextMenu group={group} refresh={refresh} />\r\n      ),\r\n      defaultExpanded: subGroups.map((g) => g.id).includes(group.id),\r\n    };\r\n  };\r\n\r\n  useFetch(\r\n    async () => {\r\n      const groups = await fetchAdminUI<GroupRepresentation[]>(\r\n        adminClient,\r\n        \"groups\",\r\n        Object.assign(\r\n          {\r\n            first: `${first}`,\r\n            max: `${max + 1}`,\r\n            exact: `${exact}`,\r\n            global: `${search !== \"\"}`,\r\n          },\r\n          search === \"\" ? null : { search },\r\n        ),\r\n      );\r\n      let subGroups: GroupRepresentation[] = [];\r\n      if (activeItem) {\r\n        subGroups = await fetchAdminUI<GroupRepresentation[]>(\r\n          adminClient,\r\n          `groups/${activeItem.id}/children`,\r\n          {\r\n            first: `${firstSub}`,\r\n            max: `${SUBGROUP_COUNT}`,\r\n          },\r\n        );\r\n      }\r\n      return { groups, subGroups };\r\n    },\r\n    ({ groups, subGroups }) => {\r\n      if (activeItem) {\r\n        const found = findGroup(data || [], activeItem.id!, []);\r\n        if (found.length && subGroups.length) {\r\n          const foundTreeItem = found.pop()!;\r\n          foundTreeItem.children = [\r\n            ...(unionBy(foundTreeItem.children || []).splice(0, SUBGROUP_COUNT),\r\n            subGroups.map((g) => mapGroup(g, refresh), \"id\")),\r\n            ...(subGroups.length === SUBGROUP_COUNT\r\n              ? [\r\n                  {\r\n                    id: \"next\",\r\n                    name: (\r\n                      <Button\r\n                        variant=\"plain\"\r\n                        onClick={() => setFirstSub(firstSub + SUBGROUP_COUNT)}\r\n                      >\r\n                        <AngleRightIcon />\r\n                      </Button>\r\n                    ),\r\n                  },\r\n                ]\r\n              : []),\r\n          ];\r\n        }\r\n      }\r\n      if (search || prefFirst.current !== first || prefMax.current !== max) {\r\n        setData(groups.map((g) => mapGroup(g, refresh)));\r\n      } else {\r\n        setData(\r\n          unionBy(\r\n            data,\r\n            groups.map((g) => mapGroup(g, refresh)),\r\n            \"id\",\r\n          ),\r\n        );\r\n      }\r\n      setCount(countGroups(groups));\r\n      prefFirst.current = first;\r\n      prefMax.current = max;\r\n    },\r\n    [key, first, firstSub, max, search, exact, activeItem],\r\n  );\r\n\r\n  const findGroup = (\r\n    groups: ExtendedTreeViewDataItem[],\r\n    id: string,\r\n    path: ExtendedTreeViewDataItem[],\r\n  ) => {\r\n    for (let index = 0; index < groups.length; index++) {\r\n      const group = groups[index];\r\n      if (group.id === id) {\r\n        path.push(group);\r\n        return path;\r\n      }\r\n\r\n      if (group.children) {\r\n        path.push(group);\r\n        findGroup(group.children, id, path);\r\n        if (path[path.length - 1].id !== id) {\r\n          path.pop();\r\n        }\r\n      }\r\n    }\r\n    return path;\r\n  };\r\n\r\n  const nav = (item: TreeViewDataItem, data: ExtendedTreeViewDataItem[]) => {\r\n    if (item.id === \"next\") return;\r\n    setActiveItem(item);\r\n\r\n    const path = findGroup(data, item.id!, []);\r\n    if (!subGroups.every(({ id }) => path.find((t) => t.id === id))) clear();\r\n    if (\r\n      canViewDetails ||\r\n      path.at(-1)?.access?.view ||\r\n      subGroups.at(-1)?.access?.view\r\n    ) {\r\n      navigate(\r\n        toGroups({\r\n          realm,\r\n          id: path.map((g) => g.id).join(\"/\"),\r\n        }),\r\n      );\r\n    } else {\r\n      addAlert(t(\"noViewRights\"), AlertVariant.warning);\r\n      navigate(toGroups({ realm }));\r\n    }\r\n  };\r\n\r\n  return data ? (\r\n    <PaginatingTableToolbar\r\n      count={count}\r\n      first={first}\r\n      max={max}\r\n      onNextClick={setFirst}\r\n      onPreviousClick={setFirst}\r\n      onPerPageSelect={(first, max) => {\r\n        setFirst(first);\r\n        setMax(max);\r\n      }}\r\n      inputGroupName=\"searchForGroups\"\r\n      inputGroupPlaceholder={t(\"searchForGroups\")}\r\n      inputGroupOnEnter={setSearch}\r\n      toolbarItem={\r\n        <InputGroup className=\"pf-v5-u-pt-sm\">\r\n          <InputGroupItem>\r\n            <Checkbox\r\n              id=\"exact\"\r\n              data-testid=\"exact-search\"\r\n              name=\"exact\"\r\n              isChecked={exact}\r\n              onChange={(_event, value) => setExact(value)}\r\n              className=\"pf-v5-u-mr-xs\"\r\n            />\r\n          </InputGroupItem>\r\n          <InputGroupItem>\r\n            <label htmlFor=\"exact\" className=\"pf-v5-u-pl-sm\">\r\n              {t(\"exactSearch\")}\r\n            </label>\r\n          </InputGroupItem>\r\n        </InputGroup>\r\n      }\r\n    >\r\n      {data.length > 0 && (\r\n        <TreeView\r\n          data={data.slice(0, max)}\r\n          allExpanded={search.length > 0}\r\n          activeItems={activeItem ? [activeItem] : undefined}\r\n          hasGuides\r\n          hasSelectableNodes\r\n          className=\"keycloak_groups_treeview\"\r\n          onExpand={(_, item) => {\r\n            nav(item, data);\r\n          }}\r\n          onSelect={(_, item) => {\r\n            nav(item, data);\r\n          }}\r\n        />\r\n      )}\r\n    </PaginatingTableToolbar>\r\n  ) : (\r\n    <KeycloakSpinner />\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport { useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  Drawer,\r\n  DrawerContent,\r\n  DrawerContentBody,\r\n  DrawerHead,\r\n  DrawerPanelContent,\r\n  DropdownItem,\r\n  PageSection,\r\n  PageSectionVariants,\r\n  Tab,\r\n  TabTitleText,\r\n  Tabs,\r\n  Tooltip,\r\n} from \"@patternfly/react-core\";\r\nimport { AngleLeftIcon, TreeIcon } from \"@patternfly/react-icons\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { GroupBreadCrumbs } from \"../components/bread-crumb/GroupBreadCrumbs\";\r\nimport { PermissionsTab } from \"../components/permission-tab/PermissionTab\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { AdminEvents } from \"../events/AdminEvents\";\r\nimport helpUrls from \"../help-urls\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { GroupAttributes } from \"./GroupAttributes\";\r\nimport { GroupRoleMapping } from \"./GroupRoleMapping\";\r\nimport { GroupTable } from \"./GroupTable\";\r\nimport { GroupsModal } from \"./GroupsModal\";\r\nimport { Members } from \"./Members\";\r\nimport { useSubGroups } from \"./SubGroupsContext\";\r\nimport { DeleteGroup } from \"./components/DeleteGroup\";\r\nimport { GroupTree } from \"./components/GroupTree\";\r\nimport { getId, getLastId } from \"./groupIdUtils\";\r\nimport { toGroups } from \"./routes/Groups\";\r\n\r\nimport \"./GroupsSection.css\";\r\n\r\nexport default function GroupsSection() {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n\r\n  const { subGroups, setSubGroups, currentGroup } = useSubGroups();\r\n  const { realm } = useRealm();\r\n\r\n  const [rename, setRename] = useState<GroupRepresentation>();\r\n  const [deleteOpen, toggleDeleteOpen] = useToggle();\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const id = getLastId(location.pathname);\r\n\r\n  const [open, toggle] = useToggle(true);\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n  const canViewPermissions =\r\n    isFeatureEnabled(Feature.AdminFineGrainedAuthz) &&\r\n    hasAccess(\"manage-authorization\", \"manage-users\", \"manage-clients\");\r\n  const canManageGroup =\r\n    hasAccess(\"manage-users\") || currentGroup()?.access?.manage;\r\n  const canManageRoles = hasAccess(\"manage-users\");\r\n  const canViewDetails =\r\n    hasAccess(\"query-groups\", \"view-users\") ||\r\n    hasAccess(\"manage-users\", \"query-groups\");\r\n  const canViewMembers =\r\n    hasAccess(\"view-users\") ||\r\n    currentGroup()?.access?.viewMembers ||\r\n    currentGroup()?.access?.manageMembers;\r\n\r\n  const [activeEventsTab, setActiveEventsTab] = useState(\"adminEvents\");\r\n\r\n  useFetch(\r\n    async () => {\r\n      const ids = getId(location.pathname);\r\n      const isNavigationStateInValid = ids && ids.length > subGroups.length;\r\n\r\n      if (isNavigationStateInValid) {\r\n        const groups: GroupRepresentation[] = [];\r\n        for (const i of ids!) {\r\n          let group = undefined;\r\n          if (i !== \"search\") {\r\n            group = await adminClient.groups.findOne({ id: i });\r\n          } else {\r\n            group = { name: t(\"searchGroups\"), id: \"search\" };\r\n          }\r\n          if (group) {\r\n            groups.push(group);\r\n          } else {\r\n            throw new Error(t(\"notFound\"));\r\n          }\r\n        }\r\n        return groups;\r\n      }\r\n      return [];\r\n    },\r\n    (groups: GroupRepresentation[]) => {\r\n      if (groups.length) setSubGroups(groups);\r\n    },\r\n    [id],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <DeleteGroup\r\n        show={deleteOpen}\r\n        toggleDialog={toggleDeleteOpen}\r\n        selectedRows={[currentGroup()!]}\r\n        refresh={() => {\r\n          navigate(toGroups({ realm }));\r\n          refresh();\r\n        }}\r\n      />\r\n      {rename && (\r\n        <GroupsModal\r\n          id={id}\r\n          rename={rename}\r\n          refresh={(group) => {\r\n            refresh();\r\n            setSubGroups([...subGroups.slice(0, subGroups.length - 1), group!]);\r\n          }}\r\n          handleModalToggle={() => setRename(undefined)}\r\n        />\r\n      )}\r\n      <PageSection variant={PageSectionVariants.light} className=\"pf-v5-u-p-0\">\r\n        <Drawer isInline isExpanded={open} key={key} position=\"left\">\r\n          <DrawerContent\r\n            panelContent={\r\n              <DrawerPanelContent isResizable>\r\n                <DrawerHead>\r\n                  <GroupTree\r\n                    refresh={refresh}\r\n                    canViewDetails={canViewDetails}\r\n                  />\r\n                </DrawerHead>\r\n              </DrawerPanelContent>\r\n            }\r\n          >\r\n            <DrawerContentBody>\r\n              <Tooltip content={open ? t(\"hide\") : t(\"show\")}>\r\n                <Button\r\n                  aria-label={open ? t(\"hide\") : t(\"show\")}\r\n                  variant=\"plain\"\r\n                  icon={open ? <AngleLeftIcon /> : <TreeIcon />}\r\n                  onClick={toggle}\r\n                />\r\n              </Tooltip>\r\n              <GroupBreadCrumbs />\r\n              <ViewHeader\r\n                titleKey={!id ? \"groups\" : currentGroup()?.name!}\r\n                subKey={!id ? \"groupsDescription\" : \"\"}\r\n                helpUrl={!id ? helpUrls.groupsUrl : \"\"}\r\n                divider={!id}\r\n                dropdownItems={\r\n                  id && canManageGroup\r\n                    ? [\r\n                        <DropdownItem\r\n                          data-testid=\"renameGroupAction\"\r\n                          key=\"renameGroup\"\r\n                          onClick={() => setRename(currentGroup())}\r\n                        >\r\n                          {t(\"edit\")}\r\n                        </DropdownItem>,\r\n                        <DropdownItem\r\n                          data-testid=\"deleteGroup\"\r\n                          key=\"deleteGroup\"\r\n                          onClick={toggleDeleteOpen}\r\n                        >\r\n                          {t(\"deleteGroup\")}\r\n                        </DropdownItem>,\r\n                      ]\r\n                    : undefined\r\n                }\r\n              />\r\n              <PageSection className=\"pf-v5-u-pt-0\">\r\n                {currentGroup()?.description}\r\n              </PageSection>\r\n              {subGroups.length > 0 && (\r\n                <Tabs\r\n                  inset={{\r\n                    default: \"insetNone\",\r\n                    md: \"insetSm\",\r\n                    xl: \"insetLg\",\r\n                    \"2xl\": \"inset2xl\",\r\n                  }}\r\n                  activeKey={activeTab}\r\n                  onSelect={(_, key) => setActiveTab(key as number)}\r\n                  isBox\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tab\r\n                    data-testid=\"groups\"\r\n                    eventKey={0}\r\n                    title={<TabTitleText>{t(\"childGroups\")}</TabTitleText>}\r\n                  >\r\n                    <GroupTable refresh={refresh} />\r\n                  </Tab>\r\n                  {canViewMembers && (\r\n                    <Tab\r\n                      data-testid=\"members\"\r\n                      eventKey={1}\r\n                      title={<TabTitleText>{t(\"members\")}</TabTitleText>}\r\n                    >\r\n                      <Members />\r\n                    </Tab>\r\n                  )}\r\n                  <Tab\r\n                    data-testid=\"attributesTab\"\r\n                    eventKey={2}\r\n                    title={<TabTitleText>{t(\"attributes\")}</TabTitleText>}\r\n                  >\r\n                    <GroupAttributes />\r\n                  </Tab>\r\n                  {canManageRoles && (\r\n                    <Tab\r\n                      eventKey={3}\r\n                      data-testid=\"role-mapping-tab\"\r\n                      title={<TabTitleText>{t(\"roleMapping\")}</TabTitleText>}\r\n                    >\r\n                      <GroupRoleMapping id={id!} name={currentGroup()?.name!} />\r\n                    </Tab>\r\n                  )}\r\n                  {canViewPermissions && (\r\n                    <Tab\r\n                      eventKey={4}\r\n                      data-testid=\"permissionsTab\"\r\n                      title={<TabTitleText>{t(\"permissions\")}</TabTitleText>}\r\n                    >\r\n                      <PermissionsTab id={id} type=\"groups\" />\r\n                    </Tab>\r\n                  )}\r\n                  {hasAccess(\"view-events\") && (\r\n                    <Tab\r\n                      eventKey={5}\r\n                      data-testid=\"admin-events-tab\"\r\n                      title={<TabTitleText>{t(\"adminEvents\")}</TabTitleText>}\r\n                    >\r\n                      <Tabs\r\n                        activeKey={activeEventsTab}\r\n                        onSelect={(_, key) => setActiveEventsTab(key as string)}\r\n                      >\r\n                        <Tab\r\n                          eventKey=\"adminEvents\"\r\n                          title={\r\n                            <TabTitleText>{t(\"adminEvents\")}</TabTitleText>\r\n                          }\r\n                        >\r\n                          <AdminEvents resourcePath={`groups/${id}`} />\r\n                        </Tab>\r\n                        <Tab\r\n                          eventKey=\"membershipEvents\"\r\n                          title={\r\n                            <TabTitleText>{t(\"membershipEvents\")}</TabTitleText>\r\n                          }\r\n                        >\r\n                          <AdminEvents resourcePath={`users/*/groups/${id}`} />\r\n                        </Tab>\r\n                        <Tab\r\n                          eventKey=\"childGroupEvents\"\r\n                          title={\r\n                            <TabTitleText>{t(\"childGroupEvents\")}</TabTitleText>\r\n                          }\r\n                        >\r\n                          <AdminEvents resourcePath={`groups/${id}/children`} />\r\n                        </Tab>\r\n                      </Tabs>\r\n                    </Tab>\r\n                  )}\r\n                </Tabs>\r\n              )}\r\n              {subGroups.length === 0 && <GroupTable refresh={refresh} />}\r\n            </DrawerContentBody>\r\n          </DrawerContent>\r\n        </Drawer>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["DrawerPanelBody","_a","className","children","hasNoPadding","props","__rest","React","css","styles","DrawerHead","TreeViewList","isNested","isMultiSelectable","toolbar","ariaLabel","ariaLabelledby","Divider","TreeViewListItemBase","name","title","id","isExpanded","defaultExpanded","onSelect","onExpand","onCollapse","onCheck","hasCheckbox","checkProps","hasBadge","customBadgeContent","badgeProps","isSelectable","isCompact","activeItems","itemData","parentItem","icon","expandedIcon","action","compareItems","useMemo","internalIsExpanded","setIsExpanded","useState","useEffect","Component","ToggleComponent","renderToggle","randomId","evt","AngleRightIcon","isCheckboxChecked","renderCheck","elem","iconRendered","renderNodeContent","content","badgeRendered","Badge","isSelected","item","GenerateId","TreeViewListItem","prevProps","nextProps","prevIncludes","nextIncludes","TreeViewRoot","event","_b","_c","_d","_e","_f","_g","activeElement","key","treeItems","el","KeyTypes","handleArrows","element","isExpandable","parentList","parentButton","childElement","treeNodes","canUseDOM","firstToggle","firstInput","firstTextButton","hasCheckboxes","hasGuides","variant","hasSelectableNodes","TreeView","data","hasBadges","defaultAllExpanded","allExpanded","itemToCheck","treeViewList","TreeIconConfig","TreeIcon","createIcon","unionBy","baseRest","arrays","iteratee","last","isArrayLikeObject","baseUniq","baseFlatten","baseIteratee","GroupBreadCrumbs","t","useTranslation","clear","remove","subGroups","useSubGroups","realm","useRealm","location","useLocation","pathname","jsxs","Breadcrumb","jsx","BreadcrumbItem","Link","group","i","isLastGroup","getId","pathParts","getLastId","GroupAttributes","adminClient","useAdminClient","addAlert","addError","useAlerts","form","useForm","currentGroup","setCurrentGroup","useFetch","arrayToKeyValue","save","attributeForm","attributes","convertFormValuesToObject","AlertVariant","error","PageSection","PageSectionVariants","AttributesForm","GroupRoleMapping","RoleMapping","rows","realmRoles","row","GroupsModal","rename","duplicateId","handleModalToggle","refresh","isFeatureEnabled","useIsFeatureEnabled","duplicateGroupDetails","setDuplicateGroupDetails","handleSubmit","formState","fetchClientRoleMappings","groupId","clientRoleMappings","clients","client","clientRoles","role","duplicateGroup","sourceGroup","parentId","isSubGroup","newGroup","createdGroup","members","member","Feature","permissions","realmRolesPayload","clientRolesPayload","clientRoleMapping","rolesToAssign","assignRoles","childGroup","childAttributes","roles","clientRole","submitForm","Modal","ModalVariant","FormSubmitButton","Button","ButtonVariant","FormProvider","Form","Alert","TextControl","DeleteGroup","selectedRows","show","toggleDialog","multiDelete","ConfirmDialogModal","GroupToolbar","toggleCreate","toggleDelete","kebabDisabled","hasAccess","useAccess","isManager","openKebab","toggleKebab","useToggle","Fragment","ToolbarItem","Dropdown","ref","MenuToggle","EllipsisVIcon","DropdownList","DropdownItem","moveToRoot","source","moveToGroup","dest","MoveDialog","onClose","GroupPickerDialog","GroupTable","viewRefresh","setSelectedRows","setRename","isCreateModalOpen","toggleCreateOpen","setDuplicateId","showDelete","toggleShowDelete","move","setMove","setKey","search","setSearch","loader","first","max","groupsData","args","KeycloakDataTable","SearchInput","_","value","ListEmptyState","MembershipsModal","user","isDirectMembership","setDirectMembership","enabled","useHelp","alphabetize","groupsList","sortBy","params","searchParam","joinedUserGroups","indirect","g","paths","p","uniqBy","Checkbox","Popover","QuestionCircleIcon","cellWidth","GroupPath","UserDetailLink","toUser","Label","InfoCircleIcon","Members","includeSubGroup","setIncludeSubGroup","addMembers","setAddMembers","isKebabOpen","setIsKebabOpen","selectedUser","setSelectedUser","showMemberships","toggleShowMemberships","getSubGroups","count","nestedGroups","values","groups","users","MemberModal","isOpen","emptyFormatter","KeycloakSpinner","countGroups","GroupTreeContextMenu","toggleOpen","renameOpen","toggleRenameOpen","createOpen","moveOpen","toggleMoveOpen","deleteOpen","toggleDeleteOpen","navigate","useNavigate","toGroups","SUBGROUP_COUNT","TreeLoading","Spinner","LOADING_TREE","GroupTree","canViewDetails","setData","setMax","setFirst","prefFirst","useRef","prefMax","setCount","exact","setExact","activeItem","setActiveItem","firstSub","setFirstSub","mapGroup","hasSubGroups","Tooltip","fetchAdminUI","found","findGroup","foundTreeItem","path","index","nav","PaginatingTableToolbar","InputGroup","InputGroupItem","_event","GroupsSection","activeTab","setActiveTab","setSubGroups","open","toggle","canViewPermissions","canManageGroup","canManageRoles","canViewMembers","activeEventsTab","setActiveEventsTab","ids","Drawer","DrawerContent","DrawerPanelContent","DrawerContentBody","AngleLeftIcon","ViewHeader","helpUrls","Tabs","Tab","TabTitleText","PermissionsTab","AdminEvents"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}