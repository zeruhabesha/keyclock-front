{"version":3,"file":"DetailOrganization-DMxFgkNZ.js","sources":["../../../../../../../src/organizations/DetailOraganzationHeader.tsx","../../../../../../../src/organizations/IdentityProviderSelect.tsx","../../../../../../../src/organizations/LinkIdentityProviderModal.tsx","../../../../../../../src/organizations/IdentityProviders.tsx","../../../../../../../src/organizations/InviteMemberModal.tsx","../../../../../../../src/organizations/Invitations.tsx","../../../../../../../src/organizations/Members.tsx","../../../../../../../src/organizations/MembersSection.tsx","../../../../../../../src/organizations/DetailOrganization.tsx"],"sourcesContent":["import { ButtonVariant, DropdownItem } from \"@patternfly/react-core\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Controller, useFormContext, useWatch } from \"react-hook-form\";\r\nimport { toOrganizations } from \"./routes/Organizations\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\n\r\ntype DetailOrganizationHeaderProps = {\r\n  save: () => void;\r\n};\r\n\r\nexport const DetailOrganizationHeader = ({\r\n  save,\r\n}: DetailOrganizationHeaderProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { realm } = useRealm();\r\n  const navigate = useNavigate();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const id = useWatch({ name: \"id\" });\r\n  const name = useWatch({ name: \"name\" });\r\n\r\n  const { setValue } = useFormContext();\r\n\r\n  const [toggleDisableDialog, DisableConfirm] = useConfirmDialog({\r\n    titleKey: \"disableConfirmOrganizationTitle\",\r\n    messageKey: \"disableConfirmOrganization\",\r\n    continueButtonLabel: \"disable\",\r\n    onConfirm: () => {\r\n      setValue(\"enabled\", false);\r\n      save();\r\n    },\r\n  });\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"organizationDelete\",\r\n    messageKey: \"organizationDeleteConfirm\",\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.organizations.delById({ id });\r\n        addAlert(t(\"organizationDeletedSuccess\"));\r\n        navigate(toOrganizations({ realm }));\r\n      } catch (error) {\r\n        addError(\"organizationDeleteError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Controller\r\n      name=\"enabled\"\r\n      render={({ field: { value, onChange } }) => (\r\n        <>\r\n          <DeleteConfirm />\r\n          <DisableConfirm />\r\n          <ViewHeader\r\n            titleKey={name || \"\"}\r\n            divider={false}\r\n            dropdownItems={[\r\n              <DropdownItem\r\n                data-testid=\"delete-client\"\r\n                key=\"delete\"\r\n                onClick={toggleDeleteDialog}\r\n              >\r\n                {t(\"delete\")}\r\n              </DropdownItem>,\r\n            ]}\r\n            isEnabled={value}\r\n            onToggle={(value) => {\r\n              if (!value) {\r\n                toggleDisableDialog();\r\n              } else {\r\n                onChange(value);\r\n                save();\r\n              }\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    />\r\n  );\r\n};\r\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\r\nimport { IdentityProvidersQuery } from \"@keycloak/keycloak-admin-client/lib/resources/identityProviders\";\r\nimport {\r\n  FormErrorText,\r\n  HelpItem,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  Chip,\r\n  ChipGroup,\r\n  FormGroup,\r\n  MenuToggle,\r\n  Select,\r\n  SelectList,\r\n  SelectOption,\r\n  TextInputGroup,\r\n  TextInputGroupMain,\r\n  TextInputGroupUtilities,\r\n} from \"@patternfly/react-core\";\r\nimport { TimesIcon } from \"@patternfly/react-icons\";\r\nimport { debounce } from \"lodash-es\";\r\nimport { useCallback, useRef, useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { ComponentProps } from \"../components/dynamic/components\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport useToggle from \"../utils/useToggle\";\r\n\r\ntype IdentityProviderSelectProps = Omit<ComponentProps, \"convertToName\"> & {\r\n  variant?: \"typeaheadMulti\" | \"typeahead\";\r\n  isRequired?: boolean;\r\n};\r\n\r\nexport const IdentityProviderSelect = ({\r\n  name,\r\n  label,\r\n  helpText,\r\n  defaultValue,\r\n  isRequired,\r\n  variant = \"typeahead\",\r\n  isDisabled,\r\n}: IdentityProviderSelectProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const {\r\n    control,\r\n    getValues,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  const values: string[] | undefined = getValues(name!);\r\n\r\n  const [open, toggleOpen, setOpen] = useToggle();\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const textInputRef = useRef<HTMLInputElement>();\r\n  const [idps, setIdps] = useState<\r\n    (IdentityProviderRepresentation | undefined)[]\r\n  >([]);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const debounceFn = useCallback(debounce(setSearch, 1000), []);\r\n\r\n  useFetch(\r\n    async () => {\r\n      const params: IdentityProvidersQuery = {\r\n        max: 20,\r\n        realmOnly: true,\r\n      };\r\n      if (search) {\r\n        params.search = search;\r\n      }\r\n\r\n      return await adminClient.identityProviders.find(params);\r\n    },\r\n    setIdps,\r\n    [search],\r\n  );\r\n\r\n  const convert = (\r\n    identityProviders: (IdentityProviderRepresentation | undefined)[],\r\n  ) => {\r\n    const options = identityProviders.map((option) => (\r\n      <SelectOption\r\n        key={option!.alias}\r\n        value={option}\r\n        selected={values?.includes(option!.alias!)}\r\n      >\r\n        {option!.alias}\r\n      </SelectOption>\r\n    ));\r\n    if (options.length === 0) {\r\n      return <SelectOption value=\"\">{t(\"noResultsFound\")}</SelectOption>;\r\n    }\r\n    return options;\r\n  };\r\n\r\n  if (!idps) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n  return (\r\n    <FormGroup\r\n      label={t(label!)}\r\n      isRequired={isRequired}\r\n      labelIcon={\r\n        helpText ? (\r\n          <HelpItem helpText={helpText!} fieldLabelId={label!} />\r\n        ) : undefined\r\n      }\r\n      fieldId={name!}\r\n    >\r\n      <Controller\r\n        name={name!}\r\n        defaultValue={defaultValue}\r\n        control={control}\r\n        rules={{\r\n          validate: (value: string[]) =>\r\n            isRequired && value.filter((i) => i !== undefined).length === 0\r\n              ? t(\"required\")\r\n              : undefined,\r\n        }}\r\n        render={({ field }) => (\r\n          <Select\r\n            id={name!}\r\n            onOpenChange={toggleOpen}\r\n            toggle={(ref) => (\r\n              <MenuToggle\r\n                data-testid={name!}\r\n                ref={ref}\r\n                variant=\"typeahead\"\r\n                onClick={toggleOpen}\r\n                isExpanded={open}\r\n                isFullWidth\r\n                isDisabled={isDisabled}\r\n                status={errors[name!] ? \"danger\" : undefined}\r\n              >\r\n                <TextInputGroup isPlain>\r\n                  <TextInputGroupMain\r\n                    value={inputValue || field.value}\r\n                    onClick={toggleOpen}\r\n                    onChange={(_, value) => {\r\n                      setOpen(true);\r\n                      setInputValue(value);\r\n                      debounceFn(value);\r\n                    }}\r\n                    autoComplete=\"off\"\r\n                    innerRef={textInputRef}\r\n                    placeholderText={t(\"selectAUser\")}\r\n                    {...(field.value && {\r\n                      \"aria-activedescendant\": field.value,\r\n                    })}\r\n                    role=\"combobox\"\r\n                    isExpanded={open}\r\n                    aria-controls=\"select-create-typeahead-listbox\"\r\n                  >\r\n                    {variant === \"typeaheadMulti\" &&\r\n                      Array.isArray(field.value) && (\r\n                        <ChipGroup aria-label=\"Current selections\">\r\n                          {field.value.map(\r\n                            (selection: string, index: number) => (\r\n                              <Chip\r\n                                key={index}\r\n                                onClick={(ev) => {\r\n                                  ev.stopPropagation();\r\n                                  field.onChange(\r\n                                    field.value.filter(\r\n                                      (item: string) => item !== selection,\r\n                                    ),\r\n                                  );\r\n                                }}\r\n                              >\r\n                                {selection}\r\n                              </Chip>\r\n                            ),\r\n                          )}\r\n                        </ChipGroup>\r\n                      )}\r\n                  </TextInputGroupMain>\r\n                  <TextInputGroupUtilities>\r\n                    {!!search && (\r\n                      <Button\r\n                        variant=\"plain\"\r\n                        onClick={() => {\r\n                          setInputValue(\"\");\r\n                          setSearch(\"\");\r\n                          field.onChange([]);\r\n                          textInputRef?.current?.focus();\r\n                        }}\r\n                        aria-label={t(\"clear\")}\r\n                      >\r\n                        <TimesIcon aria-hidden />\r\n                      </Button>\r\n                    )}\r\n                  </TextInputGroupUtilities>\r\n                </TextInputGroup>\r\n              </MenuToggle>\r\n            )}\r\n            isOpen={open}\r\n            selected={field.value}\r\n            onSelect={(_, v) => {\r\n              const idp = v as IdentityProviderRepresentation;\r\n              const option = idp.alias!;\r\n              if (variant !== \"typeaheadMulti\") {\r\n                const removed = field.value.includes(option);\r\n\r\n                if (removed) {\r\n                  field.onChange([]);\r\n                } else {\r\n                  field.onChange([option]);\r\n                }\r\n\r\n                setInputValue(removed ? \"\" : option || \"\");\r\n                setOpen(false);\r\n              } else {\r\n                const changedValue = field.value.find(\r\n                  (v: string) => v === option,\r\n                )\r\n                  ? field.value.filter((v: string) => v !== option)\r\n                  : [...field.value, option];\r\n                field.onChange(changedValue);\r\n              }\r\n            }}\r\n            aria-label={t(name!)}\r\n          >\r\n            <SelectList>{convert(idps)}</SelectList>\r\n          </Select>\r\n        )}\r\n      />\r\n      {errors[name!] && <FormErrorText message={t(\"required\")} />}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\r\nimport { FormSubmitButton, SelectControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  Modal,\r\n  ModalVariant,\r\n} from \"@patternfly/react-core\";\r\nimport { useEffect } from \"react\";\r\nimport { FormProvider, useForm, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { DefaultSwitchControl } from \"../components/SwitchControl\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  convertAttributeNameToForm,\r\n  convertFormValuesToObject,\r\n  convertToFormValues,\r\n} from \"../util\";\r\nimport { IdentityProviderSelect } from \"./IdentityProviderSelect\";\r\nimport { OrganizationFormType } from \"./OrganizationForm\";\r\n\r\ntype LinkIdentityProviderModalProps = {\r\n  orgId: string;\r\n  identityProvider?: IdentityProviderRepresentation;\r\n  onClose: () => void;\r\n};\r\n\r\ntype LinkRepresentation = {\r\n  alias: string[] | string;\r\n  hideOnLogin: boolean;\r\n  config: {\r\n    \"kc.org.domain\": string;\r\n  };\r\n};\r\n\r\nexport const LinkIdentityProviderModal = ({\r\n  orgId,\r\n  identityProvider,\r\n  onClose,\r\n}: LinkIdentityProviderModalProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const form = useForm<LinkRepresentation>({ mode: \"onChange\" });\r\n  const { handleSubmit, formState, setValue } = form;\r\n  const { getValues } = useFormContext<OrganizationFormType>();\r\n\r\n  useEffect(\r\n    () =>\r\n      convertToFormValues(\r\n        {\r\n          ...identityProvider,\r\n          alias: [identityProvider?.alias],\r\n          hideOnLogin: identityProvider?.hideOnLogin,\r\n        },\r\n        setValue,\r\n      ),\r\n    [],\r\n  );\r\n\r\n  const submitForm = async (data: LinkRepresentation) => {\r\n    try {\r\n      const foundIdentityProvider = await adminClient.identityProviders.findOne(\r\n        {\r\n          alias: data.alias[0],\r\n        },\r\n      );\r\n      if (!foundIdentityProvider) {\r\n        throw new Error(t(\"notFound\"));\r\n      }\r\n      const { config } = convertFormValuesToObject(data);\r\n      foundIdentityProvider.config = {\r\n        ...foundIdentityProvider.config,\r\n        ...config,\r\n      };\r\n      foundIdentityProvider.hideOnLogin = data.hideOnLogin ?? true;\r\n      await adminClient.identityProviders.update(\r\n        { alias: data.alias[0] },\r\n        foundIdentityProvider,\r\n      );\r\n\r\n      if (!identityProvider) {\r\n        await adminClient.organizations.linkIdp({\r\n          orgId,\r\n          alias: data.alias[0],\r\n        });\r\n      }\r\n      addAlert(\r\n        t(!identityProvider ? \"linkSuccessful\" : \"linkUpdatedSuccessful\"),\r\n      );\r\n      onClose();\r\n    } catch (error) {\r\n      addError(!identityProvider ? \"linkError\" : \"linkUpdatedError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={t(\"linkIdentityProvider\")}\r\n      isOpen\r\n      onClose={onClose}\r\n      actions={[\r\n        <FormSubmitButton\r\n          formState={formState}\r\n          data-testid=\"confirm\"\r\n          key=\"confirm\"\r\n          form=\"form\"\r\n          allowInvalid\r\n          allowNonDirty\r\n        >\r\n          {t(\"save\")}\r\n        </FormSubmitButton>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form id=\"form\" onSubmit={handleSubmit(submitForm)}>\r\n          <IdentityProviderSelect\r\n            name=\"alias\"\r\n            label={t(\"identityProvider\")}\r\n            defaultValue={[]}\r\n            isRequired\r\n            isDisabled={!!identityProvider}\r\n          />\r\n          <SelectControl\r\n            name={convertAttributeNameToForm(\"config.kc.org.domain\")}\r\n            label={t(\"domain\")}\r\n            controller={{ defaultValue: \"\" }}\r\n            options={[\r\n              { key: \"\", value: t(\"none\") },\r\n              { key: \"ANY\", value: t(\"any\") },\r\n              ...(getValues(\"domains\")\r\n                ? getValues(\"domains\")!.map((d) => ({ key: d, value: d }))\r\n                : []),\r\n            ]}\r\n            menuAppendTo=\"parent\"\r\n          />\r\n          <DefaultSwitchControl\r\n            name=\"hideOnLogin\"\r\n            label={t(\"hideOnLoginPage\")}\r\n            labelIcon={t(\"hideOnLoginPageHelp\")}\r\n            defaultValue={true}\r\n          />\r\n          <DefaultSwitchControl\r\n            name={convertAttributeNameToForm(\r\n              \"config.kc.org.broker.redirect.mode.email-matches\",\r\n            )}\r\n            label={t(\"redirectWhenEmailMatches\")}\r\n            labelIcon={t(\"redirectWhenEmailMatchesHelp\")}\r\n            stringify\r\n          />\r\n        </Form>\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\r\nimport {\r\n  KeycloakDataTable,\r\n  ListEmptyState,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  PageSection,\r\n  Switch,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { BellIcon } from \"@patternfly/react-icons\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { ManageOrderDialog } from \"../identity-providers/ManageOrderDialog\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { LinkIdentityProviderModal } from \"./LinkIdentityProviderModal\";\r\nimport { EditOrganizationParams } from \"./routes/EditOrganization\";\r\n\r\ntype ShownOnLoginPageCheckProps = {\r\n  row: IdentityProviderRepresentation;\r\n  refresh: () => void;\r\n};\r\n\r\nconst ShownOnLoginPageCheck = ({\r\n  row,\r\n  refresh,\r\n}: ShownOnLoginPageCheckProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { t } = useTranslation();\r\n\r\n  const toggle = async (value: boolean) => {\r\n    try {\r\n      await adminClient.identityProviders.update(\r\n        { alias: row.alias! },\r\n        {\r\n          ...row,\r\n          hideOnLogin: value,\r\n        },\r\n      );\r\n      addAlert(t(\"linkUpdatedSuccessful\"));\r\n\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\"linkUpdatedError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Switch\r\n      label={t(\"on\")}\r\n      labelOff={t(\"off\")}\r\n      isChecked={row.hideOnLogin}\r\n      onChange={(_, value) => toggle(value)}\r\n    />\r\n  );\r\n};\r\n\r\nexport const IdentityProviders = () => {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { id: orgId } = useParams<EditOrganizationParams>();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [manageDisplayDialog, setManageDisplayDialog] = useState(false);\r\n  const [hasProviders, setHasProviders] = useState(false);\r\n  const [selectedRow, setSelectedRow] =\r\n    useState<IdentityProviderRepresentation>();\r\n  const [open, toggleOpen] = useToggle();\r\n\r\n  useFetch(\r\n    async () => adminClient.identityProviders.find({ max: 1 }),\r\n    (providers) => {\r\n      setHasProviders(providers.length === 1);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const loader = async () => {\r\n    const providers = await adminClient.organizations.listIdentityProviders({\r\n      orgId: orgId!,\r\n    });\r\n    return sortBy(providers, \"alias\");\r\n  };\r\n\r\n  const [toggleUnlinkDialog, UnlinkConfirm] = useConfirmDialog({\r\n    titleKey: \"identityProviderUnlink\",\r\n    messageKey: \"identityProviderUnlinkConfirm\",\r\n    continueButtonLabel: \"unLinkIdentityProvider\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.organizations.unLinkIdp({\r\n          orgId: orgId!,\r\n          alias: selectedRow!.alias! as string,\r\n        });\r\n        setSelectedRow(undefined);\r\n        addAlert(t(\"unLinkSuccessful\"));\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"unLinkError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {manageDisplayDialog && (\r\n        <ManageOrderDialog\r\n          orgId={orgId!}\r\n          onClose={() => {\r\n            setManageDisplayDialog(false);\r\n            refresh();\r\n          }}\r\n        />\r\n      )}\r\n      <PageSection variant=\"light\">\r\n        <UnlinkConfirm />\r\n        {open && (\r\n          <LinkIdentityProviderModal\r\n            orgId={orgId!}\r\n            identityProvider={selectedRow}\r\n            onClose={() => {\r\n              toggleOpen();\r\n              refresh();\r\n            }}\r\n          />\r\n        )}\r\n        {!hasProviders ? (\r\n          <ListEmptyState\r\n            icon={BellIcon}\r\n            message={t(\"noIdentityProvider\")}\r\n            instructions={t(\"noIdentityProviderInstructions\")}\r\n          />\r\n        ) : (\r\n          <KeycloakDataTable\r\n            key={key}\r\n            loader={loader}\r\n            ariaLabelKey=\"identityProviders\"\r\n            searchPlaceholderKey=\"searchProvider\"\r\n            toolbarItem={\r\n              <>\r\n                <ToolbarItem>\r\n                  <Button\r\n                    onClick={() => {\r\n                      setSelectedRow(undefined);\r\n                      toggleOpen();\r\n                    }}\r\n                  >\r\n                    {t(\"linkIdentityProvider\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n                <ToolbarItem>\r\n                  <Button\r\n                    data-testid=\"manageDisplayOrder\"\r\n                    variant=\"link\"\r\n                    onClick={() => setManageDisplayDialog(true)}\r\n                  >\r\n                    {t(\"manageDisplayOrder\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n              </>\r\n            }\r\n            actions={[\r\n              {\r\n                title: t(\"edit\"),\r\n                onRowClick: (row) => {\r\n                  setSelectedRow(row);\r\n                  toggleOpen();\r\n                },\r\n              },\r\n              {\r\n                title: t(\"unLinkIdentityProvider\"),\r\n                onRowClick: (row) => {\r\n                  setSelectedRow(row);\r\n                  toggleUnlinkDialog();\r\n                },\r\n              },\r\n            ]}\r\n            columns={[\r\n              {\r\n                name: \"alias\",\r\n              },\r\n              {\r\n                name: \"config['kc.org.domain']\",\r\n                displayKey: \"domain\",\r\n              },\r\n              {\r\n                name: \"providerId\",\r\n                displayKey: \"providerDetails\",\r\n              },\r\n              {\r\n                name: \"hideOnLogin\",\r\n                displayKey: \"hideOnLoginPage\",\r\n                cellRenderer: (row) => (\r\n                  <ShownOnLoginPageCheck row={row} refresh={refresh} />\r\n                ),\r\n              },\r\n            ]}\r\n            emptyState={\r\n              <ListEmptyState\r\n                message={t(\"emptyIdentityProviderLink\")}\r\n                instructions={t(\"emptyIdentityProviderLinkInstructions\")}\r\n                primaryActionText={t(\"linkIdentityProvider\")}\r\n                onPrimaryAction={toggleOpen}\r\n              />\r\n            }\r\n          />\r\n        )}\r\n      </PageSection>\r\n    </>\r\n  );\r\n};\r\n","import { FormSubmitButton, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  Modal,\r\n  ModalVariant,\r\n} from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype InviteMemberModalProps = {\r\n  orgId: string;\r\n  onClose: () => void;\r\n};\r\n\r\nexport const InviteMemberModal = ({\r\n  orgId,\r\n  onClose,\r\n}: InviteMemberModalProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const { t } = useTranslation();\r\n  const form = useForm<Record<string, string>>();\r\n  const { handleSubmit, formState } = form;\r\n\r\n  const submitForm = async (data: Record<string, string>) => {\r\n    try {\r\n      const formData = new FormData();\r\n      for (const key in data) {\r\n        formData.append(key, data[key]);\r\n      }\r\n      await adminClient.organizations.invite({ orgId }, formData);\r\n      addAlert(t(\"inviteSent\"));\r\n      onClose();\r\n    } catch (error) {\r\n      addError(\"inviteSentError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.small}\r\n      title={t(\"inviteMember\")}\r\n      isOpen\r\n      onClose={onClose}\r\n      actions={[\r\n        <FormSubmitButton\r\n          formState={formState}\r\n          data-testid=\"save\"\r\n          key=\"confirm\"\r\n          form=\"form\"\r\n          allowInvalid\r\n          allowNonDirty\r\n        >\r\n          {t(\"send\")}\r\n        </FormSubmitButton>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form id=\"form\" onSubmit={handleSubmit(submitForm)}>\r\n          <TextControl\r\n            name=\"email\"\r\n            label={t(\"email\")}\r\n            rules={{ required: t(\"required\") }}\r\n            autoFocus\r\n          />\r\n          <TextControl name=\"firstName\" label={t(\"firstName\")} />\r\n          <TextControl name=\"lastName\" label={t(\"lastName\")} />\r\n        </Form>\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import type { OrganizationInvitationRepresentation } from \"@keycloak/keycloak-admin-client\";\r\nimport { OrganizationInvitationStatus } from \"@keycloak/keycloak-admin-client\";\r\nimport { Button, Chip, ToolbarItem } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { CheckboxFilterComponent } from \"../components/dynamic/CheckboxFilterComponent\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { InviteMemberModal } from \"./InviteMemberModal\";\r\nimport { EditOrganizationParams } from \"./routes/EditOrganization\";\r\nimport { SearchInputComponent } from \"../components/dynamic/SearchInputComponent\";\r\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport useFormatDate from \"../utils/useFormatDate\";\r\n\r\nconst InvitationStatusBadge = ({\r\n  status,\r\n}: {\r\n  status?: OrganizationInvitationStatus;\r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Chip isReadOnly>\r\n      {status ? t(`organizationInvitationStatus.${status.toLowerCase()}`) : \"\"}\r\n    </Chip>\r\n  );\r\n};\r\n\r\nconst DateCell = ({ date }: { date?: number }) => {\r\n  const formatDate = useFormatDate();\r\n\r\n  if (!date) {\r\n    return <span>-</span>;\r\n  }\r\n\r\n  try {\r\n    return <span>{formatDate(new Date(date * 1000))}</span>;\r\n  } catch {\r\n    return <span>{date}</span>;\r\n  }\r\n};\r\n\r\nexport const Invitations = () => {\r\n  const { t } = useTranslation();\r\n  const { adminClient } = useAdminClient();\r\n  const { id: orgId } = useParams<EditOrganizationParams>();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [openInviteMembers, toggleInviteMembers] = useToggle();\r\n  const [selectedInvitations, setSelectedInvitations] = useState<\r\n    OrganizationInvitationRepresentation[]\r\n  >([]);\r\n  const [searchText, setSearchText] = useState<string>(\"\");\r\n  const [searchTriggerText, setSearchTriggerText] = useState<string>(\"\");\r\n  const [filteredStatuses, setFilteredStatuses] = useState<string[]>([]);\r\n  const [isStatusFilterOpen, setIsStatusFilterOpen] = useState(false);\r\n\r\n  const statusOptions = Object.values(OrganizationInvitationStatus).map(\r\n    (status: string) => ({\r\n      value: status,\r\n      label: t(`organizationInvitationStatus.${status.toLowerCase()}`),\r\n    }),\r\n  );\r\n\r\n  const loader = async (first?: number, max?: number) => {\r\n    try {\r\n      const invitations: OrganizationInvitationRepresentation[] =\r\n        await adminClient.organizations.listInvitations({\r\n          orgId,\r\n          first,\r\n          max,\r\n          search: searchTriggerText,\r\n          status:\r\n            filteredStatuses.length === 1 ? filteredStatuses[0] : undefined,\r\n        });\r\n\r\n      return invitations;\r\n    } catch (error) {\r\n      addError(\"organizationsInvitationsListError\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    setSearchTriggerText(searchText);\r\n    refresh();\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setSearchText(\"\");\r\n    setSearchTriggerText(\"\");\r\n    refresh();\r\n  };\r\n\r\n  const resendInvitation = async (\r\n    invitation: OrganizationInvitationRepresentation,\r\n  ) => {\r\n    try {\r\n      await adminClient.organizations.resendInvitation({\r\n        orgId,\r\n        invitationId: invitation.id!,\r\n      });\r\n      addAlert(t(\"organizationInvitationResent\"));\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\"organizationInvitationResendError\", error);\r\n    }\r\n  };\r\n\r\n  const deleteInvitations = async (\r\n    invitations: OrganizationInvitationRepresentation[],\r\n  ) => {\r\n    try {\r\n      await Promise.all(\r\n        invitations.map((invitation) =>\r\n          adminClient.organizations.deleteInvitation({\r\n            orgId,\r\n            invitationId: invitation.id!,\r\n          }),\r\n        ),\r\n      );\r\n      addAlert(\r\n        t(\"organizationInvitationsDeleted\", { count: invitations.length }),\r\n      );\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\"organizationInvitationsDeleteError\", error);\r\n    }\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"organizationInvitationsDeleteConfirmTitle\",\r\n    messageKey: \"organizationInvitationsDeleteConfirm\",\r\n    continueButtonLabel: \"delete\",\r\n    onConfirm: () => deleteInvitations(selectedInvitations),\r\n  });\r\n\r\n  const onStatusFilterSelect = (\r\n    _event: React.MouseEvent<HTMLButtonElement>,\r\n    value: string,\r\n  ) => {\r\n    if (filteredStatuses.includes(value)) {\r\n      setFilteredStatuses(\r\n        filteredStatuses.filter((status) => status !== value),\r\n      );\r\n    } else {\r\n      setFilteredStatuses([...filteredStatuses, value]);\r\n    }\r\n    setIsStatusFilterOpen(false);\r\n    refresh();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <DeleteConfirm />\r\n      {openInviteMembers && (\r\n        <InviteMemberModal\r\n          orgId={orgId}\r\n          onClose={() => {\r\n            toggleInviteMembers();\r\n            refresh();\r\n          }}\r\n        />\r\n      )}\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        isPaginated\r\n        ariaLabelKey=\"invitationsList\"\r\n        onSelect={setSelectedInvitations}\r\n        canSelectAll\r\n        toolbarItem={\r\n          <>\r\n            <ToolbarItem>\r\n              <SearchInputComponent\r\n                value={searchText}\r\n                onChange={setSearchText}\r\n                onSearch={handleSearch}\r\n                onClear={clearSearch}\r\n                placeholder={t(\"searchInvitations\")}\r\n                aria-label={t(\"searchInvitations\")}\r\n              />\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Button variant=\"primary\" onClick={toggleInviteMembers}>\r\n                {t(\"inviteMember\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Button\r\n                variant=\"plain\"\r\n                isDisabled={selectedInvitations.length === 0}\r\n                onClick={toggleDeleteDialog}\r\n              >\r\n                {t(\"deleteInvitations\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <CheckboxFilterComponent\r\n                filterPlaceholderText={t(\"filterByStatus\")}\r\n                isOpen={isStatusFilterOpen}\r\n                options={statusOptions}\r\n                onOpenChange={setIsStatusFilterOpen}\r\n                onToggleClick={() => setIsStatusFilterOpen(!isStatusFilterOpen)}\r\n                onSelect={onStatusFilterSelect}\r\n                selectedItems={filteredStatuses}\r\n                width=\"200px\"\r\n              />\r\n            </ToolbarItem>\r\n          </>\r\n        }\r\n        actionResolver={(rowData) => {\r\n          const invitation: OrganizationInvitationRepresentation = rowData.data;\r\n          const actions = [\r\n            {\r\n              title: t(\"resendInvitation\"),\r\n              onClick: () => resendInvitation(invitation),\r\n            },\r\n            {\r\n              title: t(\"deleteInvitation\"),\r\n              onClick: () => {\r\n                setSelectedInvitations([invitation]);\r\n                toggleDeleteDialog();\r\n              },\r\n            },\r\n          ];\r\n\r\n          if (invitation.inviteLink) {\r\n            actions.splice(1, 0, {\r\n              title: t(\"copyInviteLink\"),\r\n              onClick: async () => {\r\n                try {\r\n                  await navigator.clipboard.writeText(invitation.inviteLink!);\r\n                  addAlert(t(\"inviteLinkCopied\"));\r\n                } catch (error) {\r\n                  addError(\"clipboardCopyError\", error);\r\n                }\r\n              },\r\n            });\r\n          }\r\n\r\n          return actions;\r\n        }}\r\n        columns={[\r\n          {\r\n            name: \"email\",\r\n            displayKey: \"email\",\r\n          },\r\n          {\r\n            name: \"firstName\",\r\n            displayKey: \"firstName\",\r\n            cellRenderer: (invitation) => invitation.firstName || \"-\",\r\n          },\r\n          {\r\n            name: \"lastName\",\r\n            displayKey: \"lastName\",\r\n            cellRenderer: (invitation) => invitation.lastName || \"-\",\r\n          },\r\n          {\r\n            name: \"sentDate\",\r\n            displayKey: \"sentDate\",\r\n            cellRenderer: (invitation) => (\r\n              <DateCell date={invitation.sentDate} />\r\n            ),\r\n          },\r\n          {\r\n            name: \"expiresAt\",\r\n            displayKey: \"expiresAt\",\r\n            cellRenderer: (invitation) => (\r\n              <DateCell date={invitation.expiresAt} />\r\n            ),\r\n          },\r\n          {\r\n            name: \"status\",\r\n            displayKey: \"status\",\r\n            cellRenderer: (invitation) => (\r\n              <InvitationStatusBadge status={invitation.status} />\r\n            ),\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"emptyInvitations\")}\r\n            instructions={t(\"emptyInvitationsInstructions\")}\r\n            secondaryActions={[\r\n              {\r\n                text: t(\"inviteMember\"),\r\n                onClick: toggleInviteMembers,\r\n              },\r\n            ]}\r\n          />\r\n        }\r\n        isSearching={\r\n          searchTriggerText.length > 0 || filteredStatuses.length > 0\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport {\r\n  KeycloakDataTable,\r\n  ListEmptyState,\r\n  useAlerts,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, ToolbarItem } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { CheckboxFilterComponent } from \"../components/dynamic/CheckboxFilterComponent\";\r\nimport { SearchInputComponent } from \"../components/dynamic/SearchInputComponent\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { MemberModal } from \"../groups/MembersModal\";\r\nimport { toUser } from \"../user/routes/User\";\r\nimport { translationFormatter } from \"../utils/translationFormatter\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { EditOrganizationParams } from \"./routes/EditOrganization\";\r\n\r\ntype MembershipTypeRepresentation = UserRepresentation & {\r\n  membershipType?: string;\r\n};\r\n\r\nconst UserDetailLink = (user: any) => {\r\n  const { realm } = useRealm();\r\n  return (\r\n    <Link to={toUser({ realm, id: user.id!, tab: \"settings\" })}>\r\n      {user.username}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport const Members = () => {\r\n  const { t } = useTranslation();\r\n  const { adminClient } = useAdminClient();\r\n  const { id: orgId } = useParams<EditOrganizationParams>();\r\n  const { addAlert, addError } = useAlerts();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const [openAddMembers, toggleAddMembers] = useToggle();\r\n  const [selectedMembers, setSelectedMembers] = useState<UserRepresentation[]>(\r\n    [],\r\n  );\r\n  const [searchText, setSearchText] = useState<string>(\"\");\r\n  const [searchTriggerText, setSearchTriggerText] = useState<string>(\"\");\r\n  const [filteredMembershipTypes, setFilteredMembershipTypes] = useState<\r\n    string[]\r\n  >([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const membershipOptions = [\r\n    { value: \"Managed\", label: \"Managed\" },\r\n    { value: \"Unmanaged\", label: \"Unmanaged\" },\r\n  ];\r\n\r\n  const onToggleClick = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  const onSelect = (_event: any, value: string) => {\r\n    if (filteredMembershipTypes.includes(value)) {\r\n      setFilteredMembershipTypes(\r\n        filteredMembershipTypes.filter((item) => item !== value),\r\n      );\r\n    } else {\r\n      setFilteredMembershipTypes([...filteredMembershipTypes, value]);\r\n    }\r\n    setIsOpen(false);\r\n    refresh();\r\n  };\r\n\r\n  const loader = async (first?: number, max?: number) => {\r\n    try {\r\n      const membershipType =\r\n        filteredMembershipTypes.length === 1\r\n          ? filteredMembershipTypes[0]\r\n          : undefined;\r\n\r\n      const memberships: MembershipTypeRepresentation[] =\r\n        await adminClient.organizations.listMembers({\r\n          orgId,\r\n          first,\r\n          max,\r\n          search: searchTriggerText,\r\n          membershipType,\r\n        });\r\n\r\n      return memberships;\r\n    } catch (error) {\r\n      addError(\"organizationsMembersListError\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleChange = (value: string) => {\r\n    setSearchText(value);\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    setSearchTriggerText(searchText);\r\n    refresh();\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setSearchText(\"\");\r\n    setSearchTriggerText(\"\");\r\n    refresh();\r\n  };\r\n\r\n  const removeMember = async (selectedMembers: UserRepresentation[]) => {\r\n    try {\r\n      await Promise.all(\r\n        selectedMembers.map((user) =>\r\n          adminClient.organizations.delMember({\r\n            orgId,\r\n            userId: user.id!,\r\n          }),\r\n        ),\r\n      );\r\n      addAlert(t(\"organizationUsersLeft\", { count: selectedMembers.length }));\r\n    } catch (error) {\r\n      addError(\"organizationUsersLeftError\", error);\r\n    }\r\n\r\n    refresh();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {openAddMembers && (\r\n        <MemberModal\r\n          membersQuery={() => adminClient.organizations.listMembers({ orgId })}\r\n          onAdd={async (selectedRows) => {\r\n            try {\r\n              await Promise.all(\r\n                selectedRows.map((user) =>\r\n                  adminClient.organizations.addMember({\r\n                    orgId,\r\n                    userId: `\"${user.id!}\"`,\r\n                  }),\r\n                ),\r\n              );\r\n              addAlert(\r\n                t(\"organizationUsersAdded\", { count: selectedRows.length }),\r\n              );\r\n            } catch (error) {\r\n              addError(\"organizationUsersAddedError\", error);\r\n            }\r\n          }}\r\n          onClose={() => {\r\n            toggleAddMembers();\r\n            refresh();\r\n          }}\r\n        />\r\n      )}\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        isPaginated\r\n        ariaLabelKey=\"membersList\"\r\n        onSelect={(members) => setSelectedMembers([...members])}\r\n        canSelectAll\r\n        toolbarItem={\r\n          <>\r\n            <ToolbarItem>\r\n              <SearchInputComponent\r\n                value={searchText}\r\n                onChange={handleChange}\r\n                onSearch={handleSearch}\r\n                onClear={clearInput}\r\n                placeholder={t(\"searchMembers\")}\r\n                aria-label={t(\"searchMembers\")}\r\n              />\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Button variant=\"primary\" onClick={toggleAddMembers}>\r\n                {t(\"addMember\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <Button\r\n                variant=\"plain\"\r\n                isDisabled={selectedMembers.length === 0}\r\n                onClick={() => removeMember(selectedMembers)}\r\n              >\r\n                {t(\"removeMember\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n            <ToolbarItem>\r\n              <CheckboxFilterComponent\r\n                filterPlaceholderText={t(\"filterByMembershipType\")}\r\n                isOpen={isOpen}\r\n                options={membershipOptions}\r\n                onOpenChange={(nextOpen) => setIsOpen(nextOpen)}\r\n                onToggleClick={onToggleClick}\r\n                onSelect={onSelect}\r\n                selectedItems={filteredMembershipTypes}\r\n                width={\"260px\"}\r\n              />\r\n            </ToolbarItem>\r\n          </>\r\n        }\r\n        actions={[\r\n          {\r\n            title: t(\"remove\"),\r\n            onRowClick: async (member) => {\r\n              await removeMember([member]);\r\n            },\r\n          },\r\n        ]}\r\n        columns={[\r\n          {\r\n            name: \"username\",\r\n            cellRenderer: UserDetailLink,\r\n          },\r\n          {\r\n            name: \"email\",\r\n          },\r\n          {\r\n            name: \"firstName\",\r\n          },\r\n          {\r\n            name: \"lastName\",\r\n          },\r\n          {\r\n            name: \"membershipType\",\r\n            cellFormatters: [translationFormatter(t)],\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"emptyMembers\")}\r\n            instructions={t(\"emptyMembersInstructions\")}\r\n            secondaryActions={[\r\n              {\r\n                text: t(\"addRealmUser\"),\r\n                onClick: toggleAddMembers,\r\n              },\r\n            ]}\r\n          />\r\n        }\r\n        isSearching={\r\n          filteredMembershipTypes.length > 0 || searchTriggerText.length > 0\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { Tab, Tabs, TabTitleText } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Invitations } from \"./Invitations\";\r\nimport { Members } from \"./Members\";\r\n\r\nexport const MembersSection = () => {\r\n  const { t } = useTranslation();\r\n  const [activeTab, setActiveTab] = useState(\"members\");\r\n\r\n  return (\r\n    <Tabs\r\n      activeKey={activeTab}\r\n      onSelect={(_, key) => setActiveTab(key as string)}\r\n    >\r\n      <Tab\r\n        eventKey=\"members\"\r\n        title={<TabTitleText>{t(\"members\")}</TabTitleText>}\r\n        data-testid=\"organization-members-tab\"\r\n      >\r\n        <Members />\r\n      </Tab>\r\n      <Tab\r\n        eventKey=\"invitations\"\r\n        title={<TabTitleText>{t(\"invitations\")}</TabTitleText>}\r\n        data-testid=\"organization-invitations-tab\"\r\n      >\r\n        <Invitations />\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n};\r\n","import {\r\n  FormSubmitButton,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Button,\r\n  PageSection,\r\n  Tab,\r\n  Tabs,\r\n  TabTitleText,\r\n} from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { FormAccess } from \"../components/form/FormAccess\";\r\nimport { AttributesForm } from \"../components/key-value-form/AttributeForm\";\r\nimport { arrayToKeyValue } from \"../components/key-value-form/key-value-convert\";\r\nimport {\r\n  RoutableTabs,\r\n  useRoutableTab,\r\n} from \"../components/routable-tabs/RoutableTabs\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport { DetailOrganizationHeader } from \"./DetailOraganzationHeader\";\r\nimport { IdentityProviders } from \"./IdentityProviders\";\r\nimport { MembersSection } from \"./MembersSection\";\r\nimport {\r\n  OrganizationForm,\r\n  OrganizationFormType,\r\n  convertToOrg,\r\n} from \"./OrganizationForm\";\r\nimport {\r\n  EditOrganizationParams,\r\n  OrganizationTab,\r\n  toEditOrganization,\r\n} from \"./routes/EditOrganization\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { AdminEvents } from \"../events/AdminEvents\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function DetailOrganization() {\r\n  const { adminClient } = useAdminClient();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const { realm, realmRepresentation } = useRealm();\r\n  const { id } = useParams<EditOrganizationParams>();\r\n  const { t } = useTranslation();\r\n\r\n  const form = useForm<OrganizationFormType>();\r\n\r\n  const save = async (org: OrganizationFormType) => {\r\n    try {\r\n      const organization = convertToOrg(org);\r\n      await adminClient.organizations.updateById({ id }, organization);\r\n      addAlert(t(\"organizationSaveSuccess\"));\r\n    } catch (error) {\r\n      addError(\"organizationSaveError\", error);\r\n    }\r\n  };\r\n\r\n  useFetch(\r\n    () => adminClient.organizations.findOne({ id }),\r\n    (org) => {\r\n      if (!org) {\r\n        throw new Error(t(\"notFound\"));\r\n      }\r\n      form.reset({\r\n        ...org,\r\n        domains: org.domains?.map((d) => d.name),\r\n        attributes: arrayToKeyValue(org.attributes),\r\n      });\r\n    },\r\n    [id],\r\n  );\r\n\r\n  const useTab = (tab: OrganizationTab) =>\r\n    useRoutableTab(\r\n      toEditOrganization({\r\n        realm,\r\n        id,\r\n        tab,\r\n      }),\r\n    );\r\n\r\n  const settingsTab = useTab(\"settings\");\r\n  const attributesTab = useTab(\"attributes\");\r\n  const membersTab = useTab(\"members\");\r\n  const identityProvidersTab = useTab(\"identityProviders\");\r\n  const eventsTab = useTab(\"events\");\r\n\r\n  const { hasAccess } = useAccess();\r\n  const [activeEventsTab, setActiveEventsTab] = useState(\"adminEvents\");\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <FormProvider {...form}>\r\n        <DetailOrganizationHeader save={() => save(form.getValues())} />\r\n        <RoutableTabs\r\n          data-testid=\"organization-tabs\"\r\n          aria-label={t(\"organization\")}\r\n          isBox\r\n          mountOnEnter\r\n        >\r\n          <Tab\r\n            id=\"settings\"\r\n            data-testid=\"settingsTab\"\r\n            title={<TabTitleText>{t(\"settings\")}</TabTitleText>}\r\n            {...settingsTab}\r\n          >\r\n            <PageSection>\r\n              <FormAccess\r\n                role=\"anyone\"\r\n                onSubmit={form.handleSubmit(save)}\r\n                isHorizontal\r\n              >\r\n                <OrganizationForm readOnly />\r\n                <ActionGroup>\r\n                  <FormSubmitButton\r\n                    formState={form.formState}\r\n                    data-testid=\"save\"\r\n                  >\r\n                    {t(\"save\")}\r\n                  </FormSubmitButton>\r\n                  <Button\r\n                    onClick={() => form.reset()}\r\n                    data-testid=\"reset\"\r\n                    variant=\"link\"\r\n                  >\r\n                    {t(\"reset\")}\r\n                  </Button>\r\n                </ActionGroup>\r\n              </FormAccess>\r\n            </PageSection>\r\n          </Tab>\r\n          <Tab\r\n            id=\"attributes\"\r\n            data-testid=\"attributeTab\"\r\n            title={<TabTitleText>{t(\"attributes\")}</TabTitleText>}\r\n            {...attributesTab}\r\n          >\r\n            <PageSection variant=\"light\">\r\n              <AttributesForm\r\n                form={form}\r\n                save={save}\r\n                reset={() =>\r\n                  form.reset({\r\n                    ...form.getValues(),\r\n                  })\r\n                }\r\n                name=\"attributes\"\r\n              />\r\n            </PageSection>\r\n          </Tab>\r\n          <Tab\r\n            id=\"members\"\r\n            data-testid=\"membersTab\"\r\n            title={<TabTitleText>{t(\"members\")}</TabTitleText>}\r\n            {...membersTab}\r\n          >\r\n            <MembersSection />\r\n          </Tab>\r\n          <Tab\r\n            id=\"identityProviders\"\r\n            data-testid=\"identityProvidersTab\"\r\n            title={<TabTitleText>{t(\"identityProviders\")}</TabTitleText>}\r\n            {...identityProvidersTab}\r\n          >\r\n            <IdentityProviders />\r\n          </Tab>\r\n          {realmRepresentation?.adminEventsEnabled &&\r\n            hasAccess(\"view-events\") && (\r\n              <Tab\r\n                data-testid=\"admin-events-tab\"\r\n                title={<TabTitleText>{t(\"adminEvents\")}</TabTitleText>}\r\n                {...eventsTab}\r\n              >\r\n                <Tabs\r\n                  activeKey={activeEventsTab}\r\n                  onSelect={(_, key) => setActiveEventsTab(key as string)}\r\n                >\r\n                  <Tab\r\n                    eventKey=\"adminEvents\"\r\n                    title={<TabTitleText>{t(\"adminEvents\")}</TabTitleText>}\r\n                  >\r\n                    <AdminEvents resourcePath={`organizations/${id}`} />\r\n                  </Tab>\r\n                  <Tab\r\n                    eventKey=\"membershipEvents\"\r\n                    title={<TabTitleText>{t(\"membershipEvents\")}</TabTitleText>}\r\n                  >\r\n                    <AdminEvents resourcePath={`organizations/${id}/members`} />\r\n                  </Tab>\r\n                </Tabs>\r\n              </Tab>\r\n            )}\r\n        </RoutableTabs>\r\n      </FormProvider>\r\n    </PageSection>\r\n  );\r\n}\r\n"],"names":["DetailOrganizationHeader","save","adminClient","useAdminClient","realm","useRealm","navigate","useNavigate","t","useTranslation","addAlert","addError","useAlerts","id","useWatch","name","setValue","useFormContext","toggleDisableDialog","DisableConfirm","useConfirmDialog","toggleDeleteDialog","DeleteConfirm","ButtonVariant","toOrganizations","error","jsx","Controller","value","onChange","jsxs","Fragment","ViewHeader","DropdownItem","IdentityProviderSelect","label","helpText","defaultValue","isRequired","variant","isDisabled","control","getValues","errors","values","open","toggleOpen","setOpen","useToggle","inputValue","setInputValue","useState","textInputRef","useRef","idps","setIdps","search","setSearch","debounceFn","useCallback","debounce","useFetch","params","convert","identityProviders","options","option","SelectOption","FormGroup","HelpItem","i","field","Select","ref","MenuToggle","TextInputGroup","TextInputGroupMain","_","ChipGroup","selection","index","Chip","ev","item","TextInputGroupUtilities","Button","TimesIcon","v","removed","changedValue","SelectList","FormErrorText","KeycloakSpinner","LinkIdentityProviderModal","orgId","identityProvider","onClose","form","useForm","handleSubmit","formState","useEffect","convertToFormValues","submitForm","data","foundIdentityProvider","config","convertFormValuesToObject","Modal","ModalVariant","FormSubmitButton","FormProvider","Form","SelectControl","convertAttributeNameToForm","d","DefaultSwitchControl","ShownOnLoginPageCheck","row","refresh","toggle","Switch","IdentityProviders","useParams","key","setKey","manageDisplayDialog","setManageDisplayDialog","hasProviders","setHasProviders","selectedRow","setSelectedRow","providers","loader","sortBy","toggleUnlinkDialog","UnlinkConfirm","ManageOrderDialog","PageSection","KeycloakDataTable","ToolbarItem","ListEmptyState","BellIcon","InviteMemberModal","formData","TextControl","InvitationStatusBadge","status","DateCell","date","formatDate","useFormatDate","Invitations","openInviteMembers","toggleInviteMembers","selectedInvitations","setSelectedInvitations","searchText","setSearchText","searchTriggerText","setSearchTriggerText","filteredStatuses","setFilteredStatuses","isStatusFilterOpen","setIsStatusFilterOpen","statusOptions","OrganizationInvitationStatus","first","max","handleSearch","clearSearch","resendInvitation","invitation","deleteInvitations","invitations","onStatusFilterSelect","_event","SearchInputComponent","CheckboxFilterComponent","rowData","actions","UserDetailLink","user","Link","toUser","Members","openAddMembers","toggleAddMembers","selectedMembers","setSelectedMembers","filteredMembershipTypes","setFilteredMembershipTypes","isOpen","setIsOpen","membershipOptions","onToggleClick","onSelect","membershipType","handleChange","clearInput","removeMember","MemberModal","selectedRows","members","nextOpen","member","translationFormatter","MembersSection","activeTab","setActiveTab","Tabs","Tab","TabTitleText","DetailOrganization","realmRepresentation","org","organization","convertToOrg","arrayToKeyValue","useTab","tab","useRoutableTab","toEditOrganization","settingsTab","attributesTab","membersTab","identityProvidersTab","eventsTab","hasAccess","useAccess","activeEventsTab","setActiveEventsTab","RoutableTabs","FormAccess","OrganizationForm","ActionGroup","AttributesForm","AdminEvents"],"mappings":"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"}