{"version":3,"file":"DeleteScopeDialog-BkmTGBOK.js","sources":["../../../../../../../src/clients/authorization/DeleteScopeDialog.tsx"],"sourcesContent":["import type ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\r\nimport { Alert, AlertVariant } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport type { PermissionScopeRepresentation } from \"./Scopes\";\r\n\r\ntype DeleteScopeDialogProps = {\r\n  clientId: string;\r\n  selectedScope:\r\n    | PermissionScopeRepresentation\r\n    | ScopeRepresentation\r\n    | undefined;\r\n  refresh: () => void;\r\n  open: boolean;\r\n  toggleDialog: () => void;\r\n};\r\n\r\nexport const DeleteScopeDialog = ({\r\n  clientId,\r\n  selectedScope,\r\n  refresh,\r\n  open,\r\n  toggleDialog,\r\n}: DeleteScopeDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  return (\r\n    <ConfirmDialogModal\r\n      open={open}\r\n      toggleDialog={toggleDialog}\r\n      titleKey=\"deleteScope\"\r\n      continueButtonLabel=\"confirm\"\r\n      onConfirm={async () => {\r\n        try {\r\n          await adminClient.clients.delAuthorizationScope({\r\n            id: clientId,\r\n            scopeId: selectedScope?.id!,\r\n          });\r\n          addAlert(t(\"resourceScopeSuccess\"), AlertVariant.success);\r\n          refresh();\r\n        } catch (error) {\r\n          addError(\"resourceScopeError\", error);\r\n        }\r\n      }}\r\n    >\r\n      {t(\"deleteScopeConfirm\")}\r\n      {selectedScope &&\r\n        \"permissions\" in selectedScope &&\r\n        selectedScope.permissions &&\r\n        selectedScope.permissions.length > 0 && (\r\n          <Alert\r\n            variant=\"warning\"\r\n            isInline\r\n            isPlain\r\n            title={t(\"deleteScopeWarning\")}\r\n            className=\"pf-v5-u-pt-lg\"\r\n          >\r\n            <p className=\"pf-v5-u-pt-xs\">\r\n              {selectedScope.permissions.map((permission) => (\r\n                <strong key={permission.id} className=\"pf-v5-u-pr-md\">\r\n                  {permission.name}\r\n                </strong>\r\n              ))}\r\n            </p>\r\n          </Alert>\r\n        )}\r\n    </ConfirmDialogModal>\r\n  );\r\n};\r\n"],"names":["DeleteScopeDialog","clientId","selectedScope","refresh","open","toggleDialog","adminClient","useAdminClient","t","useTranslation","addAlert","addError","useAlerts","jsxs","ConfirmDialogModal","AlertVariant","error","jsx","Alert","permission"],"mappings":"4JAmBO,MAAMA,EAAoB,CAAC,CAChC,SAAAC,EACA,cAAAC,EACA,QAAAC,EACA,KAAAC,EACA,aAAAC,CACF,IAA8B,CAC5B,KAAM,CAAE,YAAAC,CAAA,EAAgBC,EAAA,EAElB,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAAE,SAAAC,EAAU,SAAAC,CAAA,EAAaC,EAAA,EAE/B,OACEC,EAACC,EAAA,CACC,KAAAV,EACA,aAAAC,EACA,SAAS,cACT,oBAAoB,UACpB,UAAW,SAAY,CACrB,GAAI,CACF,MAAMC,EAAY,QAAQ,sBAAsB,CAC9C,GAAIL,EACJ,QAASC,GAAe,EAAA,CACzB,EACDQ,EAASF,EAAE,sBAAsB,EAAGO,EAAa,OAAO,EACxDZ,EAAA,CACF,OAASa,EAAO,CACdL,EAAS,qBAAsBK,CAAK,CACtC,CACF,EAEC,SAAA,CAAAR,EAAE,oBAAoB,EACtBN,GACC,gBAAiBA,GACjBA,EAAc,aACdA,EAAc,YAAY,OAAS,GACjCe,EAACC,EAAA,CACC,QAAQ,UACR,SAAQ,GACR,QAAO,GACP,MAAOV,EAAE,oBAAoB,EAC7B,UAAU,gBAEV,WAAC,IAAA,CAAE,UAAU,gBACV,SAAAN,EAAc,YAAY,IAAKiB,GAC9BF,EAAC,SAAA,CAA2B,UAAU,gBACnC,SAAAE,EAAW,MADDA,EAAW,EAExB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAIV"}