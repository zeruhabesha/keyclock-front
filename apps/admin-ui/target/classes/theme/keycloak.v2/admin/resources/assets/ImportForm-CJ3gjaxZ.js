import{jsxs as n,Fragment as C,jsx as r}from"react/jsx-runtime";import{u as v,a as F,b as w,d as y,j as S,_ as A,P as x,l as T,Q as j,A as E,au as I,g as V,L as P,bb as k,m as O,r as H,s as N,w as U,n as $,o as z,bc as D}from"./main-o1hptXRo.js";import{useState as K}from"react";import{F as L}from"./FormAccess-BnhQnYb9.js";import{F as Q}from"./FileUploadForm-3WTCaGLI.js";import{V as W}from"./ViewHeader-BDBsroi3.js";import{C as _,a as B}from"./ClientDescription-CbsY-rm4.js";import"react-dom";import"./CodeEditor-C4IS5oxi.js";import"./SwitchControl-CU1bUhmR.js";import"./IdentityProviderSelect-rmWlUbIg.js";const G=a=>a.match(/(<.[^(><.)]+>)/g);function oe(){const{adminClient:a}=v(),{t:s}=F(),c=w(),{realm:o}=y(),i=S(),{handleSubmit:m,setValue:d,formState:u}=i,[p,h]=K({}),{addAlert:f,addError:l}=A(),g=async t=>{try{const e=await b(t);O(e,d),h(e)}catch(e){l("importParseError",e)}};async function b(t){if(!G(t))return JSON.parse(t);const e=await H(`${U(a.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:t,headers:N(await a.getAccessToken())});if(!e.ok)throw new Error(`Server responded with invalid status: ${e.statusText}`);return e.json()}return n(C,{children:[r(W,{titleKey:"importClient",subKey:"clientsExplain"}),r(x,{variant:"light",children:r(L,{isHorizontal:!0,onSubmit:m(async t=>{try{const e=await a.clients.create({...p,...$({...t,attributes:t.attributes||{}})});f(s("clientImportSuccess"),z.success),c(D({realm:o,clientId:e.id,tab:"settings"}))}catch(e){l("clientImportError",e)}}),role:"manage-clients",children:n(T,{...i,children:[r(Q,{id:"realm-file",language:"json",extension:".json,.xml",helpText:s("helpFileUploadClient"),onChange:g}),r(_,{hasConfigureAccess:!0}),r(j,{name:"protocol",label:s("type"),readOnly:!0}),r(B,{unWrap:!0}),n(E,{children:[r(I,{formState:u,allowInvalid:!0,allowNonDirty:!0,children:s("save")}),r(V,{variant:"link",component:t=>r(P,{...t,to:k({realm:o})}),children:s("cancel")})]})]})})})]})}export{oe as default};
//# sourceMappingURL=ImportForm-CJ3gjaxZ.js.map
