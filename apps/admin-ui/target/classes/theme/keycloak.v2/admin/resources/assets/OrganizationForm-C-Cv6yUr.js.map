{"version":3,"file":"OrganizationForm-C-Cv6yUr.js","sources":["../../../../../../../src/organizations/OrganizationForm.tsx"],"sourcesContent":["import OrganizationRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/organizationRepresentation\";\r\nimport {\r\n  FormErrorText,\r\n  HelpItem,\r\n  TextAreaControl,\r\n  TextControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormGroup } from \"@patternfly/react-core\";\r\nimport { useEffect } from \"react\";\r\nimport { useFormContext, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { AttributeForm } from \"../components/key-value-form/AttributeForm\";\r\nimport { keyValueToArray } from \"../components/key-value-form/key-value-convert\";\r\nimport { MultiLineInput } from \"../components/multi-line-input/MultiLineInput\";\r\n\r\nexport type OrganizationFormType = AttributeForm &\r\n  Omit<OrganizationRepresentation, \"domains\" | \"attributes\"> & {\r\n    domains?: string[];\r\n  };\r\n\r\nexport const convertToOrg = (\r\n  org: OrganizationFormType,\r\n): OrganizationRepresentation => ({\r\n  ...org,\r\n  domains: org.domains?.map((d) => ({ name: d, verified: false })),\r\n  attributes: keyValueToArray(org.attributes),\r\n});\r\n\r\ntype OrganizationFormProps = {\r\n  readOnly?: boolean;\r\n};\r\n\r\nexport const OrganizationForm = ({\r\n  readOnly = false,\r\n}: OrganizationFormProps) => {\r\n  const { t } = useTranslation();\r\n  const {\r\n    setValue,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  const name = useWatch({ name: \"name\" });\r\n\r\n  useEffect(() => {\r\n    if (!readOnly) {\r\n      setValue(\"alias\", name);\r\n    }\r\n  }, [name, readOnly]);\r\n\r\n  return (\r\n    <>\r\n      <TextControl\r\n        label={t(\"name\")}\r\n        name=\"name\"\r\n        rules={{ required: t(\"required\") }}\r\n      />\r\n      <TextControl\r\n        label={t(\"alias\")}\r\n        name=\"alias\"\r\n        labelIcon={t(\"organizationAliasHelp\")}\r\n        isDisabled={readOnly}\r\n      />\r\n      <FormGroup\r\n        label={t(\"domain\")}\r\n        fieldId=\"domain\"\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"organizationDomainHelp\")}\r\n            fieldLabelId=\"domain\"\r\n          />\r\n        }\r\n      >\r\n        <MultiLineInput\r\n          id=\"domain\"\r\n          name=\"domains\"\r\n          aria-label={t(\"domain\")}\r\n          addButtonLabel=\"addDomain\"\r\n        />\r\n        {errors?.[\"domains\"]?.message && (\r\n          <FormErrorText message={errors[\"domains\"].message.toString()} />\r\n        )}\r\n      </FormGroup>\r\n      <TextControl\r\n        label={t(\"redirectUrl\")}\r\n        name=\"redirectUrl\"\r\n        labelIcon={t(\"organizationRedirectUrlHelp\")}\r\n      />\r\n      <TextAreaControl name=\"description\" label={t(\"description\")} />\r\n    </>\r\n  );\r\n};\r\n"],"names":["convertToOrg","org","d","keyValueToArray","OrganizationForm","readOnly","t","useTranslation","setValue","errors","useFormContext","name","useWatch","useEffect","jsxs","Fragment","jsx","TextControl","FormGroup","HelpItem","MultiLineInput","FormErrorText","TextAreaControl"],"mappings":"sPAoBO,MAAMA,EACXC,IACgC,CAChC,GAAGA,EACH,QAASA,EAAI,SAAS,IAAKC,IAAO,CAAE,KAAMA,EAAG,SAAU,EAAA,EAAQ,EAC/D,WAAYC,EAAgBF,EAAI,UAAU,CAC5C,GAMaG,EAAmB,CAAC,CAC/B,SAAAC,EAAW,EACb,IAA6B,CAC3B,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CACJ,SAAAC,EACA,UAAW,CAAE,OAAAC,CAAA,CAAO,EAClBC,EAAA,EACEC,EAAOC,EAAS,CAAE,KAAM,OAAQ,EAEtC,OAAAC,EAAU,IAAM,CACTR,GACHG,EAAS,QAASG,CAAI,CAE1B,EAAG,CAACA,EAAMN,CAAQ,CAAC,EAGjBS,EAAAC,EAAA,CACE,SAAA,CAAAC,EAACC,EAAA,CACC,MAAOX,EAAE,MAAM,EACf,KAAK,OACL,MAAO,CAAE,SAAUA,EAAE,UAAU,CAAA,CAAE,CAAA,EAEnCU,EAACC,EAAA,CACC,MAAOX,EAAE,OAAO,EAChB,KAAK,QACL,UAAWA,EAAE,uBAAuB,EACpC,WAAYD,CAAA,CAAA,EAEdS,EAACI,EAAA,CACC,MAAOZ,EAAE,QAAQ,EACjB,QAAQ,SACR,UACEU,EAACG,EAAA,CACC,SAAUb,EAAE,wBAAwB,EACpC,aAAa,QAAA,CAAA,EAIjB,SAAA,CAAAU,EAACI,EAAA,CACC,GAAG,SACH,KAAK,UACL,aAAYd,EAAE,QAAQ,EACtB,eAAe,WAAA,CAAA,EAEhBG,GAAS,SAAY,SACpBO,EAACK,EAAA,CAAc,QAASZ,EAAO,QAAW,QAAQ,SAAA,CAAS,CAAG,CAAA,CAAA,CAAA,EAGlEO,EAACC,EAAA,CACC,MAAOX,EAAE,aAAa,EACtB,KAAK,cACL,UAAWA,EAAE,6BAA6B,CAAA,CAAA,IAE3CgB,EAAA,CAAgB,KAAK,cAAc,MAAOhB,EAAE,aAAa,CAAA,CAAG,CAAA,EAC/D,CAEJ"}