{"version":3,"file":"UserFederationLdapForm-CTqZPRi6.js","sources":["../../../../../../../src/user-federation/ldap/LdapSettingsConnection.tsx","../../../../../../../src/user-federation/ldap/LdapSettingsAdvanced.tsx","../../../../../../../src/user-federation/ldap/LdapSettingsGeneral.tsx","../../../../../../../src/user-federation/ldap/LdapSettingsKerberosIntegration.tsx","../../../../../../../src/user-federation/ldap/LdapSettingsSearching.tsx","../../../../../../../src/user-federation/ldap/LdapSettingsSynchronization.tsx","../../../../../../../src/user-federation/UserFederationLdapForm.tsx"],"sourcesContent":["import type TestLdapConnectionRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/testLdapConnection\";\r\nimport {\r\n  HelpItem,\r\n  KeycloakSelect,\r\n  PasswordControl,\r\n  SelectControl,\r\n  SelectVariant,\r\n  TextControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  FormGroup,\r\n  SelectOption,\r\n  Switch,\r\n} from \"@patternfly/react-core\";\r\nimport { get, isEqual } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  UseFormReturn,\r\n  useWatch,\r\n} from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\n\r\nexport type LdapSettingsConnectionProps = {\r\n  form: UseFormReturn;\r\n  id?: string;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n};\r\n\r\nconst testLdapProperties: Array<keyof TestLdapConnectionRepresentation> = [\r\n  \"connectionUrl\",\r\n  \"bindDn\",\r\n  \"bindCredential\",\r\n  \"useTruststoreSpi\",\r\n  \"connectionTimeout\",\r\n  \"startTls\",\r\n  \"authType\",\r\n];\r\n\r\ntype TestTypes = \"testConnection\" | \"testAuthentication\";\r\n\r\nexport const convertFormToSettings = (form: UseFormReturn) => {\r\n  const settings: TestLdapConnectionRepresentation = {};\r\n\r\n  testLdapProperties.forEach((key) => {\r\n    const value = get(form.getValues(), `config.${key}`);\r\n    settings[key] = Array.isArray(value) ? value[0] : \"\";\r\n  });\r\n\r\n  return settings;\r\n};\r\n\r\nexport const LdapSettingsConnection = ({\r\n  form,\r\n  id,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n}: LdapSettingsConnectionProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const { addAlert, addError } = useAlerts();\r\n  const edit = !!id;\r\n\r\n  const testLdap = async (testType: TestTypes) => {\r\n    try {\r\n      const settings = convertFormToSettings(form);\r\n      await adminClient.realms.testLDAPConnection(\r\n        { realm },\r\n        { ...settings, action: testType, componentId: id },\r\n      );\r\n      addAlert(t(\"testSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"testError\", error);\r\n    }\r\n  };\r\n\r\n  const [isBindTypeDropdownOpen, setIsBindTypeDropdownOpen] = useState(false);\r\n\r\n  const ldapBindType = useWatch({\r\n    control: form.control,\r\n    name: \"config.authType\",\r\n    defaultValue: [\"simple\"],\r\n  });\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"connectionAndAuthenticationSettings\")}\r\n          description={t(\"ldapConnectionAndAuthorizationSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <TextControl\r\n          name=\"config.connectionUrl.0\"\r\n          label={t(\"connectionURL\")}\r\n          labelIcon={t(\"consoleDisplayConnectionUrlHelp\")}\r\n          type=\"url\"\r\n          rules={{\r\n            required: t(\"validateConnectionUrl\"),\r\n          }}\r\n        />\r\n        <FormGroup\r\n          label={t(\"enableStartTls\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"enableStartTlsHelp\")}\r\n              fieldLabelId=\"enableStartTls\"\r\n            />\r\n          }\r\n          fieldId=\"kc-enable-start-tls\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.startTls\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-enable-start-tls\"}\r\n                data-testid=\"enable-start-tls\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"enableStartTls\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        <SelectControl\r\n          id=\"useTruststoreSpi\"\r\n          name=\"config.useTruststoreSpi[0]\"\r\n          label={t(\"useTruststoreSpi\")}\r\n          labelIcon={t(\"useTruststoreSpiHelp\")}\r\n          controller={{\r\n            defaultValue: \"always\",\r\n          }}\r\n          options={[\r\n            { key: \"always\", value: t(\"always\") },\r\n            { key: \"never\", value: t(\"never\") },\r\n          ]}\r\n        />\r\n        <FormGroup\r\n          label={t(\"connectionPooling\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"connectionPoolingHelp\")}\r\n              fieldLabelId=\"connectionPooling\"\r\n            />\r\n          }\r\n          fieldId=\"kc-connection-pooling\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.connectionPooling\"\r\n            defaultValue={[\"true\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-connection-pooling\"}\r\n                data-testid=\"connection-pooling\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"connectionPooling\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        <TextControl\r\n          name=\"config.connectionTimeout.0\"\r\n          label={t(\"connectionTimeout\")}\r\n          labelIcon={t(\"connectionTimeoutHelp\")}\r\n          type=\"number\"\r\n          min={0}\r\n        />\r\n        <FormGroup fieldId=\"kc-test-connection-button\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            id=\"kc-test-connection-button\"\r\n            data-testid=\"test-connection-button\"\r\n            onClick={() => testLdap(\"testConnection\")}\r\n          >\r\n            {t(\"testConnection\")}\r\n          </Button>\r\n        </FormGroup>\r\n        <FormGroup\r\n          label={t(\"bindType\")}\r\n          labelIcon={\r\n            <HelpItem helpText={t(\"bindTypeHelp\")} fieldLabelId=\"bindType\" />\r\n          }\r\n          fieldId=\"kc-bind-type\"\r\n          isRequired\r\n        >\r\n          <Controller\r\n            name=\"config.authType[0]\"\r\n            defaultValue=\"simple\"\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <KeycloakSelect\r\n                toggleId=\"kc-bind-type\"\r\n                onToggle={() =>\r\n                  setIsBindTypeDropdownOpen(!isBindTypeDropdownOpen)\r\n                }\r\n                isOpen={isBindTypeDropdownOpen}\r\n                onSelect={(value) => {\r\n                  field.onChange(value as string);\r\n                  setIsBindTypeDropdownOpen(false);\r\n                }}\r\n                selections={field.value}\r\n                variant={SelectVariant.single}\r\n                data-testid=\"ldap-bind-type\"\r\n                aria-label={t(\"selectBindType\")}\r\n              >\r\n                <SelectOption value=\"simple\">simple</SelectOption>\r\n                <SelectOption value=\"none\">none</SelectOption>\r\n              </KeycloakSelect>\r\n            )}\r\n          />\r\n        </FormGroup>\r\n\r\n        {isEqual(ldapBindType, [\"simple\"]) && (\r\n          <>\r\n            <TextControl\r\n              name=\"config.bindDn.0\"\r\n              label={t(\"bindDn\")}\r\n              labelIcon={t(\"bindDnHelp\")}\r\n              rules={{\r\n                required: t(\"validateBindDn\"),\r\n              }}\r\n            />\r\n            <PasswordControl\r\n              name=\"config.bindCredential.0\"\r\n              label={t(\"bindCredentials\")}\r\n              labelIcon={t(\"bindCredentialsHelp\")}\r\n              hasReveal={!edit}\r\n              rules={{\r\n                required: t(\"validateBindCredentials\"),\r\n              }}\r\n            />\r\n          </>\r\n        )}\r\n        <FormGroup fieldId=\"kc-test-auth-button\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            id=\"kc-test-auth-button\"\r\n            data-testid=\"test-auth-button\"\r\n            onClick={() => testLdap(\"testAuthentication\")}\r\n          >\r\n            {t(\"testAuthentication\")}\r\n          </Button>\r\n        </FormGroup>\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import { Button, FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { Controller, UseFormReturn } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { convertFormToSettings } from \"./LdapSettingsConnection\";\r\n\r\nexport type LdapSettingsAdvancedProps = {\r\n  id?: string;\r\n  form: UseFormReturn;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n};\r\n\r\nconst PASSWORD_MODIFY_OID = \"1.3.6.1.4.1.4203.1.11.1\";\r\n\r\nexport const LdapSettingsAdvanced = ({\r\n  id,\r\n  form,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n}: LdapSettingsAdvancedProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const { realm } = useRealm();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const testLdap = async () => {\r\n    if (!(await form.trigger())) return;\r\n    try {\r\n      const settings = convertFormToSettings(form);\r\n      const ldapOids = await adminClient.realms.ldapServerCapabilities(\r\n        { realm },\r\n        { ...settings, componentId: id },\r\n      );\r\n      addAlert(t(\"testSuccess\"));\r\n      const passwordModifyOid = ldapOids.filter(\r\n        (id: { oid: string }) => id.oid === PASSWORD_MODIFY_OID,\r\n      );\r\n      form.setValue(\"config.usePasswordModifyExtendedOp\", [\r\n        (passwordModifyOid.length > 0).toString(),\r\n      ]);\r\n    } catch (error) {\r\n      addError(\"testError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"advancedSettings\")}\r\n          description={t(\"ldapAdvancedSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <FormGroup\r\n          label={t(\"enableLdapv3Password\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"enableLdapv3PasswordHelp\")}\r\n              fieldLabelId=\"enableLdapv3Password\"\r\n            />\r\n          }\r\n          fieldId=\"kc-enable-ldapv3-password\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.usePasswordModifyExtendedOp\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-enable-ldapv3-password\"}\r\n                data-testid=\"ldapv3-password\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"enableLdapv3Password\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n\r\n        <FormGroup\r\n          label={t(\"validatePasswordPolicy\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"validatePasswordPolicyHelp\")}\r\n              fieldLabelId=\"validatePasswordPolicy\"\r\n            />\r\n          }\r\n          fieldId=\"kc-validate-password-policy\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.validatePasswordPolicy\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-validate-password-policy\"}\r\n                data-testid=\"password-policy\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"validatePasswordPolicy\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n\r\n        <FormGroup\r\n          label={t(\"trustEmail\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"trustEmailHelp\")}\r\n              fieldLabelId=\"trustEmail\"\r\n            />\r\n          }\r\n          fieldId=\"kc-trust-email\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.trustEmail\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-trust-email\"}\r\n                data-testid=\"trust-email\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"trustEmail\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n        <FormGroup\r\n          label={t(\"connectionTrace\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"connectionTraceHelp\")}\r\n              fieldLabelId=\"connectionTrace\"\r\n            />\r\n          }\r\n          fieldId=\"kc-connection-trace\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.connectionTrace\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id={\"kc-connection-trace\"}\r\n                data-testid=\"connection-trace\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"connectionTrace\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n        <FormGroup fieldId=\"query-extensions\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            id=\"query-extensions\"\r\n            data-testid=\"query-extensions\"\r\n            onClick={testLdap}\r\n          >\r\n            {t(\"queryExtensions\")}\r\n          </Button>\r\n        </FormGroup>\r\n      </FormAccess>\r\n    </>\r\n  );\r\n};\r\n","import ComponentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentRepresentation\";\r\nimport {\r\n  HelpItem,\r\n  KeycloakSelect,\r\n  SelectVariant,\r\n  TextControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormGroup, SelectOption } from \"@patternfly/react-core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Controller, FormProvider, UseFormReturn } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\n\r\nexport type LdapSettingsGeneralProps = {\r\n  form: UseFormReturn<ComponentRepresentation>;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n  vendorEdit?: boolean;\r\n};\r\n\r\nexport const LdapSettingsGeneral = ({\r\n  form,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n  vendorEdit = false,\r\n}: LdapSettingsGeneralProps) => {\r\n  const { t } = useTranslation();\r\n  const { realm, realmRepresentation } = useRealm();\r\n\r\n  useEffect(() => form.setValue(\"parentId\", realmRepresentation?.id), []);\r\n  const [isVendorDropdownOpen, setIsVendorDropdownOpen] = useState(false);\r\n\r\n  const setVendorDefaultValues = () => {\r\n    switch (form.getValues(\"config.vendor[0]\")) {\r\n      case \"ad\":\r\n        form.setValue(\"config.usernameLDAPAttribute[0]\", \"cn\");\r\n        form.setValue(\"config.rdnLDAPAttribute[0]\", \"cn\");\r\n        form.setValue(\"config.uuidLDAPAttribute[0]\", \"objectGUID\");\r\n        form.setValue(\"config.krbPrincipalAttribute[0]\", \"userPrincipalName\");\r\n        form.setValue(\r\n          \"config.userObjectClasses[0]\",\r\n          \"person, organizationalPerson, user\",\r\n        );\r\n        break;\r\n      case \"rhds\":\r\n        form.setValue(\"config.usernameLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.rdnLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.uuidLDAPAttribute[0]\", \"nsuniqueid\");\r\n        form.setValue(\"config.krbPrincipalAttribute[0]\", \"krbPrincipalName\");\r\n        form.setValue(\r\n          \"config.userObjectClasses[0]\",\r\n          \"inetOrgPerson, organizationalPerson\",\r\n        );\r\n        break;\r\n      case \"tivoli\":\r\n        form.setValue(\"config.usernameLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.rdnLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.uuidLDAPAttribute[0]\", \"uniqueidentifier\");\r\n        form.setValue(\"config.krbPrincipalAttribute[0]\", \"krb5PrincipalName\");\r\n        form.setValue(\r\n          \"config.userObjectClasses[0]\",\r\n          \"inetOrgPerson, organizationalPerson\",\r\n        );\r\n        break;\r\n      case \"edirectory\":\r\n        form.setValue(\"config.usernameLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.rdnLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.uuidLDAPAttribute[0]\", \"guid\");\r\n        form.setValue(\"config.krbPrincipalAttribute[0]\", \"krb5PrincipalName\");\r\n        form.setValue(\r\n          \"config.userObjectClasses[0]\",\r\n          \"inetOrgPerson, organizationalPerson\",\r\n        );\r\n        break;\r\n      case \"other\":\r\n        form.setValue(\"config.usernameLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.rdnLDAPAttribute[0]\", \"uid\");\r\n        form.setValue(\"config.uuidLDAPAttribute[0]\", \"entryUUID\");\r\n        form.setValue(\"config.krbPrincipalAttribute[0]\", \"krb5PrincipalName\");\r\n        form.setValue(\r\n          \"config.userObjectClasses[0]\",\r\n          \"inetOrgPerson, organizationalPerson\",\r\n        );\r\n        break;\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"generalOptions\")}\r\n          description={t(\"ldapGeneralOptionsSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        {/* These hidden fields are required so data object written back matches data retrieved */}\r\n        <input\r\n          type=\"hidden\"\r\n          defaultValue=\"ldap\"\r\n          {...form.register(\"providerId\")}\r\n        />\r\n        <input\r\n          type=\"hidden\"\r\n          defaultValue=\"org.keycloak.storage.UserStorageProvider\"\r\n          {...form.register(\"providerType\")}\r\n        />\r\n        <input\r\n          type=\"hidden\"\r\n          defaultValue={realm}\r\n          {...form.register(\"parentId\")}\r\n        />\r\n        <TextControl\r\n          name=\"name\"\r\n          label={t(\"uiDisplayName\")}\r\n          labelIcon={t(\"uiDisplayNameHelp\")}\r\n          defaultValue=\"ldap\"\r\n          rules={{\r\n            required: t(\"validateName\"),\r\n          }}\r\n        />\r\n        <FormGroup\r\n          label={t(\"vendor\")}\r\n          labelIcon={\r\n            <HelpItem helpText={t(\"vendorHelp\")} fieldLabelId=\"vendor\" />\r\n          }\r\n          fieldId=\"kc-vendor\"\r\n          isRequired\r\n        >\r\n          <Controller\r\n            name=\"config.vendor[0]\"\r\n            defaultValue=\"ad\"\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <KeycloakSelect\r\n                isDisabled={vendorEdit}\r\n                toggleId=\"kc-vendor\"\r\n                onToggle={() => setIsVendorDropdownOpen(!isVendorDropdownOpen)}\r\n                isOpen={isVendorDropdownOpen}\r\n                onSelect={(value) => {\r\n                  field.onChange(value as string);\r\n                  setIsVendorDropdownOpen(false);\r\n                  setVendorDefaultValues();\r\n                }}\r\n                selections={field.value}\r\n                variant={SelectVariant.single}\r\n                aria-label={t(\"selectVendor\")}\r\n              >\r\n                <SelectOption key={0} value=\"ad\">\r\n                  Active Directory\r\n                </SelectOption>\r\n                <SelectOption key={1} value=\"rhds\">\r\n                  Red Hat Directory Server\r\n                </SelectOption>\r\n                <SelectOption key={2} value=\"tivoli\">\r\n                  Tivoli\r\n                </SelectOption>\r\n                <SelectOption key={3} value=\"edirectory\">\r\n                  Novell eDirectory\r\n                </SelectOption>\r\n                <SelectOption key={4} value=\"other\">\r\n                  Other\r\n                </SelectOption>\r\n              </KeycloakSelect>\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import { FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  UseFormReturn,\r\n  useWatch,\r\n} from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\n\r\nexport type LdapSettingsKerberosIntegrationProps = {\r\n  form: UseFormReturn;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n};\r\n\r\nexport const LdapSettingsKerberosIntegration = ({\r\n  form,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n}: LdapSettingsKerberosIntegrationProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const allowKerberosAuth: [string] = useWatch({\r\n    control: form.control,\r\n    name: \"config.allowKerberosAuthentication\",\r\n    defaultValue: [\"false\"],\r\n  });\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"kerberosIntegration\")}\r\n          description={t(\"ldapKerberosSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <FormGroup\r\n          label={t(\"allowKerberosAuthentication\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"allowKerberosAuthenticationHelp\")}\r\n              fieldLabelId=\"allowKerberosAuthentication\"\r\n            />\r\n          }\r\n          fieldId=\"kc-allow-kerberos-authentication\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.allowKerberosAuthentication\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-allow-kerberos-authentication\"\r\n                data-testid=\"allow-kerberos-auth\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"allowKerberosAuthentication\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n\r\n        {allowKerberosAuth[0] === \"true\" && (\r\n          <>\r\n            <TextControl\r\n              name=\"config.kerberosRealm.0\"\r\n              label={t(\"kerberosRealm\")}\r\n              labelIcon={t(\"kerberosRealmHelp\")}\r\n              rules={{\r\n                required: t(\"validateRealm\"),\r\n              }}\r\n            />\r\n            <TextControl\r\n              name=\"config.serverPrincipal.0\"\r\n              label={t(\"serverPrincipal\")}\r\n              labelIcon={t(\"serverPrincipalHelp\")}\r\n              rules={{\r\n                required: t(\"validateServerPrincipal\"),\r\n              }}\r\n            />\r\n            <TextControl\r\n              name=\"config.keyTab.0\"\r\n              label={t(\"keyTab\")}\r\n              labelIcon={t(\"keyTabHelp\")}\r\n              rules={{\r\n                required: t(\"validateKeyTab\"),\r\n              }}\r\n            />\r\n            <TextControl\r\n              name=\"config.krbPrincipalAttribute.0\"\r\n              label={t(\"krbPrincipalAttribute\")}\r\n              labelIcon={t(\"krbPrincipalAttributeHelp\")}\r\n            />\r\n\r\n            <FormGroup\r\n              label={t(\"debug\")}\r\n              labelIcon={\r\n                <HelpItem helpText={t(\"debugHelp\")} fieldLabelId=\"debug\" />\r\n              }\r\n              fieldId=\"kc-debug\"\r\n              hasNoPaddingTop\r\n            >\r\n              <Controller\r\n                name=\"config.debug\"\r\n                defaultValue={[\"false\"]}\r\n                control={form.control}\r\n                render={({ field }) => (\r\n                  <Switch\r\n                    id=\"kc-debug\"\r\n                    data-testid=\"debug\"\r\n                    isDisabled={false}\r\n                    onChange={(_event, value) => field.onChange([`${value}`])}\r\n                    isChecked={field.value[0] === \"true\"}\r\n                    label={t(\"on\")}\r\n                    labelOff={t(\"off\")}\r\n                    aria-label={t(\"debug\")}\r\n                  />\r\n                )}\r\n              />\r\n            </FormGroup>\r\n          </>\r\n        )}\r\n        <FormGroup\r\n          label={t(\"useKerberosForPasswordAuthentication\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"useKerberosForPasswordAuthenticationHelp\")}\r\n              fieldLabelId=\"useKerberosForPasswordAuthentication\"\r\n            />\r\n          }\r\n          fieldId=\"kc-use-kerberos-password-authentication\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.useKerberosForPasswordAuthentication\"\r\n            defaultValue={[\"false\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-use-kerberos-password-authentication\"\r\n                data-testid=\"use-kerberos-pw-auth\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"useKerberosForPasswordAuthentication\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import {\r\n  HelpItem,\r\n  SelectControl,\r\n  TextControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { Controller, FormProvider, UseFormReturn } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\n\r\nexport type LdapSettingsSearchingProps = {\r\n  form: UseFormReturn;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n};\r\n\r\nexport const LdapSettingsSearching = ({\r\n  form,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n}: LdapSettingsSearchingProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"ldapSearchingAndUpdatingSettings\")}\r\n          description={t(\"ldapSearchingAndUpdatingSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <SelectControl\r\n          id=\"editMode\"\r\n          name=\"config.editMode[0]\"\r\n          label={t(\"editMode\")}\r\n          labelIcon={t(\"editModeLdapHelp\")}\r\n          controller={{\r\n            defaultValue: \"\",\r\n            rules: {\r\n              required: {\r\n                value: true,\r\n                message: t(\"validateEditMode\"),\r\n              },\r\n            },\r\n          }}\r\n          options={[\"\", \"READ_ONLY\", \"WRITABLE\", \"UNSYNCED\"]}\r\n        />\r\n        <TextControl\r\n          name=\"config.usersDn.0\"\r\n          label={t(\"usersDN\")}\r\n          labelIcon={t(\"usersDNHelp\")}\r\n          rules={{\r\n            required: t(\"validateUsersDn\"),\r\n          }}\r\n        />\r\n        <TextControl\r\n          name=\"config.relativeCreateDn.0\"\r\n          label={t(\"relativeUserCreateDn\")}\r\n          labelIcon={t(\"relativeUserCreateDnHelp\")}\r\n        />\r\n        <TextControl\r\n          name=\"config.usernameLDAPAttribute.0\"\r\n          label={t(\"usernameLdapAttribute\")}\r\n          labelIcon={t(\"usernameLdapAttributeHelp\")}\r\n          defaultValue=\"cn\"\r\n          rules={{\r\n            required: t(\"validateUsernameLDAPAttribute\"),\r\n          }}\r\n        />\r\n        <TextControl\r\n          name=\"config.rdnLDAPAttribute.0\"\r\n          label={t(\"rdnLdapAttribute\")}\r\n          labelIcon={t(\"rdnLdapAttributeHelp\")}\r\n          defaultValue=\"cn\"\r\n          rules={{\r\n            required: t(\"validateRdnLdapAttribute\"),\r\n          }}\r\n        />\r\n        <TextControl\r\n          name=\"config.uuidLDAPAttribute.0\"\r\n          label={t(\"uuidLdapAttribute\")}\r\n          labelIcon={t(\"uuidLdapAttributeHelp\")}\r\n          defaultValue=\"objectGUID\"\r\n          rules={{\r\n            required: t(\"validateUuidLDAPAttribute\"),\r\n          }}\r\n        />\r\n        <TextControl\r\n          name=\"config.userObjectClasses.0\"\r\n          label={t(\"userObjectClasses\")}\r\n          labelIcon={t(\"userObjectClassesHelp\")}\r\n          defaultValue=\"person, organizationalPerson, user\"\r\n          rules={{\r\n            required: t(\"validateUserObjectClasses\"),\r\n          }}\r\n        />\r\n        <TextControl\r\n          name=\"config.customUserSearchFilter.0\"\r\n          label={t(\"userLdapFilter\")}\r\n          labelIcon={t(\"userLdapFilterHelp\")}\r\n          rules={{\r\n            pattern: {\r\n              value: /(\\(.*\\))$/,\r\n              message: t(\"validateCustomUserSearchFilter\"),\r\n            },\r\n          }}\r\n        />\r\n        <SelectControl\r\n          id=\"kc-search-scope\"\r\n          name=\"config.searchScope[0]\"\r\n          label={t(\"searchScope\")}\r\n          labelIcon={t(\"searchScopeHelp\")}\r\n          controller={{\r\n            defaultValue: \"1\",\r\n          }}\r\n          options={[\r\n            { key: \"1\", value: t(\"oneLevel\") },\r\n            { key: \"2\", value: t(\"subtree\") },\r\n          ]}\r\n        />\r\n        <TextControl\r\n          name=\"config.readTimeout.0\"\r\n          label={t(\"readTimeout\")}\r\n          labelIcon={t(\"readTimeoutHelp\")}\r\n          type=\"number\"\r\n          min={0}\r\n        />\r\n        <FormGroup\r\n          label={t(\"pagination\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"paginationHelp\")}\r\n              fieldLabelId=\"pagination\"\r\n            />\r\n          }\r\n          fieldId=\"kc-ui-pagination\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.pagination\"\r\n            defaultValue={[\"true\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-ui-pagination\"\r\n                data-testid=\"ui-pagination\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"pagination\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n        <SelectControl\r\n          name=\"config.referral.0\"\r\n          label={t(\"referral\")}\r\n          labelIcon={t(\"referralHelp\")}\r\n          controller={{\r\n            defaultValue: \"\",\r\n          }}\r\n          options={[\"ignore\", \"follow\"]}\r\n        />\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import { FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { Controller, FormProvider, UseFormReturn } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { WizardSectionHeader } from \"../../components/wizard-section-header/WizardSectionHeader\";\r\n\r\nexport type LdapSettingsSynchronizationProps = {\r\n  form: UseFormReturn;\r\n  showSectionHeading?: boolean;\r\n  showSectionDescription?: boolean;\r\n};\r\n\r\nexport const LdapSettingsSynchronization = ({\r\n  form,\r\n  showSectionHeading = false,\r\n  showSectionDescription = false,\r\n}: LdapSettingsSynchronizationProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const watchPeriodicSync = form.watch(\"config.periodicFullSync\", false);\r\n  const watchChangedSync = form.watch(\"config.periodicChangedUsersSync\", false);\r\n\r\n  return (\r\n    <FormProvider {...form}>\r\n      {showSectionHeading && (\r\n        <WizardSectionHeader\r\n          title={t(\"synchronizationSettings\")}\r\n          description={t(\"ldapSynchronizationSettingsDescription\")}\r\n          showDescription={showSectionDescription}\r\n        />\r\n      )}\r\n\r\n      <FormAccess role=\"manage-realm\" isHorizontal>\r\n        <FormGroup\r\n          hasNoPaddingTop\r\n          label={t(\"importUsers\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"importUsersHelp\")}\r\n              fieldLabelId=\"importUsers\"\r\n            />\r\n          }\r\n          fieldId=\"kc-import-users\"\r\n        >\r\n          <Controller\r\n            name=\"config.importEnabled\"\r\n            defaultValue={[\"true\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-import-users\"\r\n                data-testid=\"import-users\"\r\n                name=\"importEnabled\"\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                isDisabled={false}\r\n                aria-label={t(\"importUsers\")}\r\n              />\r\n            )}\r\n          ></Controller>\r\n        </FormGroup>\r\n        <FormGroup\r\n          hasNoPaddingTop\r\n          label={t(\"syncRegistrations\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"syncRegistrations\")}\r\n              fieldLabelId=\"syncRegistrations\"\r\n            />\r\n          }\r\n          fieldId=\"syncRegistrations\"\r\n        >\r\n          <Controller\r\n            name=\"config.syncRegistrations\"\r\n            defaultValue={[\"true\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"syncRegistrations\"\r\n                data-testid=\"syncRegistrations\"\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                aria-label={t(\"syncRegistrations\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        <TextControl\r\n          name=\"config.batchSizeForSync.0\"\r\n          type=\"number\"\r\n          min={0}\r\n          label={t(\"batchSize\")}\r\n          labelIcon={t(\"batchSizeHelp\")}\r\n        />\r\n        <FormGroup\r\n          label={t(\"periodicFullSync\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"periodicFullSyncHelp\")}\r\n              fieldLabelId=\"periodicFullSync\"\r\n            />\r\n          }\r\n          fieldId=\"kc-periodic-full-sync\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.periodicFullSync\"\r\n            defaultValue={false}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-periodic-full-sync\"\r\n                data-testid=\"periodic-full-sync\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange(value)}\r\n                isChecked={field.value === true}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"periodicFullSync\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        {watchPeriodicSync && (\r\n          <TextControl\r\n            name=\"config.fullSyncPeriod.0\"\r\n            label={t(\"fullSyncPeriod\")}\r\n            labelIcon={t(\"fullSyncPeriodHelp\")}\r\n            type=\"number\"\r\n            min={-1}\r\n            defaultValue={604800}\r\n          />\r\n        )}\r\n        <FormGroup\r\n          label={t(\"periodicChangedUsersSync\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"periodicChangedUsersSyncHelp\")}\r\n              fieldLabelId=\"periodicChangedUsersSync\"\r\n            />\r\n          }\r\n          fieldId=\"kc-periodic-changed-users-sync\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.periodicChangedUsersSync\"\r\n            defaultValue={false}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-periodic-changed-users-sync\"\r\n                data-testid=\"periodic-changed-users-sync\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange(value)}\r\n                isChecked={field.value === true}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"periodicChangedUsersSync\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        {watchChangedSync && (\r\n          <TextControl\r\n            name=\"config.changedSyncPeriod.0\"\r\n            label={t(\"changedUsersSyncPeriod\")}\r\n            labelIcon={t(\"changedUsersSyncHelp\")}\r\n            type=\"number\"\r\n            min={-1}\r\n            defaultValue={86400}\r\n          />\r\n        )}\r\n        <FormGroup\r\n          label={t(\"removeInvalidUsers\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"removeInvalidUsersHelp\")}\r\n              fieldLabelId=\"removeInvalidUsers\"\r\n            />\r\n          }\r\n          fieldId=\"kc-remove-invalid-users\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"config.removeInvalidUsersEnabled\"\r\n            defaultValue={[\"true\"]}\r\n            control={form.control}\r\n            render={({ field }) => (\r\n              <Switch\r\n                id=\"kc-remove-invalid-users\"\r\n                data-testid=\"remove-invalid-users\"\r\n                isDisabled={false}\r\n                onChange={(_event, value) => field.onChange([`${value}`])}\r\n                isChecked={field.value[0] === \"true\"}\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                aria-label={t(\"removeInvalidUsers\")}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n      </FormAccess>\r\n    </FormProvider>\r\n  );\r\n};\r\n","import type ComponentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentRepresentation\";\r\nimport { Button, Form } from \"@patternfly/react-core\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ScrollForm } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nimport { FixedButtonsGroup } from \"../components/form/FixedButtonGroup\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\nimport { LdapSettingsAdvanced } from \"./ldap/LdapSettingsAdvanced\";\r\nimport { LdapSettingsConnection } from \"./ldap/LdapSettingsConnection\";\r\nimport { LdapSettingsGeneral } from \"./ldap/LdapSettingsGeneral\";\r\nimport { LdapSettingsKerberosIntegration } from \"./ldap/LdapSettingsKerberosIntegration\";\r\nimport { LdapSettingsSearching } from \"./ldap/LdapSettingsSearching\";\r\nimport { LdapSettingsSynchronization } from \"./ldap/LdapSettingsSynchronization\";\r\nimport { toUserFederation } from \"./routes/UserFederation\";\r\nimport { SettingsCache } from \"./shared/SettingsCache\";\r\n\r\nexport type LdapComponentRepresentation = ComponentRepresentation & {\r\n  config?: {\r\n    periodicChangedUsersSync?: boolean;\r\n    periodicFullSync?: boolean;\r\n  };\r\n};\r\n\r\nexport type UserFederationLdapFormProps = {\r\n  id?: string;\r\n  onSubmit: (formData: LdapComponentRepresentation) => void;\r\n};\r\n\r\nexport const UserFederationLdapForm = ({\r\n  id,\r\n  onSubmit,\r\n}: UserFederationLdapFormProps) => {\r\n  const { t } = useTranslation();\r\n  const form = useFormContext<LdapComponentRepresentation>();\r\n  const navigate = useNavigate();\r\n  const { realm } = useRealm();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n\r\n  return (\r\n    <>\r\n      <ScrollForm\r\n        label={t(\"jumpToSection\")}\r\n        sections={[\r\n          {\r\n            title: t(\"generalOptions\"),\r\n            panel: <LdapSettingsGeneral form={form} vendorEdit={!!id} />,\r\n          },\r\n          {\r\n            title: t(\"connectionAndAuthenticationSettings\"),\r\n            panel: <LdapSettingsConnection form={form} id={id} />,\r\n          },\r\n          {\r\n            title: t(\"ldapSearchingAndUpdatingSettings\"),\r\n            panel: <LdapSettingsSearching form={form} />,\r\n          },\r\n          {\r\n            title: t(\"synchronizationSettings\"),\r\n            panel: <LdapSettingsSynchronization form={form} />,\r\n          },\r\n          {\r\n            title: t(\"kerberosIntegration\"),\r\n            panel: <LdapSettingsKerberosIntegration form={form} />,\r\n            isHidden: !isFeatureEnabled(Feature.Kerberos),\r\n          },\r\n          { title: t(\"cacheSettings\"), panel: <SettingsCache form={form} /> },\r\n          {\r\n            title: t(\"advancedSettings\"),\r\n            panel: <LdapSettingsAdvanced form={form} id={id} />,\r\n          },\r\n        ]}\r\n      />\r\n      <Form onSubmit={form.handleSubmit(onSubmit)}>\r\n        <FixedButtonsGroup\r\n          name=\"ldap\"\r\n          isDisabled={!form.formState.isDirty}\r\n          isSubmit\r\n        >\r\n          <Button\r\n            variant=\"link\"\r\n            onClick={() => navigate(toUserFederation({ realm }))}\r\n            data-testid=\"ldap-cancel\"\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>\r\n        </FixedButtonsGroup>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport function serializeFormData(\r\n  formData: LdapComponentRepresentation,\r\n): LdapComponentRepresentation {\r\n  const { config } = formData;\r\n\r\n  if (config?.periodicChangedUsersSync !== undefined) {\r\n    if (config.periodicChangedUsersSync === false) {\r\n      config.changedSyncPeriod = [\"-1\"];\r\n    }\r\n    delete config.periodicChangedUsersSync;\r\n  }\r\n\r\n  if (config?.periodicFullSync !== undefined) {\r\n    if (config.periodicFullSync === false) {\r\n      config.fullSyncPeriod = [\"-1\"];\r\n    }\r\n    delete config.periodicFullSync;\r\n  }\r\n\r\n  return formData;\r\n}\r\n"],"names":["testLdapProperties","convertFormToSettings","form","settings","key","value","get","LdapSettingsConnection","id","showSectionHeading","showSectionDescription","adminClient","useAdminClient","t","useTranslation","realm","useRealm","addAlert","addError","useAlerts","edit","testLdap","testType","AlertVariant","error","isBindTypeDropdownOpen","setIsBindTypeDropdownOpen","useState","ldapBindType","useWatch","jsxs","FormProvider","jsx","WizardSectionHeader","FormAccess","TextControl","FormGroup","HelpItem","Controller","field","Switch","_event","SelectControl","Button","KeycloakSelect","SelectVariant","SelectOption","isEqual","Fragment","PasswordControl","PASSWORD_MODIFY_OID","LdapSettingsAdvanced","ldapOids","passwordModifyOid","LdapSettingsGeneral","vendorEdit","realmRepresentation","useEffect","isVendorDropdownOpen","setIsVendorDropdownOpen","setVendorDefaultValues","LdapSettingsKerberosIntegration","allowKerberosAuth","LdapSettingsSearching","LdapSettingsSynchronization","watchPeriodicSync","watchChangedSync","UserFederationLdapForm","onSubmit","useFormContext","navigate","useNavigate","isFeatureEnabled","useIsFeatureEnabled","ScrollForm","Feature","SettingsCache","Form","FixedButtonsGroup","toUserFederation","serializeFormData","formData","config"],"mappings":"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"}