import{jsxs as u,jsx as t}from"react/jsx-runtime";import{u as F,a as P,d as N,b as j,c as S,j as V,_ as E,l as L,P as O,Q as U,O as c,W as b,H as q,I as w,A as C,g,L as K,eg as h}from"./main-o1hptXRo.js";import{useMemo as z,useEffect as B}from"react";import{F as M}from"./FormAccess-BnhQnYb9.js";import{K as Q}from"./KeyValueInput-BOsiIUR1.js";import{V as R}from"./ViewHeader-BDBsroi3.js";/* empty css                               */import{u as _,U as W}from"./UserProfileContext-DwkKusZd.js";import{T as y,s as J}from"./TranslatableField-C01MzTTh.js";import"react-dom";import"./ActionListItem-Cy-NQlq4.js";import"./useLocale-cOPKcLYS.js";import"./Trans-CicUNvCL.js";function X(n){return Object.entries(n).reduce((e,[i,o])=>typeof o=="string"?[...e,{key:i,value:o}]:[...e],[])}function Y(n){return Object.fromEntries(n.filter(e=>e.key.length>0).map(e=>[e.key,e.value]))}const x={annotations:[],displayDescription:"",displayHeader:"",name:"",translation:{key:[]}};function Z(){const{adminClient:n}=F(),{t:e}=P(),{realm:i,realmRepresentation:o}=N(),{config:s,save:H}=_(),T=j(),p=S(),l=V({defaultValues:x}),{addError:v}=E(),I=!!p.name,a=z(()=>s?.groups?.find(({name:r})=>r===p.name),[s?.groups,p.name]);B(()=>{if(!a)return;const r=a.annotations?X(a.annotations):[];l.reset({...x,...a,annotations:r})},[a,l]);const A=async r=>{if(!s)return;const d=[...s.groups??[]],m=a?d.indexOf(a):-1,{translation:G,...k}=r,f={...k,annotations:Y(r.annotations)};if(m===-1?d.push(f):d[m]=f,await H({...s,groups:d})){if(o?.internationalizationEnabled)try{await J({adminClient:n,realmName:i,translationsData:{translation:G}})}catch(D){v(e("errorSavingTranslations"),D)}T(h({realm:i,tab:"attributes-group"}))}};return u(L,{...l,children:[t(R,{titleKey:a?"editGroupText":"createGroupText",divider:!0}),t(O,{variant:"light",onSubmit:l.handleSubmit(A),children:u(M,{isHorizontal:!0,role:"manage-realm",children:[t(U,{name:"name",label:e("nameField"),labelIcon:e("nameHintHelp"),isDisabled:!!a||I,rules:{required:e("required")}}),t(c,{label:e("displayHeader"),labelIcon:t(b,{helpText:e("displayHeaderHintHelp"),fieldLabelId:"displayHeader"}),fieldId:"kc-attributes-group-display-header",children:t(y,{fieldName:"displayHeader",attributeName:"name",prefix:"profile.attribute-group"})}),t(c,{label:e("displayDescription"),labelIcon:t(b,{helpText:e("displayDescriptionHintHelp"),fieldLabelId:"displayDescription"}),fieldId:"kc-attributes-group-display-description",children:t(y,{fieldName:"displayDescription",attributeName:"name",prefix:"profile.attribute-group-description"})}),t(q,{children:t(w,{component:"h2",children:e("annotationsText")})}),t(c,{label:e("annotationsText"),fieldId:"kc-annotations",children:t(Q,{label:e("annotationsText"),name:"annotations"})}),u(C,{children:[t(g,{variant:"primary",type:"submit","data-testid":"saveGroupBtn",children:e("save")}),t(g,{variant:"link",component:r=>t(K,{...r,to:h({realm:i,tab:"attributes-group"})}),children:e("cancel")})]})]})})]})}const me=()=>t(W,{children:t(Z,{})});export{me as default};
//# sourceMappingURL=AttributesGroupDetails-B2WxSRci.js.map
