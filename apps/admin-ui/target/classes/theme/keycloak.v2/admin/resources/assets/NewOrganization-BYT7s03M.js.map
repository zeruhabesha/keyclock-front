{"version":3,"file":"NewOrganization-BYT7s03M.js","sources":["../../../../../../../src/organizations/NewOrganization.tsx"],"sourcesContent":["import { FormSubmitButton } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ActionGroup, Button, PageSection } from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../components/form/FormAccess\";\r\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport {\r\n  OrganizationForm,\r\n  OrganizationFormType,\r\n  convertToOrg,\r\n} from \"./OrganizationForm\";\r\nimport { toEditOrganization } from \"./routes/EditOrganization\";\r\nimport { toOrganizations } from \"./routes/Organizations\";\r\n\r\nexport default function NewOrganization() {\r\n  const { adminClient } = useAdminClient();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { realm } = useRealm();\r\n  const form = useForm({ mode: \"onChange\" });\r\n  const { handleSubmit, formState } = form;\r\n\r\n  const save = async (org: OrganizationFormType) => {\r\n    try {\r\n      const organization = convertToOrg(org);\r\n      const { id } = await adminClient.organizations.create(organization);\r\n      addAlert(t(\"organizationSaveSuccess\"));\r\n      navigate(toEditOrganization({ realm, id, tab: \"settings\" }));\r\n    } catch (error) {\r\n      addError(\"organizationSaveError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ViewHeader titleKey=\"createOrganization\" />\r\n      <PageSection variant=\"light\">\r\n        <FormAccess role=\"anyone\" onSubmit={handleSubmit(save)} isHorizontal>\r\n          <FormProvider {...form}>\r\n            <OrganizationForm />\r\n            <ActionGroup>\r\n              <FormSubmitButton formState={formState} data-testid=\"save\">\r\n                {t(\"save\")}\r\n              </FormSubmitButton>\r\n              <Button\r\n                data-testid=\"cancel\"\r\n                variant=\"link\"\r\n                component={(props) => (\r\n                  <Link {...props} to={toOrganizations({ realm })} />\r\n                )}\r\n              >\r\n                {t(\"cancel\")}\r\n              </Button>\r\n            </ActionGroup>\r\n          </FormProvider>\r\n        </FormAccess>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["NewOrganization","adminClient","useAdminClient","addAlert","addError","useAlerts","useTranslation","navigate","useNavigate","realm","useRealm","form","useForm","handleSubmit","formState","jsxs","Fragment","jsx","ViewHeader","PageSection","FormAccess","org","organization","convertToOrg","id","toEditOrganization","error","FormProvider","OrganizationForm","ActionGroup","FormSubmitButton","Button","props","Link","toOrganizations"],"mappings":"8ZAkBA,SAAwBA,GAAkB,CACxC,KAAM,CAAE,YAAAC,CAAA,EAAgBC,EAAA,EAClB,CAAE,SAAAC,EAAU,SAAAC,CAAA,EAAaC,EAAA,EACzB,CAAE,CAAA,EAAMC,EAAA,EACRC,EAAWC,EAAA,EACX,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZC,EAAOC,EAAQ,CAAE,KAAM,WAAY,EACnC,CAAE,aAAAC,EAAc,UAAAC,CAAA,EAAcH,EAapC,OACEI,EAAAC,EAAA,CACE,SAAA,CAAAC,EAACC,EAAA,CAAW,SAAS,oBAAA,CAAqB,IACzCC,EAAA,CAAY,QAAQ,QACnB,SAAAF,EAACG,GAAW,KAAK,SAAS,SAAUP,EAf7B,MAAOQ,GAA8B,CAChD,GAAI,CACF,MAAMC,EAAeC,EAAaF,CAAG,EAC/B,CAAE,GAAAG,CAAA,EAAO,MAAMvB,EAAY,cAAc,OAAOqB,CAAY,EAClEnB,EAAS,EAAE,yBAAyB,CAAC,EACrCI,EAASkB,EAAmB,CAAE,MAAAhB,EAAO,GAAAe,EAAI,IAAK,UAAA,CAAY,CAAC,CAC7D,OAASE,EAAO,CACdtB,EAAS,wBAAyBsB,CAAK,CACzC,CACF,CAM2D,EAAG,aAAY,GAClE,SAAAX,EAACY,EAAA,CAAc,GAAGhB,EAChB,SAAA,CAAAM,EAACW,EAAA,EAAiB,IACjBC,EAAA,CACC,SAAA,CAAAZ,EAACa,GAAiB,UAAAhB,EAAsB,cAAY,OACjD,SAAA,EAAE,MAAM,EACX,EACAG,EAACc,EAAA,CACC,cAAY,SACZ,QAAQ,OACR,UAAYC,GACVf,EAACgB,EAAA,CAAM,GAAGD,EAAO,GAAIE,EAAgB,CAAE,MAAAzB,CAAA,CAAO,CAAA,CAAG,EAGlD,WAAE,QAAQ,CAAA,CAAA,CACb,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,EACF,CAEJ"}