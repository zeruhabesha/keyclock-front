import{jsxs as I,Fragment as $,jsx as o}from"react/jsx-runtime";import{u as w,a as E,c as b,_ as x,a0 as A,N as F,o as a,D as c,aa as P}from"./main-o1hptXRo.js";import{u}from"./ConfirmDialog-BkU7melV.js";import{H as K}from"./SettingsCache-Cam5Obyz.js";const L=({provider:m,editMode:d,save:U,noDivider:y=!1})=>{const{adminClient:t}=w(),{t:s}=E(),{id:r}=b(),{addAlert:n,addError:i}=x(),{control:f}=A(),l=F({name:"config.importEnabled",control:f,defaultValue:["true"]})[0],[g,p]=u({titleKey:"userFedUnlinkUsersConfirmTitle",messageKey:"userFedUnlinkUsersConfirm",continueButtonLabel:"unlinkUsers",onConfirm:()=>D()}),[v,C]=u({titleKey:s("removeImportedUsers"),messageKey:s("removeImportedUsersMessage"),continueButtonLabel:"remove",onConfirm:async()=>{await k()}}),k=async()=>{try{r&&(await t.userStorageProvider.removeImportedUsers({id:r}),n(s("removeImportedUsersSuccess"),a.success))}catch(e){i("removeImportedUsersError",e)}},h=async()=>{try{if(r){n(s("syncUsersStarted"),a.info);const e=await t.userStorageProvider.sync({id:r,action:"triggerChangedUsersSync"});e.ignored?n(`${e.status}.`,a.warning):n(s("syncUsersSuccess")+`${e.added} users added, ${e.updated} users updated, ${e.removed} users removed, ${e.failed} users failed.`,a.success)}}catch(e){i("syncUsersError",e)}},S=async()=>{try{if(r){n(s("syncUsersStarted"),a.info);const e=await t.userStorageProvider.sync({id:r,action:"triggerFullSync"});e.ignored?n(`${e.status}.`,a.warning):n(s("syncUsersSuccess")+`${e.added} users added, ${e.updated} users updated, ${e.removed} users removed, ${e.failed} users failed.`,a.success)}}catch(e){i("syncUsersError",e)}},D=async()=>{try{r&&await t.userStorageProvider.unlinkUsers({id:r}),n(s("unlinkUsersSuccess"),a.success)}catch(e){i("unlinkUsersError",e)}};return I($,{children:[o(p,{}),o(C,{}),o(K,{provider:m,noDivider:y,save:U,dropdownItems:[o(c,{onClick:h,isDisabled:l==="false",children:s("syncChangedUsers")},"sync"),o(c,{onClick:S,isDisabled:l==="false",children:s("syncAllUsers")},"syncall"),o(c,{isDisabled:d?d.includes("UNSYNCED"):!1,onClick:g,children:s("unlinkUsers")},"unlink"),o(c,{onClick:v,children:s("removeImported")},"remove"),o(P,{},"separator")]})]})};export{L as E};
//# sourceMappingURL=ExtendedHeader-tajt2h2R.js.map
