{"version":3,"file":"NewPolicyDialog-CIlfdiTN.js","sources":["../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TimePicker/TimePickerUtils.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-icons@5.4_f39c5b970058b42208dac3bfc1f9d8fb/node_modules/@patternfly/react-icons/dist/esm/icons/outlined-clock-icon.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-tokens@5.4.1/node_modules/@patternfly/react-tokens/dist/esm/c_date_picker__input_c_form_control_Width.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/TimePicker/TimePicker.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-icons@5.4_f39c5b970058b42208dac3bfc1f9d8fb/node_modules/@patternfly/react-icons/dist/esm/icons/caret-up-icon.js","../../../../../../../src/components/users/UserSelect.tsx","../../../../../../../src/clients/authorization/DecisionStrategySelect.tsx","../../../../../../../src/clients/authorization/ResourcesPolicySelect.tsx","../../../../../../../src/clients/authorization/policy/Aggregate.tsx","../../../../../../../src/clients/authorization/policy/Client.tsx","../../../../../../../src/clients/scopes/AddScopeDialog.tsx","../../../../../../../src/clients/authorization/policy/ClientScope.tsx","../../../../../../../src/clients/authorization/policy/Group.tsx","../../../../../../../src/clients/authorization/policy/JavaScript.tsx","../../../../../../../src/clients/authorization/policy/LogicSelector.tsx","../../../../../../../src/clients/authorization/policy/NameDescription.tsx","../../../../../../../src/clients/authorization/policy/Regex.tsx","../../../../../../../src/clients/authorization/policy/Role.tsx","../../../../../../../src/clients/authorization/policy/Time.tsx","../../../../../../../src/clients/authorization/policy/User.tsx","../../../../../../../src/clients/authorization/policy/PolicyDetails.tsx","../../../../../../../src/clients/authorization/NewPolicyDialog.tsx"],"sourcesContent":["export const amSuffix = ' AM';\nexport const pmSuffix = ' PM';\nexport const makeTimeOptions = (stepMinutes, hour12, delimiter, minTime, maxTime, includeSeconds) => {\n    const res = [];\n    const iter = new Date(new Date().setHours(0, 0, 0, 0));\n    const iterDay = iter.getDay();\n    while (iter.getDay() === iterDay) {\n        let hour = iter.getHours();\n        let suffix = amSuffix;\n        if (hour12) {\n            if (hour === 0) {\n                hour = 12; // 12am\n            }\n            else if (hour >= 12) {\n                suffix = pmSuffix;\n            }\n            if (hour > 12) {\n                hour %= 12;\n            }\n        }\n        hour = hour12 ? hour.toString() : hour.toString().padStart(2, '0');\n        const minutes = iter.getMinutes().toString().padStart(2, '0');\n        const timeOption = `${hour}${delimiter}${minutes}${hour12 ? suffix : ''}`;\n        // time option is valid if within min/max constraints\n        if (isWithinMinMax(minTime, maxTime, timeOption, delimiter, includeSeconds)) {\n            res.push(timeOption);\n        }\n        iter.setMinutes(iter.getMinutes() + stepMinutes);\n    }\n    return res;\n};\nexport const parseTime = (time, timeRegex, delimiter, is12Hour, includeSeconds) => {\n    const date = new Date(time);\n    // if default time is a ISO 8601 formatted date string, we parse it to hh:mm(am/pm) format\n    if (!isNaN(date.getDate()) && (time instanceof Date || time.includes('T'))) {\n        const hours = is12Hour\n            ? `${date.getHours() > 12 ? date.getHours() - 12 : date.getHours()}`\n            : `${date.getHours()}`.padStart(2, '0');\n        const minutes = `${date.getMinutes()}`.padStart(2, '0');\n        const seconds = includeSeconds ? `${date.getSeconds()}`.padStart(2, '0') : '';\n        const secondsWithDelimiter = seconds ? `${delimiter}${seconds}` : '';\n        let ampm = '';\n        if (is12Hour && date.getHours() > 11) {\n            ampm = pmSuffix;\n        }\n        else if (is12Hour) {\n            ampm = amSuffix;\n        }\n        return `${hours}${delimiter}${minutes}${secondsWithDelimiter}${ampm}`;\n    }\n    else if (typeof time === 'string') {\n        time = time.trim();\n        if (time !== '' && validateTime(time, timeRegex, delimiter, is12Hour)) {\n            const [, hours, minutes, seconds, suffix = ''] = timeRegex.exec(time);\n            const secondsWithDelimiter = includeSeconds ? `${delimiter}${seconds !== null && seconds !== void 0 ? seconds : '00'}` : '';\n            let ampm = '';\n            // Format AM/PM according to design\n            if (is12Hour) {\n                const uppercaseSuffix = suffix.toUpperCase();\n                if (uppercaseSuffix === amSuffix.toUpperCase().trim()) {\n                    ampm = amSuffix;\n                }\n                else if (uppercaseSuffix === pmSuffix.toUpperCase().trim()) {\n                    ampm = pmSuffix;\n                }\n                else {\n                    // if this 12 hour time is missing am/pm but otherwise valid,\n                    // append am/pm depending on time of day\n                    ampm = new Date().getHours() > 11 ? pmSuffix : amSuffix;\n                }\n            }\n            return `${hours}${delimiter}${minutes}${secondsWithDelimiter}${ampm}`;\n        }\n    }\n    return time.toString();\n};\nexport const validateTime = (time, timeRegex, delimiter, is12Hour) => {\n    // ISO 8601 format is valid\n    const date = new Date(time);\n    if (!isNaN(date.getDate()) && time.includes('T')) {\n        return true;\n    }\n    // hours only valid if they are [0-23] or [1-12]\n    const hours = parseInt(time.split(delimiter)[0]);\n    const validHours = hours >= (is12Hour ? 1 : 0) && hours <= (is12Hour ? 12 : 23);\n    // minutes verified by timeRegex\n    // empty string is valid\n    return time === '' || (timeRegex.test(time) && validHours);\n};\nexport const getHours = (time, timeRegex) => {\n    const parts = time.match(timeRegex);\n    if (parts && parts.length) {\n        if (/pm/i.test(parts[4])) {\n            return parseInt(parts[1]) === 12 ? parseInt(parts[1]) : parseInt(parts[1]) + 12;\n        }\n        if (/am/i.test(parts[4])) {\n            return parseInt(parts[1]) === 12 ? 0 : parseInt(parts[1]);\n        }\n        return parseInt(parts[1]);\n    }\n    return null;\n};\nexport const getMinutes = (time, timeRegex) => {\n    const parts = time.match(timeRegex);\n    return parts && parts.length ? parseInt(parts[2]) : null;\n};\nexport const getSeconds = (time, timeRegex) => {\n    var _a;\n    const seconds = (_a = time.match(timeRegex)) === null || _a === void 0 ? void 0 : _a[3];\n    return seconds ? parseInt(seconds) : null;\n};\nexport const isWithinMinMax = (minTime, maxTime, time, delimiter, includeSeconds) => {\n    // do not throw error if empty string\n    if (time.trim() === '') {\n        return true;\n    }\n    // correctly format as 24hr times (12:30AM => 00:30, 1:15 => 01:15)\n    const min24HourTime = convertTo24Hour(minTime, delimiter, includeSeconds);\n    const selected24HourTime = convertTo24Hour(time, delimiter, includeSeconds);\n    const max24HourTime = convertTo24Hour(maxTime, delimiter, includeSeconds);\n    // simple string comparison for 24hr times\n    return min24HourTime <= selected24HourTime && selected24HourTime <= max24HourTime;\n};\nconst convertTo24Hour = (time, delimiter, includeSeconds) => {\n    const timeReg = new RegExp(`^\\\\s*(\\\\d\\\\d?)${delimiter}([0-5]\\\\d)${delimiter}?([0-5]\\\\d)?\\\\s*([AaPp][Mm])?\\\\s*$`);\n    const regMatches = timeReg.exec(time);\n    if (!regMatches || !regMatches.length) {\n        return;\n    }\n    let hours = regMatches[1].padStart(2, '0');\n    const minutes = regMatches[2];\n    let seconds = regMatches[3] ? `${delimiter}${regMatches[3]}` : '';\n    // When seconds is empty and 'includeSeconds' is enabled, append 0 seconds.\n    if (!seconds && includeSeconds) {\n        seconds = `${delimiter}00`;\n    }\n    const suffix = regMatches[4] || '';\n    if (suffix.toUpperCase() === 'PM' && hours !== '12') {\n        hours = `${parseInt(hours) + 12}`;\n    }\n    else if (suffix.toUpperCase() === 'AM' && hours === '12') {\n        hours = '00';\n    }\n    return `${hours}${delimiter}${minutes}${seconds}`;\n};\n//# sourceMappingURL=TimePickerUtils.js.map","import { createIcon } from '../createIcon';\n\nexport const OutlinedClockIconConfig = {\n  name: 'OutlinedClockIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z',\n  yOffset: 0,\n  xOffset: 0,\n};\n\nexport const OutlinedClockIcon = createIcon(OutlinedClockIconConfig);\n\nexport default OutlinedClockIcon;","export const c_date_picker__input_c_form_control_Width = {\n  \"name\": \"--pf-v5-c-date-picker__input--c-form-control--Width\",\n  \"value\": \"calc(10 * 1ch + calc(2rem + 0.5rem))\",\n  \"var\": \"var(--pf-v5-c-date-picker__input--c-form-control--Width)\"\n};\nexport default c_date_picker__input_c_form_control_Width;","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport datePickerStyles from '@patternfly/react-styles/css/components/DatePicker/date-picker.mjs';\nimport menuStyles from '@patternfly/react-styles/css/components/Menu/menu.mjs';\nimport { getUniqueId } from '../../helpers';\nimport { Popper } from '../../helpers/Popper/Popper';\nimport { Menu, MenuContent, MenuList, MenuItem } from '../Menu';\nimport { InputGroup, InputGroupItem } from '../InputGroup';\nimport { TextInput } from '../TextInput';\nimport { KeyTypes } from '../../helpers/constants';\nimport { parseTime, validateTime, makeTimeOptions, amSuffix, pmSuffix, getHours, getMinutes, isWithinMinMax, getSeconds } from './TimePickerUtils';\nimport { HelperText, HelperTextItem } from '../HelperText';\nimport OutlinedClockIcon from '@patternfly/react-icons/dist/esm/icons/outlined-clock-icon';\nimport cssDatePickerFormControlWidth from '@patternfly/react-tokens/dist/esm/c_date_picker__input_c_form_control_Width';\nclass TimePicker extends React.Component {\n    constructor(props) {\n        super(props);\n        this.baseComponentRef = React.createRef();\n        this.toggleRef = React.createRef();\n        this.inputRef = React.createRef();\n        this.menuRef = React.createRef();\n        this.onDocClick = (event) => {\n            var _a, _b, _c, _d;\n            const clickedOnToggle = (_b = (_a = this.toggleRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.contains(event.target);\n            const clickedWithinMenu = (_d = (_c = this.menuRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.contains(event.target);\n            if (this.state.isTimeOptionsOpen && !(clickedOnToggle || clickedWithinMenu)) {\n                this.onToggle(false);\n            }\n        };\n        this.handleGlobalKeys = (event) => {\n            var _a, _b, _c, _d;\n            const { isTimeOptionsOpen, focusedIndex, scrollIndex } = this.state;\n            // keyboard pressed while focus on toggle\n            if ((_b = (_a = this.inputRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.contains(event.target)) {\n                if (!isTimeOptionsOpen && event.key !== KeyTypes.Tab && event.key !== KeyTypes.Escape) {\n                    this.onToggle(true);\n                }\n                else if (isTimeOptionsOpen) {\n                    if (event.key === KeyTypes.Escape || event.key === KeyTypes.Tab) {\n                        this.onToggle(false);\n                    }\n                    else if (event.key === KeyTypes.Enter) {\n                        if (focusedIndex !== null) {\n                            this.focusSelection(focusedIndex);\n                            event.stopPropagation();\n                        }\n                        else {\n                            this.onToggle(false);\n                        }\n                    }\n                    else if (event.key === KeyTypes.ArrowDown || event.key === KeyTypes.ArrowUp) {\n                        this.focusSelection(scrollIndex);\n                        this.updateFocusedIndex(0);\n                        event.preventDefault();\n                    }\n                }\n                // keyboard pressed while focus on menu item\n            }\n            else if ((_d = (_c = this.menuRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.contains(event.target)) {\n                if (event.key === KeyTypes.ArrowDown) {\n                    this.updateFocusedIndex(1);\n                    event.preventDefault();\n                }\n                else if (event.key === KeyTypes.ArrowUp) {\n                    this.updateFocusedIndex(-1);\n                    event.preventDefault();\n                }\n                else if (event.key === KeyTypes.Escape || event.key === KeyTypes.Tab) {\n                    this.inputRef.current.focus();\n                    this.onToggle(false);\n                }\n            }\n        };\n        this.updateFocusedIndex = (increment) => {\n            this.setState((prevState) => {\n                const maxIndex = this.getOptions().length - 1;\n                let nextIndex = prevState.focusedIndex !== null ? prevState.focusedIndex + increment : prevState.scrollIndex + increment;\n                if (nextIndex < 0) {\n                    nextIndex = maxIndex;\n                }\n                else if (nextIndex > maxIndex) {\n                    nextIndex = 0;\n                }\n                this.scrollToIndex(nextIndex);\n                return {\n                    focusedIndex: nextIndex\n                };\n            });\n        };\n        // fixes issue where menutAppendTo=\"inline\" results in the menu item that should be scrolled to being out of view; this will select the menu item that comes before the intended one, causing that before-item to be placed out of view instead\n        this.getIndexToScroll = (index) => {\n            if (this.props.menuAppendTo === 'inline') {\n                return index > 0 ? index - 1 : 0;\n            }\n            return index;\n        };\n        this.scrollToIndex = (index) => {\n            this.getOptions()[index].closest(`.${menuStyles.menuContent}`).scrollTop =\n                this.getOptions()[this.getIndexToScroll(index)].offsetTop;\n        };\n        this.focusSelection = (index) => {\n            var _a;\n            const indexToFocus = index !== -1 ? index : 0;\n            if ((_a = this.menuRef) === null || _a === void 0 ? void 0 : _a.current) {\n                this.getOptions()[indexToFocus].querySelector(`.${menuStyles.menuItem}`).focus();\n            }\n        };\n        this.scrollToSelection = (time) => {\n            const { delimiter, is24Hour } = this.props;\n            let splitTime = time.split(this.props.delimiter);\n            let focusedIndex = null;\n            // build out the rest of the time assuming hh:00 if it's a partial time\n            if (splitTime.length < 2) {\n                time = `${time}${delimiter}00`;\n                splitTime = time.split(delimiter);\n                // due to only the input including seconds when includeSeconds=true, we need to build a temporary time here without those seconds so that an exact or close match can be scrolled to within the menu (which does not include seconds in any of the options)\n            }\n            else if (splitTime.length > 2) {\n                time = parseTime(time, this.state.timeRegex, delimiter, !is24Hour, false);\n                splitTime = time.split(delimiter);\n            }\n            // for 12hr variant, autoscroll to pm if it's currently the afternoon, otherwise autoscroll to am\n            if (!is24Hour && splitTime.length > 1 && splitTime[1].length < 2) {\n                const minutes = splitTime[1].length === 0 ? '00' : splitTime[1] + '0';\n                time = `${splitTime[0]}${delimiter}${minutes}${new Date().getHours() > 11 ? pmSuffix : amSuffix}`;\n            }\n            else if (!is24Hour &&\n                splitTime.length > 1 &&\n                splitTime[1].length === 2 &&\n                !time.toUpperCase().includes(amSuffix.toUpperCase().trim()) &&\n                !time.toUpperCase().includes(pmSuffix.toUpperCase().trim())) {\n                time = `${time}${new Date().getHours() > 11 ? pmSuffix : amSuffix}`;\n            }\n            let scrollIndex = this.getOptions().findIndex((option) => option.textContent === time);\n            // if we found an exact match, scroll to match and return index of match for focus\n            if (scrollIndex !== -1) {\n                this.scrollToIndex(scrollIndex);\n                focusedIndex = scrollIndex;\n            }\n            else if (splitTime.length === 2) {\n                // no exact match, scroll to closest hour but don't return index for focus\n                let amPm = '';\n                if (!is24Hour) {\n                    if (splitTime[1].toUpperCase().includes('P')) {\n                        amPm = pmSuffix;\n                    }\n                    else if (splitTime[1].toUpperCase().includes('A')) {\n                        amPm = amSuffix;\n                    }\n                }\n                time = `${splitTime[0]}${delimiter}00${amPm}`;\n                scrollIndex = this.getOptions().findIndex((option) => option.textContent === time);\n                if (scrollIndex !== -1) {\n                    this.scrollToIndex(scrollIndex);\n                }\n            }\n            this.setState({\n                focusedIndex,\n                scrollIndex\n            });\n        };\n        this.getRegExp = (includeSeconds = true) => {\n            const { is24Hour, delimiter } = this.props;\n            let baseRegex = `\\\\s*(\\\\d\\\\d?)${delimiter}([0-5]\\\\d)`;\n            if (includeSeconds) {\n                baseRegex += `${delimiter}?([0-5]\\\\d)?`;\n            }\n            return new RegExp(`^${baseRegex}${is24Hour ? '' : '\\\\s*([AaPp][Mm])?'}\\\\s*$`);\n        };\n        this.getOptions = () => {\n            var _a;\n            return (((_a = this.menuRef) === null || _a === void 0 ? void 0 : _a.current)\n                ? Array.from(this.menuRef.current.querySelectorAll(`.${menuStyles.menuListItem}`))\n                : []);\n        };\n        this.isValidFormat = (time) => {\n            if (this.props.validateTime) {\n                return this.props.validateTime(time);\n            }\n            const { delimiter, is24Hour, includeSeconds } = this.props;\n            return validateTime(time, this.getRegExp(includeSeconds), delimiter, !is24Hour);\n        };\n        this.isValidTime = (time) => {\n            const { delimiter, includeSeconds } = this.props;\n            const { minTimeState, maxTimeState } = this.state;\n            return isWithinMinMax(minTimeState, maxTimeState, time, delimiter, includeSeconds);\n        };\n        this.isValid = (time) => this.isValidFormat(time) && this.isValidTime(time);\n        this.onToggle = (isOpen) => {\n            // on close, parse and validate input\n            this.setState((prevState) => {\n                const { timeRegex, isInvalid, timeState } = prevState;\n                const { delimiter, is24Hour, includeSeconds, onChange } = this.props;\n                const time = parseTime(timeState, timeRegex, delimiter, !is24Hour, includeSeconds);\n                // Call onChange when Enter is pressed in input and timeoption does not exist in menu\n                if (onChange && !isOpen && time !== timeState) {\n                    onChange(null, time, getHours(time, timeRegex), getMinutes(time, timeRegex), getSeconds(time, timeRegex), this.isValid(time));\n                }\n                return {\n                    isTimeOptionsOpen: isOpen,\n                    timeState: time,\n                    isInvalid: isOpen ? isInvalid : !this.isValid(time)\n                };\n            });\n            this.props.setIsOpen(isOpen);\n            if (!isOpen) {\n                this.inputRef.current.focus();\n            }\n        };\n        this.onSelect = (e) => {\n            const { timeRegex, timeState } = this.state;\n            const { delimiter, is24Hour, includeSeconds, setIsOpen } = this.props;\n            const time = parseTime(e.target.textContent, timeRegex, delimiter, !is24Hour, includeSeconds);\n            if (time !== timeState) {\n                this.onInputChange(e, time);\n            }\n            this.inputRef.current.focus();\n            this.setState({\n                isTimeOptionsOpen: false,\n                isInvalid: false\n            });\n            setIsOpen(false);\n        };\n        this.onInputClick = (e) => {\n            if (!this.state.isTimeOptionsOpen) {\n                this.onToggle(true);\n            }\n            e.stopPropagation();\n        };\n        this.onInputChange = (event, newTime) => {\n            const { onChange } = this.props;\n            const { timeRegex } = this.state;\n            if (onChange) {\n                onChange(event, newTime, getHours(newTime, timeRegex), getMinutes(newTime, timeRegex), getSeconds(newTime, timeRegex), this.isValid(newTime));\n            }\n            this.scrollToSelection(newTime);\n            this.setState({\n                timeState: newTime\n            });\n        };\n        const { is24Hour, delimiter, time, includeSeconds, isOpen } = this.props;\n        let { minTime, maxTime } = this.props;\n        if (minTime === '') {\n            const minSeconds = includeSeconds ? `${delimiter}00` : '';\n            minTime = is24Hour ? `00${delimiter}00${minSeconds}` : `12${delimiter}00${minSeconds} AM`;\n        }\n        if (maxTime === '') {\n            const maxSeconds = includeSeconds ? `${delimiter}59` : '';\n            maxTime = is24Hour ? `23${delimiter}59${maxSeconds}` : `11${delimiter}59${maxSeconds} PM`;\n        }\n        const timeRegex = this.getRegExp();\n        this.state = {\n            isInvalid: false,\n            isTimeOptionsOpen: isOpen,\n            timeState: parseTime(time, timeRegex, delimiter, !is24Hour, includeSeconds),\n            focusedIndex: null,\n            scrollIndex: 0,\n            timeRegex,\n            minTimeState: parseTime(minTime, timeRegex, delimiter, !is24Hour, includeSeconds),\n            maxTimeState: parseTime(maxTime, timeRegex, delimiter, !is24Hour, includeSeconds)\n        };\n    }\n    componentDidMount() {\n        document.addEventListener('mousedown', this.onDocClick);\n        document.addEventListener('touchstart', this.onDocClick);\n        document.addEventListener('keydown', this.handleGlobalKeys);\n        this.setState({ isInvalid: !this.isValid(this.state.timeState) });\n    }\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.onDocClick);\n        document.removeEventListener('touchstart', this.onDocClick);\n        document.removeEventListener('keydown', this.handleGlobalKeys);\n    }\n    componentDidUpdate(prevProps, prevState) {\n        const { timeState, isTimeOptionsOpen, isInvalid, timeRegex } = this.state;\n        const { time, is24Hour, delimiter, includeSeconds, isOpen, minTime, maxTime } = this.props;\n        if (prevProps.isOpen !== isOpen) {\n            this.onToggle(isOpen);\n        }\n        if (isTimeOptionsOpen && !prevState.isTimeOptionsOpen && timeState && !isInvalid) {\n            this.scrollToSelection(timeState);\n        }\n        if (delimiter !== prevProps.delimiter) {\n            this.setState({\n                timeRegex: this.getRegExp()\n            });\n        }\n        if (time !== '' && time !== prevProps.time) {\n            const parsedTime = parseTime(time, timeRegex, delimiter, !is24Hour, includeSeconds);\n            this.setState({\n                timeState: parsedTime,\n                isInvalid: !this.isValid(parsedTime)\n            });\n        }\n        if (minTime !== '' && minTime !== prevProps.minTime) {\n            this.setState({\n                minTimeState: parseTime(minTime, timeRegex, delimiter, !is24Hour, includeSeconds)\n            });\n        }\n        if (maxTime !== '' && maxTime !== prevProps.maxTime) {\n            this.setState({\n                maxTimeState: parseTime(maxTime, timeRegex, delimiter, !is24Hour, includeSeconds)\n            });\n        }\n    }\n    render() {\n        const _a = this.props, { 'aria-label': ariaLabel, isDisabled, className, placeholder, id, menuAppendTo, is24Hour, invalidFormatErrorMessage, invalidMinMaxErrorMessage, stepMinutes, width, delimiter, inputProps, \n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        onChange, \n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        setIsOpen, \n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        isOpen, time, validateTime, minTime, maxTime, includeSeconds, zIndex } = _a, props = __rest(_a, ['aria-label', \"isDisabled\", \"className\", \"placeholder\", \"id\", \"menuAppendTo\", \"is24Hour\", \"invalidFormatErrorMessage\", \"invalidMinMaxErrorMessage\", \"stepMinutes\", \"width\", \"delimiter\", \"inputProps\", \"onChange\", \"setIsOpen\", \"isOpen\", \"time\", \"validateTime\", \"minTime\", \"maxTime\", \"includeSeconds\", \"zIndex\"]);\n        const { timeState, isTimeOptionsOpen, isInvalid, minTimeState, maxTimeState } = this.state;\n        const style = { [cssDatePickerFormControlWidth.name]: width };\n        const options = makeTimeOptions(stepMinutes, !is24Hour, delimiter, minTimeState, maxTimeState, includeSeconds);\n        const isValidFormat = this.isValidFormat(timeState);\n        const randomId = id || getUniqueId('time-picker');\n        const getParentElement = () => {\n            if (this.baseComponentRef && this.baseComponentRef.current) {\n                return this.baseComponentRef.current.parentElement;\n            }\n            return null;\n        };\n        const menuContainer = (React.createElement(Menu, { ref: this.menuRef, isScrollable: true },\n            React.createElement(MenuContent, { maxMenuHeight: \"200px\" },\n                React.createElement(MenuList, { \"aria-label\": ariaLabel }, options.map((option, index) => (React.createElement(MenuItem, { onClick: this.onSelect, key: option, id: `${randomId}-option-${index}` }, option)))))));\n        const textInput = (React.createElement(TextInput, Object.assign({ \"aria-haspopup\": \"menu\", id: `${randomId}-input`, \"aria-label\": ariaLabel, validated: isInvalid ? 'error' : 'default', placeholder: placeholder, value: timeState || '', type: \"text\", customIcon: React.createElement(OutlinedClockIcon, null), onClick: this.onInputClick, onChange: this.onInputChange, autoComplete: \"off\", isDisabled: isDisabled, isExpanded: isTimeOptionsOpen, ref: this.inputRef }, inputProps)));\n        let calculatedAppendTo;\n        switch (menuAppendTo) {\n            case 'inline':\n                calculatedAppendTo = () => this.toggleRef.current;\n                break;\n            case 'parent':\n                calculatedAppendTo = getParentElement;\n                break;\n            default:\n                calculatedAppendTo = menuAppendTo;\n        }\n        return (React.createElement(\"div\", { ref: this.baseComponentRef, className: css(datePickerStyles.datePicker, className) },\n            React.createElement(\"div\", Object.assign({ className: css(datePickerStyles.datePickerInput), style: style }, props),\n                React.createElement(InputGroup, null,\n                    React.createElement(InputGroupItem, null,\n                        React.createElement(\"div\", { id: randomId },\n                            React.createElement(\"div\", { ref: this.toggleRef, style: { paddingLeft: '0' } },\n                                React.createElement(Popper, { appendTo: calculatedAppendTo, trigger: textInput, triggerRef: this.toggleRef, popper: menuContainer, popperRef: this.menuRef, isVisible: isTimeOptionsOpen, zIndex: zIndex }))))),\n                isInvalid && (React.createElement(\"div\", { className: css(datePickerStyles.datePickerHelperText) },\n                    React.createElement(HelperText, null,\n                        React.createElement(HelperTextItem, { variant: \"error\" }, !isValidFormat ? invalidFormatErrorMessage : invalidMinMaxErrorMessage)))))));\n    }\n}\nTimePicker.displayName = 'TimePicker';\nTimePicker.defaultProps = {\n    className: '',\n    isDisabled: false,\n    time: '',\n    is24Hour: false,\n    invalidFormatErrorMessage: 'Invalid time format',\n    invalidMinMaxErrorMessage: 'Invalid time entered',\n    placeholder: 'hh:mm',\n    delimiter: ':',\n    'aria-label': 'Time picker',\n    width: '150px',\n    menuAppendTo: 'inline',\n    stepMinutes: 30,\n    inputProps: {},\n    minTime: '',\n    maxTime: '',\n    isOpen: false,\n    setIsOpen: () => { },\n    zIndex: 9999\n};\nexport { TimePicker };\n//# sourceMappingURL=TimePicker.js.map","import { createIcon } from '../createIcon';\n\nexport const CaretUpIconConfig = {\n  name: 'CaretUpIcon',\n  height: 512,\n  width: 320,\n  svgPath: 'M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z',\n  yOffset: 0,\n  xOffset: 0,\n};\n\nexport const CaretUpIcon = createIcon(CaretUpIconConfig);\n\nexport default CaretUpIcon;","import type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport {\r\n  FormErrorText,\r\n  HelpItem,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  Chip,\r\n  ChipGroup,\r\n  FormGroup,\r\n  MenuToggle,\r\n  Select,\r\n  SelectList,\r\n  SelectOption,\r\n  TextInputGroup,\r\n  TextInputGroupMain,\r\n  TextInputGroupUtilities,\r\n} from \"@patternfly/react-core\";\r\nimport { TimesIcon } from \"@patternfly/react-icons\";\r\nimport { debounce } from \"lodash-es\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport type { ComponentProps } from \"../dynamic/components\";\r\n\r\ntype UserSelectVariant = \"typeaheadMulti\" | \"typeahead\";\r\n\r\ntype UserSelectProps = Omit<ComponentProps, \"convertToName\"> & {\r\n  variant?: UserSelectVariant;\r\n  isRequired?: boolean;\r\n};\r\n\r\nexport const UserSelect = ({\r\n  name,\r\n  label,\r\n  helpText,\r\n  defaultValue,\r\n  isRequired,\r\n  variant = \"typeaheadMulti\",\r\n}: UserSelectProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const {\r\n    control,\r\n    getValues,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  const values: string[] | undefined = getValues(name!);\r\n\r\n  const [open, toggleOpen, setOpen] = useToggle();\r\n  const [selectedUsers, setSelectedUsers] = useState<UserRepresentation[]>([]);\r\n  const [searchedUsers, setSearchedUsers] = useState<UserRepresentation[]>([]);\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const textInputRef = useRef<HTMLInputElement>();\r\n\r\n  const debounceFn = useCallback(debounce(setSearch, 500), []);\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (!values) {\r\n        return [];\r\n      }\r\n\r\n      const foundUsers = await Promise.all(\r\n        values.map((id) => adminClient.users.findOne({ id })),\r\n      );\r\n\r\n      return foundUsers.filter((user) => user !== undefined);\r\n    },\r\n    (users) => {\r\n      setSelectedUsers(users);\r\n      if (variant !== \"typeaheadMulti\") {\r\n        setInputValue(users[0]?.username || \"\");\r\n      }\r\n    },\r\n    [values],\r\n  );\r\n\r\n  useFetch(\r\n    async () =>\r\n      adminClient.users.find({\r\n        username: search,\r\n        max: 20,\r\n      }),\r\n    setSearchedUsers,\r\n    [search],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!values || values.length === 0) {\r\n      setSelectedUsers([]);\r\n      setInputValue(\"\");\r\n    }\r\n  }, [values]);\r\n\r\n  const users = useMemo(\r\n    () => [...selectedUsers, ...searchedUsers],\r\n    [selectedUsers, searchedUsers],\r\n  );\r\n\r\n  const convert = (users: UserRepresentation[]) =>\r\n    users.map((option) => (\r\n      <SelectOption\r\n        key={option.id}\r\n        value={option.id}\r\n        selected={values?.includes(option.id!)}\r\n      >\r\n        {option.username}\r\n      </SelectOption>\r\n    ));\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(label!)}\r\n      isRequired={isRequired}\r\n      labelIcon={<HelpItem helpText={helpText!} fieldLabelId={t(label!)} />}\r\n      fieldId={name!}\r\n    >\r\n      <Controller\r\n        name={name!}\r\n        defaultValue={defaultValue}\r\n        control={control}\r\n        rules={\r\n          isRequired && variant === \"typeaheadMulti\"\r\n            ? { validate: (value) => value.length > 0 }\r\n            : { required: isRequired }\r\n        }\r\n        render={({ field }) => (\r\n          <Select\r\n            id={name!}\r\n            onOpenChange={toggleOpen}\r\n            toggle={(ref) => (\r\n              <MenuToggle\r\n                data-testid={name!}\r\n                ref={ref}\r\n                variant=\"typeahead\"\r\n                onClick={toggleOpen}\r\n                isExpanded={open}\r\n                isFullWidth\r\n                status={errors[name!] ? \"danger\" : undefined}\r\n              >\r\n                <TextInputGroup isPlain>\r\n                  <TextInputGroupMain\r\n                    value={inputValue}\r\n                    onClick={toggleOpen}\r\n                    onChange={(_, value) => {\r\n                      setOpen(true);\r\n                      setInputValue(value);\r\n                      debounceFn(value);\r\n                    }}\r\n                    autoComplete=\"off\"\r\n                    innerRef={textInputRef}\r\n                    placeholderText={t(\"selectAUser\")}\r\n                    {...(field.value && {\r\n                      \"aria-activedescendant\": field.value,\r\n                    })}\r\n                    role=\"combobox\"\r\n                    isExpanded={open}\r\n                    aria-controls=\"select-create-typeahead-listbox\"\r\n                  >\r\n                    {variant === \"typeaheadMulti\" &&\r\n                      Array.isArray(field.value) && (\r\n                        <ChipGroup aria-label=\"Current selections\">\r\n                          {field.value.map(\r\n                            (selection: string, index: number) => (\r\n                              <Chip\r\n                                key={index}\r\n                                onClick={(ev) => {\r\n                                  ev.stopPropagation();\r\n                                  field.onChange(\r\n                                    field.value.filter(\r\n                                      (item: string) => item !== selection,\r\n                                    ),\r\n                                  );\r\n                                }}\r\n                              >\r\n                                {\r\n                                  users.find((u) => u?.id === selection)\r\n                                    ?.username\r\n                                }\r\n                              </Chip>\r\n                            ),\r\n                          )}\r\n                        </ChipGroup>\r\n                      )}\r\n                  </TextInputGroupMain>\r\n                  <TextInputGroupUtilities>\r\n                    {!!search && (\r\n                      <Button\r\n                        variant=\"plain\"\r\n                        onClick={() => {\r\n                          setInputValue(\"\");\r\n                          setSearch(\"\");\r\n                          field.onChange([]);\r\n                          textInputRef?.current?.focus();\r\n                        }}\r\n                        aria-label=\"Clear input value\"\r\n                      >\r\n                        <TimesIcon aria-hidden />\r\n                      </Button>\r\n                    )}\r\n                  </TextInputGroupUtilities>\r\n                </TextInputGroup>\r\n              </MenuToggle>\r\n            )}\r\n            isOpen={open}\r\n            selected={field.value}\r\n            onSelect={(_, v) => {\r\n              const option = v?.toString();\r\n              if (variant !== \"typeaheadMulti\") {\r\n                const removed = field.value.includes(option);\r\n\r\n                if (removed) {\r\n                  field.onChange([]);\r\n                } else {\r\n                  field.onChange([option]);\r\n                }\r\n\r\n                setInputValue(\r\n                  removed\r\n                    ? \"\"\r\n                    : users.find((u) => u?.id === option)?.username || \"\",\r\n                );\r\n                setOpen(false);\r\n              } else {\r\n                const changedValue = field.value.find(\r\n                  (v: string) => v === option,\r\n                )\r\n                  ? field.value.filter((v: string) => v !== option)\r\n                  : [...field.value, option];\r\n                field.onChange(changedValue);\r\n              }\r\n            }}\r\n            aria-label={t(name!)}\r\n          >\r\n            <SelectList>{convert(searchedUsers)}</SelectList>\r\n          </Select>\r\n        )}\r\n      />\r\n      {errors[name!] && <FormErrorText message={t(\"required\")} />}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import { FormGroup, Radio } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nconst DECISION_STRATEGY = [\"UNANIMOUS\", \"AFFIRMATIVE\", \"CONSENSUS\"] as const;\r\n\r\ntype DecisionStrategySelectProps = {\r\n  helpLabel?: string;\r\n  isDisabled?: boolean;\r\n  isLimited?: boolean;\r\n};\r\n\r\nexport const DecisionStrategySelect = ({\r\n  helpLabel,\r\n  isDisabled = false,\r\n  isLimited = false,\r\n}: DecisionStrategySelectProps) => {\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(\"decisionStrategy\")}\r\n      labelIcon={\r\n        <HelpItem\r\n          helpText={t(helpLabel || \"decisionStrategyHelp\")}\r\n          fieldLabelId=\"decisionStrategy\"\r\n        />\r\n      }\r\n      fieldId=\"decisionStrategy\"\r\n      hasNoPaddingTop\r\n    >\r\n      <Controller\r\n        name=\"decisionStrategy\"\r\n        data-testid=\"decisionStrategy\"\r\n        defaultValue={DECISION_STRATEGY[0]}\r\n        control={control}\r\n        render={({ field }) => (\r\n          <>\r\n            {(isLimited\r\n              ? DECISION_STRATEGY.slice(0, 2)\r\n              : DECISION_STRATEGY\r\n            ).map((strategy) => (\r\n              <Radio\r\n                id={strategy}\r\n                key={strategy}\r\n                data-testid={strategy}\r\n                isChecked={field.value === strategy}\r\n                isDisabled={isDisabled}\r\n                name=\"decisionStrategy\"\r\n                onChange={() => field.onChange(strategy)}\r\n                label={t(`decisionStrategies.${strategy}`)}\r\n                className=\"pf-v5-u-mb-md\"\r\n              />\r\n            ))}\r\n          </>\r\n        )}\r\n      />\r\n    </FormGroup>\r\n  );\r\n};\r\n","import PolicyProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyProviderRepresentation\";\r\nimport type PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport type ResourceRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceRepresentation\";\r\nimport type {\r\n  Clients,\r\n  PolicyQuery,\r\n} from \"@keycloak/keycloak-admin-client/lib/resources/clients\";\r\nimport {\r\n  KeycloakSelect,\r\n  SelectVariant,\r\n  useFetch,\r\n  Variant,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Chip,\r\n  ChipGroup,\r\n  SelectOption,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  Controller,\r\n  ControllerRenderProps,\r\n  useFormContext,\r\n  useWatch,\r\n} from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { toCreatePolicy } from \"../routes/NewPolicy\";\r\nimport { toPolicyDetails } from \"../routes/PolicyDetails\";\r\nimport { toResourceDetails } from \"../routes/Resource\";\r\nimport { NewPolicyDialog } from \"./NewPolicyDialog\";\r\nimport { useIsAdminPermissionsClient } from \"../../utils/useIsAdminPermissionsClient\";\r\n\r\ntype Type = \"resources\" | \"policies\";\r\n\r\ntype ResourcesPolicySelectProps = {\r\n  name: Type;\r\n  clientId: string;\r\n  permissionId?: string;\r\n  variant?: Variant;\r\n  preSelected?: string;\r\n  isRequired?: boolean;\r\n};\r\n\r\ntype Policies = {\r\n  id?: string;\r\n  name?: string;\r\n  type?: string;\r\n};\r\n\r\ntype TypeMapping = {\r\n  [key in Type]: {\r\n    searchFunction: keyof Pick<Clients, \"listPolicies\" | \"listResources\">;\r\n    fetchFunction: keyof Pick<\r\n      Clients,\r\n      \"getAssociatedPolicies\" | \"getAssociatedResources\"\r\n    >;\r\n  };\r\n};\r\n\r\nconst typeMapping: TypeMapping = {\r\n  resources: {\r\n    searchFunction: \"listResources\",\r\n    fetchFunction: \"getAssociatedResources\",\r\n  },\r\n  policies: {\r\n    searchFunction: \"listPolicies\",\r\n    fetchFunction: \"getAssociatedPolicies\",\r\n  },\r\n};\r\n\r\nexport const ResourcesPolicySelect = ({\r\n  name,\r\n  clientId,\r\n  permissionId,\r\n  variant = SelectVariant.typeaheadMulti,\r\n  preSelected,\r\n  isRequired = false,\r\n}: ResourcesPolicySelectProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { realm } = useRealm();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    control,\r\n    formState: { errors, isDirty },\r\n  } = useFormContext<PolicyRepresentation>();\r\n  const [items, setItems] = useState<Policies[]>([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [createPolicyDialog, toggleCreatePolicyDialog] = useToggle();\r\n  const [policyProviders, setPolicyProviders] =\r\n    useState<PolicyProviderRepresentation[]>();\r\n  const [onUnsavedChangesConfirm, setOnUnsavedChangesConfirm] =\r\n    useState<() => void>();\r\n  const isAdminPermissionsClient = useIsAdminPermissionsClient(clientId);\r\n  const [selected, setSelected] = useState<Policies[]>([]);\r\n\r\n  const functions = typeMapping[name];\r\n\r\n  const value = useWatch({\r\n    control,\r\n    name: name!,\r\n    defaultValue: preSelected ? [preSelected] : [],\r\n  });\r\n\r\n  const convert = (\r\n    p: PolicyRepresentation | ResourceRepresentation,\r\n  ): Policies => ({\r\n    id: \"_id\" in p ? p._id : \"id\" in p ? p.id : undefined,\r\n    name: p.name,\r\n    type: p.type,\r\n  });\r\n\r\n  useFetch(\r\n    async () => {\r\n      const params: PolicyQuery = Object.assign(\r\n        { id: clientId, first: 0, max: 10, permission: \"false\" },\r\n        search === \"\" ? null : { name: search },\r\n      );\r\n      return await Promise.all([\r\n        adminClient.clients.listPolicyProviders({ id: clientId }),\r\n        adminClient.clients[functions.searchFunction](params),\r\n        permissionId\r\n          ? adminClient.clients[functions.fetchFunction]({\r\n              id: clientId,\r\n              permissionId,\r\n            })\r\n          : Promise.resolve([]),\r\n        preSelected && name === \"resources\"\r\n          ? adminClient.clients.getResource({\r\n              id: clientId,\r\n              resourceId: preSelected,\r\n            })\r\n          : Promise.resolve([]),\r\n      ]);\r\n    },\r\n    ([providers, ...policies]) => {\r\n      setPolicyProviders(\r\n        providers.filter((p) => p.type !== \"resource\" && p.type !== \"scope\"),\r\n      );\r\n      setItems(\r\n        policies\r\n          .flat()\r\n          .filter(\r\n            (r): r is PolicyRepresentation | ResourceRepresentation =>\r\n              typeof r !== \"string\",\r\n          )\r\n          .map(convert)\r\n          .filter(\r\n            ({ id }, index, self) =>\r\n              index === self.findIndex(({ id: otherId }) => id === otherId),\r\n          ),\r\n      );\r\n    },\r\n    [search],\r\n  );\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (name === \"resources\")\r\n        return await Promise.all(\r\n          (value || []).map((id) =>\r\n            adminClient.clients.getResource({ id: clientId, resourceId: id }),\r\n          ),\r\n        );\r\n      return await Promise.all(\r\n        (value || []).map(async (id) =>\r\n          adminClient.clients.findOnePolicy({\r\n            id: clientId,\r\n            policyId: id,\r\n          }),\r\n        ),\r\n      );\r\n    },\r\n    (result: any[]) => setSelected(result.map((r) => convert(r))),\r\n    [value],\r\n  );\r\n\r\n  const [toggleUnsavedChangesDialog, UnsavedChangesConfirm] = useConfirmDialog({\r\n    titleKey: t(\"unsavedChangesTitle\"),\r\n    messageKey: t(\"unsavedChangesConfirm\"),\r\n    continueButtonLabel: t(\"continue\"),\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: () => onUnsavedChangesConfirm?.(),\r\n  });\r\n\r\n  const to = (policy: Policies) =>\r\n    name === \"policies\"\r\n      ? toPolicyDetails({\r\n          realm: realm,\r\n          id: clientId,\r\n          policyId: policy.id!,\r\n          policyType: policy.type!,\r\n        })\r\n      : toResourceDetails({\r\n          realm,\r\n          id: clientId,\r\n          resourceId: policy.id!,\r\n        });\r\n\r\n  const toSelectOptions = () =>\r\n    items.map((p) => (\r\n      <SelectOption key={p.id} value={p.id}>\r\n        {p.name}\r\n      </SelectOption>\r\n    ));\r\n\r\n  const toChipGroupItems = (\r\n    field: ControllerRenderProps<PolicyRepresentation, Type>,\r\n  ) => {\r\n    return (\r\n      <ChipGroup>\r\n        {selected?.map((item) => (\r\n          <Chip\r\n            key={item.id}\r\n            onClick={() => {\r\n              field.onChange(field.value?.filter((id) => id !== item.id) || []);\r\n              setSelected(selected?.filter((p) => p.id !== item.id) || []);\r\n            }}\r\n          >\r\n            {!isAdminPermissionsClient ? (\r\n              <Link\r\n                to={to(item)}\r\n                onClick={(event) => {\r\n                  if (isDirty) {\r\n                    event.preventDefault();\r\n                    setOnUnsavedChangesConfirm(() => () => navigate(to(item)));\r\n                    toggleUnsavedChangesDialog();\r\n                  }\r\n                }}\r\n              >\r\n                {item.name}\r\n              </Link>\r\n            ) : (\r\n              item.name\r\n            )}\r\n          </Chip>\r\n        ))}\r\n      </ChipGroup>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <UnsavedChangesConfirm />\r\n      {createPolicyDialog && (\r\n        <NewPolicyDialog\r\n          policyProviders={policyProviders}\r\n          onSelect={(p) => {\r\n            navigate(\r\n              toCreatePolicy({ id: clientId, realm, policyType: p.type! }),\r\n            );\r\n          }}\r\n          toggleDialog={toggleCreatePolicyDialog}\r\n        />\r\n      )}\r\n      <Controller\r\n        name={name}\r\n        defaultValue={preSelected ? [preSelected] : []}\r\n        control={control}\r\n        rules={{ validate: (value) => !isRequired || value!.length > 0 }}\r\n        render={({ field }) => (\r\n          <KeycloakSelect\r\n            toggleId={name}\r\n            variant={variant}\r\n            onToggle={(val) => setOpen(val)}\r\n            onFilter={(filter) => {\r\n              setSearch(filter);\r\n              return toSelectOptions();\r\n            }}\r\n            onClear={() => {\r\n              field.onChange([]);\r\n              setSearch(\"\");\r\n            }}\r\n            selections={\r\n              variant === SelectVariant.typeaheadMulti\r\n                ? field.value\r\n                : items.find((i) => i.id === field.value?.[0])?.name\r\n            }\r\n            onSelect={(selectedValue) => {\r\n              const option = selectedValue.toString();\r\n              if (variant === SelectVariant.typeaheadMulti) {\r\n                const changedValue = field.value?.find(\r\n                  (p: string) => p === option,\r\n                )\r\n                  ? field.value.filter((p: string) => p !== option)\r\n                  : [...field.value!, option];\r\n                field.onChange(changedValue);\r\n              } else {\r\n                field.onChange([option]);\r\n              }\r\n\r\n              setSearch(\"\");\r\n            }}\r\n            isOpen={open}\r\n            aria-label={t(name)}\r\n            validated={errors[name] ? \"error\" : \"default\"}\r\n            typeAheadAriaLabel={t(name)}\r\n            chipGroupComponent={toChipGroupItems(field)}\r\n            footer={\r\n              name === \"policies\" && !isAdminPermissionsClient ? (\r\n                <Button\r\n                  variant=\"link\"\r\n                  isInline\r\n                  onClick={() => {\r\n                    if (isDirty) {\r\n                      setOpen(false);\r\n                      setOnUnsavedChangesConfirm(\r\n                        () => toggleCreatePolicyDialog,\r\n                      );\r\n                      toggleUnsavedChangesDialog();\r\n                    } else {\r\n                      toggleCreatePolicyDialog();\r\n                    }\r\n                  }}\r\n                >\r\n                  {t(\"createPolicy\")}\r\n                </Button>\r\n              ) : undefined\r\n            }\r\n          >\r\n            {toSelectOptions()}\r\n          </KeycloakSelect>\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { FormGroup } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useParams } from \"../../../utils/useParams\";\r\nimport type { PolicyDetailsParams } from \"../../routes/PolicyDetails\";\r\nimport { DecisionStrategySelect } from \"../DecisionStrategySelect\";\r\nimport { ResourcesPolicySelect } from \"../ResourcesPolicySelect\";\r\nimport { NewPermissionPolicyDetailsParams } from \"../../../permissions-configuration/routes/NewPermissionPolicy\";\r\n\r\nexport const Aggregate = () => {\r\n  const { t } = useTranslation();\r\n  const { id } = useParams<PolicyDetailsParams>();\r\n  const { permissionClientId } = useParams<NewPermissionPolicyDetailsParams>();\r\n\r\n  return (\r\n    <>\r\n      <FormGroup\r\n        label={t(\"applyPolicy\")}\r\n        fieldId=\"policies\"\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"applyPolicyHelp\")} fieldLabelId=\"policies\" />\r\n        }\r\n      >\r\n        <ResourcesPolicySelect\r\n          name=\"policies\"\r\n          clientId={permissionClientId || id}\r\n        />\r\n      </FormGroup>\r\n      <DecisionStrategySelect helpLabel=\"policyDecisionStagey\" />\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { ClientSelect } from \"../../../components/client/ClientSelect\";\r\n\r\nexport const Client = () => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <ClientSelect\r\n      name=\"clients\"\r\n      label={t(\"clients\")}\r\n      helpText={t(\"policyClientHelp\")}\r\n      required\r\n      defaultValue={[]}\r\n      variant=\"typeaheadMulti\"\r\n      clientKey=\"id\"\r\n    />\r\n  );\r\n};\r\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\r\nimport { KeycloakSelect } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n  Modal,\r\n  ModalVariant,\r\n  SelectOption,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  CaretDownIcon,\r\n  CaretUpIcon,\r\n  FilterIcon,\r\n} from \"@patternfly/react-icons\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  ClientScopeType,\r\n  clientScopeTypesDropdown,\r\n} from \"../../components/client-scope/ClientScopeTypes\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { getProtocolName } from \"../utils\";\r\nimport useIsFeatureEnabled, { Feature } from \"../../utils/useIsFeatureEnabled\";\r\n\r\nimport \"./client-scopes.css\";\r\n\r\nexport type AddScopeDialogProps = {\r\n  clientScopes: ClientScopeRepresentation[];\r\n  clientName?: string;\r\n  open: boolean;\r\n  toggleDialog: () => void;\r\n  onAdd: (\r\n    scopes: { scope: ClientScopeRepresentation; type?: ClientScopeType }[],\r\n  ) => void;\r\n  isClientScopesConditionType?: boolean;\r\n};\r\n\r\nenum FilterType {\r\n  Name = \"Name\",\r\n  Protocol = \"Protocol\",\r\n}\r\n\r\nenum ProtocolType {\r\n  All = \"All\",\r\n  SAML = \"SAML\",\r\n  OpenIDConnect = \"OpenID Connect\",\r\n  OID4VC = \"OpenID4VC\",\r\n}\r\n\r\nexport const AddScopeDialog = ({\r\n  clientScopes: scopes,\r\n  clientName,\r\n  open,\r\n  toggleDialog,\r\n  onAdd,\r\n  isClientScopesConditionType,\r\n}: AddScopeDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n  const [addToggle, setAddToggle] = useState(false);\r\n  const [rows, setRows] = useState<ClientScopeRepresentation[]>([]);\r\n  const [filterType, setFilterType] = useState(FilterType.Name);\r\n  const [protocolType, setProtocolType] = useState(ProtocolType.All);\r\n\r\n  const isOid4vcEnabled = isFeatureEnabled(Feature.OpenId4VCI);\r\n\r\n  const [isFilterTypeDropdownOpen, toggleIsFilterTypeDropdownOpen] =\r\n    useToggle();\r\n\r\n  const [isProtocolTypeDropdownOpen, toggleIsProtocolTypeDropdownOpen] =\r\n    useToggle(false);\r\n\r\n  const clientScopes = useMemo(() => {\r\n    if (protocolType === ProtocolType.OpenIDConnect) {\r\n      return scopes.filter((item) => item.protocol === \"openid-connect\");\r\n    } else if (protocolType === ProtocolType.SAML) {\r\n      return scopes.filter((item) => item.protocol === \"saml\");\r\n    } else if (protocolType === ProtocolType.OID4VC) {\r\n      return scopes.filter((item) => item.protocol === \"oid4vc\");\r\n    }\r\n    return scopes;\r\n  }, [scopes, filterType, protocolType]);\r\n\r\n  const action = (scope: ClientScopeType) => {\r\n    const scopes = rows.map((row) => {\r\n      return { scope: row, type: scope };\r\n    });\r\n    onAdd(scopes);\r\n    setAddToggle(false);\r\n    toggleDialog();\r\n  };\r\n\r\n  const onFilterTypeDropdownSelect = (filterType: string) => {\r\n    if (filterType === FilterType.Name) {\r\n      setFilterType(FilterType.Protocol);\r\n    } else if (filterType === FilterType.Protocol) {\r\n      setFilterType(FilterType.Name);\r\n      setProtocolType(ProtocolType.All);\r\n    }\r\n\r\n    toggleIsFilterTypeDropdownOpen();\r\n  };\r\n\r\n  const onProtocolTypeDropdownSelect = (protocolType: string) => {\r\n    if (protocolType === ProtocolType.SAML) {\r\n      setProtocolType(ProtocolType.SAML);\r\n    } else if (protocolType === ProtocolType.OpenIDConnect) {\r\n      setProtocolType(ProtocolType.OpenIDConnect);\r\n    } else if (protocolType === ProtocolType.OID4VC) {\r\n      setProtocolType(ProtocolType.OID4VC);\r\n    } else if (protocolType === ProtocolType.All) {\r\n      setProtocolType(ProtocolType.All);\r\n    }\r\n\r\n    toggleIsProtocolTypeDropdownOpen();\r\n  };\r\n\r\n  const protocolTypeOptions = useMemo(() => {\r\n    const options = [\r\n      <SelectOption key={1} value={ProtocolType.SAML}>\r\n        {t(\"protocolTypes.saml\")}\r\n      </SelectOption>,\r\n      <SelectOption key={2} value={ProtocolType.OpenIDConnect}>\r\n        {t(\"protocolTypes.openid-connect\")}\r\n      </SelectOption>,\r\n    ];\r\n\r\n    if (isOid4vcEnabled) {\r\n      options.push(\r\n        <SelectOption key={3} value={ProtocolType.OID4VC}>\r\n          {t(\"protocolTypes.oid4vc\")}\r\n        </SelectOption>,\r\n      );\r\n    }\r\n\r\n    options.push(\r\n      <SelectOption key={4} value={ProtocolType.All}>\r\n        {t(\"protocolTypes.all\")}\r\n      </SelectOption>,\r\n    );\r\n\r\n    return options;\r\n  }, [t, isOid4vcEnabled]);\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.medium}\r\n      title={\r\n        isClientScopesConditionType\r\n          ? t(\"addClientScope\")\r\n          : t(\"addClientScopesTo\", { clientName })\r\n      }\r\n      isOpen={open}\r\n      onClose={toggleDialog}\r\n      actions={\r\n        isClientScopesConditionType\r\n          ? [\r\n              <Button\r\n                id=\"modal-add\"\r\n                data-testid=\"confirm\"\r\n                key=\"add\"\r\n                variant={ButtonVariant.primary}\r\n                onClick={() => {\r\n                  const scopes = rows.map((scope) => ({ scope }));\r\n                  onAdd(scopes);\r\n                  toggleDialog();\r\n                }}\r\n                isDisabled={rows.length === 0}\r\n              >\r\n                {t(\"add\")}\r\n              </Button>,\r\n              <Button\r\n                id=\"modal-cancel\"\r\n                data-testid=\"cancel\"\r\n                key=\"cancel\"\r\n                variant={ButtonVariant.link}\r\n                onClick={() => {\r\n                  setRows([]);\r\n                  toggleDialog();\r\n                }}\r\n              >\r\n                {t(\"cancel\")}\r\n              </Button>,\r\n            ]\r\n          : [\r\n              <Dropdown\r\n                popperProps={{\r\n                  direction: \"up\",\r\n                }}\r\n                onOpenChange={(isOpen) => setAddToggle(isOpen)}\r\n                className=\"keycloak__client-scopes-add__add-dropdown\"\r\n                key=\"add-dropdown\"\r\n                isOpen={addToggle}\r\n                toggle={(ref) => (\r\n                  <MenuToggle\r\n                    ref={ref}\r\n                    isDisabled={rows.length === 0}\r\n                    onClick={() => setAddToggle(!addToggle)}\r\n                    variant=\"primary\"\r\n                    id=\"add-dropdown\"\r\n                    data-testid=\"add-dropdown\"\r\n                    statusIcon={<CaretUpIcon />}\r\n                  >\r\n                    {t(\"add\")}\r\n                  </MenuToggle>\r\n                )}\r\n              >\r\n                <DropdownList>\r\n                  {clientScopeTypesDropdown(t, action)}\r\n                </DropdownList>\r\n              </Dropdown>,\r\n              <Button\r\n                id=\"modal-cancel\"\r\n                key=\"cancel\"\r\n                variant={ButtonVariant.link}\r\n                onClick={() => {\r\n                  setRows([]);\r\n                  toggleDialog();\r\n                }}\r\n              >\r\n                {t(\"cancel\")}\r\n              </Button>,\r\n            ]\r\n      }\r\n    >\r\n      <KeycloakDataTable\r\n        loader={clientScopes}\r\n        ariaLabelKey=\"chooseAMapperType\"\r\n        searchPlaceholderKey={\r\n          filterType === FilterType.Name ? \"searchForClientScope\" : undefined\r\n        }\r\n        isSearching={filterType !== FilterType.Name}\r\n        searchTypeComponent={\r\n          <Dropdown\r\n            onSelect={() => {\r\n              onFilterTypeDropdownSelect(filterType);\r\n            }}\r\n            onOpenChange={toggleIsFilterTypeDropdownOpen}\r\n            toggle={(ref) => (\r\n              <MenuToggle\r\n                ref={ref}\r\n                data-testid=\"filter-type-dropdown\"\r\n                id=\"toggle-id-9\"\r\n                onClick={toggleIsFilterTypeDropdownOpen}\r\n                icon={<FilterIcon />}\r\n                statusIcon={<CaretDownIcon />}\r\n              >\r\n                {filterType}\r\n              </MenuToggle>\r\n            )}\r\n            isOpen={isFilterTypeDropdownOpen}\r\n          >\r\n            <DropdownList>\r\n              <DropdownItem\r\n                data-testid=\"filter-type-dropdown-item\"\r\n                key=\"filter-type\"\r\n              >\r\n                {filterType === FilterType.Name ? t(\"protocol\") : t(\"name\")}\r\n              </DropdownItem>\r\n            </DropdownList>\r\n          </Dropdown>\r\n        }\r\n        toolbarItem={\r\n          filterType === FilterType.Protocol && (\r\n            <>\r\n              <Dropdown\r\n                onSelect={() => {\r\n                  onFilterTypeDropdownSelect(filterType);\r\n                }}\r\n                onOpenChange={toggleIsFilterTypeDropdownOpen}\r\n                data-testid=\"filter-type-dropdown\"\r\n                toggle={(ref) => (\r\n                  <MenuToggle\r\n                    ref={ref}\r\n                    id=\"toggle-id-9\"\r\n                    onClick={toggleIsFilterTypeDropdownOpen}\r\n                    statusIcon={<CaretDownIcon />}\r\n                    icon={<FilterIcon />}\r\n                  >\r\n                    {filterType}\r\n                  </MenuToggle>\r\n                )}\r\n                isOpen={isFilterTypeDropdownOpen}\r\n              >\r\n                <DropdownList>\r\n                  <DropdownItem\r\n                    data-testid=\"filter-type-dropdown-item\"\r\n                    key=\"filter-type\"\r\n                  >\r\n                    {t(\"name\")}\r\n                  </DropdownItem>\r\n                </DropdownList>\r\n              </Dropdown>\r\n              <KeycloakSelect\r\n                className=\"kc-protocolType-select\"\r\n                aria-label={t(\"selectOne\")}\r\n                onToggle={toggleIsProtocolTypeDropdownOpen}\r\n                onSelect={(value) =>\r\n                  onProtocolTypeDropdownSelect(value.toString())\r\n                }\r\n                selections={protocolType}\r\n                isOpen={isProtocolTypeDropdownOpen}\r\n              >\r\n                {protocolTypeOptions}\r\n              </KeycloakSelect>\r\n            </>\r\n          )\r\n        }\r\n        canSelectAll\r\n        onSelect={(rows) => setRows(rows)}\r\n        columns={[\r\n          {\r\n            name: \"name\",\r\n          },\r\n          {\r\n            name: \"protocol\",\r\n            displayKey: \"protocol\",\r\n            cellRenderer: (client) =>\r\n              getProtocolName(t, client.protocol ?? \"openid-connect\"),\r\n          },\r\n          {\r\n            name: \"description\",\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"emptyAddClientScopes\")}\r\n            instructions={t(\"emptyAddClientScopesInstructions\")}\r\n          />\r\n        }\r\n      />\r\n    </Modal>\r\n  );\r\n};\r\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\r\nimport { HelpItem, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, Checkbox, FormGroup } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../../admin-client\";\r\nimport useLocaleSort, { mapByKey } from \"../../../utils/useLocaleSort\";\r\nimport { AddScopeDialog } from \"../../scopes/AddScopeDialog\";\r\n\r\nexport type RequiredIdValue = {\r\n  id: string;\r\n  required: boolean;\r\n};\r\n\r\nexport const ClientScope = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { control, getValues, setValue } = useFormContext<{\r\n    clientScopes: RequiredIdValue[];\r\n  }>();\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [scopes, setScopes] = useState<ClientScopeRepresentation[]>([]);\r\n  const [selectedScopes, setSelectedScopes] = useState<\r\n    ClientScopeRepresentation[]\r\n  >([]);\r\n\r\n  const localeSort = useLocaleSort();\r\n\r\n  useFetch(\r\n    () => adminClient.clientScopes.find(),\r\n    (scopes = []) => {\r\n      const clientScopes = getValues(\"clientScopes\") || [];\r\n      setSelectedScopes(\r\n        clientScopes.map((s) => scopes.find((c) => c.id === s.id)!),\r\n      );\r\n      setScopes(localeSort(scopes, mapByKey(\"name\")));\r\n    },\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(\"clientScopes\")}\r\n      labelIcon={\r\n        <HelpItem\r\n          helpText={t(\"clientsClientScopesHelp\")}\r\n          fieldLabelId=\"clientScopes\"\r\n        />\r\n      }\r\n      fieldId=\"clientScopes\"\r\n    >\r\n      <Controller\r\n        name=\"clientScopes\"\r\n        control={control}\r\n        defaultValue={[]}\r\n        render={({ field }) => (\r\n          <>\r\n            {open && (\r\n              <AddScopeDialog\r\n                clientScopes={scopes.filter(\r\n                  (scope) =>\r\n                    !field.value\r\n                      .map((c: RequiredIdValue) => c.id)\r\n                      .includes(scope.id!),\r\n                )}\r\n                isClientScopesConditionType\r\n                open={open}\r\n                toggleDialog={() => setOpen(!open)}\r\n                onAdd={(scopes) => {\r\n                  setSelectedScopes([\r\n                    ...selectedScopes,\r\n                    ...scopes.map((s) => s.scope),\r\n                  ]);\r\n                  field.onChange([\r\n                    ...field.value,\r\n                    ...scopes\r\n                      .map((scope) => scope.scope)\r\n                      .map((item) => ({ id: item.id!, required: false })),\r\n                  ]);\r\n                }}\r\n              />\r\n            )}\r\n            <Button\r\n              data-testid=\"select-scope-button\"\r\n              variant=\"secondary\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n              }}\r\n            >\r\n              {t(\"addClientScopes\")}\r\n            </Button>\r\n          </>\r\n        )}\r\n      />\r\n      {selectedScopes.length > 0 && (\r\n        <Table variant=\"compact\">\r\n          <Thead>\r\n            <Tr>\r\n              <Th>{t(\"clientScopeTitle\")}</Th>\r\n              <Th>{t(\"required\")}</Th>\r\n              <Th aria-hidden=\"true\" />\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n            {selectedScopes.map((scope, index) => (\r\n              <Tr key={scope.id}>\r\n                <Td>{scope.name}</Td>\r\n                <Td>\r\n                  <Controller\r\n                    name={`clientScopes.${index}.required`}\r\n                    defaultValue={false}\r\n                    control={control}\r\n                    render={({ field }) => (\r\n                      <Checkbox\r\n                        id=\"required\"\r\n                        data-testid=\"standard\"\r\n                        name=\"required\"\r\n                        isChecked={field.value}\r\n                        onChange={field.onChange}\r\n                      />\r\n                    )}\r\n                  />\r\n                </Td>\r\n                <Td>\r\n                  <Button\r\n                    variant=\"link\"\r\n                    className=\"keycloak__client-authorization__policy-row-remove\"\r\n                    icon={<MinusCircleIcon />}\r\n                    onClick={() => {\r\n                      setValue(\"clientScopes\", [\r\n                        ...getValues(\"clientScopes\").filter(\r\n                          (s) => s.id !== scope.id,\r\n                        ),\r\n                      ]);\r\n                      setSelectedScopes([\r\n                        ...selectedScopes.filter((s) => s.id !== scope.id),\r\n                      ]);\r\n                    }}\r\n                  />\r\n                </Td>\r\n              </Tr>\r\n            ))}\r\n          </Tbody>\r\n        </Table>\r\n      )}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import type GroupRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/groupRepresentation\";\r\nimport { HelpItem, TextControl, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, Checkbox, FormGroup } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../../admin-client\";\r\nimport { GroupPickerDialog } from \"../../../components/group/GroupPickerDialog\";\r\n\r\ntype GroupForm = {\r\n  groups?: GroupValue[];\r\n  groupsClaim: string;\r\n};\r\n\r\nexport type GroupValue = {\r\n  id: string;\r\n  extendChildren: boolean;\r\n};\r\n\r\nexport const Group = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { control, getValues, setValue } = useFormContext<GroupForm>();\r\n  const values = getValues(\"groups\");\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [selectedGroups, setSelectedGroups] = useState<GroupRepresentation[]>(\r\n    [],\r\n  );\r\n\r\n  useFetch(\r\n    () => {\r\n      if (values && values.length > 0)\r\n        return Promise.all(\r\n          values.map((g) => adminClient.groups.findOne({ id: g.id })),\r\n        );\r\n      return Promise.resolve([]);\r\n    },\r\n    (groups) => {\r\n      const filteredGroup = groups.filter((g) => g) as GroupRepresentation[];\r\n      setSelectedGroups(filteredGroup);\r\n    },\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <TextControl\r\n        name=\"groupsClaim\"\r\n        label={t(\"groupsClaim\")}\r\n        labelIcon={t(\"groupsClaimHelp\")}\r\n      />\r\n      <FormGroup\r\n        label={t(\"groups\")}\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"policyGroupsHelp\")} fieldLabelId=\"groups\" />\r\n        }\r\n        fieldId=\"groups\"\r\n      >\r\n        <Controller\r\n          name=\"groups\"\r\n          control={control}\r\n          defaultValue={[]}\r\n          render={({ field }) => (\r\n            <>\r\n              {open && (\r\n                <GroupPickerDialog\r\n                  type=\"selectMany\"\r\n                  text={{\r\n                    title: \"addGroupsToGroupPolicy\",\r\n                    ok: \"add\",\r\n                  }}\r\n                  onConfirm={(groups) => {\r\n                    field.onChange([\r\n                      ...(field.value || []),\r\n                      ...(groups || []).map(({ id }) => ({ id })),\r\n                    ]);\r\n                    setSelectedGroups([...selectedGroups, ...(groups || [])]);\r\n                    setOpen(false);\r\n                  }}\r\n                  onClose={() => {\r\n                    setOpen(false);\r\n                  }}\r\n                  filterGroups={selectedGroups}\r\n                />\r\n              )}\r\n              <Button\r\n                data-testid=\"select-group-button\"\r\n                variant=\"secondary\"\r\n                onClick={() => {\r\n                  setOpen(true);\r\n                }}\r\n              >\r\n                {t(\"addGroups\")}\r\n              </Button>\r\n            </>\r\n          )}\r\n        />\r\n        {selectedGroups.length > 0 && (\r\n          <Table variant=\"compact\">\r\n            <Thead>\r\n              <Tr>\r\n                <Th>{t(\"groups\")}</Th>\r\n                <Th>{t(\"extendToChildren\")}</Th>\r\n                <Th aria-hidden=\"true\" />\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              {selectedGroups.map((group, index) => (\r\n                <Tr key={group.id}>\r\n                  <Td>{group.path}</Td>\r\n                  <Td>\r\n                    <Controller\r\n                      name={`groups.${index}.extendChildren`}\r\n                      defaultValue={false}\r\n                      control={control}\r\n                      render={({ field }) => (\r\n                        <Checkbox\r\n                          id=\"extendChildren\"\r\n                          data-testid=\"standard\"\r\n                          name=\"extendChildren\"\r\n                          isChecked={field.value}\r\n                          onChange={field.onChange}\r\n                          isDisabled={group.subGroupCount === 0}\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Td>\r\n                  <Td>\r\n                    <Button\r\n                      variant=\"link\"\r\n                      className=\"keycloak__client-authorization__policy-row-remove\"\r\n                      icon={<MinusCircleIcon />}\r\n                      onClick={() => {\r\n                        setValue(\"groups\", [\r\n                          ...(values || []).filter(({ id }) => id !== group.id),\r\n                        ]);\r\n                        setSelectedGroups([\r\n                          ...selectedGroups.filter(({ id }) => id !== group.id),\r\n                        ]);\r\n                      }}\r\n                    />\r\n                  </Td>\r\n                </Tr>\r\n              ))}\r\n            </Tbody>\r\n          </Table>\r\n        )}\r\n      </FormGroup>\r\n    </>\r\n  );\r\n};\r\n","import { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormGroup } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport CodeEditor from \"../../../components/form/CodeEditor\";\r\n\r\nexport const JavaScript = () => {\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(\"code\")}\r\n      labelIcon={\r\n        <HelpItem helpText={t(\"policyCodeHelp\")} fieldLabelId=\"code\" />\r\n      }\r\n      fieldId=\"code\"\r\n      isRequired\r\n    >\r\n      <Controller\r\n        name=\"code\"\r\n        defaultValue=\"\"\r\n        control={control}\r\n        render={({ field }) => (\r\n          <CodeEditor\r\n            id=\"code\"\r\n            data-testid=\"code\"\r\n            readOnly\r\n            value={field.value}\r\n            language=\"js\"\r\n            height={600}\r\n          />\r\n        )}\r\n      />\r\n    </FormGroup>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { FormGroup, Radio } from \"@patternfly/react-core\";\r\n\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nconst LOGIC_TYPES = [\"POSITIVE\", \"NEGATIVE\"] as const;\r\n\r\ntype LogicSelectorProps = {\r\n  isDisabled?: boolean;\r\n};\r\n\r\nexport const LogicSelector = ({ isDisabled }: LogicSelectorProps) => {\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(\"logic\")}\r\n      labelIcon={<HelpItem helpText={t(\"logicHelp\")} fieldLabelId=\"logic\" />}\r\n      fieldId=\"logic\"\r\n      hasNoPaddingTop\r\n    >\r\n      <Controller\r\n        name=\"logic\"\r\n        data-testid=\"logic\"\r\n        defaultValue={LOGIC_TYPES[0]}\r\n        control={control}\r\n        render={({ field }) => (\r\n          <>\r\n            {LOGIC_TYPES.map((type) => (\r\n              <Radio\r\n                id={type}\r\n                key={type}\r\n                data-testid={type}\r\n                isChecked={field.value === type}\r\n                name=\"logic\"\r\n                onChange={() => field.onChange(type)}\r\n                label={t(`logicType.${type.toLowerCase()}`)}\r\n                className=\"pf-v5-u-mb-md\"\r\n                isDisabled={isDisabled}\r\n              />\r\n            ))}\r\n          </>\r\n        )}\r\n      />\r\n    </FormGroup>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { TextAreaControl, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useIsAdminPermissionsClient } from \"../../../utils/useIsAdminPermissionsClient\";\r\n\r\ntype NameDescriptionProps = {\r\n  isDisabled?: boolean;\r\n  clientId?: string;\r\n};\r\n\r\nexport const NameDescription = ({\r\n  isDisabled,\r\n  clientId,\r\n}: NameDescriptionProps) => {\r\n  const { t } = useTranslation();\r\n  const isAdminPermissionsClient = useIsAdminPermissionsClient(clientId!);\r\n\r\n  return (\r\n    <>\r\n      <TextControl\r\n        name=\"name\"\r\n        label={t(\"name\")}\r\n        labelIcon={isAdminPermissionsClient ? t(\"permissionNameHelpText\") : \"\"}\r\n        rules={{ required: t(\"required\") }}\r\n        isDisabled={isDisabled}\r\n      />\r\n      <TextAreaControl\r\n        name=\"description\"\r\n        label={t(\"description\")}\r\n        rules={{\r\n          maxLength: { message: t(\"maxLength\", { length: 255 }), value: 255 },\r\n        }}\r\n        isDisabled={isDisabled}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { SwitchControl, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nexport const Regex = () => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <>\r\n      <TextControl\r\n        name=\"targetClaim\"\r\n        label={t(\"targetClaim\")}\r\n        labelIcon={t(\"targetClaimHelp\")}\r\n        rules={{ required: t(\"required\") }}\r\n      />\r\n      <TextControl\r\n        name=\"pattern\"\r\n        label={t(\"regexPattern\")}\r\n        labelIcon={t(\"regexPatternHelp\")}\r\n        rules={{ required: t(\"required\") }}\r\n      />\r\n      <SwitchControl\r\n        name=\"targetContextAttributes\"\r\n        label={t(\"targetContextAttributes\")}\r\n        labelIcon={t(\"targetContextAttributesHelp\")}\r\n        labelOn={t(\"yes\")}\r\n        labelOff={t(\"no\")}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { HelpItem, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, Checkbox, FormGroup } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../../admin-client\";\r\nimport { DefaultSwitchControl } from \"../../../components/SwitchControl\";\r\nimport {\r\n  AddRoleButton,\r\n  AddRoleMappingModal,\r\n  FilterType,\r\n} from \"../../../components/role-mapping/AddRoleMappingModal\";\r\nimport { Row, ServiceRole } from \"../../../components/role-mapping/RoleMapping\";\r\nimport type { RequiredIdValue } from \"./ClientScope\";\r\n\r\nexport const Role = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { control, getValues, setValue } = useFormContext<{\r\n    roles?: RequiredIdValue[];\r\n    fetchRoles?: boolean;\r\n  }>();\r\n  const values = getValues(\"roles\");\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [filterType, setFilterType] = useState<FilterType>(\"clients\");\r\n\r\n  const [selectedRoles, setSelectedRoles] = useState<Row[]>([]);\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (values && values.length > 0) {\r\n        const roles = await Promise.all(\r\n          values.map((r) => adminClient.roles.findOneById({ id: r.id })),\r\n        );\r\n        return Promise.all(\r\n          roles.map(async (role) => ({\r\n            role: role!,\r\n            client: role!.clientRole\r\n              ? await adminClient.clients.findOne({\r\n                  id: role?.containerId!,\r\n                })\r\n              : undefined,\r\n          })),\r\n        );\r\n      }\r\n      return Promise.resolve([]);\r\n    },\r\n    setSelectedRoles,\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <FormGroup\r\n        label={t(\"roles\")}\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"policyRolesHelp\")} fieldLabelId=\"roles\" />\r\n        }\r\n        fieldId=\"roles\"\r\n      >\r\n        <Controller\r\n          name=\"roles\"\r\n          control={control}\r\n          defaultValue={[]}\r\n          render={({ field }) => (\r\n            <>\r\n              {open && (\r\n                <AddRoleMappingModal\r\n                  id=\"role\"\r\n                  type=\"roles\"\r\n                  title={t(\"assignRole\")}\r\n                  filterType={filterType}\r\n                  onAssign={(rows) => {\r\n                    field.onChange([\r\n                      ...(field.value || []),\r\n                      ...rows.map((row) => ({ id: row.role.id })),\r\n                    ]);\r\n                    setSelectedRoles([...selectedRoles, ...rows]);\r\n                    setOpen(false);\r\n                  }}\r\n                  onClose={() => {\r\n                    setOpen(false);\r\n                  }}\r\n                />\r\n              )}\r\n              <AddRoleButton\r\n                data-testid=\"select-role-button\"\r\n                variant=\"secondary\"\r\n                onFilerTypeChange={(type) => {\r\n                  setFilterType(type);\r\n                  setOpen(true);\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        />\r\n        {selectedRoles.length > 0 && (\r\n          <Table variant=\"compact\">\r\n            <Thead>\r\n              <Tr>\r\n                <Th>{t(\"roles\")}</Th>\r\n                <Th>{t(\"required\")}</Th>\r\n                <Th aria-hidden=\"true\" />\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              {selectedRoles.map((row, index) => (\r\n                <Tr key={row.role.id}>\r\n                  <Td>\r\n                    <ServiceRole role={row.role} client={row.client} />\r\n                  </Td>\r\n                  <Td>\r\n                    <Controller\r\n                      name={`roles.${index}.required`}\r\n                      defaultValue={false}\r\n                      control={control}\r\n                      render={({ field }) => (\r\n                        <Checkbox\r\n                          id=\"required\"\r\n                          data-testid=\"standard\"\r\n                          name=\"required\"\r\n                          isChecked={field.value}\r\n                          onChange={field.onChange}\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Td>\r\n                  <Td>\r\n                    <Button\r\n                      variant=\"link\"\r\n                      className=\"keycloak__client-authorization__policy-row-remove\"\r\n                      icon={<MinusCircleIcon />}\r\n                      onClick={() => {\r\n                        setValue(\"roles\", [\r\n                          ...(values || []).filter((s) => s.id !== row.role.id),\r\n                        ]);\r\n                        setSelectedRoles([\r\n                          ...selectedRoles.filter(\r\n                            (s) => s.role.id !== row.role.id,\r\n                          ),\r\n                        ]);\r\n                      }}\r\n                    />\r\n                  </Td>\r\n                </Tr>\r\n              ))}\r\n            </Tbody>\r\n          </Table>\r\n        )}\r\n      </FormGroup>\r\n      <DefaultSwitchControl\r\n        name=\"fetchRoles\"\r\n        label={t(\"fetchRoles\")}\r\n        labelIcon={t(\"fetchRolesHelp\")}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  DatePicker,\r\n  Flex,\r\n  FlexItem,\r\n  FormGroup,\r\n  NumberInput,\r\n  Radio,\r\n  Split,\r\n  SplitItem,\r\n  TimePicker,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { FormErrorText, HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\n\r\nconst DATE_TIME_FORMAT = /(\\d\\d\\d\\d-\\d\\d-\\d\\d)? (\\d\\d?):(\\d\\d?)/;\r\nconst padDateSegment = (value: number) => value.toString().padStart(2, \"0\");\r\n\r\nconst DateTime = ({ name }: { name: string }) => {\r\n  const { control } = useFormContext();\r\n\r\n  const parseDate = (value: string, date?: Date): string => {\r\n    if (!date) {\r\n      return value;\r\n    }\r\n\r\n    const parts = DATE_TIME_FORMAT.exec(value);\r\n    const parsedDate = [\r\n      date.getFullYear(),\r\n      padDateSegment(date.getMonth() + 1),\r\n      padDateSegment(date.getDate()),\r\n    ].join(\"-\");\r\n\r\n    return `${parsedDate} ${parts ? parts[2] : \"00\"}:${\r\n      parts ? parts[3] : \"00\"\r\n    }:00`;\r\n  };\r\n\r\n  const parseTime = (\r\n    value: string,\r\n    hour?: number | null,\r\n    minute?: number | null,\r\n  ): string => {\r\n    const parts = DATE_TIME_FORMAT.exec(value);\r\n    if (minute !== undefined && minute !== null) {\r\n      return `${parts ? parts[1] : \"\"} ${hour}:${\r\n        minute < 10 ? `0${minute}` : minute\r\n      }:00`;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  return (\r\n    <Controller\r\n      name={name}\r\n      defaultValue=\"\"\r\n      control={control}\r\n      rules={{ required: true }}\r\n      render={({ field }) => {\r\n        const dateTime = field.value.match(DATE_TIME_FORMAT) || [\r\n          \"\",\r\n          \"\",\r\n          \"0\",\r\n          \"00\",\r\n        ];\r\n        return (\r\n          <Split hasGutter id={name}>\r\n            <SplitItem>\r\n              <DatePicker\r\n                value={dateTime[1]}\r\n                onChange={(event, value, date) => {\r\n                  field.onChange(parseDate(field.value, date));\r\n                }}\r\n              />\r\n            </SplitItem>\r\n            <SplitItem>\r\n              <TimePicker\r\n                time={`${dateTime[2]}:${dateTime[3]}`}\r\n                onChange={(event, time, hour, minute) =>\r\n                  field.onChange(parseTime(field.value, hour, minute))\r\n                }\r\n                is24Hour\r\n              />\r\n            </SplitItem>\r\n          </Split>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\ntype NumberControlProps = {\r\n  name: string;\r\n  min: number;\r\n  max: number;\r\n};\r\n\r\nconst NumberControl = ({ name, min, max }: NumberControlProps) => {\r\n  const { control } = useFormContext();\r\n  const setValue = (newValue: number) => Math.min(newValue, max);\r\n\r\n  return (\r\n    <Controller\r\n      name={name}\r\n      defaultValue=\"\"\r\n      control={control}\r\n      render={({ field }) => (\r\n        <NumberInput\r\n          id={name}\r\n          value={field.value}\r\n          min={min}\r\n          max={max}\r\n          onPlus={() => field.onChange(Number(field.value) + 1)}\r\n          onMinus={() => field.onChange(Number(field.value) - 1)}\r\n          onChange={(event) => {\r\n            const newValue = Number(event.currentTarget.value);\r\n            field.onChange(setValue(!isNaN(newValue) ? newValue : 0));\r\n          }}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nconst FromTo = ({ name, ...rest }: NumberControlProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(name)}\r\n      fieldId={name}\r\n      labelIcon={<HelpItem helpText={t(`${name}Help`)} fieldLabelId={name} />}\r\n    >\r\n      <Split hasGutter>\r\n        <SplitItem>\r\n          <NumberControl name={name} {...rest} />\r\n        </SplitItem>\r\n        <SplitItem>{t(\"to\")}</SplitItem>\r\n        <SplitItem>\r\n          <NumberControl name={`${name}End`} {...rest} />\r\n        </SplitItem>\r\n      </Split>\r\n    </FormGroup>\r\n  );\r\n};\r\n\r\nexport const Time = () => {\r\n  const { t } = useTranslation();\r\n  const {\r\n    getValues,\r\n    formState: { errors },\r\n  } = useFormContext();\r\n  const [repeat, setRepeat] = useState(getValues(\"month\"));\r\n  return (\r\n    <>\r\n      <FormGroup\r\n        label={t(\"repeat\")}\r\n        fieldId=\"repeat\"\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"repeatHelp\")} fieldLabelId=\"repeat\" />\r\n        }\r\n      >\r\n        <Flex>\r\n          <FlexItem>\r\n            <Radio\r\n              id=\"notRepeat\"\r\n              data-testid=\"notRepeat\"\r\n              isChecked={!repeat}\r\n              name=\"repeat\"\r\n              onChange={() => setRepeat(false)}\r\n              label={t(\"notRepeat\")}\r\n              className=\"pf-v5-u-mb-md\"\r\n            />\r\n          </FlexItem>\r\n          <FlexItem>\r\n            <Radio\r\n              id=\"repeat\"\r\n              data-testid=\"repeat\"\r\n              isChecked={repeat}\r\n              name=\"repeat\"\r\n              onChange={() => setRepeat(true)}\r\n              label={t(\"repeat\")}\r\n              className=\"pf-v5-u-mb-md\"\r\n            />\r\n          </FlexItem>\r\n        </Flex>\r\n      </FormGroup>\r\n      {repeat && (\r\n        <>\r\n          <FromTo name=\"month\" min={1} max={12} />\r\n          <FromTo name=\"dayMonth\" min={1} max={31} />\r\n          <FromTo name=\"hour\" min={0} max={23} />\r\n          <FromTo name=\"minute\" min={0} max={59} />\r\n        </>\r\n      )}\r\n      <FormGroup\r\n        label={t(\"startTime\")}\r\n        fieldId=\"notBefore\"\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"startTimeHelp\")} fieldLabelId=\"startTime\" />\r\n        }\r\n        isRequired\r\n      >\r\n        <DateTime name=\"notBefore\" />\r\n        {errors.notBefore && <FormErrorText message={t(\"required\")} />}\r\n      </FormGroup>\r\n      <FormGroup\r\n        label={t(\"expireTime\")}\r\n        fieldId=\"notOnOrAfter\"\r\n        labelIcon={\r\n          <HelpItem helpText={t(\"expireTimeHelp\")} fieldLabelId=\"expireTime\" />\r\n        }\r\n        isRequired\r\n      >\r\n        <DateTime name=\"notOnOrAfter\" />\r\n        {errors.notOnOrAfter && <FormErrorText message={t(\"required\")} />}\r\n      </FormGroup>\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { UserSelect } from \"../../../components/users/UserSelect\";\r\n\r\nexport const User = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <UserSelect\r\n      name=\"users\"\r\n      label=\"users\"\r\n      helpText={t(\"policyUsers\")}\r\n      defaultValue={[]}\r\n      variant=\"typeaheadMulti\"\r\n    />\r\n  );\r\n};\r\n","import type PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  DropdownItem,\r\n  PageSection,\r\n} from \"@patternfly/react-core\";\r\nimport { useState, type JSX } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../../admin-client\";\r\nimport { useConfirmDialog } from \"../../../components/confirm-dialog/ConfirmDialog\";\r\nimport { FormAccess } from \"../../../components/form/FormAccess\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ViewHeader } from \"../../../components/view-header/ViewHeader\";\r\nimport { useParams } from \"../../../utils/useParams\";\r\nimport { toAuthorizationTab } from \"../../routes/AuthenticationTab\";\r\nimport {\r\n  PolicyDetailsParams,\r\n  toPolicyDetails,\r\n} from \"../../routes/PolicyDetails\";\r\nimport { useIsAdminPermissionsClient } from \"../../../utils/useIsAdminPermissionsClient\";\r\nimport { toPermissionsConfigurationTabs } from \"../../../permissions-configuration/routes/PermissionsConfigurationTabs\";\r\nimport { NewPermissionPolicyDetailsParams } from \"../../../permissions-configuration/routes/NewPermissionPolicy\";\r\nimport { toPermissionPolicyDetails } from \"../../../permissions-configuration/routes/PermissionPolicyDetails\";\r\nimport { Aggregate } from \"./Aggregate\";\r\nimport { Client } from \"./Client\";\r\nimport { ClientScope, RequiredIdValue } from \"./ClientScope\";\r\nimport { Group, GroupValue } from \"./Group\";\r\nimport { JavaScript } from \"./JavaScript\";\r\nimport { LogicSelector } from \"./LogicSelector\";\r\nimport { NameDescription } from \"./NameDescription\";\r\nimport { Regex } from \"./Regex\";\r\nimport { Role } from \"./Role\";\r\nimport { Time } from \"./Time\";\r\nimport { User } from \"./User\";\r\n\r\nimport \"./policy-details.css\";\r\n\r\ntype Policy = Omit<PolicyRepresentation, \"roles\"> & {\r\n  groups?: GroupValue[];\r\n  clientScopes?: RequiredIdValue[];\r\n  roles?: RequiredIdValue[];\r\n};\r\n\r\nconst COMPONENTS: {\r\n  [index: string]: () => JSX.Element;\r\n} = {\r\n  aggregate: Aggregate,\r\n  client: Client,\r\n  user: User,\r\n  \"client-scope\": ClientScope,\r\n  group: Group,\r\n  regex: Regex,\r\n  role: Role,\r\n  time: Time,\r\n  js: JavaScript,\r\n} as const;\r\n\r\nexport const isValidComponentType = (value: string) => value in COMPONENTS;\r\n\r\nexport default function PolicyDetails() {\r\n  const { adminClient } = useAdminClient();\r\n  const { t } = useTranslation();\r\n  const { id, realm, policyId, policyType } = useParams<PolicyDetailsParams>();\r\n  const { permissionClientId } = useParams<NewPermissionPolicyDetailsParams>();\r\n  const navigate = useNavigate();\r\n  const form = useForm();\r\n  const { reset, handleSubmit } = form;\r\n  const { addAlert, addError } = useAlerts();\r\n  const [policy, setPolicy] = useState<PolicyRepresentation>();\r\n  const isDisabled = policyType === \"js\";\r\n  const isAdminPermissionsClient =\r\n    useIsAdminPermissionsClient(permissionClientId);\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (policyId) {\r\n        const result = await Promise.all([\r\n          adminClient.clients.findOnePolicyWithType({\r\n            id: permissionClientId ?? id,\r\n            type: policyType!,\r\n            policyId,\r\n          }) as PolicyRepresentation | undefined,\r\n          adminClient.clients.getAssociatedPolicies({\r\n            id: permissionClientId ?? id,\r\n            permissionId: policyId,\r\n          }),\r\n        ]);\r\n\r\n        if (!result[0]) {\r\n          throw new Error(t(\"notFound\"));\r\n        }\r\n\r\n        return {\r\n          policy: result[0],\r\n          policies: result[1].map((p) => p.id),\r\n        };\r\n      }\r\n      return {};\r\n    },\r\n    ({ policy, policies }) => {\r\n      reset({ ...policy, policies });\r\n      setPolicy(policy);\r\n    },\r\n    [permissionClientId, id, policyType, policyId],\r\n  );\r\n\r\n  const onSubmitPolicy = async (policy: Policy) => {\r\n    policy.groups = policy.groups?.filter((g) => g.id);\r\n    policy.clientScopes = policy.clientScopes?.filter((c) => c.id);\r\n    policy.roles = policy.roles\r\n      ?.filter((r) => r.id)\r\n      .map((r) => ({ ...r, required: r.required || false }));\r\n\r\n    const clientId = isAdminPermissionsClient ? permissionClientId : id;\r\n    const navigateTo = isAdminPermissionsClient\r\n      ? toPermissionPolicyDetails\r\n      : toPolicyDetails;\r\n\r\n    try {\r\n      if (policyId) {\r\n        await adminClient.clients.updatePolicy(\r\n          { id: clientId!, type: policyType!, policyId },\r\n          policy,\r\n        );\r\n      } else {\r\n        const result = await adminClient.clients.createPolicy(\r\n          { id: clientId!, type: policyType! },\r\n          policy,\r\n        );\r\n\r\n        navigate(\r\n          navigateTo({\r\n            realm: realm!,\r\n            id: clientId!,\r\n            permissionClientId: clientId!,\r\n            policyId: result.id!,\r\n            policyType: result.type!,\r\n          }),\r\n        );\r\n      }\r\n      addAlert(\r\n        t((policyId ? \"update\" : \"create\") + \"PolicySuccess\"),\r\n        AlertVariant.success,\r\n      );\r\n    } catch (error) {\r\n      addError(\"policySaveError\", error);\r\n    }\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"deletePolicy\",\r\n    messageKey: \"deletePolicyConfirm\",\r\n    continueButtonLabel: \"confirm\",\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.delPolicy({\r\n          id: isAdminPermissionsClient ? permissionClientId : id,\r\n          policyId,\r\n        });\r\n        addAlert(t(\"policyDeletedSuccess\"), AlertVariant.success);\r\n        navigate(\r\n          isAdminPermissionsClient\r\n            ? toPermissionsConfigurationTabs({\r\n                realm: realm!,\r\n                permissionClientId,\r\n                tab: \"policies\",\r\n              })\r\n            : toAuthorizationTab({ realm, clientId: id, tab: \"policies\" }),\r\n        );\r\n      } catch (error) {\r\n        addError(\"policyDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (policyId && !policy) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  function getComponentType() {\r\n    return isValidComponentType(policyType)\r\n      ? COMPONENTS[policyType]\r\n      : COMPONENTS[\"js\"];\r\n  }\r\n\r\n  const ComponentType = getComponentType();\r\n\r\n  return (\r\n    <>\r\n      <DeleteConfirm />\r\n      <ViewHeader\r\n        titleKey={\r\n          policyId ? policy?.name! : t(\"createPolicyOfType\", { policyType })\r\n        }\r\n        dropdownItems={\r\n          policyId\r\n            ? [\r\n                <DropdownItem\r\n                  key=\"delete\"\r\n                  data-testid=\"delete-policy\"\r\n                  onClick={() => toggleDeleteDialog()}\r\n                >\r\n                  {t(\"delete\")}\r\n                </DropdownItem>,\r\n              ]\r\n            : undefined\r\n        }\r\n      />\r\n      <PageSection variant=\"light\">\r\n        <FormAccess\r\n          isHorizontal\r\n          onSubmit={handleSubmit((policy) => onSubmitPolicy(policy))}\r\n          role=\"anyone\" // if you get this far it means you have access\r\n        >\r\n          <FormProvider {...form}>\r\n            <NameDescription isDisabled={isDisabled} />\r\n            <ComponentType />\r\n            <LogicSelector isDisabled={isDisabled} />\r\n          </FormProvider>\r\n          <ActionGroup>\r\n            <div className=\"pf-v5-u-mt-md\">\r\n              <Button\r\n                isDisabled={isDisabled}\r\n                variant={ButtonVariant.primary}\r\n                className=\"pf-v5-u-mr-md\"\r\n                type=\"submit\"\r\n                data-testid=\"save\"\r\n              >\r\n                {t(\"save\")}\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"link\"\r\n                data-testid=\"cancel\"\r\n                component={(props) => (\r\n                  <Link\r\n                    {...props}\r\n                    to={\r\n                      isAdminPermissionsClient\r\n                        ? toPermissionsConfigurationTabs({\r\n                            realm: realm!,\r\n                            permissionClientId,\r\n                            tab: \"policies\",\r\n                          })\r\n                        : toAuthorizationTab({\r\n                            realm,\r\n                            clientId: id,\r\n                            tab: \"policies\",\r\n                          })\r\n                    }\r\n                  />\r\n                )}\r\n              >\r\n                {t(\"cancel\")}\r\n              </Button>\r\n            </div>\r\n          </ActionGroup>\r\n        </FormAccess>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n","import { useTranslation } from \"react-i18next\";\r\nimport {\r\n  Modal,\r\n  ModalVariant,\r\n  TextContent,\r\n  Text,\r\n  TextVariants,\r\n} from \"@patternfly/react-core\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\n\r\nimport type PolicyProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyProviderRepresentation\";\r\nimport { isValidComponentType } from \"./policy/PolicyDetails\";\r\nimport { useMemo } from \"react\";\r\nimport useLocaleSort, { mapByKey } from \"../../utils/useLocaleSort\";\r\n\r\ntype NewPolicyDialogProps = {\r\n  policyProviders?: PolicyProviderRepresentation[];\r\n  toggleDialog: () => void;\r\n  onSelect: (provider: PolicyProviderRepresentation) => void;\r\n};\r\n\r\nexport const NewPolicyDialog = ({\r\n  policyProviders,\r\n  onSelect,\r\n  toggleDialog,\r\n}: NewPolicyDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const localeSort = useLocaleSort();\r\n\r\n  const sortedPolicies = useMemo(\r\n    () =>\r\n      policyProviders ? localeSort(policyProviders, mapByKey(\"name\")) : [],\r\n    [policyProviders],\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      aria-label={t(\"createPolicy\")}\r\n      variant={ModalVariant.medium}\r\n      header={\r\n        <TextContent>\r\n          <Text component={TextVariants.h1}>{t(\"chooseAPolicyType\")}</Text>\r\n          <Text>{t(\"chooseAPolicyTypeInstructions\")}</Text>\r\n        </TextContent>\r\n      }\r\n      isOpen\r\n      onClose={toggleDialog}\r\n    >\r\n      <Table aria-label={t(\"policies\")} variant=\"compact\">\r\n        <Thead>\r\n          <Tr>\r\n            <Th>{t(\"name\")}</Th>\r\n            <Th>{t(\"description\")}</Th>\r\n          </Tr>\r\n        </Thead>\r\n        <Tbody>\r\n          {sortedPolicies.map((provider) => (\r\n            <Tr\r\n              key={provider.type}\r\n              data-testid={provider.type}\r\n              onRowClick={() => onSelect(provider)}\r\n              isClickable\r\n            >\r\n              <Td>{provider.name}</Td>\r\n              <Td style={{ textWrap: \"wrap\" }}>\r\n                {isValidComponentType(provider.type!) &&\r\n                  t(`policyProvider.${provider.type}`)}\r\n              </Td>\r\n            </Tr>\r\n          ))}\r\n        </Tbody>\r\n      </Table>\r\n    </Modal>\r\n  );\r\n};\r\n"],"names":["amSuffix","pmSuffix","makeTimeOptions","stepMinutes","hour12","delimiter","minTime","maxTime","includeSeconds","res","iter","iterDay","hour","suffix","minutes","timeOption","isWithinMinMax","parseTime","time","timeRegex","is12Hour","date","hours","seconds","secondsWithDelimiter","ampm","validateTime","uppercaseSuffix","validHours","getHours","parts","getMinutes","getSeconds","_a","min24HourTime","convertTo24Hour","selected24HourTime","max24HourTime","regMatches","OutlinedClockIconConfig","OutlinedClockIcon","createIcon","c_date_picker__input_c_form_control_Width","TimePicker","React","props","event","_b","_c","_d","clickedOnToggle","clickedWithinMenu","isTimeOptionsOpen","focusedIndex","scrollIndex","KeyTypes","increment","prevState","maxIndex","nextIndex","index","menuStyles","indexToFocus","is24Hour","splitTime","option","amPm","baseRegex","minTimeState","maxTimeState","isOpen","isInvalid","timeState","onChange","e","setIsOpen","newTime","minSeconds","maxSeconds","prevProps","parsedTime","ariaLabel","isDisabled","className","placeholder","id","menuAppendTo","invalidFormatErrorMessage","invalidMinMaxErrorMessage","width","inputProps","zIndex","__rest","style","cssDatePickerFormControlWidth","options","isValidFormat","randomId","getUniqueId","getParentElement","menuContainer","Menu","MenuContent","MenuList","MenuItem","textInput","TextInput","calculatedAppendTo","css","datePickerStyles","InputGroup","InputGroupItem","Popper","HelperText","HelperTextItem","CaretUpIconConfig","CaretUpIcon","UserSelect","name","label","helpText","defaultValue","isRequired","variant","adminClient","useAdminClient","t","useTranslation","control","getValues","errors","useFormContext","values","open","toggleOpen","setOpen","useToggle","selectedUsers","setSelectedUsers","useState","searchedUsers","setSearchedUsers","inputValue","setInputValue","search","setSearch","textInputRef","useRef","debounceFn","useCallback","debounce","useFetch","user","users","useEffect","useMemo","convert","jsx","SelectOption","jsxs","FormGroup","HelpItem","Controller","value","field","Select","ref","MenuToggle","TextInputGroup","TextInputGroupMain","_","ChipGroup","selection","Chip","ev","item","u","TextInputGroupUtilities","Button","TimesIcon","v","removed","changedValue","SelectList","FormErrorText","DECISION_STRATEGY","DecisionStrategySelect","helpLabel","isLimited","Fragment","strategy","Radio","typeMapping","ResourcesPolicySelect","clientId","permissionId","SelectVariant","preSelected","realm","useRealm","navigate","useNavigate","isDirty","items","setItems","createPolicyDialog","toggleCreatePolicyDialog","policyProviders","setPolicyProviders","onUnsavedChangesConfirm","setOnUnsavedChangesConfirm","isAdminPermissionsClient","useIsAdminPermissionsClient","selected","setSelected","functions","useWatch","p","params","providers","policies","r","self","otherId","result","toggleUnsavedChangesDialog","UnsavedChangesConfirm","useConfirmDialog","ButtonVariant","to","policy","toPolicyDetails","toResourceDetails","toSelectOptions","toChipGroupItems","Link","NewPolicyDialog","toCreatePolicy","KeycloakSelect","val","filter","i","selectedValue","Aggregate","useParams","permissionClientId","Client","ClientSelect","AddScopeDialog","scopes","clientName","toggleDialog","onAdd","isClientScopesConditionType","isFeatureEnabled","useIsFeatureEnabled","addToggle","setAddToggle","rows","setRows","filterType","setFilterType","protocolType","setProtocolType","isOid4vcEnabled","Feature","isFilterTypeDropdownOpen","toggleIsFilterTypeDropdownOpen","isProtocolTypeDropdownOpen","toggleIsProtocolTypeDropdownOpen","clientScopes","action","scope","row","onFilterTypeDropdownSelect","onProtocolTypeDropdownSelect","protocolTypeOptions","Modal","ModalVariant","Dropdown","DropdownList","clientScopeTypesDropdown","KeycloakDataTable","FilterIcon","CaretDownIcon","DropdownItem","client","getProtocolName","ListEmptyState","ClientScope","setValue","setScopes","selectedScopes","setSelectedScopes","localeSort","useLocaleSort","s","c","mapByKey","Table","Thead","Tr","Th","Tbody","Td","Checkbox","MinusCircleIcon","Group","selectedGroups","setSelectedGroups","g","groups","filteredGroup","TextControl","GroupPickerDialog","group","JavaScript","CodeEditor","LOGIC_TYPES","LogicSelector","type","NameDescription","TextAreaControl","Regex","SwitchControl","Role","selectedRoles","setSelectedRoles","roles","role","AddRoleMappingModal","AddRoleButton","ServiceRole","DefaultSwitchControl","DATE_TIME_FORMAT","padDateSegment","DateTime","parseDate","minute","dateTime","Split","SplitItem","DatePicker","NumberControl","min","max","newValue","NumberInput","FromTo","rest","Time","repeat","setRepeat","Flex","FlexItem","User","COMPONENTS","isValidComponentType","PolicyDetails","policyId","policyType","form","useForm","reset","handleSubmit","addAlert","addError","useAlerts","setPolicy","onSubmitPolicy","navigateTo","toPermissionPolicyDetails","AlertVariant","error","toggleDeleteDialog","DeleteConfirm","toPermissionsConfigurationTabs","toAuthorizationTab","KeycloakSpinner","getComponentType","ComponentType","ViewHeader","PageSection","FormAccess","FormProvider","ActionGroup","onSelect","sortedPolicies","TextContent","Text","TextVariants","provider"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}