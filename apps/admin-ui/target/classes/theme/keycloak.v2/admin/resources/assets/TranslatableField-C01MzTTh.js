import{jsx as a,jsxs as s,Fragment as H}from"react/jsx-runtime";import{ax as W,u as Y,a as z,d as E,cX as J,eh as O,a0 as V,y as K,ei as P,M as Q,k as X,aC as _,aD as x,F as U,O as aa,a3 as F,H as ea,I as ta,J as na,aB as la,v as sa,by as ia,aQ as oa,bo as ra,ay as w,aK as G,aR as ca,aP as S,at as da,g as R,ej as ua,ek as Ca,C as La,N as ma,bw as ha,bx as q,dY as pa,aW as ba,a7 as Ta}from"./main-o1hptXRo.js";import{useState as y,useEffect as fa}from"react";import{u as ga}from"./useLocale-cOPKcLYS.js";import{T as A}from"./Trans-CicUNvCL.js";const va={name:"GlobeRouteIcon",height:1024,width:1306,svgPath:"M1300.9,363.7 L1179,485.8 C1169,495.9 1151.7,488.8 1151.7,474.5 L1151.7,416 L816.4,416 C812.4,416 809,413.8 808.5,409.8 C805.3,386 801,362.733333 795.6,340 C792.3,326 788.5,312.4 784.4,299.2 C782.8,294 786.6,288 792,288 L1151.5,288 L1151.5,230.6 C1151.5,216.4 1168.7,209.2 1178.8,219.3 L1300.8,341 C1303.9,344.1 1306,348.2 1306,352.3 C1306,356.4 1303.9,360.5 1300.9,363.7 Z M469.2,746.7 L347.3,868.8 C337.3,878.9 320,871.8 320,857.5 L320,800 L16,800 C7.2,800 0,792.3 0,783.5 L0,687.5 C0,678.7 7.2,672 16,672 L320,672 L320,613.8 C320,599.6 337.2,592.4 347.3,602.5 L469.2,724.1 C475.430133,730.34524 475.430133,740.45476 469.2,746.7 Z M1087.6,495.6 C1087.38293,486.920039 1080.28267,479.997286 1071.6,480 L640,480 L640,352 L722.2,352 C727.4,352 731.3,346.5 729.9,341.5 C725.605596,325.013205 720.465463,308.75837 714.5,292.8 C713.258024,289.782121 710.260604,287.863772 707,288 L640,288 L640,101.7 C652.442178,106.259896 664.111225,112.70148 674.6,120.8 C699.3,139.4 723,168.1 743.1,203.9 C746.5,210 751.7,218.7 761.1,218.7 L809.4,218.7 C812.128705,218.672447 814.65964,217.271114 816.131205,214.973053 C817.602771,212.674992 817.816638,209.789922 816.7,207.3 C804.114384,179.721505 788.769504,153.487791 770.9,129 C818.290474,149.304728 861.543068,178.15109 898.5,214.1 C901.47783,216.980555 905.45693,218.593703 909.6,218.6 L971.4,218.6 C974.505675,218.614157 977.338903,216.829582 978.667492,214.022401 C979.996082,211.21522 979.579921,207.892766 977.6,205.5 C889.8,100 757.8,32.6 609.9,32 L605.5,32 C342.5,33.4 128,251.4 128,514.8 L128,528 C128,538.8 132.7,582.4 136.2,601 C136.9,604.8 140.2,608 144.1,608 L193,608 C198.1,608 201.9,602.8 200.8,597.8 C197.100285,580.050867 194.561569,562.079428 193.2,544 L576,544 L576,672 L533.4,672 C530.21925,671.879321 527.2913,673.725708 526.029429,676.647935 C524.767558,679.570163 525.43119,682.96746 527.7,685.2 L566.6,724.2 C572.610093,730.186212 575.992058,738.317319 576,746.8 L576,922.3 C563.557822,917.740104 551.888775,911.29852 541.4,903.2 C521.8,888.5 502.9,867.3 485.8,841.4 C484.483494,839.398843 482.339547,838.092908 479.95744,837.84114 C477.575334,837.589373 475.205755,838.418269 473.5,840.1 L438.9,874.7 C436.17839,877.437565 435.799809,881.728158 438,884.9 C440.4,888.3 442.8,891.7 445.2,895 C440.7,893.1 436.3,891.1 431.9,889.1 C428.86068,887.698101 425.269908,888.336461 422.9,890.7 L387,926.5 C385.206339,928.31874 384.380991,930.880062 384.775333,933.403854 C385.169676,935.927646 386.737022,938.11511 389,939.3 C456.763878,974.049946 531.84563,992.117563 608,992.00057 C862.3,992.00057 1070.5,794.3 1087,544.1 C1087.7,533.5 1088,522.9 1088,512.1 L1087.6,495.6 Z M338.6,480 L193.2,480 C196.476568,435.937781 206.913411,392.704253 224.1,352 L353.5,352 C345.141453,394.203188 340.159019,437.005305 338.6,480 L338.6,480 Z M257.8,288 C273.983601,262.695367 292.787318,239.165581 313.9,217.8 C351.55,180.03315 396.130875,149.88249 445.2,129 C413.9,171.2 387.8,225.9 369.3,288 L257.8,288 Z M576,480 L402.6,480 C404.246384,436.941681 409.667166,394.110815 418.8,352 L576,352 L576,480 Z M576,288 L436.4,288 C446.6,257.5 458.8,229.1 472.9,204 C493,168.2 516.7,139.5 541.4,120.9 C551.888775,112.80148 563.557822,106.359896 576,101.8 L576,288 Z M575.8,87.6 L576.7,87.6 L576.7,86.7 L575.8,86.7 L575.8,87.6 Z M640,544 L813.4,544 C811.819116,587.052386 806.465269,629.883162 797.4,672 L640,672 L640,544 Z M674.6,903.1 C664.111225,911.19852 652.442178,917.640104 640,922.2 L640,736 L779.9,736 C770.41424,765.137744 758.088355,793.272917 743.1,820 C723,855.8 699.3,884.6 674.6,903.1 L674.6,903.1 Z M902.2,806.2 C864.55,843.96685 819.969125,874.11751 770.9,895 C802.3,852.5 828.4,798.1 847,735.5 L959,735.5 C942.666041,761.042003 923.622375,784.746003 902.2,806.2 L902.2,806.2 Z M992.3,671.5 L862.7,671.5 C870.9358,629.451226 875.850963,586.819718 877.4,544 L1022.8,544 C1019.55195,587.863016 1009.25313,630.915455 992.3,671.5 L992.3,671.5 Z",yOffset:0,xOffset:0},$a=W(va),ya=({orgKey:l,translationKey:n,fieldName:i,toggleDialog:u,predefinedAttributes:d})=>{const{adminClient:o}=Y(),{t:e}=z(),{realm:M,realmRepresentation:h}=E(),v=ga(),{whoAmI:f}=J(),[L,r]=y(10),[p,g]=y(0),[b,I]=y(""),[m,k]=y([]),T=`translation.${O(n)}`,{register:B,setValue:N,getValues:D,formState:{isValid:j}}=V(),Z=t=>{t[n].forEach((c,C)=>{const $=`${T}.${C}.value`;N(`${T}.${C}.locale`,c.locale||""),N($,D($)||c.value||(e(l)!==l?e(l):""))})};return K(async()=>{const t=v.filter(C=>P(C,f.locale)?.toLocaleLowerCase(h?.defaultLocale)?.includes(b.toLocaleLowerCase(h?.defaultLocale))).slice(p,p+L+1);return(await Promise.all(t.map(C=>o.realms.getRealmLocalizationTexts({realm:M,selectedLocale:C})))).map((C,$)=>({locale:t[$],value:C[n]}))},t=>{k(t),Z({[n]:t})},[v,p,L,b]),a(Q,{variant:X.medium,title:e("addTranslationsModalTitle"),isOpen:!0,onClose:u,actions:[a(R,{"data-testid":"okTranslationBtn",variant:"primary",form:"add-translation",isDisabled:!j,onClick:u,children:e("addTranslationDialogOkBtn")},"ok"),a(R,{"data-testid":"cancelTranslationBtn",variant:"link",onClick:()=>{Z({[n]:m}),u()},children:e("cancel")},"cancel")],children:s(_,{direction:{default:"column"},spaceItems:{default:"spaceItemsNone"},children:[a(x,{children:s(A,{i18nKey:"addTranslationsModalTitle",values:{fieldName:e(i)},children:["You are able to translate the fieldName based on your locale or",a("strong",{children:"location"})]})}),a(x,{children:s(U,{id:"add-translation","data-testid":"addTranslationForm",children:[a(aa,{label:e("translationKey"),fieldId:"translationKey",children:a(F,{id:"translationKey",label:e("translationKey"),"data-testid":"translation-key",isDisabled:!0,value:d?.includes(l)?`\${${l}}`:`\${${n}}`})}),s(x,{children:[a(ea,{children:a(ta,{className:"pf-v5-u-font-size-sm pf-v5-u-font-weight-bold",component:na.p,children:e("translationsTableHeading")})}),s(la,{count:m.length,first:p,max:L,onNextClick:g,onPreviousClick:g,onPerPageSelect:(t,c)=>{g(t),r(c)},inputGroupName:"search",inputGroupOnEnter:t=>{I(t),g(0),r(10)},inputGroupPlaceholder:e("searchForLanguage"),children:[m.length===0&&b&&a(sa,{hasIcon:!0,icon:ia,isSearchVariant:!0,message:e("noSearchResults"),instructions:e("noLanguagesSearchResultsInstructions")}),m.length!==0&&s(oa,{"aria-label":e("addTranslationsDialogRowsTable"),"data-testid":"add-translations-dialog-rows-table",children:[a(ra,{children:s(w,{children:[a(G,{className:"pf-v5-u-py-lg",children:e("supportedLanguagesTableColumnName")}),a(G,{className:"pf-v5-u-py-lg",children:e("translationTableColumnName")})]})}),a(ca,{children:m.slice(0,L).map((t,c)=>s(w,{children:[s(S,{dataLabel:e("supportedLanguage"),children:[P(t.locale,f.locale),t.locale===h?.defaultLocale&&a(da,{className:"pf-v5-u-ml-xs",color:"blue",children:e("defaultLanguage")})]}),a(S,{children:a(F,{id:`${T}.${c}.value`,"data-testid":`translation-value-${c}`,...B(`${T}.${c}.value`,{required:{value:t.locale===h?.defaultLocale,message:e("required")}})})})]},c))})]})]})]})]})})]})})},Na=async({adminClient:l,realmName:n,translationsData:i})=>{await Promise.all(Object.entries(i.translation).map(([u,d])=>d.filter(o=>o.value.trim()!=="").map(o=>l.realms.addLocalization({realm:n,selectedLocale:o.locale,key:ua(u)},o.value))).flat()),await Ca.reloadResources()};function Ma(l,n){return n(l)===l&&l!==""}const Za=({attributeName:l,prefix:n,fieldName:i,predefinedAttributes:u})=>{const{t:d}=z(),{realmRepresentation:o}=E(),{register:e,control:M,getFieldState:h,setValue:v}=V(),[f,L]=La(),r=ma({control:M,name:l}),p=`${n}.${r}`,b=`${`translation.${O(p)}`}.0.value`;fa(()=>{u?.includes(r)||o?.internationalizationEnabled&&r&&v(i,`\${${n}.${r}}`)},[r]);function I(m,k,T){return T?.internationalizationEnabled&&f&&Ma(m,k)}return s(H,{children:[I(r,d,o)&&a("input",{type:"hidden","data-testid":"requiredTranslationName",...e(b,{required:d("required")})}),f&&a(ya,{orgKey:r,translationKey:`${n}.${r}`,fieldName:i,predefinedAttributes:u,toggleDialog:L}),s(ha,{children:[a(q,{isFill:!0,children:a(F,{id:`kc-attribute-${i}`,"data-testid":`attributes-${i}`,isDisabled:o?.internationalizationEnabled,...e(i)})}),o?.internationalizationEnabled&&a(q,{children:a(R,{variant:"link",className:"pf-m-plain","data-testid":`addAttribute${i}TranslationBtn`,"aria-label":d("addAttributeTranslation",{fieldName:i}),onClick:L,icon:a($a,{})})})]}),o?.internationalizationEnabled&&s(pa,{children:[a(ba,{variant:"info",isInline:!0,isPlain:!0,title:s(A,{i18nKey:"addTranslationsModalSubTitle",values:{fieldName:d(i)},children:["You are able to translate the fieldName based on your locale or",a("strong",{children:"location"})]})}),h(b).error&&a(Ta,{message:d("required")})]})]})};export{Za as T,Na as s};
//# sourceMappingURL=TranslatableField-C01MzTTh.js.map
