import{jsx as e,jsxs as l,Fragment as K}from"react/jsx-runtime";import{aw as Rn,av as at,u as X,d as ue,a as R,am as xn,e as Fe,y as ee,r as pa,s as ma,w as ha,bf as qe,k as It,F as ye,O as V,ai as Gt,aj as jt,ak as Re,al as dt,W as M,bg as At,bh as $e,a0 as se,R as ae,a1 as We,a2 as ve,b3 as k,Q as ne,A as Te,g as E,U as Y,bi as fa,j as Le,_ as oe,M as Je,l as xe,B as fe,o as $,x as Rt,v as Ne,T as be,bj as ga,S as he,an as xt,ao as Et,P as de,bk as En,I as me,bl as $t,bm as ba,aS as Ie,aO as ya,bn as va,aQ as Qe,bo as Ye,ay as ie,aK as F,aR as Xe,aP as _,bp as Wt,bq as Ct,a6 as Sa,ae as wn,a3 as Dn,C as Ee,H as Be,J as Ca,L as Ce,br as wt,bs as ut,bt as On,bu as ka,a8 as Ta,bv as Ia,bw as Ln,bx as kt,by as Aa,aa as _e,bz as Ra,bA as en,aE as qt,bB as tn,bC as xa,p as Oe,ab as Pn,ac as _n,ad as Ea,af as Nn,ag as wa,aL as Hn,b as pt,bD as rt,aB as Jt,aM as Kn,aN as Mn,D as Ge,aW as mt,bE as Vn,bF as it,bG as zn,bH as nn,bI as an,V as lt,bJ as Da,N as Qt,bK as Tt,bL as je,bM as Oa,X as La,bN as Pa,bO as _a,aC as Na,aD as sn,bP as Ha,b1 as Ka,a_ as Ma,bQ as Va,bR as on,bS as Fn,bT as za,bc as Fa,bU as rn,bV as ln,bb as Ba,bW as Ua,bX as qa,bY as Ga,m as ja,n as cn,at as dn,bZ as $a}from"./main-o1hptXRo.js";import*as st from"react";import{useState as g,useMemo as ht,useEffect as ft,Fragment as Bn,useId as Wa,useRef as et}from"react";import{C as Yt,u as ke}from"./ConfirmDialog-BkU7melV.js";import{S as Ja,a as un,F as le,b as Dt,C as Un}from"./FormAccess-BnhQnYb9.js";import{P as Qa}from"./PermissionTab-CNBT0MGG.js";import{R as Ya}from"./RolesList-CYFLyo7k.js";import{u as Z,R as Mt}from"./RoutableTabs-DyhWhd6v.js";import{V as Xa}from"./ViewHeader-BDBsroi3.js";import{u as Xt}from"./useParams-CGVhlaFZ.js";import{D as ge}from"./SwitchControl-CU1bUhmR.js";import{K as Za}from"./KeyValueInput-BOsiIUR1.js";import{M as qn}from"./MultiLineInput-OP0faqms.js";import{T as Ot}from"./TimeSelector-1gdltitc.js";import{s as Gn}from"./sortBy-DjlFeX8O.js";import{u as jn,F as ei}from"./useFormatDate-CuGjRZ4j.js";import{E as $n}from"./ExpandableSection-wnspFC3f.js";import{S as ti}from"./SessionsTable-4N_7uyd-.js";import{C as ni,a as ai}from"./ClientDescription-CbsY-rm4.js";import{L as ii}from"./LoginSettings-CGSNRClr.js";import{S as si,a as oi}from"./SamlSignature-DX1VWY22.js";import{C as Wn}from"./ClientSelect-BY77LEpN.js";import{U as Jn,D as ri,A as li}from"./NewPolicyDialog-CIlfdiTN.js";import{d as Qn,i as vt,g as ci}from"./utils-C-TUnOch.js";import{c as di}from"./camelCase-B6BCqzQB.js";import{D as pn}from"./policyRepresentation-CscDyJFY.js";import{T as ui,a as pi,P as mn,D as ct,S as Yn,M as Xn,b as mi,A as hi}from"./Policies-7P-WRxCs.js";import{D as gt}from"./DescriptionListTerm-CNzJUZBE.js";import{C as fi}from"./CodeEditor-C4IS5oxi.js";import{D as gi}from"./DeleteScopeDialog-BkmTGBOK.js";import{J as bi}from"./JsonFileUpload-CXVaTh71.js";import{D as yi}from"./DynamicComponents-CnLlz98z.js";import{C as Zn}from"./CopyToClipboardButton-Cl576S4v.js";import{S as vi,I as Si}from"./ImportKeyDialog-Cx3JB4OO.js";import{S as Ci,C as ki,a as Ti,n as Ii,t as Ai}from"./SearchFilter-DrmfdyKI.js";import{A as hn,d as fn,e as Ri,C as gn,a as xi,f as Ei}from"./ClientScopeTypes-D2w5c8Pp.js";import{t as wi}from"./translationFormatter-DQJeO7lr.js";import{u as Di,m as Oi}from"./useLocaleSort-C-diWts5.js";import{c as tt,T as ea,a as q,b as G}from"./Tabs-DSwQhKoJ.js";import{Q as Li}from"./question-circle-icon-C0dl_LB7.js";import{R as Pi}from"./RoleMapping-BOcI-Nkp.js";import{T as _i}from"./Trans-CicUNvCL.js";import{U as Ni}from"./UserEvents-CCx8BrF_.js";import{u as Hi}from"./useIsAdminPermissionsClient-BY-AG4cQ.js";import{A as Ki}from"./AdminEvents-DIrkh5pf.js";import"react-dom";import"./PageHandler-B1ed5nYb.js";import"./constants-BclHbWtx.js";import"./ActionListItem-Cy-NQlq4.js";import"./_baseFlatten-BLlCkxtA.js";import"./IdentityProviderSelect-rmWlUbIg.js";import"./filter-icon-DYNmdQ7O.js";import"./GroupPickerDialog-U3luvxlw.js";import"./DataListItemRow-B_0B-ko6.js";import"./DatePicker-DiXxo4Fo.js";import"./debounce-Dbkg0MD5.js";import"./capitalize-_YB1UYl_.js";import"./_baseSlice-F8doVSIJ.js";import"./FileUploadForm-3WTCaGLI.js";import"./DropdownPanel-vRJu3PnV.js";import"./warning-triangle-icon-Cc02WUGl.js";import"./pickBy-JGveacY0.js";const ot={codeBlock:"pf-v5-c-code-block",codeBlockActions:"pf-v5-c-code-block__actions",codeBlockContent:"pf-v5-c-code-block__content",codeBlockHeader:"pf-v5-c-code-block__header"},ta=n=>{var{children:a=null,className:i,actions:t=null}=n,s=Rn(n,["children","className","actions"]);return st.createElement("div",Object.assign({className:at(ot.codeBlock,i)},s),t&&st.createElement("div",{className:at(ot.codeBlockHeader)},st.createElement("div",{className:at(ot.codeBlockActions)},t)),st.createElement("div",{className:at(ot.codeBlockContent)},a))};ta.displayName="CodeBlock";const na=n=>{var{children:a=null,className:i}=n,t=Rn(n,["children","className"]);return st.createElement("div",Object.assign({className:at(`${ot.codeBlockActions}-item`,i)},t),a)};na.displayName="CodeBlockAction";const Mi=({id:n,open:a,toggleDialog:i,protocol:t="openid-connect"})=>{const{adminClient:s}=X(),{realm:o}=ue(),{t:r}=R(),{enabled:c}=xn(),d=Fe().clientInstallations[t],[f,p]=g(d[d.length-1].id),[b,m]=g(),[S,T]=g(!1),C=ht(()=>d.find(v=>v.id===f)??null,[f]),I=v=>v.replace(/<PrivateKeyPem>.*<\/PrivateKeyPem>/gs,`<PrivateKeyPem>${r("privateKeyMask")}</PrivateKeyPem>`);return ee(async()=>{if(C?.mediaType==="application/zip")return(await pa(`${ha(s.baseUrl)}admin/realms/${o}/clients/${n}/installation/providers/${f}`,{method:"GET",headers:ma(await s.getAccessToken())})).arrayBuffer();{const v=await s.clients.getInstallationProviders({id:n,providerId:f});return typeof v=="string"?I(v):qe(v)}},v=>m(v),[n,f]),ft(()=>m(""),[n,f]),e(Yt,{titleKey:r("downloadAdaptorTitle"),continueButtonLabel:r("download"),onConfirm:()=>{$e.saveAs(new Blob([b],{type:C?.mediaType}),C?.filename)},open:a,toggleDialog:i,variant:It.medium,children:e(ye,{children:l(Ja,{hasGutter:!0,children:[e(un,{children:e(V,{fieldId:"type",label:r("formatOption"),labelIcon:e(M,{helpText:r("downloadType"),fieldLabelId:"formatOption"}),children:e(Gt,{isOpen:S,onOpenChange:v=>T(v),toggle:v=>e(dt,{id:"type",ref:v,onClick:()=>T(!S),isExpanded:S,children:f}),selected:f,onSelect:(v,A)=>{p(A?.toString()||""),T(!1)},"aria-label":r("selectOne"),popperProps:{appendTo:document.body},children:e(jt,{children:d.map(v=>e(Re,{value:v.id,isSelected:f===v.id,description:c?v.helpText:void 0,children:v.displayType},v.id))})})})}),!C?.downloadOnly&&e(un,{isFilled:!0,children:e(V,{fieldId:"details",label:r("details"),labelIcon:e(M,{helpText:r("detailsHelp"),fieldLabelId:"details"}),children:e(At,{id:"details",readOnly:!0,rows:12,resizeOrientation:"vertical",value:b&&typeof b=="string"?b:"","aria-label":"text area example"})})})]})})})},Vt="tokenLifespan.inherited",zt="tokenLifespan.expires",nt=({id:n,name:a,defaultValue:i,units:t})=>{const{t:s}=R(),[o,r]=g(!1),[c,u]=g(!1),d=()=>u(!0),f=()=>u(!1),{control:p}=se(),b=m=>typeof m=="number"||typeof m=="string"&&m!==""||c;return e(V,{label:s(n),fieldId:n,labelIcon:e(M,{helpText:s(`${n}Help`),fieldLabelId:n}),"data-testid":`token-lifespan-${n}`,children:e(ae,{name:a,defaultValue:"",control:p,render:({field:m})=>l(We,{hasGutter:!0,children:[e(ve,{children:e(Gt,{toggle:S=>e(dt,{ref:S,onClick:()=>r(!o),isExpanded:o,children:b(m.value)?s(zt):s(Vt)}),isOpen:o,onOpenChange:S=>r(S),onSelect:(S,T)=>{m.onChange(T),r(!1)},selected:b(m.value)?s(zt):s(Vt),children:l(jt,{children:[e(Re,{value:"",children:s(Vt)}),e(Re,{value:60,children:s(zt)})]})})}),e(ve,{hidden:!b(m.value),children:e(Ot,{validated:b(m.value)&&m.value<1?"warning":"default",units:t,value:m.value===""?i:m.value,onChange:m.onChange,onFocus:d,onBlur:f,min:1,isDisabled:!b(m.value)})})]})})})},Vi=({save:n,reset:a,protocol:i,hasConfigureAccess:t})=>{const{t:s}=R(),{realmRepresentation:o}=ue(),{control:r}=se();return l(le,{role:"manage-realm",fineGrainedAccess:t,isHorizontal:!0,children:[i!=="openid-connect"&&e(V,{label:s("assertionLifespan"),fieldId:"assertionLifespan",labelIcon:e(M,{helpText:s("assertionLifespanHelp"),fieldLabelId:"assertionLifespan"}),children:e(ae,{name:k("attributes.saml.assertion.lifespan"),defaultValue:"",control:r,render:({field:c})=>e(Ot,{units:["minute","day","hour"],value:c.value,onChange:c.onChange})})}),i==="openid-connect"&&l(K,{children:[e(nt,{id:"accessTokenLifespan",name:k("attributes.access.token.lifespan"),defaultValue:o?.accessTokenLifespan,units:["minute","day","hour"]}),e(nt,{id:"clientSessionIdle",name:k("attributes.client.session.idle.timeout"),defaultValue:o?.clientSessionIdleTimeout,units:["minute","day","hour"]}),e(nt,{id:"clientSessionMax",name:k("attributes.client.session.max.lifespan"),defaultValue:o?.clientSessionMaxLifespan,units:["minute","day","hour"]}),e(nt,{id:"clientOfflineSessionIdle",name:k("attributes.client.offline.session.idle.timeout"),defaultValue:o?.offlineSessionIdleTimeout,units:["minute","day","hour"]}),o?.offlineSessionMaxLifespanEnabled&&e(nt,{id:"clientOfflineSessionMax",name:k("attributes.client.offline.session.max.lifespan"),defaultValue:o?.offlineSessionMaxLifespanEnabled?o.offlineSessionMaxLifespan:void 0,units:["minute","day","hour"]}),e(ge,{name:k("attributes.tls.client.certificate.bound.access.tokens"),label:s("oAuthMutual"),labelIcon:s("oAuthMutualHelp"),stringify:!0}),e(ge,{name:k("attributes.require.pushed.authorization.requests"),label:s("pushedAuthorizationRequestRequired"),labelIcon:s("pushedAuthorizationRequestRequiredHelp"),stringify:!0}),e(ge,{name:k("attributes.client.use.lightweight.access.token.enabled"),label:s("lightweightAccessToken"),labelIcon:s("lightweightAccessTokenHelp"),stringify:!0}),e(ge,{name:k("attributes.client.introspection.response.allow.jwt.claim.enabled"),label:s("supportJwtClaimInIntrospectionResponse"),labelIcon:s("supportJwtClaimInIntrospectionResponseHelp"),stringify:!0}),e(V,{label:s("acrToLoAMapping"),fieldId:"acrToLoAMapping",labelIcon:e(M,{helpText:s("acrToLoAMappingHelp"),fieldLabelId:"acrToLoAMapping"}),children:e(Za,{label:s("acrToLoAMapping"),name:k("attributes.acr.loa.map")})}),e(V,{label:s("defaultACRValues"),fieldId:"defaultACRValues",labelIcon:e(M,{helpText:s("defaultACRValuesHelp"),fieldLabelId:"defaultACRValues"}),children:e(qn,{id:"defaultACRValues","aria-label":"defaultACRValues",name:k("attributes.default.acr.values"),stringify:!0})}),e(ne,{type:"text",name:k("attributes.minimum.acr.value"),label:s("minimumACRValue"),labelIcon:s("minimumACRValueHelp")})]}),l(Te,{children:[e(E,{variant:"secondary",onClick:n,"data-testid":"OIDCAdvancedSave",children:s("save")}),e(E,{variant:"link",onClick:a,"data-testid":"OIDCAdvancedRevert",children:s("revert")})]})]})},zi=({protocol:n,save:a,reset:i,hasConfigureAccess:t})=>{const{adminClient:s}=X(),{t:o}=R(),[r,c]=g([]);return ee(()=>s.authenticationManagement.getFlows(),u=>{let d=[...u.filter(f=>f.providerId!=="client-flow")];d=Gn(d,[f=>f.alias]),c(d)},[]),l(le,{role:"manage-clients",fineGrainedAccess:t,isHorizontal:!0,children:[e(Y,{name:"authenticationFlowBindingOverrides.browser",label:o("browserFlow"),labelIcon:o("browserFlowHelp"),controller:{defaultValue:""},options:[{key:"",value:o("choose")},...r.map(({id:u,alias:d})=>({key:u,value:d}))]}),n==="openid-connect"&&e(Y,{name:"authenticationFlowBindingOverrides.direct_grant",label:o("directGrant"),labelIcon:o("directGrantHelp"),controller:{defaultValue:""},options:[{key:"",value:o("choose")},...r.map(({id:u,alias:d})=>({key:u,value:d}))]}),l(Te,{children:[e(E,{variant:"secondary",onClick:a,"data-testid":"OIDCAuthFlowOverrideSave",children:o("save")}),e(E,{variant:"link",onClick:i,"data-testid":"OIDCAuthFlowOverrideRevert",children:o("revert")})]})]})},Fi=n=>{const{field:a}=fa(n);return e(Ot,{...n,...a})},Bi=({clientId:n,isOpen:a,onAdded:i,onClose:t})=>{const{adminClient:s}=X(),{t:o}=R(),r=Le(),{handleSubmit:c,formState:{isDirty:u,isValid:d}}=r,{addAlert:f,addError:p}=oe();async function b({node:m}){try{await s.clients.addClusterNode({id:n,node:m}),i(m),f(o("addedNodeSuccess"),$.success)}catch(S){p("addedNodeFail",S)}t()}return e(Je,{title:o("addNode"),isOpen:a,onClose:t,variant:"small",actions:[e(E,{id:"add-node-confirm",type:"submit",form:"add-host-form",isDisabled:!u||!d,children:o("save")},"confirm"),e(E,{id:"add-node-cancel",variant:fe.link,onClick:t,children:o("cancel")},"cancel")],children:e(xe,{...r,children:e(ye,{id:"add-host-form",onSubmit:c(b),isHorizontal:!0,children:e(ne,{name:"node",label:o("nodeHost"),rules:{required:o("required")}})})})})},Ui=({save:n,client:{id:a,registeredNodes:i,access:t}})=>{const{adminClient:s}=X(),{t:o}=R(),{addAlert:r,addError:c}=oe(),u=jn(),[d,f]=g(i||{}),[p,b]=g(!1),[m,S]=g(""),[T,C]=g(!1),[I,v]=g(0),A=()=>v(new Date().getTime()),z=async()=>{const L=await s.clients.testNodesAvailable({id:a});Wi(L,"testCluster",r,o)},[B,N]=ke({titleKey:"deleteNode",messageKey:o("deleteNodeBody",{node:m}),continueButtonLabel:"delete",continueButtonVariant:fe.danger,onConfirm:async()=>{try{await s.clients.deleteClusterNode({id:a,node:m}),f({...Object.keys(d).reduce((L,P)=>(P!==m&&(L[P]=d[P]),L),{})}),A(),r(o("deleteNodeSuccess"),$.success)}catch(L){c("deleteNodeFail",L)}}});return l(K,{children:[e(le,{role:"manage-clients",fineGrainedAccess:t?.configure,isHorizontal:!0,children:e(V,{label:o("nodeReRegistrationTimeout"),fieldId:"kc-node-reregistration-timeout",labelIcon:e(M,{helpText:o("nodeReRegistrationTimeoutHelp"),fieldLabelId:"nodeReRegistrationTimeout"}),children:l(We,{hasGutter:!0,children:[e(ve,{children:e(Fi,{name:"nodeReRegistrationTimeout"})}),e(ve,{children:e(E,{variant:fe.secondary,onClick:()=>n(),children:o("save")})})]})})}),l(K,{children:[e(N,{}),e(Bi,{clientId:a,isOpen:T,onAdded:L=>{d[L]=Date.now()/1e3,A()},onClose:()=>C(!1)}),e($n,{toggleText:o("registeredClusterNodes"),onToggle:(L,P)=>b(P),isExpanded:p,children:e(Rt,{ariaLabelKey:"registeredClusterNodes",loader:()=>Promise.resolve(Object.entries(d||{}).map(L=>({host:L[0],registration:L[1]}))),toolbarItem:l(K,{children:[e(be,{children:e(E,{id:"testClusterAvailability","data-testid":"test-cluster-availability",onClick:z,variant:fe.secondary,isDisabled:Object.keys(d).length===0,children:o("testClusterAvailability")})}),e(be,{children:e(E,{id:"registerNodeManually","data-testid":"registerNodeManually",onClick:()=>C(!0),variant:fe.tertiary,children:o("registerNodeManually")})})]}),actions:[{title:o("delete"),onRowClick:L=>{S(L.host),B()}}],columns:[{name:"host",displayKey:"nodeHost"},{name:"registration",displayKey:"lastRegistration",cellFormatters:[L=>L?u(new Date(parseInt(L.toString())*1e3),ei):""]}],emptyState:e(Ne,{message:o("noNodes"),instructions:o("noNodesInstructions"),primaryActionText:o("registerNodeManually"),onPrimaryAction:()=>C(!0)})},I)})]})]})},aa=n=>{const{t:a}=R();return l(K,{children:[e(ne,{name:"attributes.logoUri",label:a("logoUrl"),labelIcon:a("logoUrlHelp"),type:"url",...n}),e(ne,{name:"attributes.policyUri",label:a("policyUrl"),labelIcon:a("policyUrlHelp"),type:"url",...n}),e(ne,{name:"attributes.tosUri",label:a("termsOfServiceUrl"),labelIcon:a("termsOfServiceUrlHelp"),type:"url",...n})]})},qi=({save:n,reset:a,hasConfigureAccess:i})=>{const{t}=R(),{control:s}=se(),o=Fe().providers,r=o?.clientSignature.providers,c=o?.contentencryption.providers,u=o?.cekmanagement.providers,d=o?.signature.providers,f=m=>ga(m).map(S=>({key:S,value:S})),p=m=>[{key:"",value:t("choose")},...f(m)],b=m=>[{key:"none",value:t("none")},...f(m)];return l(le,{role:"manage-clients",fineGrainedAccess:i,isHorizontal:!0,children:[e(aa,{}),e(Y,{name:k("attributes.access.token.signed.response.alg"),label:t("accessTokenSignatureAlgorithm"),labelIcon:t("accessTokenSignatureAlgorithmHelp"),controller:{defaultValue:""},options:p(r)}),e(V,{label:t("useRfc9068AccessTokenType"),fieldId:"useRfc9068AccessTokenType",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("useRfc9068AccessTokenTypeHelp"),fieldLabelId:"useRfc9068AccessTokenType"}),children:e(ae,{name:k("attributes.access.token.header.type.rfc9068"),defaultValue:"false",control:s,render:({field:m})=>e(he,{id:"useRfc9068AccessTokenType",label:t("on"),labelOff:t("off"),isChecked:m.value==="true",onChange:(S,T)=>m.onChange(T.toString()),"aria-label":t("useRfc9068AccessTokenType")})})}),e(Y,{name:k("attributes.id.token.signed.response.alg"),label:t("idTokenSignatureAlgorithm"),labelIcon:t("idTokenSignatureAlgorithmHelp"),controller:{defaultValue:""},options:p(r)}),e(Y,{name:k("attributes.id.token.encrypted.response.alg"),label:t("idTokenEncryptionKeyManagementAlgorithm"),labelIcon:t("idTokenEncryptionKeyManagementAlgorithmHelp"),controller:{defaultValue:""},options:p(u)}),e(Y,{name:k("attributes.id.token.encrypted.response.enc"),label:t("idTokenEncryptionContentEncryptionAlgorithm"),labelIcon:t("idTokenEncryptionContentEncryptionAlgorithmHelp"),controller:{defaultValue:""},options:p(c)}),e(V,{label:t("idTokenAsDetachedSignature"),fieldId:"idTokenAsDetachedSignature",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("idTokenAsDetachedSignatureHelp"),fieldLabelId:"idTokenAsDetachedSignature"}),children:e(ae,{name:k("attributes.id.token.as.detached.signature"),defaultValue:"false",control:s,render:({field:m})=>e(he,{id:"idTokenAsDetachedSignature",label:t("on"),labelOff:t("off"),isChecked:m.value==="true",onChange:(S,T)=>m.onChange(T.toString()),"aria-label":t("idTokenAsDetachedSignature")})})}),e(Y,{name:k("attributes.user.info.response.signature.alg"),label:t("userInfoSignedResponseAlgorithm"),labelIcon:t("userInfoSignedResponseAlgorithmHelp"),controller:{defaultValue:""},options:p(d)}),e(Y,{name:k("attributes.user.info.encrypted.response.alg"),label:t("userInfoResponseEncryptionKeyManagementAlgorithm"),labelIcon:t("userInfoResponseEncryptionKeyManagementAlgorithmHelp"),controller:{defaultValue:""},options:p(u)}),e(Y,{name:k("attributes.user.info.encrypted.response.enc"),label:t("userInfoResponseEncryptionContentEncryptionAlgorithm"),labelIcon:t("userInfoResponseEncryptionContentEncryptionAlgorithmHelp"),controller:{defaultValue:""},options:p(c)}),e(Y,{name:k("attributes.request.object.signature.alg"),label:t("requestObjectSignatureAlgorithm"),labelIcon:t("requestObjectSignatureAlgorithmHelp"),controller:{defaultValue:""},options:b(r)}),e(Y,{name:k("attributes.request.object.encryption.alg"),label:t("requestObjectEncryption"),labelIcon:t("requestObjectEncryptionHelp"),controller:{defaultValue:""},options:p(u)}),e(Y,{name:k("attributes.request.object.encryption.enc"),label:t("requestObjectEncoding"),labelIcon:t("requestObjectEncodingHelp"),controller:{defaultValue:""},options:p(c)}),e(Y,{name:k("attributes.request.object.required"),label:t("requestObjectRequired"),labelIcon:t("requestObjectRequiredHelp"),controller:{defaultValue:"not required"},options:["not required","request or request_uri","request only","request_uri only"].map(m=>({key:m,value:t(`requestObject.${m}`)}))}),e(V,{label:t("validRequestURIs"),fieldId:"validRequestURIs",labelIcon:e(M,{helpText:t("validRequestURIsHelp"),fieldLabelId:"validRequestURIs"}),children:e(qn,{name:k("attributes.request.uris"),"aria-label":t("validRequestURIs"),addButtonLabel:"addRequestUri",stringify:!0})}),e(Y,{name:k("attributes.authorization.signed.response.alg"),label:t("authorizationSignedResponseAlg"),labelIcon:t("authorizationSignedResponseAlgHelp"),controller:{defaultValue:""},options:p(d)}),e(Y,{name:k("attributes.authorization.encrypted.response.alg"),label:t("authorizationEncryptedResponseAlg"),labelIcon:t("authorizationEncryptedResponseAlgHelp"),controller:{defaultValue:""},options:p(u)}),e(Y,{name:k("attributes.authorization.encrypted.response.enc"),label:t("authorizationEncryptedResponseEnc"),labelIcon:t("authorizationEncryptedResponseEncHelp"),controller:{defaultValue:""},options:p(c)}),l(Te,{children:[e(E,{variant:"secondary",id:"fineGrainSave","data-testid":"fineGrainSave",onClick:n,children:t("save")}),e(E,{id:"fineGrainRevert","data-testid":"fineGrainRevert",variant:"link",onClick:a,children:t("revert")})]})]})},Gi=({save:n,reset:a})=>{const{t:i}=R();return l(le,{role:"manage-realm",isHorizontal:!0,children:[e(aa,{}),e(ne,{name:"attributes.saml_assertion_consumer_url_post",label:i("assertionConsumerServicePostBindingURL"),labelIcon:i("assertionConsumerServicePostBindingURLHelp"),type:"url"}),e(ne,{name:"attributes.saml_assertion_consumer_url_redirect",label:i("assertionConsumerServiceRedirectBindingURL"),labelIcon:i("assertionConsumerServiceRedirectBindingURLHelp"),type:"url"}),e(ne,{name:"attributes.saml_single_logout_service_url_post",label:i("logoutServicePostBindingURL"),labelIcon:i("logoutServicePostBindingURLHelp"),type:"url"}),e(ne,{name:"attributes.saml_single_logout_service_url_redirect",label:i("logoutServiceRedirectBindingURL"),labelIcon:i("logoutServiceRedirectBindingURLHelp"),type:"url"}),e(ne,{name:"attributes.saml_single_logout_service_url_soap",label:i("logoutServiceSoapBindingUrl"),labelIcon:i("logoutServiceSoapBindingUrlHelp"),type:"url"}),e(ne,{name:"attributes.saml_single_logout_service_url_artifact",label:i("logoutServiceArtifactBindingUrl"),labelIcon:i("logoutServiceArtifactBindingUrlHelp"),type:"url"}),e(ne,{name:"attributes.saml_artifact_binding_url",label:i("artifactBindingUrl"),labelIcon:i("artifactBindingUrlHelp"),type:"url"}),e(ne,{name:"attributes.saml_artifact_resolution_service_url",label:i("artifactResolutionService"),labelIcon:i("artifactResolutionServiceHelp"),type:"url"}),l(Te,{children:[e(E,{variant:"tertiary",onClick:n,"data-testid":"fineGrainSave",children:i("save")}),e(E,{variant:"link",onClick:a,"data-testid":"fineGrainRevert",children:i("revert")})]})]})},ji=({save:n,reset:a,hasConfigureAccess:i})=>{const{t}=R(),{control:s,watch:o}=se(),r=xt(),c=o(k("attributes.standard.token.exchange.enabled")),u=o(k("attributes.use.refresh.tokens"),"true");return l(le,{role:"manage-clients",fineGrainedAccess:i,isHorizontal:!0,children:[e(V,{label:t("excludeSessionStateFromAuthenticationResponse"),fieldId:"excludeSessionStateFromAuthenticationResponse",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("excludeSessionStateFromAuthenticationResponseHelp"),fieldLabelId:"excludeSessionStateFromAuthenticationResponse"}),children:e(ae,{name:k("attributes.exclude.session.state.from.auth.response"),defaultValue:"",control:s,render:({field:d})=>e(he,{id:"excludeSessionStateFromAuthenticationResponse-switch",label:t("on"),labelOff:t("off"),isChecked:d.value==="true",onChange:(f,p)=>d.onChange(p.toString()),"aria-label":t("excludeSessionStateFromAuthenticationResponse")})})}),e(V,{label:t("excludeIssuerFromAuthenticationResponse"),fieldId:"excludeIssuerFromAuthenticationResponse",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("excludeIssuerFromAuthenticationResponseHelp"),fieldLabelId:"excludeIssuerFromAuthenticationResponse"}),children:e(ae,{name:k("attributes.exclude.issuer.from.auth.response"),defaultValue:"",control:s,render:({field:d})=>e(he,{id:"excludeIssuerFromAuthenticationResponse-switch",label:t("on"),labelOff:t("off"),isChecked:d.value==="true",onChange:(f,p)=>d.onChange(p.toString()),"aria-label":t("excludeIssuerFromAuthenticationResponse")})})}),e(V,{label:t("useRefreshTokens"),fieldId:"useRefreshTokens",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("useRefreshTokensHelp"),fieldLabelId:"useRefreshTokens"}),children:e(ae,{name:k("attributes.use.refresh.tokens"),defaultValue:"true",control:s,render:({field:d})=>e(he,{id:"useRefreshTokens",label:t("on"),labelOff:t("off"),isChecked:d.value==="true",onChange:(f,p)=>d.onChange(p.toString()),"aria-label":t("useRefreshTokens")})})}),e(V,{label:t("useRefreshTokenForClientCredentialsGrant"),fieldId:"useRefreshTokenForClientCredentialsGrant",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("useRefreshTokenForClientCredentialsGrantHelp"),fieldLabelId:"useRefreshTokenForClientCredentialsGrant"}),children:e(ae,{name:k("attributes.client_credentials.use_refresh_token"),defaultValue:"false",control:s,render:({field:d})=>e(he,{id:"useRefreshTokenForClientCredentialsGrant",label:t("on"),labelOff:t("off"),isChecked:d.value==="true",onChange:(f,p)=>d.onChange(p.toString()),"aria-label":t("useRefreshTokenForClientCredentialsGrant")})})}),e(V,{label:t("useLowerCaseBearerType"),fieldId:"useLowerCaseBearerType",hasNoPaddingTop:!0,labelIcon:e(M,{helpText:t("useLowerCaseBearerTypeHelp"),fieldLabelId:"useLowerCaseBearerType"}),children:e(ae,{name:k("attributes.token.response.type.bearer.lower-case"),defaultValue:"false",control:s,render:({field:d})=>e(he,{id:"useLowerCaseBearerType",label:t("on"),labelOff:t("off"),isChecked:d.value==="true",onChange:(f,p)=>d.onChange(p.toString()),"aria-label":t("useLowerCaseBearerType")})})}),r(Et.StandardTokenExchangeV2)&&e(Y,{name:k("attributes.standard.token.exchange.enableRefreshRequestedTokenType"),label:t("enableRefreshRequestedTokenType"),labelIcon:t("enableRefreshRequestedTokenTypeHelp"),controller:{defaultValue:""},isDisabled:c?.toString()!=="true"||u?.toString()!=="true",options:[{key:"",value:t("choose")},{key:"NO",value:t("no")},{key:"SAME_SESSION",value:t("sameSession")}]}),l(Te,{children:[e(E,{variant:"secondary",onClick:n,"data-testid":"OIDCCompatabilitySave",children:t("save")}),e(E,{variant:"link",onClick:a,"data-testid":"OIDCCompatabilityRevert",children:t("revert")})]})]})},$i=({save:n,reset:a})=>{const{t:i}=R();return l(le,{role:"manage-clients",isHorizontal:!0,children:[e(ge,{name:k("attributes.oid4vci.enabled"),label:i("oid4vciEnabled"),labelIcon:i("oid4vciEnabledHelp"),stringify:!0}),l(Te,{children:[e(E,{variant:"secondary",id:"oid4vciSave","data-testid":"oid4vciSave",onClick:()=>n(),children:i("save")}),e(E,{id:"oid4vciRevert","data-testid":"oid4vciRevert",variant:"link",onClick:a,children:i("revert")})]})]})},ze="openid-connect",ia="oid4vc",Wi=(n,a,i,t)=>{const s=n.successRequests?.length||0,o=n.failedRequests?.length||0;s===0&&o===0?i(t("noAdminUrlSet"),$.warning):o>0?(i(t(a+"Success",{successNodes:n.successRequests}),$.success),i(t(a+"Fail",{failedNodes:n.failedRequests}),$.danger)):i(t(a+"Success",{successNodes:n.successRequests}),$.success)},Ji=({save:n,client:a})=>{const{t:i}=R(),t=xt(),{setValue:s}=se(),{publicClient:o,attributes:r,protocol:c,authenticationFlowBindingOverrides:u}=a,d=f=>{for(const p of f)s(k(`attributes.${p}`),r?.[p]||"")};return e(de,{variant:"light",className:"pf-v5-u-py-0",children:e(En,{label:i("jumpToSection"),sections:[{title:i("clustering"),isHidden:!o,panel:e(Ui,{client:a,save:n})},{title:i("fineGrainOpenIdConnectConfiguration"),isHidden:c!==ze,panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("fineGrainOpenIdConnectConfigurationHelp")}),e(qi,{save:n,reset:()=>{d(["logoUri","policyUri","tosUri","access.token.signed.response.alg","access.token.header.type.rfc9068","id.token.signed.response.alg","id.token.encrypted.response.alg","id.token.encrypted.response.enc","id.token.as.detached.signature","user.info.response.signature.alg","user.info.encrypted.response.alg","user.info.encrypted.response.enc","request.object.signature.alg","request.object.encryption.alg","request.object.encryption.enc","request.object.required","request.uris","authorization.signed.response.alg","authorization.encrypted.response.alg","authorization.encrypted.response.enc"])}})]})},{title:i("openIdConnectCompatibilityModes"),isHidden:c!==ze,panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("openIdConnectCompatibilityModesHelp")}),e(ji,{save:()=>n(),reset:()=>d(["exclude.session.state.from.auth.response","use.refresh.tokens","client_credentials.use_refresh_token","token.response.type.bearer.lower-case"])})]})},{title:i("fineGrainSamlEndpointConfig"),isHidden:c===ze,panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("fineGrainSamlEndpointConfigHelp")}),e(Gi,{save:()=>n(),reset:()=>d(["logoUri","policyUri","tosUri","saml_assertion_consumer_url_post","saml_assertion_consumer_url_redirect","saml_single_logout_service_url_post","saml_single_logout_service_url_redirect","saml_single_logout_service_url_artifact","saml_artifact_binding_url","saml_artifact_resolution_service_url"])})]})},{title:i("advancedSettings"),panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("advancedSettings"+$t(c||""))}),e(Vi,{protocol:c,save:()=>n(),reset:()=>{d(["saml.assertion.lifespan","access.token.lifespan","session.idle.timeout","client.session.max.lifespan","client.offline.session.idle.timeout","client.offline.session.max.lifespan","dpop.bound.access.tokens","tls.client.certificate.bound.access.tokens","require.pushed.authorization.requests","client.use.lightweight.access.token.enabled","client.introspection.response.allow.jwt.claim.enabled","pkce.code.challenge.method","acr.loa.map","default.acr.values","minimum.acr.value"])}})]})},{title:i("openIdVerifiableCredentials"),isHidden:c!==ze&&c!==ia||!t(Et.OpenId4VCI),panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("openIdVerifiableCredentialsHelp")}),e($i,{client:a,save:n,reset:()=>d(["oid4vci.enabled"])})]})},{title:i("authenticationOverrides"),panel:l(K,{children:[e(me,{className:"pf-v5-u-pb-lg",children:i("authenticationOverridesHelp")}),e(zi,{protocol:c,save:()=>n(),reset:()=>{s("authenticationFlowBindingOverrides.browser",u?.browser),s("authenticationFlowBindingOverrides.direct_grant",u?.direct_grant)}})]})}],borders:!0})})},Qi=({client:n})=>{const{adminClient:a}=X(),{t:i}=R();return e(de,{variant:"light",className:"pf-v5-u-p-0",children:e(ti,{loader:async(s,o,r)=>ba(a,"ui-ext/sessions/client",{first:`${s}`,max:`${o}`,type:"ALL",clientId:n.id,search:r||""}),hiddenColumns:["clients"],emptyInstructions:i("noSessionsForClient")})})},Yi=({client:n,save:a,reset:i})=>{const{t}=R(),{watch:s}=se(),{hasAccess:o}=Ie(),r=o("manage-clients")||n.access?.configure,c=s("protocol");return l(le,{isHorizontal:!0,fineGrainedAccess:n.access?.configure,role:"manage-clients",children:[!n.bearerOnly&&e(ii,{protocol:c}),c!=="saml"&&e(ne,{type:"url",name:"adminUrl",label:t("adminURL"),labelIcon:t("adminURLHelp")}),n.bearerOnly&&e(Dt,{name:"settings",save:a,reset:i,isDisabled:r})]})},Xi=({access:n})=>{const{t:a}=R(),{watch:i}=se(),t=Fe().themes.login,s=i("consentRequired"),o=i(k("attributes.display.on.consent.screen"));return l(le,{isHorizontal:!0,fineGrainedAccess:n,role:"manage-clients",children:[e(Y,{name:"attributes.login_theme",label:a("loginTheme"),labelIcon:a("loginThemeHelp"),controller:{defaultValue:""},options:[{key:"",value:a("choose")},...t.map(({name:r})=>({key:r,value:r}))]}),e(ge,{name:"consentRequired",label:a("consentRequired"),labelIcon:a("consentRequiredHelp")}),e(ge,{name:k("attributes.display.on.consent.screen"),label:a("displayOnClient"),labelIcon:a("displayOnClientHelp"),isDisabled:!s,stringify:!0}),e(ya,{name:k("attributes.consent.screen.text"),label:a("consentScreenText"),labelIcon:a("consentScreenTextHelp"),isDisabled:!(s&&o==="true")})]})},bn=(n,a)=>(n?.startsWith("https://")||n?.startsWith("http://"))&&!n.includes("*")||n===""||a,Zi=({save:n,reset:a,client:{access:i}})=>{const{t}=R(),{control:s,watch:o}=se(),{hasAccess:r}=Ie(),c=r("manage-clients")||i?.configure,u=o("protocol"),d=o("frontchannelLogout"),f=u==="openid-connect"?"frontchannelLogoutOIDCHelp":"frontchannelLogoutHelp";return l(le,{isHorizontal:!0,fineGrainedAccess:i?.configure,role:"manage-clients",children:[e(V,{label:t("frontchannelLogout"),labelIcon:e(M,{helpText:t(f),fieldLabelId:"frontchannelLogout"}),fieldId:"kc-frontchannelLogout",hasNoPaddingTop:!0,children:e(ae,{name:"frontchannelLogout",defaultValue:!0,control:s,render:({field:p})=>e(he,{id:"kc-frontchannelLogout-switch",label:t("on"),labelOff:t("off"),isChecked:p.value,onChange:p.onChange,"aria-label":t("frontchannelLogout")})})}),u==="openid-connect"&&d&&e(ne,{"data-testid":"frontchannelLogoutUrl",type:"url",name:k("attributes.frontchannel.logout.url"),label:t("frontchannelLogoutUrl"),labelIcon:t("frontchannelLogoutUrlHelp"),rules:{validate:p=>bn(p,t("frontchannelUrlInvalid"))}}),u==="openid-connect"&&d&&e(ge,{name:k("attributes.frontchannel.logout.session.required"),defaultValue:"true",label:t("frontchannelLogoutSessionRequired"),labelIcon:t("frontchannelLogoutSessionRequiredHelp"),stringify:!0}),u==="openid-connect"&&!d&&l(K,{children:[e(ne,{"data-testid":"backchannelLogoutUrl",type:"url",name:k("attributes.backchannel.logout.url"),label:t("backchannelLogoutUrl"),labelIcon:t("backchannelLogoutUrlHelp"),rules:{validate:p=>bn(p,t("backchannelUrlInvalid"))}}),e(V,{label:t("backchannelLogoutSessionRequired"),labelIcon:e(M,{helpText:t("backchannelLogoutSessionRequiredHelp"),fieldLabelId:"backchannelLogoutSessionRequired"}),fieldId:"backchannelLogoutSessionRequired",hasNoPaddingTop:!0,children:e(ae,{name:k("attributes.backchannel.logout.session.required"),defaultValue:"false",control:s,render:({field:p})=>e(he,{id:"backchannelLogoutSessionRequired",label:t("on"),labelOff:t("off"),isChecked:p.value==="true",onChange:(b,m)=>p.onChange(m.toString()),"aria-label":t("backchannelLogoutSessionRequired")})})}),e(V,{label:t("backchannelLogoutRevokeOfflineSessions"),labelIcon:e(M,{helpText:t("backchannelLogoutRevokeOfflineSessionsHelp"),fieldLabelId:"backchannelLogoutRevokeOfflineSessions"}),fieldId:"backchannelLogoutRevokeOfflineSessions",hasNoPaddingTop:!0,children:e(ae,{name:k("attributes.backchannel.logout.revoke.offline.tokens"),defaultValue:"false",control:s,render:({field:p})=>e(he,{id:"backchannelLogoutRevokeOfflineSessions",label:t("on"),labelOff:t("off"),isChecked:p.value==="true",onChange:(b,m)=>p.onChange(m.toString()),"aria-label":t("backchannelLogoutRevokeOfflineSessions")})})})]}),u==="openid-connect"&&e(ge,{name:k("attributes.logout.confirmation.enabled"),defaultValue:"false",label:t("logoutConfirmation"),labelIcon:t("logoutConfirmationHelp"),stringify:!0}),e(Dt,{name:"settings",save:n,reset:a,isDisabled:!c})]})},es=n=>{const{t:a}=R(),{watch:i}=se(),t=i("protocol"),{client:s}=n;return e(En,{label:a("jumpToSection"),className:"pf-v5-u-px-lg pf-v5-u-pb-lg",sections:[{title:a("generalSettings"),panel:e(ye,{isHorizontal:!0,children:e(ni,{protocol:s.protocol,hasConfigureAccess:s.access?.configure})})},{title:a("accessSettings"),panel:e(Yi,{...n})},{title:a("samlCapabilityConfig"),isHidden:t!=="saml"||s.bearerOnly,panel:e(si,{})},{title:a("signatureAndEncryption"),isHidden:t!=="saml"||s.bearerOnly,panel:e(oi,{})},{title:a("capabilityConfig"),isHidden:t!=="openid-connect"||s.bearerOnly,panel:e(ai,{})},{title:a("loginSettings"),isHidden:s.bearerOnly,panel:e(Xi,{access:s.access?.configure})},{title:a("logoutSettings"),isHidden:s.bearerOnly,panel:e(Zi,{...n})}]})},ts=({name:n,rowIndex:a,attribute:i,selectableValues:t,resources:s})=>{const{t:o}=R(),{control:r,register:c,getValues:u}=se(),[d,f]=g([!1]),p=(T,C)=>{const I=[...d];I[T]=C,f(I)},b=ht(()=>{let T=[];return t&&(T=Qn.find(C=>C.key===u().context?.[a]?.key)?.values),T},[u]),m=()=>{const T=s?.find(C=>C.name===u().resources?.[a]?.key)?.scopes;if(b?.length&&!s)return b.map(C=>e(Re,{value:C.key,children:C.name},C.key));if(T?.length)return T.map(C=>e(Re,{value:C.name,children:C.name},C.name))},S=T=>di(T).replace(/\W/g,"");return e(_,{children:s||b?.length?e(ae,{name:`${n}.${a}.value`,defaultValue:[],control:r,render:({field:T})=>e(Wt,{toggleId:`${i.id}-value`,className:"kc-attribute-value-selectable",chipGroupProps:{numChips:1,expandedText:o("hide"),collapsedText:o("showRemaining")},onToggle:C=>p(a,C),isOpen:d[a],variant:Ct.typeahead,typeAheadAriaLabel:o("selectOrTypeAKey"),placeholderText:o("selectOrTypeAKey"),selections:T.value,onSelect:C=>{T.onChange(C),p(a,!1)},children:m()})}):e(Dn,{id:`${S(i.key)}-value`,className:"value-input",defaultValue:i.value,"data-testid":"attribute-value-input","aria-label":o("value"),...c(`${n}.${a}.value`)})})},yn=({name:n,selectableValues:a,resources:i})=>{const{t}=R(),{control:s,watch:o}=se(),{fields:r,append:c,remove:u}=va({control:s,name:n}),[d,f]=g([!1]),p=(m,S)=>{const T=[...d];T[m]=S,f(T)};ft(()=>{r.length||c({key:"",value:""},{shouldFocus:!1})},[r]);const b=o(`${n}.${r.length-1}.value`,"");return l(Qe,{className:"kc-attributes__table","aria-label":"Role attribute keys and values",variant:"compact",children:[e(Ye,{children:l(ie,{children:[e(F,{width:40,children:t("key")}),e(F,{width:40,children:t("value")})]})}),l(Xe,{children:[r.map((m,S)=>l(ie,{"data-testid":"attribute-row",children:[e(_,{children:e(ae,{name:`${n}.${S}.key`,defaultValue:"",control:s,render:({field:T})=>e(Wt,{toggleId:`${n}.${S}.key`,className:"kc-attribute-key-selectable",onToggle:C=>p(S,C),isOpen:d[S],variant:Ct.typeahead,typeAheadAriaLabel:t("selectOrTypeAKey"),placeholderText:t("selectOrTypeAKey"),selections:T.value,onSelect:C=>{T.onChange(C.toString()),p(S,!1)},children:a?.map(C=>e(Re,{selected:C.name===T.value,value:i?C.name:C.key,children:C.name},C.key))})})}),e(ts,{name:n,attribute:m,rowIndex:S,selectableValues:a,resources:i}),e(_,{children:e(E,{id:`${n}-minus-button-${S}`,variant:"link",className:"kc-attributes__minus-icon",onClick:()=>u(S),"aria-label":t("remove"),children:e(Sa,{})})})]},m.id)),e(ie,{children:e(_,{children:e(E,{"aria-label":t("addAttribute",{label:t("attribute")}),id:`${n}-plus-icon`,variant:"link",className:"kc-attributes__plus-icon",onClick:()=>{c({key:"",value:""}),f([...d,!1])},icon:e(wn,{}),isDisabled:!b,"data-testid":"attribute-add-row",children:t("addAttribute",{label:t("attribute")})})})})]})]})},ns=({data:n})=>{const{t:a}=R(),[i,t]=Ee();return l(K,{children:[e(E,{"data-testid":"authorization-revert",onClick:t,variant:"secondary",children:a("showAuthData")}),e(Je,{variant:It.medium,isOpen:i,"aria-label":a("authData"),header:l(Be,{children:[e(me,{component:Ca.h1,children:a("authData")}),e(me,{children:a("authDataDescription")})]}),onClose:t,actions:[e(E,{"data-testid":"cancel",id:"modal-cancel",onClick:t,children:a("cancel")},"cancel")],children:e(At,{readOnly:!0,rows:20,value:qe(n)})})]})},as=({idx:n,rowIndex:a,outerPolicy:i,resource:t})=>{const[s,o]=g(!1),{t:r}=R(),{realm:c}=ue(),{clientId:u}=Xt();return l(Xe,{isExpanded:s,children:[l(ie,{children:[e(_,{expand:{rowIndex:a,isExpanded:s,onToggle:()=>o(d=>!d)}}),e(_,{"data-testid":`name-column-${t.resource}`,children:e(Ce,{to:wt({realm:c,id:u,permissionType:i.policy?.type,permissionId:i.policy?.id}),children:i.policy?.name})}),e(_,{id:i.status?.toLowerCase(),children:r(i.status?.toLowerCase())}),e(_,{children:r(`${i.policy?.decisionStrategy?.toLowerCase()}`)}),e(_,{children:i.status===pn.Permit?t.policies?.[a]?.scopes?.join(", "):"-"}),e(_,{children:i.status===pn.Deny&&t.policies?.[a]?.scopes?.length?t.policies[a].scopes?.join(", "):"-"})]}),l(ie,{isExpanded:s,children:[e(_,{}),e(_,{colSpan:5,children:s&&e(ut,{children:e(gt,{isHorizontal:!0,className:"keycloak_resource_details",children:e(Be,{children:e(ui,{children:i.associatedPolicies?.map(d=>l(pi,{children:[e(Ce,{to:On({realm:c,id:u,policyType:d.policy?.type,policyId:d.policy?.id}),children:d.policy?.name})," ",r("votedToStatus",{status:ka(d.status)})]},"policyDetails"))})})})})})]},`child-${t.resource}`)]},n)},is=({rowIndex:n,resource:a,evaluateResults:i})=>{const[t,s]=g(!1),{t:o}=R();return l(Xe,{isExpanded:t,children:[l(ie,{children:[e(_,{expand:{rowIndex:n,isExpanded:t,onToggle:()=>s(r=>!r)}}),e(_,{"data-testid":`name-column-${a.resource}`,children:a.resource?.name}),e(_,{id:a.status?.toLowerCase(),children:o(`${a.status?.toLowerCase()}`)}),e(_,{children:a.allowedScopes?.length?a.allowedScopes.map(r=>r.name):"-"})]}),l(ie,{isExpanded:t,children:[e(_,{}),e(_,{colSpan:5,children:e(ut,{children:t&&e(gt,{isHorizontal:!0,className:"keycloak_resource_details",children:l(Qe,{"aria-label":o("evaluationResults"),children:[e(Ye,{children:l(ie,{children:[e(F,{"aria-hidden":"true"}),e(F,{children:o("permission")}),e(F,{children:o("results")}),e(F,{children:o("decisionStrategy")}),e(F,{children:o("grantedScopes")}),e(F,{children:o("deniedScopes")}),e(F,{"aria-hidden":"true"})]})}),Object.values(i[n].policies).map((r,c)=>e(as,{idx:c,rowIndex:n,outerPolicy:r,resource:a},c))]})})})})]},`child-${a.resource}`)]})};function ss(n,a){switch(a){case"STATUS_PERMITTED":return n.filter(({status:i})=>i==="PERMIT");case"STATUS_DENIED":return n.filter(({status:i})=>i==="DENY");default:return n}}const os=({evaluateResult:n,refresh:a,back:i})=>{const{t}=R(),[s,o]=Ee(),[r,c]=g("ALL"),[u,d]=g(""),[f,p]=g(""),b=()=>{d(f)},m=I=>{I.key==="Enter"&&b()},S=ht(()=>ss(n.results,r).filter(({resource:I})=>I?.name?.includes(u)??!1),[n.results,r,u]),T=n.results.length===0,C=S.length===0;return l(de,{children:[e(Ta,{children:l(Ia,{className:"providers-toolbar",children:[e(be,{children:l(Ln,{children:[e(kt,{isFill:!0,children:e(Dn,{name:"inputGroupName",id:"inputGroupName",type:"search","aria-label":t("search"),placeholder:t("search"),onChange:(I,v)=>p(v),onKeyDown:m})}),e(kt,{children:e(E,{variant:fe.control,"aria-label":t("search"),onClick:()=>b(),children:e(Aa,{})})})]})}),e(be,{children:e(Gt,{"data-testid":"filter-type-select",isOpen:s,className:"kc-filter-type-select",toggle:I=>e(dt,{ref:I,onClick:o,isExpanded:s,style:{width:"300px"},children:r}),onSelect:(I,v)=>{c(v),o(),a()},selected:r,children:l(jt,{children:[e(Re,{"data-testid":"all-results-option",value:"ALL",children:t("allResults")}),e(Re,{"data-testid":"result-permit-option",value:"STATUS_PERMITTED",children:t("resultPermit")}),e(Re,{"data-testid":"result-deny-option",value:"STATUS_DENIED",children:t("resultDeny")})]})})})]})}),!C&&l(Qe,{"aria-label":t("evaluationResults"),children:[e(Ye,{children:l(ie,{children:[e(F,{"aria-hidden":"true"}),e(F,{children:t("resource")}),e(F,{children:t("overallResults")}),e(F,{children:t("scopes")}),e(F,{"aria-hidden":"true"})]})}),S.map((I,v)=>e(is,{rowIndex:v,resource:I,evaluateResults:n.results},v))]}),(C||T)&&l(K,{children:[e(_e,{}),e(Ne,{isSearchVariant:!0,message:t("noSearchResults"),instructions:t("noSearchResultsInstructions")})]}),e(ye,{children:l(Dt,{name:"authorization",children:[e(E,{"data-testid":"authorization-eval",id:"back-btn",onClick:i,children:t("back")})," ",e(E,{"data-testid":"authorization-reevaluate",id:"reevaluate-btn",variant:"secondary",onClick:a,children:t("reevaluate")})," ",e(ns,{data:n.rpt})]})})]})},rs=n=>{const{hasAccess:a}=Ie();return a("view-users")?e(ls,{...n}):e(Ra,{permissionNeeded:"view-users"})},ls=({client:n})=>{const{adminClient:a}=X(),i=Le({mode:"onChange"}),{reset:t,trigger:s,formState:{isValid:o}}=i,{t:r}=R(),{addError:c}=oe(),u=ue(),[d,f]=g(!1),[p,b]=g(!1),[m,S]=g([]),[T,C]=g([]),[I,v]=g(),[A,z]=g([]);ee(()=>a.roles.find(),N=>{z(N)},[]),ee(()=>Promise.all([a.clients.listResources({id:n.id}),a.clients.listAllScopes({id:n.id})]),([N,L])=>{S(N),C(L)},[]);const B=async()=>{if(!await s())return;const N=i.getValues(),L=xa(N.resources),P={roleIds:N.roleIds??[],clientId:N.client.id,userId:N.user[0],resources:m.filter(y=>Object.keys(L).includes(y.name)).map(y=>({...y,scopes:y.scopes?.filter(w=>Object.values(L).flatMap(x=>x).includes(w.name))})),entitlements:!1,context:{attributes:Object.fromEntries(N.context.attributes.filter(y=>y.key||y.value!=="").map(({key:y,value:w})=>[y,w]))}};try{const y=await a.clients.evaluateResource({id:n.id,realm:u.realm},P);v(y)}catch(y){c("evaluateError",y)}};return I?e(os,{evaluateResult:I,refresh:B,back:()=>v(void 0)}):e(de,{children:l(xe,{...i,children:[l(en,{children:[e(mn,{children:e(qt,{headingLevel:"h2",children:r("identityInformation")})}),e(tn,{children:l(le,{isHorizontal:!0,role:"view-clients",children:[e(Wn,{name:"client",label:"client",helpText:"clientHelp",defaultValue:n.clientId}),e(Jn,{name:"user",label:"users",helpText:r("selectUser"),defaultValue:[],variant:"typeahead",isRequired:!0}),e(Y,{name:"roleIds",label:r("roles"),labelIcon:r("rolesHelp"),variant:"typeaheadMulti",placeholderText:r("selectARole"),controller:{defaultValue:[],rules:{required:!0}},options:A.map(N=>N.name)})]})})]}),l(en,{children:[e(mn,{children:e(qt,{headingLevel:"h2",children:r("permissions")})}),e(tn,{children:l(le,{isHorizontal:!0,role:"view-clients",children:[e(V,{label:r("applyToResourceType"),fieldId:"applyToResourceType",labelIcon:e(M,{helpText:r("applyToResourceTypeHelp"),fieldLabelId:"applyToResourceType"}),children:e(he,{id:"applyToResource-switch",label:r("on"),labelOff:r("off"),isChecked:p,onChange:(N,L)=>b(L),"aria-label":r("applyToResourceType")})}),p?l(K,{children:[e(ne,{name:"alias",label:r("resourceType"),labelIcon:r("resourceTypeHelp"),rules:{required:r("required")}}),e(Y,{name:"authScopes",label:r("authScopes"),labelIcon:r("scopesSelect"),controller:{defaultValue:[]},variant:"typeaheadMulti",options:T.map(N=>N.name)})]}):e(V,{label:r("resourcesAndScopes"),id:"resourcesAndScopes",labelIcon:e(M,{helpText:r("contextualAttributesHelp"),fieldLabelId:"resourcesAndScopes"}),fieldId:"resourcesAndScopes",children:e(yn,{selectableValues:m.map(N=>({name:N.name,key:N._id})),resources:m,name:"resources"})}),e($n,{toggleText:r("contextualInfo"),onToggle:()=>f(!d),isExpanded:d,children:e(V,{label:r("contextualAttributes"),id:"contextualAttributes",labelIcon:e(M,{helpText:r("contextualAttributesHelp"),fieldLabelId:"contextualAttributes"}),fieldId:"contextualAttributes",children:e(yn,{selectableValues:Qn,name:"context.attributes"})})})]})})]}),l(Te,{children:[e(E,{"data-testid":"authorization-eval",id:"authorization-eval",className:"pf-v5-u-mr-md",isDisabled:!o,onClick:()=>B(),children:r("evaluate")}),e(E,{"data-testid":"authorization-revert",id:"authorization-revert",className:"pf-v5-u-mr-md",variant:"link",onClick:()=>t(),children:r("revert")})]})]})})},cs=()=>{const{adminClient:n}=X(),{t:a}=R(),{clientId:i}=Xt(),{addAlert:t,addError:s}=oe(),[o,r]=g(),[c,u]=g();ee(()=>n.clients.exportResource({id:i}),f=>{r(JSON.stringify(f,null,2)),u(f)},[]);const d=()=>{try{$e.saveAs(new Blob([qe(c)],{type:"application/json"}),"test-authz-config.json"),t(a("exportAuthDetailsSuccess"),$.success)}catch(f){s("exportAuthDetailsError",f)}};return o?e(de,{children:l(le,{isHorizontal:!0,role:"manage-authorization",className:"pf-v5-u-mt-lg",children:[e(fi,{"data-testid":"authorization-export-code-editor",value:o,language:"json",readOnly:!0,rows:10,style:{height:"30rem",overflow:"scroll"}}),l(Te,{children:[e(E,{"data-testid":"authorization-export-download",onClick:()=>d(),children:a("download")}),e(E,{"data-testid":"authorization-export-copy",variant:"secondary",onClick:async()=>{try{await navigator.clipboard.writeText(o),t(a("copied"),$.success)}catch(f){s("copyError",f)}},children:a("copy")})]})]})}):e(Oe,{})},vn=({permissionType:n,disabled:a=!1,clientId:i})=>{const{t}=R(),{realm:s}=ue(),o=pt();return e(E,{"data-testid":`create-${n}`,className:a?"keycloak__permissions__empty_state ":"pf-v5-u-m-sm",variant:"secondary",onClick:()=>!a&&o(rt({realm:s,id:i,permissionType:n})),children:t(`create${$t(n)}BasedPermission`)})},Sn=({permissionType:n,disabled:a,...i})=>{const{t}=R();return a?e(Hn,{content:t(`no${$t(n)}CreateHint`),children:e(vn,{...i,disabled:a,permissionType:n})}):e(vn,{...i,disabled:a,permissionType:n})},ds=({clientId:n,isResourceEnabled:a,isScopeEnabled:i})=>{const{t}=R();return l(Pn,{"data-testid":"empty-state",variant:"lg",children:[e(_n,{titleText:e(K,{children:t("emptyPermissions")}),icon:e(Ea,{icon:wn}),headingLevel:"h1"}),e(Nn,{children:t("emptyPermissionInstructions")}),l(wa,{children:[e(Sn,{permissionType:"resource",disabled:a,clientId:n}),e("br",{}),e(Sn,{permissionType:"scope",disabled:i,clientId:n})]})]})},us=({row:n})=>l(K,{children:[n.associatedPolicies?.[0]?.name||"â€”"," ",e(Xn,{array:n.associatedPolicies})]}),ps=({clientId:n,isDisabled:a=!1})=>{const{adminClient:i}=X(),{t}=R(),s=pt(),{addAlert:o,addError:r}=oe(),{realm:c}=ue(),[u,d]=g(),[f,p]=g(),[b,m]=g(),[S,T]=g(),[C,I]=Ee(),[v,A]=g({}),[z,B]=g(0),N=()=>B(z+1),[L,P]=g(10),[y,w]=g(0);ee(async()=>{const H=await i.clients.findPermissions({first:y,max:L+1,id:n,...v});return await Promise.all(H.map(async te=>{const W=await i.clients.getAssociatedPolicies({id:n,permissionId:te.id});return{...te,associatedPolicies:W,isExpanded:!1}}))},d,[z,v,y,L]),ee(async()=>{const H={first:0,max:1},[te,W,D]=await Promise.all([i.clients.listPolicyProviders({id:n}),i.clients.listResources({...H,id:n}),i.clients.listAllScopes({...H,id:n})]);return{policies:te.filter(re=>re.type==="resource"||re.type==="scope"),resources:W.length!==1,scopes:D.length!==1}},({policies:H,resources:te,scopes:W})=>{m(H),T({resources:te,scopes:W})},[]);const[x,h]=ke({titleKey:"deletePermission",messageKey:t("deletePermissionConfirm",{permission:f?.name}),continueButtonVariant:fe.danger,continueButtonLabel:"confirm",onConfirm:async()=>{try{await i.clients.delPermission({id:n,type:f?.type,permissionId:f?.id}),o(t("permissionDeletedSuccess"),$.success),N()}catch(H){r("permissionDeletedError",H)}}});if(!u)return e(Oe,{});const O=u.length===0,U=Object.keys(v).length!==0;return l(de,{variant:"light",className:"pf-v5-u-p-0",children:[e(h,{}),(!O||U)&&e(Jt,{count:u.length,first:y,max:L,onNextClick:w,onPreviousClick:w,onPerPageSelect:(H,te)=>{w(H),P(te)},toolbarItem:l(K,{children:[e(be,{children:e(Yn,{types:b,search:v,onSearch:A,type:"permission"})}),e(be,{children:e(Kn,{onOpenChange:I,toggle:H=>e(dt,{ref:H,onClick:I,isDisabled:a,variant:"primary","data-testid":"permissionCreateDropdown",children:t("createPermission")}),isOpen:C,children:l(Mn,{children:[e(Ge,{"data-testid":"create-resource",isDisabled:a||S?.resources,component:"button",onClick:()=>s(rt({realm:c,id:n,permissionType:"resource"})),children:t("createResourceBasedPermission")}),e(_e,{}),l(Ge,{"data-testid":"create-scope",isDisabled:a||S?.scopes,component:"button",onClick:()=>s(rt({realm:c,id:n,permissionType:"scope"})),children:[t("createScopeBasedPermission"),S?.scopes&&e(mt,{className:"pf-v5-u-mt-sm",variant:"warning",isInline:!0,isPlain:!0,title:t("noScopeCreateHint")})]})]})})})]}),children:!O&&l(Qe,{"aria-label":t("resources"),variant:"compact",children:[e(Ye,{children:l(ie,{children:[e(F,{"aria-hidden":"true"}),e(F,{children:t("name")}),e(F,{children:t("type")}),e(F,{children:t("associatedPolicy")}),e(F,{children:t("description")}),e(F,{"aria-hidden":"true"})]})}),u.map((H,te)=>l(Xe,{isExpanded:H.isExpanded,children:[l(ie,{children:[e(_,{expand:{rowIndex:te,isExpanded:H.isExpanded,onToggle:(W,D)=>{const re=u.map((Ae,He)=>He===D?{...Ae,isExpanded:!Ae.isExpanded}:Ae);d(re)}}}),e(_,{"data-testid":`name-column-${H.name}`,children:e(Ce,{to:wt({realm:c,id:n,permissionType:H.type,permissionId:H.id}),children:H.name})}),e(_,{children:b?.find(W=>W.type===H.type)?.name}),e(_,{children:e(us,{row:H})}),e(_,{children:H.description||"â€”"}),e(_,{actions:{items:[{title:t("delete"),onClick:async()=>{p(H),x()}}]}})]}),l(ie,{isExpanded:H.isExpanded,children:[e(_,{}),e(_,{colSpan:5,children:e(ut,{children:H.isExpanded&&e(gt,{isHorizontal:!0,className:"keycloak_resource_details",children:e(ct,{name:"associatedPolicy",array:H.associatedPolicies,convert:W=>W.name,link:W=>On({id:n,realm:c,policyId:W.id,policyType:W.type})})})})})]},`child-${H.id}`)]},H.id))]})}),O&&!U&&e(ds,{clientId:n,isResourceEnabled:!a&&S?.resources,isScopeEnabled:!a&&S?.scopes}),O&&U&&e(Ne,{isSearchVariant:!0,message:t("noSearchResults"),instructions:t("noSearchResultsInstructions")})]})},ms=({id:n,clientId:a,uris:i})=>{const{adminClient:t}=X(),{realm:s}=ue(),[o,r]=g(),[c,u]=g();return ee(()=>Promise.all([t.clients.listScopesByResource({id:a,resourceName:n}),t.clients.listPermissionsByResource({id:a,resourceId:n})]),([d,f])=>{r(d),u(f)},[]),!c||!o?e(Oe,{}):l(gt,{isHorizontal:!0,className:"keycloak_resource_details",children:[e(mi,{name:"uris",array:i}),e(ct,{name:"scopes",array:o,convert:d=>d.name,link:d=>Vn({id:a,realm:s,scopeId:d.id})}),e(ct,{name:"associatedPermissions",array:c,convert:d=>d.name,link:d=>wt({id:a,realm:s,permissionId:d.id,permissionType:"resource"})})]})},hs=({row:n})=>l(it,{wrapModifier:"truncate",children:[n.uris?.[0]," ",e(Xn,{array:n.uris})]}),fs=({clientId:n,isDisabled:a=!1})=>{const{adminClient:i}=X(),{t}=R(),s=pt(),{addAlert:o,addError:r}=oe(),{realm:c}=ue(),[u,d]=g(),[f,p]=g(),[b,m]=g(),[S,T]=g(0),C=()=>T(S+1),[I,v]=g(10),[A,z]=g(0),[B,N]=g({});ee(()=>{const h={first:A,max:I+1,deep:!1,...B};return i.clients.listResources({...h,id:n})},h=>d(h.map(O=>({...O,isExpanded:!1}))),[S,B,A,I]);const L=async h=>i.clients.listPermissionsByResource({id:n,resourceId:h}),[P,y]=ke({titleKey:"deleteResource",children:l(K,{children:[t("deleteResourceConfirm"),b?.length&&e(mt,{variant:"warning",isInline:!0,isPlain:!0,title:t("deleteResourceWarning"),className:"pf-v5-u-pt-lg",children:e("p",{className:"pf-v5-u-pt-xs",children:b.map(h=>e("strong",{className:"pf-v5-u-pr-md",children:h.name},h.id))})})]}),continueButtonLabel:"confirm",onConfirm:async()=>{try{await i.clients.delResource({id:n,resourceId:f?._id}),o(t("resourceDeletedSuccess"),$.success),C()}catch(h){r("resourceDeletedError",h)}}});if(!u)return e(Oe,{});const w=u.length===0,x=Object.keys(B).length!==0;return l(de,{variant:"light",className:"pf-v5-u-p-0",children:[e(y,{}),(!w||x)&&e(Jt,{count:u.length,first:A,max:I,onNextClick:z,onPreviousClick:z,onPerPageSelect:(h,O)=>{z(h),v(O)},toolbarItem:l(K,{children:[e(be,{children:e(Yn,{search:B,onSearch:N,type:"resource"})}),e(be,{children:e(E,{"data-testid":"createResource",isDisabled:a,component:h=>e(Ce,{...h,to:nn({realm:c,id:n})}),children:t("createResource")})})]}),children:!w&&l(Qe,{"aria-label":t("resources"),variant:"compact",children:[e(Ye,{children:l(ie,{children:[e(F,{"aria-hidden":"true"}),e(F,{children:t("name")}),e(F,{children:t("displayName")}),e(F,{children:t("type")}),e(F,{children:t("owner")}),e(F,{children:t("uris")}),!a&&l(K,{children:[e(F,{"aria-hidden":"true"}),e(F,{"aria-hidden":"true"})]})]})}),u.map((h,O)=>l(Xe,{isExpanded:h.isExpanded,children:[l(ie,{children:[e(_,{expand:{rowIndex:O,isExpanded:h.isExpanded,onToggle:(U,H)=>{const te=u.map((W,D)=>D===H?{...W,isExpanded:!W.isExpanded}:W);d(te)}}}),e(_,{"data-testid":`name-column-${h.name}`,children:e(it,{wrapModifier:"truncate",children:e(Ce,{to:zn({realm:c,id:n,resourceId:h._id}),children:h.name})})}),e(_,{children:e(it,{wrapModifier:"truncate",children:h.displayName})}),e(_,{children:e(it,{wrapModifier:"truncate",children:h.type})}),e(_,{children:e(it,{wrapModifier:"truncate",children:h.owner?.name})}),e(_,{children:e(hs,{row:h})}),!a&&l(K,{children:[e(_,{width:10,children:e(E,{variant:"link",component:U=>e(Ce,{...U,to:rt({realm:c,id:n,permissionType:"resource",selectedId:h._id})}),children:t("createPermission")})}),e(_,{actions:{items:[{title:t("delete"),onClick:async()=>{p(h),m(await L(h._id)),P()}}]}})]})]}),l(ie,{isExpanded:h.isExpanded,children:[e(_,{}),e(_,{colSpan:4,children:e(ut,{children:h.isExpanded&&e(ms,{clientId:n,id:h._id,uris:h.uris})})})]},`child-${h._id}`)]},h._id))]})}),w&&x&&e(Ne,{isSearchVariant:!0,message:t("noSearchResults"),instructions:t("noSearchResultsInstructions")}),w&&!x&&e(Ne,{message:t("emptyResources"),instructions:t("emptyResourcesInstructions"),isDisabled:a,primaryActionText:t("createResource"),onPrimaryAction:()=>s(nn({realm:c,id:n}))})]})},gs=({clientId:n,isDisabled:a=!1})=>{const{adminClient:i}=X(),{t}=R(),s=pt(),{realm:o}=ue(),[r,c]=Ee(),[u,d]=g(),[f,p]=g(),[b,m]=g([]),[S,T]=g(0),C=()=>T(S+1),[I,v]=g(10),[A,z]=g(0),[B,N]=g("");ee(()=>{const x={first:A,max:I+1,deep:!1,name:B};return i.clients.listAllScopes({...x,id:n})},x=>{d(x.map(h=>({...h,isLoaded:!1}))),m(x.map(h=>({id:h.id,isExpanded:!1})))},[S,B,A,I]);const L=x=>u?.find(h=>h.id===x),P=x=>b.find(h=>h.id===x)?.isExpanded||!1;if(ee(()=>{const x=b.filter(h=>h.isExpanded).map(({id:h})=>L(h)).filter(h=>!h.isLoaded);return Promise.all(x.map(async h=>{const[O,U]=await Promise.all([i.clients.listAllResourcesByScope({id:n,scopeId:h.id}),i.clients.listAllPermissionsByScope({id:n,scopeId:h.id})]);return{...h,resources:O,permissions:U,isLoaded:!0}}))},x=>{let h=[...u||[]];x.forEach(O=>{const U=u?.findIndex(H=>O.id===H.id);h=[...h.slice(0,U),O,...h.slice(U+1)]}),d(h)},[b]),!u)return e(Oe,{});const y=u.length===0,w=B!=="";return l(de,{variant:"light",className:"pf-v5-u-p-0",children:[e(gi,{clientId:n,open:r,toggleDialog:c,selectedScope:f,refresh:C}),(!y||w)&&e(Jt,{count:u.length,first:A,max:I,onNextClick:z,onPreviousClick:z,onPerPageSelect:(x,h)=>{z(x),v(h)},inputGroupName:"search",inputGroupPlaceholder:t("searchByName"),inputGroupOnEnter:N,toolbarItem:e(be,{children:e(E,{"data-testid":"createAuthorizationScope",component:x=>e(Ce,{...x,to:an({realm:o,id:n})}),children:t("createAuthorizationScope")})}),children:!y&&l(Qe,{"aria-label":t("scopes"),variant:"compact",children:[e(Ye,{children:l(ie,{children:[e(F,{"aria-hidden":"true"}),e(F,{children:t("name")}),e(F,{children:t("displayName")}),e(F,{"aria-hidden":"true"}),e(F,{"aria-hidden":"true"})]})}),u.map((x,h)=>l(Xe,{isExpanded:P(x.id),children:[l(ie,{children:[e(_,{expand:{rowIndex:h,isExpanded:P(x.id),onToggle:(O,U,H)=>{m([...b.slice(0,U),{id:x.id,isExpanded:H},...b.slice(U+1)])}}}),e(_,{"data-testid":`name-column-${x.name}`,children:e(Ce,{to:Vn({realm:o,id:n,scopeId:x.id}),children:x.name})}),e(_,{children:x.displayName}),e(_,{width:10,children:e(E,{variant:"link",component:O=>e(Ce,{...O,to:rt({realm:o,id:n,permissionType:"scope",selectedId:x.id})}),children:t("createPermission")})}),e(_,{isActionCell:!0,actions:{items:[{title:t("delete"),onClick:()=>{p(x),c()}}]}})]}),l(ie,{isExpanded:P(x.id),children:[e(_,{}),e(_,{colSpan:4,children:e(ut,{children:P(x.id)&&x.isLoaded?l(gt,{isHorizontal:!0,className:"keycloak_resource_details",children:[e(ct,{name:"resources",array:x.resources,convert:O=>O.name,link:O=>zn({id:n,realm:o,resourceId:O._id})}),e(ct,{name:"associatedPermissions",array:x.permissions,convert:O=>O.name,link:O=>wt({id:n,realm:o,permissionId:O.id,permissionType:O.type})})]}):e(Oe,{})})})]},`child-${x.id}`)]},x.id))]})}),y&&!w&&e(Ne,{message:t("emptyAuthorizationScopes"),instructions:t("emptyAuthorizationInstructions"),isDisabled:a,onPrimaryAction:()=>s(an({id:n,realm:o})),primaryActionText:t("createAuthorizationScope")}),y&&w&&e(Ne,{isSearchVariant:!0,isDisabled:a,message:t("noSearchResults"),instructions:t("noSearchResultsInstructions")})]})},bs=({onConfirm:n,closeDialog:a})=>{const{t:i}=R(),[t,s]=g({});return l(Je,{title:i("import"),isOpen:!0,variant:"small",onClose:a,actions:[e(E,{id:"modal-confirm",onClick:()=>{n(t),a()},"data-testid":"confirm",children:i("confirm")},"confirm"),e(E,{"data-testid":"cancel",id:"modal-cancel",variant:fe.link,onClick:()=>{a()},children:i("cancel")},"cancel")],children:[e(ye,{children:e(bi,{id:"import-resource",onChange:s})}),Object.keys(t).length!==0&&l(K,{children:[e(_e,{}),e("p",{className:"pf-v5-u-my-lg",children:i("importResources")}),l(ye,{isHorizontal:!0,children:[e(V,{label:i("policyEnforcementMode"),labelIcon:e(M,{helpText:i("policyEnforcementModeHelp"),fieldLabelId:"policyEnforcementMode"}),fieldId:"policyEnforcementMode",hasNoPaddingTop:!0,children:e(lt,{id:"policyEnforcementMode",name:"policyEnforcementMode",label:i(`policyEnforcementModes.${t.policyEnforcementMode}`),isChecked:!0,isDisabled:!0,className:"pf-v5-u-mb-md"})}),e(V,{label:i("decisionStrategy"),labelIcon:e(M,{helpText:i("decisionStrategyHelp"),fieldLabelId:"decisionStrategy"}),fieldId:"decisionStrategy",hasNoPaddingTop:!0,children:e(lt,{id:"decisionStrategy",name:"decisionStrategy",isChecked:!0,isDisabled:!0,label:i(`decisionStrategies.${t.decisionStrategy}`),className:"pf-v5-u-mb-md"})}),e(V,{hasNoPaddingTop:!0,label:i("allowRemoteResourceManagement"),fieldId:"allowRemoteResourceManagement",labelIcon:e(M,{helpText:i("allowRemoteResourceManagement"),fieldLabelId:"allowRemoteResourceManagement"}),children:e(he,{id:"allowRemoteResourceManagement",label:i("on"),labelOff:i("off"),isChecked:t.allowRemoteResourceManagement,isDisabled:!0,"aria-label":i("allowRemoteResourceManagement")})})]}),e("div",{className:"pf-v5-u-mt-md",children:Object.entries(t).filter(([,o])=>Array.isArray(o)).map(([o,r])=>l(Bn,{children:[e(_e,{}),e("p",{className:"pf-v5-u-my-sm",children:l("strong",{children:[r.length," ",i(o)]})})]},o))}),e(_e,{}),e(mt,{variant:"warning",className:"pf-v5-u-mt-lg",isInline:!0,title:i("importWarning")})]})]})},Cn=["ENFORCING","PERMISSIVE","DISABLED"],ys=({clientId:n})=>{const{adminClient:a}=X(),{t:i}=R(),[t,s]=g(),[o,r]=Ee(),c=Le({}),{control:u,reset:d,handleSubmit:f}=c,{addAlert:p,addError:b}=oe(),{hasAccess:m}=Ie(),S=!m("manage-authorization");ee(()=>a.clients.getResourceServer({id:n}),I=>{s(I),d(I)},[]);const T=async I=>{try{await a.clients.importResource({id:n},I),p(i("importResourceSuccess"),$.success),d({...I})}catch(v){b("importResourceError",v)}},C=async I=>{try{await a.clients.updateResourceServer({id:n},I),p(i("updateResourceSuccess"),$.success)}catch(v){b("resourceSaveError",v)}};return t?l(de,{variant:"light",children:[o&&e(bs,{onConfirm:T,closeDialog:r}),l(le,{role:"manage-authorization",isHorizontal:!0,onSubmit:f(C),children:[e(V,{label:i("import"),fieldId:"import",labelIcon:e(M,{helpText:i("importHelp"),fieldLabelId:"import"}),children:e(E,{variant:"secondary",onClick:r,children:i("import")})}),e(_e,{}),e(V,{label:i("policyEnforcementMode"),labelIcon:e(M,{helpText:i("policyEnforcementModeHelp"),fieldLabelId:"policyEnforcementMode"}),fieldId:"policyEnforcementMode",hasNoPaddingTop:!0,children:e(ae,{name:"policyEnforcementMode","data-testid":"policyEnforcementMode",defaultValue:Cn[0],control:u,render:({field:I})=>e(K,{children:Cn.map(v=>e(lt,{id:v,"data-testid":v,isChecked:I.value===v,isDisabled:S,name:"policyEnforcementMode",onChange:()=>I.onChange(v),label:i(`policyEnforcementModes.${v}`),className:"pf-v5-u-mb-md"},v))})})}),l(xe,{...c,children:[e(ri,{isLimited:!0}),e(ge,{name:"allowRemoteResourceManagement",label:i("allowRemoteResourceManagement"),labelIcon:i("allowRemoteResourceManagementHelp")})]}),e(Dt,{name:"authenticationSettings",reset:()=>d(t),isSubmit:!0})]})]}):e(Oe,{})},kn=({id:n,buttonLabel:a,client:i,secret:t,toggle:s})=>{const{t:o}=R(),r=se(),{hasAccess:c}=Ie(),u=c("manage-clients")||i.access?.configure;return l(We,{hasGutter:!0,children:[e(ve,{isFilled:!0,children:l(Ln,{children:[e(kt,{isFill:!0,children:e(Da,{id:n,value:t,readOnly:!0})}),e(kt,{children:e(Zn,{id:n,text:t,label:"clientSecret",variant:"control"})})]})}),e(ve,{children:e(E,{variant:"secondary",isDisabled:r.formState.isDirty||!u,onClick:s,children:o(a)})})]})},Tn=({time:n})=>{const{t:a}=R(),i=jn();return e("div",{className:"pf-v5-u-my-md",children:(s=>s?a("secretExpiresOn",{time:i(new Date(s*1e3),{dateStyle:"full",timeStyle:"long"})}):void 0)(n)})},vs=({client:n,secret:a,toggle:i})=>{const{adminClient:t}=X(),{t:s}=R(),{addAlert:o,addError:r}=oe(),[c,u]=g(n.attributes?.["client.secret.rotated"]),d=n.attributes?.["client.secret.expiration.time"],f=n.attributes?.["client.secret.rotated.expiration.time"],p=S=>new Date().getTime()>=S*1e3,[b,m]=ke({titleKey:"invalidateRotatedSecret",messageKey:"invalidateRotatedSecretExplain",continueButtonLabel:"confirm",onConfirm:async()=>{try{await t.clients.invalidateSecret({id:n.id}),u(void 0),o(s("invalidateRotatedSuccess"))}catch(S){r("invalidateRotatedError",S)}}});return ft(()=>{c!==n.attributes?.["client.secret.rotated"]&&u(n.attributes?.["client.secret.rotated"])},[n,c]),l(K,{children:[e(m,{}),l(V,{label:s("clientSecret"),fieldId:"kc-client-secret",className:"pf-v5-u-my-md",children:[e(kn,{id:"kc-client-secret",client:n,secret:a,toggle:i,buttonLabel:"regenerate"}),e(Tn,{time:d}),p(d)&&e(mt,{variant:"warning",isInline:!0,title:s("secretHasExpired")})]}),c&&l(V,{label:s("secretRotated"),fieldId:"secretRotated",children:[e(kn,{id:"secretRotated",client:n,secret:c,toggle:b,buttonLabel:"invalidateSecret"}),e(Tn,{time:f})]})]})},Ss=({clientAuthenticatorType:n})=>{const{cryptoInfo:a}=Fe(),i=n==="client-jwt"?a?.clientSignatureAsymmetricAlgorithms??[]:a?.clientSignatureSymmetricAlgorithms??[],{t}=R(),{control:s}=se();return l(K,{children:[e(Y,{name:k("attributes.token.endpoint.auth.signing.alg"),label:t("signatureAlgorithm"),labelIcon:t("signatureAlgorithmHelp"),controller:{defaultValue:""},isScrollable:!0,maxMenuHeight:"200px",options:[{key:"",value:t("anyAlgorithm")},...i.map(o=>({key:o,value:o}))]}),e(V,{label:t("signatureMaxExp"),fieldId:"signatureMaxExp",className:"pf-v5-u-my-md",labelIcon:e(M,{helpText:t("signatureMaxExpHelp"),fieldLabelId:"signatureMaxExp"}),children:e(ae,{name:k("attributes.token.endpoint.auth.signing.max.exp"),defaultValue:"",control:s,render:({field:o})=>e(Ot,{value:o.value,onChange:o.onChange,units:["second","minute"],min:"1"})})})]})},Cs=()=>{const{t:n}=R();return l(K,{children:[e(ge,{name:k("attributes.x509.allow.regex.pattern.comparison"),label:n("allowRegexComparison"),labelIcon:n("allowRegexComparisonHelp"),stringify:!0}),e(ne,{name:k("attributes.x509.subjectdn"),label:n("subject"),labelIcon:n("subjectHelp"),rules:{required:n("required")}})]})},ks=({client:n,save:a,refresh:i})=>{const{adminClient:t}=X(),{t:s}=R(),{addAlert:o,addError:r}=oe(),c=n.id,[u,d]=g([]),{control:f,formState:{isDirty:p},handleSubmit:b}=se(),m=Qt({control:f,name:"clientAuthenticatorType",defaultValue:""}),[S,T]=g(""),[C,I]=g(""),v=u.find(h=>h.id===m),{componentTypes:A}=Fe(),z=ht(()=>A?.["org.keycloak.authentication.ClientAuthenticator"]?.find(h=>h.id===m)?.clientProperties,[m,A]);ee(()=>Promise.all([t.authenticationManagement.getClientAuthenticatorProviders(),t.clients.getClientSecret({id:c})]),([h,O])=>{d(h),T(O.value)},[]);async function B(h,O){try{const U=await h(c);return o(s(`${O}Success`),$.success),U}catch(U){r(`${O}Error`,U)}}const N=async()=>{const h=await B(O=>t.clients.generateNewClientSecret({id:O}),"clientSecret");T(h?.value||""),i()},[L,P]=ke({titleKey:"confirmClientSecretTitle",messageKey:"confirmClientSecretBody",continueButtonLabel:"yes",cancelButtonLabel:"no",onConfirm:N}),y=async()=>{const h=await B(O=>t.clients.generateRegistrationAccessToken({id:O}),"accessToken");I(h?.registrationAccessToken||"")},[w,x]=ke({titleKey:"confirmAccessTokenTitle",messageKey:"confirmAccessTokenBody",continueButtonLabel:"yes",cancelButtonLabel:"no",onConfirm:y});return e(de,{children:l(le,{onSubmit:b(a),isHorizontal:!0,className:"pf-v5-u-mt-md",role:"manage-clients",fineGrainedAccess:n.access?.configure,children:[e(P,{}),e(x,{}),l(Tt,{isFlat:!0,children:[l(je,{children:[e(Y,{name:"clientAuthenticatorType",label:s("clientAuthenticator"),labelIcon:s("clientAuthenticatorTypeHelp"),controller:{defaultValue:""},options:u.map(({id:h,displayName:O})=>({key:h,value:O||h}))}),(m==="client-jwt"||m==="client-secret-jwt")&&e(Ss,{clientAuthenticatorType:m}),m==="client-jwt"&&e(V,{children:e(mt,{variant:"info",isInline:!0,title:s("signedJWTConfirm")})}),m==="client-x509"&&e(Cs,{}),z&&e(ye,{children:e(yi,{properties:z,convertToName:h=>k(`attributes.${h}`)})}),e(Te,{children:e(E,{variant:"primary",type:"submit",isDisabled:!p,children:s("save")})})]}),v?.supportsSecret&&l(K,{children:[e(_e,{}),e(je,{children:e(vs,{client:n,secret:S,toggle:L})})]})]}),e(Tt,{isFlat:!0,children:e(je,{children:e(V,{label:s("registrationAccessToken"),fieldId:"kc-access-token",labelIcon:e(M,{helpText:s("registrationAccessTokenHelp"),fieldLabelId:"registrationAccessToken"}),children:l(We,{hasGutter:!0,children:[e(ve,{isFilled:!0,children:e(Un,{id:"kc-access-token",isReadOnly:!0,children:C})}),e(ve,{children:e(E,{variant:"secondary",onClick:w,children:s("regenerate")})})]})})})})]})})},In=({id:n,keyInfo:a})=>{const{t:i}=R();return e(At,{readOnly:!0,rows:5,id:n,"data-testid":"certificate",value:a?.certificate,"aria-label":i("certificate")})},Zt=({helpTextKey:n="certificateHelp",keyInfo:a,plain:i=!1})=>{const{t}=R(),s=Wa();return i?e(In,{id:s,keyInfo:a}):e(V,{label:t("certificate"),fieldId:s,labelIcon:e(M,{helpText:t(n),fieldLabelId:s}),children:e(In,{id:s,keyInfo:a})})},An="Certificate PEM",Ts=new Map([["PKCS12","p12"],["JKS","jks"],["BCFKS","bcfks"]]),sa=n=>Ts.get(n),Lt=({isSaml:n=!1,hasPem:a=!1,useFile:i=!1})=>{const{t}=R(),{watch:s}=se(),o=s("format"),{cryptoInfo:r}=Fe(),c=[...r?.supportedKeystoreTypes??[],...a?[An]:[]],u=["4096","3072","2048"];return l(ye,{className:"pf-v5-u-pt-lg",children:[e(Y,{name:"format",label:t("archiveFormat"),labelIcon:t("archiveFormatHelp"),controller:{defaultValue:c[0]},menuAppendTo:"parent",options:c}),i&&e(Oa,{label:t("importFile"),labelIcon:e(M,{helpText:t("importFileHelp"),fieldLabelId:"importFile"}),rules:{required:t("required")},name:"file",id:"importFile"}),o!==An&&e(vi,{hidePassword:i,isSaml:n}),!i&&l(K,{children:[e(Y,{name:"keySize",label:t("keySize"),labelIcon:t("keySizeHelp"),controller:{defaultValue:u[0]},menuAppendTo:"parent",options:u}),e(La,{name:"validity",label:t("validity"),labelIcon:t("validityHelp"),controller:{defaultValue:3,rules:{required:t("required"),min:1,max:10}}})]})]})},Is=({clientId:n,save:a,toggleDialog:i})=>{const{t}=R(),s=Le({defaultValues:{keyAlias:n},mode:"onChange"}),{handleSubmit:o,formState:{isValid:r}}=s;return l(Je,{variant:It.medium,title:t("generateKeys"),isOpen:!0,onClose:i,actions:[e(E,{id:"modal-confirm","data-testid":"confirm",isDisabled:!r,onClick:async()=>{await o(c=>{a(c),i()})()},children:t("generate")},"confirm"),e(E,{id:"modal-cancel","data-testid":"cancel",variant:fe.link,onClick:()=>{i()},children:t("cancel")},"cancel")],children:[e(Be,{children:e(me,{children:t("generateKeysDescription")})}),e(xe,{...s,children:e(Lt,{})})]})},Ft="jwt.credential",As=({clientId:n,save:a,refresh:i,hasConfigureAccess:t})=>{const{adminClient:s}=X(),{t:o}=R(),{control:r,getValues:c,formState:{isDirty:u}}=se(),{addAlert:d,addError:f}=oe(),[p,b]=g(),[m,S,T]=Ee(),[C,I,v]=Ee(),[A,z]=g(0),B=()=>{z(A+1),i()},N=Qt({control:r,name:k("attributes.use.jwks.url"),defaultValue:"false"});ee(async()=>{try{return await s.clients.getKeyInfo({id:n,attr:Ft})}catch(y){return f("getKeyInfoError",y),{}}},y=>b(y),[A]);const L=async y=>{try{const w=await s.clients.generateAndDownloadKey({id:n,attr:Ft},y);$e.saveAs(new Blob([w],{type:"application/octet-stream"}),`keystore.${sa(y.format??"")}`),d(o("generateSuccess"),$.success),B()}catch(w){f("generateError",w)}},P=async y=>{try{const w=new FormData,{file:x,...h}=y;for(const[O,U]of Object.entries(h))w.append(O,U);w.append("file",x),await s.clients.uploadCertificate({id:n,attr:Ft},w),d(o("importSuccess"),$.success),B()}catch(w){f("importError",w)}};return l(de,{variant:"light",className:"keycloak__form",children:[m&&e(Is,{clientId:c("clientId"),toggleDialog:S,save:L}),C&&e(Si,{toggleDialog:I,save:P}),l(Tt,{isFlat:!0,children:[e(Pa,{children:e(_a,{children:o("jwksUrlConfig")})}),e(je,{children:e(Be,{children:e(me,{children:o("keysIntro")})})}),e(je,{children:l(le,{role:"manage-clients",fineGrainedAccess:t,isHorizontal:!0,children:[e(ge,{name:k("attributes.use.jwks.url"),label:o("useJwksUrl"),labelIcon:o("useJwksUrlHelp"),stringify:!0}),N!=="true"&&(p?e(Zt,{plain:!0,keyInfo:p}):"No client certificate configured"),N==="true"&&e(ne,{name:k("attributes.jwks.url"),label:o("jwksUrl"),labelIcon:o("jwksUrlHelp"),type:"url"}),l(Te,{children:[e(E,{"data-testid":"saveKeys",onClick:a,isDisabled:!u,children:o("save")}),e(E,{"data-testid":"generate",variant:"secondary",onClick:()=>T(!0),children:o("generateNewKeys")}),e(E,{"data-testid":"import",variant:"secondary",onClick:()=>v(!0),isDisabled:N==="true",children:o("import")})]})]})})]})]})},Rs=({clientId:n,close:a,keyType:i})=>{const{adminClient:t}=X(),{t:s}=R(),{realm:o}=ue(),{addAlert:r,addError:c}=oe(),u=Le({defaultValues:{realmAlias:o}}),d=async f=>{try{const p=await t.clients.downloadKey({id:n,attr:i},f);$e.saveAs(new Blob([p],{type:"application/octet-stream"}),`keystore.${sa(f.format??"")}`),r(s("samlKeysExportSuccess")),a()}catch(p){c("samlKeysExportError",p)}};return e(Je,{variant:"medium",title:s("exportSamlKeyTitle"),isOpen:!0,onClose:a,actions:[e(E,{id:"modal-confirm","data-testid":"confirm",type:"submit",form:"export-saml-key-form",children:s("export")},"confirm"),e(E,{id:"modal-cancel","data-testid":"cancel",variant:"link",onClick:()=>{a()},children:s("cancel")},"cancel")],children:e(ye,{id:"export-saml-key-form",className:"pf-v5-u-pt-lg",onSubmit:u.handleSubmit(d),children:e(xe,{...u,children:e(Lt,{isSaml:!0})})})})},oa=async(n,a,i,t,s)=>{try{const o=new FormData,{file:r,...c}=a;Object.entries(c).map(([u,d])=>o.append(u==="format"?"keystoreFormat":u,d.toString())),o.append("file",r),await n.clients.uploadKey({id:i,attr:t},o),s()}catch(o){s(o)}},xs=({id:n,attr:a,localeKey:i,onClose:t,onCancel:s})=>{const{adminClient:o}=X(),{t:r}=R(),[c,u]=g(!1),[d,f]=g(),p=Le({mode:"onChange"}),{handleSubmit:b,formState:{isValid:m}}=p,{addAlert:S,addError:T}=oe(),C=async v=>{await oa(o,v,n,a,A=>{A?T("importError",A):S(r("importSuccess"),$.success)})},I=async()=>{try{const v=await o.clients.generateKey({id:n,attr:a});f(v),$e.saveAs(new Blob([v.privateKey],{type:"application/octet-stream"}),"private.key"),S(r("generateSuccess"),$.success)}catch(v){T("generateError",v)}};return e(Je,{variant:It.medium,"aria-label":r("enableClientSignatureRequiredModal"),header:l(Be,{children:[e(qt,{headingLevel:"h1",children:r("enableClientSignatureRequired",{key:r(i)})}),e(me,{children:r("enableClientSignatureRequiredExplain",{key:r(i)})})]}),isOpen:!0,onClose:t,actions:[e(E,{id:"modal-confirm","data-testid":"confirm",variant:"primary",isDisabled:!m&&!d,onClick:async()=>{c&&await b(C)(),t()},children:r("confirm")},"confirm"),e(E,{id:"modal-cancel","data-testid":"cancel",variant:fe.link,onClick:s,children:r("cancel")},"cancel")],children:l(xe,{...p,children:[l(ye,{isHorizontal:!0,children:[e(V,{label:r("selectMethod"),fieldId:"selectMethod",hasNoPaddingTop:!0,children:l(Na,{children:[e(sn,{children:e(lt,{isChecked:!c,name:"selectMethodType",onChange:()=>u(!1),label:r("selectMethodType.generate"),id:"selectMethodType-generate"})}),e(sn,{children:e(lt,{isChecked:c,name:"selectMethodType",onChange:()=>u(!0),label:r("selectMethodType.import"),id:"selectMethodType-import"})})]})}),!c&&e(V,{label:r("certificate"),fieldId:"certificate",labelIcon:e(M,{helpText:r(`saml${i}CertificateHelp`),fieldLabelId:"certificate"}),children:l(We,{hasGutter:!0,children:[e(ve,{isFilled:!0,children:e(Zt,{plain:!0,keyInfo:d})}),e(ve,{children:e(E,{variant:"secondary","data-testid":"generate",onClick:I,children:r("generate")})})]})})]}),c&&e(Lt,{useFile:!0,hasPem:!0})]})})},Es=({id:n,attr:a,onClose:i,onImported:t})=>{const{adminClient:s}=X(),{t:o}=R(),r=Le(),{handleSubmit:c,formState:{isValid:u}}=r,{addAlert:d,addError:f}=oe(),p=async b=>{await oa(s,b,n,a,m=>{m?f("importError",m):(d(o("importSuccess"),$.success),t())})};return e(Yt,{open:!0,toggleDialog:i,continueButtonLabel:"import",titleKey:"importKey",confirmButtonDisabled:!u,onConfirm:async()=>{await c(p)()},children:e(xe,{...r,children:e(Lt,{useFile:!0,hasPem:!0})})})},Bt=["saml.signing","saml.encryption"],De={"saml.signing":{name:k("attributes.saml.client.signature"),title:"signingKeysConfig",key:"clientSignature",regenerateKey:"reGenerateSigning",relatedKeys:[]},"saml.encryption":{name:k("attributes.saml.encrypt"),title:"encryptionKeysConfig",key:"encryptAssertions",regenerateKey:"reGenerateEncryption",relatedKeys:[k("attributes.saml.encryption.algorithm"),k("attributes.saml.encryption.keyAlgorithm"),k("attributes.saml.encryption.digestMethod"),k("attributes.saml.encryption.maskGenerationFunction")]}},ws=({clientId:n,keyInfo:a,attr:i,onChanged:t,onGenerate:s,onImport:o,save:r})=>{const{t:c}=R(),{control:u,watch:d}=se(),f=De[i].title,p=De[i].key,b=De[i].name,[m,S]=Ee(),T=d(b),C=d(k("attributes.saml.useMetadataDescriptorUrl"),"false");return l(K,{children:[m&&e(Rs,{keyType:i,clientId:n,close:S}),l(Ha,{title:c(f),className:"kc-form-panel__panel",children:[e(Be,{className:"pf-v5-u-pb-lg",children:e(me,{children:c(`${f}Explain`)})}),e(le,{role:"manage-clients",isHorizontal:!0,children:e(V,{labelIcon:e(M,{helpText:c(`${p}Help`),fieldLabelId:p}),label:c(p),fieldId:p,hasNoPaddingTop:!0,children:e(ae,{name:b,control:u,defaultValue:"false",render:({field:I})=>e(he,{"data-testid":p,id:p,label:c("on"),labelOff:c("off"),isChecked:I.value==="true",onChange:(v,A)=>{const z=A.toString();z==="true"&&C==="true"?(I.onChange(z),r()):z==="true"?(t(i),I.onChange(z)):s(i,!1)},"aria-label":c(p)})})})})]}),C!=="true"&&a?.certificate&&T==="true"&&e(Tt,{isFlat:!0,children:e(je,{className:"kc-form-panel__body",children:l(ye,{isHorizontal:!0,children:[e(Zt,{helpTextKey:`saml${p}CertificateHelp`,keyInfo:a}),l(Te,{children:[e(E,{variant:"secondary",onClick:()=>s(i,!0),children:c("regenerate")}),e(E,{variant:"secondary",onClick:()=>o(i),children:c("importKey")}),e(E,{variant:"tertiary",onClick:S,children:c("export")})]})]})})})]})},Ds=({clientId:n,save:a})=>{const{adminClient:i}=X(),{t}=R(),[s,o]=g(),[r,c]=g(),[u,d]=g(),[f,p]=g(),[b,m]=g(0),{setValue:S}=se(),{addAlert:T,addError:C}=oe();ee(()=>Promise.all(Bt.map(P=>i.clients.getKeyInfo({id:n,attr:P}))),P=>c(P),[b]);const I=async P=>{const y=Bt.indexOf(P);try{const w=[...r||[]];w[y]=await i.clients.generateKey({id:n,attr:P}),c(w),$e.saveAs(new Blob([w[y].privateKey],{type:"application/octet-stream"}),"private.key"),T(t("generateSuccess"),$.success)}catch(w){C("generateError",w)}},v=u?De[u].key:"",[A,z]=ke({titleKey:t("disableSigning",{key:t(v)}),messageKey:t("disableSigningExplain",{key:t(v)}),continueButtonLabel:"yes",cancelButtonLabel:"no",onConfirm:()=>{S(De[u].name,"false");for(const P of De[u].relatedKeys)S(P,"");a()}}),B=u?De[u].regenerateKey:"",[N,L]=ke({titleKey:B,messageKey:B+"Explain",continueButtonLabel:"yes",cancelButtonLabel:"no",onConfirm:async()=>{await I(u)}});return l(de,{variant:"light",className:"keycloak__form",children:[s&&e(xs,{id:n,attr:s,localeKey:v,onClose:()=>{o(void 0);for(const P of De[u].relatedKeys)S(P,"");a(),m(b+1)},onCancel:()=>{S(De[u].name,"false"),o(void 0)}}),e(z,{}),e(L,{}),Bt.map((P,y)=>l(Bn,{children:[f===P&&e(Es,{id:n,attr:P,onClose:()=>p(void 0),onImported:()=>m(b+1)}),e(ws,{clientId:n,keyInfo:r?.[y],attr:P,onChanged:w=>{o(w),d(w)},onGenerate:(w,x)=>{d(w),x?N():A()},onImport:()=>p(P),save:a})]},P))]})},St="dedicated",Os=({clientId:n,refresh:a,fineGrainedAccess:i,...t})=>{const{adminClient:s}=X(),{t:o}=R(),{addAlert:r,addError:c}=oe(),{hasAccess:u}=Ie(),d=p=>p.id===St,f=u("manage-clients")||i;return e(xi,{isDisabled:d(t)||!f,clientScope:t,type:t.type,onSelect:async p=>{try{await Ei(s,n,t,t.type,p),r(o("clientScopeSuccess"),$.success),a()}catch(b){c("clientScopeError",b)}}})},Ls=({clientId:n,protocol:a,clientName:i,fineGrainedAccess:t})=>{const{adminClient:s}=X(),o=xt(),{t:r}=R(),{addAlert:c,addError:u}=oe(),{realm:d}=ue(),f=Di(),[p,b]=g("name"),[m,S]=g(hn.none),[T,C]=g(!1),[I,v]=g(),[A,z]=g([]),B=D=>z(D.filter(({id:re})=>re!==St)),[N,L]=g(!1),[P,y]=g(0),w=()=>y(P+1),x=D=>D.id===St,{hasAccess:h}=Ie(),O=h("manage-clients")||t,U=h("view-clients")||t,H=async(D,re,Ae)=>{const He=await s.clients.listDefaultClientScopes({id:n}),Ze=await s.clients.listOptionalClientScopes({id:n}),J=await s.clientScopes.find(),Q=ce=>J.find(Me=>ce===Me.id),pe=Ze.map(ce=>{const Me=Q(ce.id);return{...ce,type:gn.optional,description:Me?.description}}),Ue=He.map(ce=>{const Me=Q(ce.id);return{...ce,type:gn.default,description:Me?.description}});let Ke=[...pe,...Ue];const Pt=Ke.map(ce=>ce.name),we=a===ze?o(Et.OpenId4VCI)?[ze,ia]:[ze]:[a];v(J.filter(ce=>!Pt.includes(ce.name)).filter(ce=>ce.protocol&&we.includes(ce.protocol))),Ke=f(Ke,Oi("name")),U&&Ke.unshift({id:St,name:r("dedicatedScopeName",{clientName:i}),type:hn.none,description:r("dedicatedScopeDescription")});const _t=p==="name"?Ii(Ae):Ai(m),bt=Number(D);return Ke.filter(_t).slice(bt,bt+Number(re))},[te,W]=ke({titleKey:r("deleteClientScope",{count:A.length,name:A[0]?.name}),messageKey:"deleteConfirmClientScopes",continueButtonLabel:"delete",continueButtonVariant:fe.danger,onConfirm:async()=>{try{await fn(s,n,A[0],A[0].type),c(r("clientScopeRemoveSuccess"),$.success),w()}catch(D){u("clientScopeRemoveError",D)}}});return l(K,{children:[I&&e(li,{clientScopes:I,clientName:i,open:T,toggleDialog:()=>C(!T),onAdd:async D=>{try{await Promise.all(D.map(async re=>await Ri(s,n,re.scope,re.type))),c(r("clientScopeSuccess"),$.success),w()}catch(re){u("clientScopeError",re)}}}),e(Rt,{loader:H,ariaLabelKey:"clientScopeList",searchPlaceholderKey:p==="name"?"searchByName":void 0,canSelectAll:!0,isPaginated:!0,isSearching:p==="type",onSelect:D=>B([...D]),searchTypeComponent:e(Ti,{searchType:p,onSelect:D=>b(D)}),toolbarItem:l(K,{children:[e(Ci,{searchType:p,type:m,onSelect:D=>b(D),onType:D=>{S(D),w()}}),O&&l(K,{children:[e(W,{}),e(be,{children:e(E,{onClick:()=>C(!0),children:r("addClientScope")})}),e(be,{children:e(ki,{clientId:n,selectedRows:A,refresh:w})}),e(be,{children:e(Kn,{onOpenChange:D=>L(D),toggle:D=>e(dt,{"data-testid":"kebab","aria-label":"Kebab toggle",ref:D,variant:"plain",onClick:()=>L(!N),isExpanded:N,children:e(Ma,{})}),isOpen:N,children:e(Mn,{children:e(Ge,{isDisabled:A.length===0,onClick:async()=>{try{await Promise.all(A.map(D=>fn(s,n,{...D},D.type))),L(!1),B([]),c(r("clientScopeRemoveSuccess")),w()}catch(D){u("clientScopeRemoveError",D)}},children:r("remove")},"deleteAll")})})})]})]}),columns:[{name:"name",displayKey:"assignedClientScope",cellRenderer:D=>x(D)?e(Ce,{to:Ka({realm:d,clientId:n}),children:D.name}):D.name},{name:"type",displayKey:"assignedType",cellRenderer:D=>e(Os,{clientId:n,refresh:w,...D})},{name:"description",cellFormatters:[wi(r)]}],actions:O?[{title:r("remove"),onRowClick:async D=>(B([D]),te(),!0)}]:[],emptyState:e(Ne,{message:r("emptyClientScopes"),instructions:r("emptyClientScopesInstructions"),primaryActionText:r("emptyClientScopesPrimaryAction"),onPrimaryAction:()=>C(!0)})},P)]})},Ut=({text:n,user:a,label:i})=>{const{t}=R();return a?e(ta,{id:i,actions:e(na,{children:e(Zn,{id:"code",text:n,label:i})}),children:e(At,{id:`text-area-${i}`,rows:20,value:n,"aria-label":i})}):l(Pn,{variant:"lg",id:i,children:[e(_n,{titleText:e(K,{children:t(`${i}No`)}),headingLevel:"h2"}),e(Nn,{children:t(`${i}IsDisabled`)})]})},Ps=({protocolMappers:n})=>{const[a,i]=g(0);return ft(()=>{i(a+1)},[n]),e(Rt,{loader:()=>Promise.resolve(n),ariaLabelKey:"effectiveProtocolMappers",searchPlaceholderKey:"searchForProtocol","data-testid":"effective-protocol-mappers",columns:[{name:"mapperName",displayKey:"name"},{name:"containerName",displayKey:"parentClientScope"},{name:"type.category",displayKey:"category"},{name:"type.priority",displayKey:"priority"}]},a)},_s=({effectiveRoles:n})=>{const[a,i]=g(0);return ft(()=>{i(a+1)},[n]),e(Rt,{loader:()=>Promise.resolve(n),ariaLabelKey:"effectiveRoleScopeMappings",searchPlaceholderKey:"searchForRole","data-testid":"effective-role-scope-mappings",columns:[{name:"name",displayKey:"role"},{name:"containerId",displayKey:"origin"}]},a)},Ns=({clientId:n,protocol:a})=>{const{adminClient:i}=X(),t="openid",{t:s}=R(),{enabled:o}=xn(),{realm:r}=ue(),c=Fe().protocolMapperTypes[a],[u,d]=g([]),[f,p]=g(!1),[b,m]=g([t]),[S,T]=g(0),[C,I]=g(""),v=()=>I(`${new Date().getTime()}`),[A,z]=g([]),[B,N]=g([]),[L,P]=g(""),[y,w]=g(""),[x,h]=g(""),O=et(null),U=et(null),H=et(null),te=et(null),W=et(null),D=Le(),{watch:re}=D,Ae=re("targetAudience"),{hasAccess:He}=Ie(),Ze=He("view-users");return ee(()=>i.clients.listOptionalClientScopes({id:n}),J=>d(J),[]),ee(async()=>{const J=b.join(" "),Q=await i.clients.evaluatePermission({id:n,roleContainer:r,scope:J,type:"granted"});return{mapperList:await i.clients.evaluateListProtocolMapper({id:n,scope:J}),effectiveRoles:Q}},({mapperList:J,effectiveRoles:Q})=>{z(Q),J.map(pe=>{pe.type=c.find(Ue=>Ue.id===pe.protocolMapper)}),N(J),v()},[b]),ee(async()=>{const J=b.join(" "),Q=D.getValues("user");if(Q.length===0)return[];const pe=Ae.join(" ");return await Promise.all([i.clients.evaluateGenerateAccessToken({id:n,userId:Q[0],scope:J,audience:pe}),i.clients.evaluateGenerateUserInfo({id:n,userId:Q[0],scope:J}),i.clients.evaluateGenerateIdToken({id:n,userId:Q[0],scope:J})])},([J,Q,pe])=>{P(qe(J)),w(qe(Q)),h(qe(pe))},[D.getValues("user"),b,Ae]),l(K,{children:[l(de,{variant:"light",children:[o&&e(Be,{className:"keycloak__section_intro__help",children:l(me,{children:[e(Li,{})," ",s("evaluateExplain")]})}),l(ye,{isHorizontal:!0,children:[e(V,{label:s("scopeParameter"),fieldId:"scopeParameter",labelIcon:e(M,{helpText:s("scopeParameterHelp"),fieldLabelId:"scopeParameter"}),children:l(We,{hasGutter:!0,children:[e(ve,{isFilled:!0,children:e(Wt,{toggleId:"scopeParameter",variant:Ct.typeaheadMulti,typeAheadAriaLabel:s("scopeParameter"),onToggle:()=>p(!f),isOpen:f,selections:b,onSelect:J=>{const Q=J;b.includes(Q)?Q!==t&&m(b.filter(pe=>pe!==Q)):m([...b,Q])},"aria-labelledby":s("scopeParameter"),placeholderText:s("scopeParameterPlaceholder"),children:u.map((J,Q)=>e(Re,{value:J.name,children:J.name},Q))})}),e(ve,{children:e(Un,{className:"keycloak__scopes_evaluate__clipboard-copy",children:b.join(" ")})})]})}),Ze&&e(xe,{...D,children:e(Jn,{name:"user",label:"users",helpText:s("userHelp"),defaultValue:"",variant:Ct.typeahead,isRequired:!0})}),e(xe,{...D,children:e(Wn,{name:"targetAudience",label:s("targetAudience"),helpText:s("targetAudienceHelp"),defaultValue:[],variant:"typeaheadMulti",placeholderText:s("targetAudiencePlaceHolder")})})]})]}),l(Va,{hasGutter:!0,className:"keycloak__scopes_evaluate__tabs",children:[l(on,{span:8,children:[e(tt,{"aria-labelledby":"pf-tab-0-effectiveProtocolMappers",eventKey:0,id:"effectiveProtocolMappers",ref:O,children:e(Ps,{protocolMappers:B})}),e(tt,{"aria-labelledby":"pf-tab-0-effectiveRoleScopeMappings",eventKey:1,id:"effectiveRoleScopeMappings",ref:U,hidden:!0,children:e(_s,{effectiveRoles:A})}),e(tt,{"aria-labelledby":s("generatedAccessToken"),eventKey:2,id:"tab-generated-access-token",ref:H,hidden:!0,children:e(Ut,{text:L,user:D.getValues("user"),label:"generatedAccessToken"})}),e(tt,{"aria-labelledby":s("generatedIdToken"),eventKey:3,id:"tab-generated-id-token",ref:te,hidden:!0,children:e(Ut,{text:x,user:D.getValues("user"),label:"generatedIdToken"})}),e(tt,{"aria-labelledby":s("generatedUserInfo"),eventKey:4,id:"tab-generated-user-info",ref:W,hidden:!0,children:e(Ut,{text:y,user:D.getValues("user"),label:"generatedUserInfo"})})]}),e(on,{span:4,children:l(ea,{id:"tabs",isVertical:!0,activeKey:S,onSelect:(J,Q)=>T(Q),children:[e(q,{id:"effectiveProtocolMappers","aria-controls":"effectiveProtocolMappers","data-testid":"effective-protocol-mappers-tab",eventKey:0,title:l(G,{children:[s("effectiveProtocolMappers")," ",e(M,{fieldLabelId:"effectiveProtocolMappers",helpText:s("effectiveProtocolMappersHelp"),noVerticalAlign:!1,unWrap:!0})]}),tabContentRef:O}),e(q,{id:"effectiveRoleScopeMappings","aria-controls":"effectiveRoleScopeMappings","data-testid":"effective-role-scope-mappings-tab",eventKey:1,title:l(G,{children:[s("effectiveRoleScopeMappings")," ",e(M,{fieldLabelId:"effectiveRoleScopeMappings",helpText:s("effectiveRoleScopeMappingsHelp"),noVerticalAlign:!1,unWrap:!0})]}),tabContentRef:U}),e(q,{id:"generatedAccessToken","aria-controls":"generatedAccessToken","data-testid":"generated-access-token-tab",eventKey:2,title:l(G,{children:[s("generatedAccessToken")," ",e(M,{fieldLabelId:"generatedAccessToken",helpText:s("generatedAccessTokenHelp"),noVerticalAlign:!1,unWrap:!0})]}),tabContentRef:H}),e(q,{id:"generatedIdToken","aria-controls":"generatedIdToken","data-testid":"generated-id-token-tab",eventKey:3,title:l(G,{children:[s("generatedIdToken")," ",e(M,{fieldLabelId:"generatedIdToken",helpText:s("generatedIdTokenHelp"),noVerticalAlign:!1,unWrap:!0})]}),tabContentRef:te}),e(q,{id:"generatedUserInfo","aria-controls":"generatedUserInfo","data-testid":"generated-user-info-tab",eventKey:4,title:l(G,{children:[s("generatedUserInfo")," ",e(M,{fieldLabelId:"generatedUserInfo",helpText:s("generatedUserInfoHelp"),noVerticalAlign:!1,unWrap:!0})]}),tabContentRef:W})]},C)})]})]})},Hs=({client:n})=>{const{adminClient:a}=X(),{t:i}=R(),{addAlert:t,addError:s}=oe(),{realm:o}=ue(),[r,c]=g(),{hasAccess:u}=Ie(),d=u("manage-clients");ee(()=>a.clients.getServiceAccountUser({id:n.id}),p=>c(p),[]);const f=async p=>{try{const b=p.filter(m=>m.client===void 0).map(m=>m.role).flat();await a.users.addRealmRoleMappings({id:r?.id,roles:b}),await Promise.all(p.filter(m=>m.client!==void 0).map(m=>a.users.addClientRoleMappings({id:r?.id,clientUniqueId:m.client.id,roles:[m.role]}))),t(i("roleMappingUpdatedSuccess"),$.success)}catch(b){s("roleMappingUpdatedError",b)}};return r?l(K,{children:[l(de,{className:"pf-v5-u-pb-0",children:[e(Fn,{className:"pf-v5-c-alert__icon keycloak--service-account--info-text"}),e("span",{className:"pf-v5-u-pl-sm",children:l(_i,{i18nKey:"manageServiceAccountUser",children:["",e(Ce,{to:za({realm:o,id:r.id,tab:"settings"}),children:{link:r.username}})]})})]}),e(Pi,{name:n.clientId,id:r.id,type:"users",isManager:d||n.access?.configure,save:f})]}):e(Oe,{})},Ks=({onChange:n,value:a,save:i,client:t,toggleDownloadDialog:s,toggleDeleteDialog:o})=>{const{t:r}=R(),[c,u]=ke({titleKey:"disableConfirmClientTitle",messageKey:"disableConfirmClient",continueButtonLabel:"disable",onConfirm:()=>{n(!a),i()}}),d=ht(()=>{const m=ci(r,t.protocol??"openid-connect");return[{text:t.bearerOnly?e(Hn,{"data-testid":"bearer-only-explainer-tooltip",content:r("explainBearerOnly"),children:e(dn,{"data-testid":"bearer-only-explainer-label",icon:e(Fn,{}),children:m})}):e(dn,{children:m})}]},[t,r]),{hasAccess:f}=Ie(),p=f("manage-clients")||t.access?.configure,b=[e(Ge,{onClick:s,children:r("downloadAdapterConfig")},"download"),e(Ge,{onClick:()=>$a(t),children:r("export")},"export"),...!vt(t)&&p?[e(_e,{},"divider"),e(Ge,{"data-testid":"delete-client",onClick:o,children:r("delete")},"delete")]:[]];return l(K,{children:[e(u,{}),e(Xa,{titleKey:t.clientId,subKey:"clientsExplain",badges:d,divider:!1,isReadOnly:!p,helpTextKey:"enableDisable",dropdownItems:b,isEnabled:a,onToggle:m=>{m?(n(m),i()):c()}})]})};function $o(){const{adminClient:n}=X(),{t:a}=R(),{addAlert:i,addError:t}=oe(),{realm:s}=ue(),{hasAccess:o}=Ie(),r=xt(),c=o("manage-authorization"),u=o("view-authorization"),d=o("manage-clients"),f=o("view-clients"),p=o("view-users"),b=r(Et.AdminFineGrainedAuthz)&&(c||u),m=pt(),[S,T]=Ee(),[C,I]=Ee(),v=Le(),{clientId:A}=Xt(),[z,B]=g(0),N=()=>B(z+1),L=Hi(A),P=Qt({control:v.control,name:"clientAuthenticatorType",defaultValue:"client-secret"}),[y,w]=g(),x=async()=>{const j=await n.clients.listRoles({id:A});return Gn(j,Ve=>Ve.name?.toUpperCase())},h=j=>Fa({realm:s,clientId:A,tab:j}),O=Z(h("settings")),U=Z(h("keys")),H=Z(h("credentials")),te=Z(h("roles")),W=Z(h("clientScopes")),D=Z(h("authorization")),re=Z(h("serviceAccount")),Ae=Z(h("sessions")),He=Z(h("permissions")),Ze=Z(h("advanced")),J=Z(h("events")),[Q,pe]=g("userEvents"),Ue=j=>rn({realm:s,clientId:A,tab:j}),Ke=Z(Ue("setup")),Pt=Z(Ue("evaluate")),we=j=>ln({realm:s,clientId:A,tab:j}),_t=Z(we("settings")),bt=Z(we("resources")),ce=Z(we("scopes")),Me=Z(we("policies")),Nt=Z(we("permissions")),ra=Z(we("evaluate")),la=Z(we("export")),[ca,da]=ke({titleKey:"clientDeleteConfirmTitle",messageKey:"clientDeleteConfirm",continueButtonLabel:"delete",continueButtonVariant:fe.danger,onConfirm:async()=>{try{await n.clients.del({id:A}),i(a("clientDeletedSuccess"),$.success),m(Ba({realm:s}))}catch(j){t("clientDeleteError",j)}}}),Ht=j=>{ja(j,v.setValue),j.attributes?.["acr.loa.map"]&&v.setValue(k("attributes.acr.loa.map"),Object.entries(JSON.parse(j.attributes["acr.loa.map"])).flatMap(([Ve,Kt])=>({key:Ve,value:Kt}))),v.reset(v.getValues(),{keepDirty:!1})};ee(()=>n.clients.findOne({id:A}),j=>{if(!j)throw new Error(a("notFound"));w(Ua(j)),Ht(j)},[A,z]);const Pe=async({confirmed:j=!1,messageKey:Ve="clientSaveSuccess"}={confirmed:!1,messageKey:"clientSaveSuccess"})=>{if(!await v.trigger())return;if(!y?.publicClient&&y?.clientAuthenticatorType!==P&&!j){I();return}const Kt=cn(v.getValues()),yt=cn(Kt);yt.attributes?.["acr.loa.map"]&&(yt.attributes["acr.loa.map"]=JSON.stringify(Object.fromEntries(yt.attributes["acr.loa.map"].filter(({key:Se})=>Se!=="").map(({key:Se,value:ua})=>[Se,ua]))));try{const Se={...y,...yt};Se.clientId=Se.clientId?.trim(),await n.clients.update({id:A},Se),Ht(Se),w(Se),i(a(Ve),$.success)}catch(Se){t("clientSaveError",Se)}};return y?l(K,{children:[e(Yt,{continueButtonLabel:"yes",cancelButtonLabel:"no",titleKey:a("changeAuthenticatorConfirmTitle",{clientAuthenticatorType:P}),open:C,toggleDialog:I,onConfirm:()=>Pe({confirmed:!0}),children:e(K,{children:a("changeAuthenticatorConfirm",{clientAuthenticatorType:P})})}),e(da,{}),S&&e(Mi,{id:y.id,protocol:y.protocol,open:!0,toggleDialog:T}),e(ae,{name:"enabled",control:v.control,defaultValue:!0,render:({field:j})=>e(Ks,{value:j.value,onChange:j.onChange,client:y,save:Pe,toggleDeleteDialog:ca,toggleDownloadDialog:T})}),e(de,{variant:"light",className:"pf-v5-u-p-0",children:e(xe,{...v,children:l(Mt,{"data-testid":"client-tabs","aria-label":"client-tabs",isBox:!0,mountOnEnter:!0,children:[e(q,{id:"settings","data-testid":"clientSettingsTab",title:e(G,{children:a("settings")}),...O,children:e(es,{client:y,save:()=>Pe(),reset:()=>Ht(y)})}),(!y.publicClient&&!vt(y)||y.protocol==="saml")&&l(q,{id:"keys","data-testid":"keysTab",title:e(G,{children:a("keys")}),...U,children:[y.protocol==="openid-connect"&&e(As,{clientId:A,save:Pe,refresh:N,hasConfigureAccess:y.access?.configure}),y.protocol==="saml"&&e(Ds,{clientId:A,save:Pe})]}),!y.publicClient&&!vt(y)&&(f||y.access?.configure||y.access?.view)&&e(q,{id:"credentials",title:e(G,{children:a("credentials")}),...H,children:e(ks,{client:y,save:Pe,refresh:N},z)}),e(q,{id:"roles","data-testid":"rolesTab",title:e(G,{children:a("roles")}),...te,children:e(Ya,{loader:x,paginated:!1,messageBundle:"client",toCreate:Ga({realm:s,clientId:y.id}),toDetail:j=>qa({realm:s,clientId:y.id,id:j,tab:"details"}),isReadOnly:!(d||y.access?.configure)})}),!vt(y)&&!y.bearerOnly&&e(q,{id:"clientScopes","data-testid":"clientScopesTab",title:e(G,{children:a("clientScopes")}),...W,children:l(Mt,{defaultLocation:rn({realm:s,clientId:A,tab:"setup"}),mountOnEnter:!0,unmountOnExit:!0,children:[e(q,{id:"setup","data-testid":"clientScopesSetupTab",title:e(G,{children:a("setup")}),...Ke,children:e(Ls,{clientName:y.clientId,clientId:A,protocol:y.protocol,fineGrainedAccess:y.access?.manage})}),e(q,{id:"evaluate","data-testid":"clientScopesEvaluateTab",title:e(G,{children:a("evaluate")}),...Pt,children:e(Ns,{clientId:A,protocol:y.protocol})})]})}),y.authorizationServicesEnabled&&!L&&(c||u)&&e(q,{id:"authorization","data-testid":"authorizationTab",title:e(G,{children:a("authorization")}),...D,children:l(Mt,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:ln({realm:s,clientId:A,tab:"settings"}),children:[e(q,{id:"settings","data-testid":"authorizationSettings",title:e(G,{children:a("settings")}),..._t,children:e(ys,{clientId:A})}),e(q,{id:"resources","data-testid":"authorizationResources",title:e(G,{children:a("resources")}),...bt,children:e(fs,{clientId:A,isDisabled:!c})}),e(q,{id:"scopes","data-testid":"authorizationScopes",title:e(G,{children:a("scopes")}),...ce,children:e(gs,{clientId:A,isDisabled:!c})}),e(q,{id:"policies","data-testid":"authorizationPolicies",title:e(G,{children:a("policies")}),...Me,children:e(hi,{clientId:A,isDisabled:!c})}),e(q,{id:"permissions","data-testid":"authorizationPermissions",title:e(G,{children:a("permissions")}),...Nt,children:e(ps,{clientId:A,isDisabled:!c})}),p&&e(q,{id:"evaluate","data-testid":"authorizationEvaluate",title:e(G,{children:a("evaluate")}),...ra,children:e(rs,{client:y,save:Pe})}),o("manage-authorization")&&e(q,{id:"export","data-testid":"authorizationExport",title:e(G,{children:a("export")}),...la,children:e(cs,{})})]})}),y.serviceAccountsEnabled&&p&&e(q,{id:"serviceAccount","data-testid":"serviceAccountTab",title:e(G,{children:a("serviceAccount")}),...re,children:e(Hs,{client:y})}),e(q,{id:"sessions","data-testid":"sessionsTab",title:e(G,{children:a("sessions")}),...Ae,children:e(Qi,{client:y})}),b&&(d||y.access?.manage)&&e(q,{id:"permissions","data-testid":"permissionsTab",title:e(G,{children:a("permissions")}),...He,children:e(Qa,{id:y.id,type:"clients"})}),e(q,{id:"advanced","data-testid":"advancedTab",title:e(G,{children:a("advanced")}),...Ze,children:e(Ji,{save:Pe,client:y})}),o("view-events")&&e(q,{"data-testid":"events-tab",title:e(G,{children:a("events")}),...J,children:l(ea,{activeKey:Q,onSelect:(j,Ve)=>pe(Ve),children:[e(q,{eventKey:"userEvents",title:e(G,{children:a("userEvents")}),children:e(Ni,{client:y.clientId})}),e(q,{eventKey:"adminEvents",title:e(G,{children:a("adminEvents")}),children:e(Ki,{resourcePath:`clients/${y.id}`})})]})})]})})})]}):e(Oe,{})}export{$o as default};
//# sourceMappingURL=ClientDetails-B6siFDnv.js.map
