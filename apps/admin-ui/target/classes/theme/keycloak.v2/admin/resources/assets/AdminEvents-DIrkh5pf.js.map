{"version":3,"file":"AdminEvents-DIrkh5pf.js","sources":["../../../../../../../src/events/ResourceLinks.tsx","../../../../../../../src/events/AdminEvents.tsx"],"sourcesContent":["import { ReactElement } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Tooltip } from \"@patternfly/react-core\";\r\n\r\nimport type AdminEventRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/adminEventRepresentation\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { toClient } from \"../clients/routes/Client\";\r\nimport { toGroups } from \"../groups/routes/Groups\";\r\nimport { toClientScope } from \"../client-scopes/routes/ClientScope\";\r\nimport { toUser } from \"../user/routes/User\";\r\nimport { toRealmRole } from \"../realm-roles/routes/RealmRole\";\r\nimport { toFlow } from \"../authentication/routes/Flow\";\r\nimport { toEditOrganization } from \"../organizations/routes/EditOrganization\";\r\n\r\ntype ResourceLinkProps = {\r\n  event: AdminEventRepresentation;\r\n};\r\n\r\nconst MAX_TEXT_LENGTH = 38;\r\nconst Truncate = ({\r\n  text,\r\n  children,\r\n}: {\r\n  text?: string;\r\n  children: (text: string) => ReactElement;\r\n}) => {\r\n  const definedText = text || \"\";\r\n  const needsTruncation = definedText.length > MAX_TEXT_LENGTH;\r\n  const truncatedText = definedText.substring(0, MAX_TEXT_LENGTH);\r\n  return needsTruncation ? (\r\n    <Tooltip content={text}>{children(truncatedText + \"â€¦\")}</Tooltip>\r\n  ) : (\r\n    children(definedText)\r\n  );\r\n};\r\n\r\nconst isLinkable = (event: AdminEventRepresentation) => {\r\n  if (event.operationType === \"DELETE\") {\r\n    return false;\r\n  }\r\n  return (\r\n    event.resourceType === \"USER\" ||\r\n    event.resourceType === \"GROUP_MEMBERSHIP\" ||\r\n    event.resourceType === \"GROUP\" ||\r\n    event.resourceType === \"CLIENT\" ||\r\n    event.resourceType === \"ORGANIZATION\" ||\r\n    event.resourceType === \"ORGANIZATION_MEMBERSHIP\" ||\r\n    event.resourceType?.startsWith(\"AUTHORIZATION_RESOURCE\") ||\r\n    event.resourceType === \"CLIENT_SCOPE\" ||\r\n    event.resourceType === \"AUTH_FLOW\" ||\r\n    event.resourcePath?.startsWith(\"roles-by-id\")\r\n  );\r\n};\r\n\r\nconst idRegex = new RegExp(\r\n  /([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,\r\n);\r\n\r\nconst createLink = (realm: string, event: AdminEventRepresentation) => {\r\n  const part = idRegex.exec(event.resourcePath!);\r\n  if (!part) {\r\n    console.warn(\"event didn't contain a valid link\", event);\r\n    return \"\";\r\n  }\r\n  const id = part[1];\r\n\r\n  if (\r\n    event.resourceType === \"CLIENT\" ||\r\n    event.resourceType?.startsWith(\"AUTHORIZATION_RESOURCE\")\r\n  ) {\r\n    return toClient({\r\n      realm,\r\n      clientId: id,\r\n      tab: event.resourceType === \"CLIENT\" ? \"settings\" : \"authorization\",\r\n    });\r\n  }\r\n\r\n  if (event.resourceType === \"GROUP\") {\r\n    return toGroups({ realm, id });\r\n  }\r\n\r\n  if (event.resourceType === \"CLIENT_SCOPE\") {\r\n    return toClientScope({ realm, id, tab: \"settings\" });\r\n  }\r\n\r\n  if (\r\n    event.resourceType === \"USER\" ||\r\n    event.resourceType === \"GROUP_MEMBERSHIP\"\r\n  ) {\r\n    return toUser({ realm, id, tab: \"settings\" });\r\n  }\r\n\r\n  if (event.resourceType === \"AUTH_FLOW\") {\r\n    return toFlow({ realm, id, usedBy: \"-\" });\r\n  }\r\n\r\n  if (event.resourcePath?.startsWith(\"roles-by-id\")) {\r\n    return toRealmRole({ realm, id, tab: \"details\" });\r\n  }\r\n\r\n  if (event.resourceType === \"ORGANIZATION\") {\r\n    return toEditOrganization({ realm, id, tab: \"settings\" });\r\n  }\r\n\r\n  if (event.resourceType === \"ORGANIZATION_MEMBERSHIP\") {\r\n    return toEditOrganization({ realm, id, tab: \"members\" });\r\n  }\r\n\r\n  return \"\";\r\n};\r\n\r\nexport const ResourceLink = ({ event }: ResourceLinkProps) => {\r\n  const { realm } = useRealm();\r\n  return (\r\n    <Truncate text={event.resourcePath}>\r\n      {(text) =>\r\n        isLinkable(event) ? (\r\n          <Link to={createLink(realm, event)}>{text}</Link>\r\n        ) : (\r\n          <span>{text}</span>\r\n        )\r\n      }\r\n    </Truncate>\r\n  );\r\n};\r\n\r\nexport const CellResourceLinkRenderer = (\r\n  adminEvent: AdminEventRepresentation,\r\n) => <ResourceLink event={adminEvent} />;\r\n","import type AdminEventRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/adminEventRepresentation\";\r\nimport {\r\n  Action,\r\n  KeycloakDataTable,\r\n  KeycloakSelect,\r\n  ListEmptyState,\r\n  SelectVariant,\r\n  TextControl,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Button,\r\n  Chip,\r\n  ChipGroup,\r\n  DatePicker,\r\n  DescriptionList,\r\n  DescriptionListDescription,\r\n  DescriptionListGroup,\r\n  DescriptionListTerm,\r\n  Flex,\r\n  FlexItem,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  ModalVariant,\r\n  SelectOption,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  Table,\r\n  TableVariant,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n  cellWidth,\r\n} from \"@patternfly/react-table\";\r\nimport { pickBy } from \"lodash-es\";\r\nimport { PropsWithChildren, useMemo, useState } from \"react\";\r\nimport { Controller, FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { EventsBanners } from \"../Banners\";\r\nimport DropdownPanel from \"../components/dropdown-panel/DropdownPanel\";\r\nimport CodeEditor from \"../components/form/CodeEditor\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport { useServerInfo } from \"../context/server-info/ServerInfoProvider\";\r\nimport { prettyPrintJSON } from \"../util\";\r\nimport useFormatDate, { FORMAT_DATE_AND_TIME } from \"../utils/useFormatDate\";\r\nimport { CellResourceLinkRenderer } from \"./ResourceLinks\";\r\n\r\nimport \"./events.css\";\r\n\r\ntype DisplayDialogProps = {\r\n  titleKey: string;\r\n  onClose: () => void;\r\n};\r\n\r\ntype AdminEventSearchForm = {\r\n  resourceTypes: string[];\r\n  operationTypes: string[];\r\n  resourcePath: string;\r\n  dateFrom: string;\r\n  dateTo: string;\r\n  authClient: string;\r\n  authUser: string;\r\n  authRealm: string;\r\n  authIpAddress: string;\r\n};\r\n\r\nconst DisplayDialog = ({\r\n  titleKey,\r\n  onClose,\r\n  children,\r\n}: PropsWithChildren<DisplayDialogProps>) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.medium}\r\n      title={t(titleKey)}\r\n      isOpen={true}\r\n      onClose={onClose}\r\n    >\r\n      {children}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst DetailCell = (event: AdminEventRepresentation) => (\r\n  <DescriptionList isHorizontal className=\"keycloak_eventsection_details\">\r\n    {event.details &&\r\n      Object.entries(event.details).map(([key, value]) => (\r\n        <DescriptionListGroup key={key}>\r\n          <DescriptionListTerm>{key}</DescriptionListTerm>\r\n          <DescriptionListDescription>{value}</DescriptionListDescription>\r\n        </DescriptionListGroup>\r\n      ))}\r\n    {event.error && (\r\n      <DescriptionListGroup key=\"error\">\r\n        <DescriptionListTerm>error</DescriptionListTerm>\r\n        <DescriptionListDescription>{event.error}</DescriptionListDescription>\r\n      </DescriptionListGroup>\r\n    )}\r\n  </DescriptionList>\r\n);\r\n\r\ntype AdminEventsProps = {\r\n  resourcePath?: string;\r\n};\r\n\r\nexport const AdminEvents = ({ resourcePath }: AdminEventsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const serverInfo = useServerInfo();\r\n  const formatDate = useFormatDate();\r\n  const resourceTypes = serverInfo.enums?.[\"resourceType\"];\r\n  const operationTypes = serverInfo.enums?.[\"operationType\"];\r\n\r\n  const [key, setKey] = useState(0);\r\n  const [searchDropdownOpen, setSearchDropdownOpen] = useState(false);\r\n  const [selectResourceTypesOpen, setSelectResourceTypesOpen] = useState(false);\r\n  const [selectOperationTypesOpen, setSelectOperationTypesOpen] =\r\n    useState(false);\r\n  const [activeFilters, setActiveFilters] = useState<\r\n    Partial<AdminEventSearchForm>\r\n  >({});\r\n\r\n  const defaultValues: AdminEventSearchForm = {\r\n    resourceTypes: [],\r\n    operationTypes: [],\r\n    resourcePath: resourcePath ? resourcePath : \"\",\r\n    dateFrom: \"\",\r\n    dateTo: \"\",\r\n    authClient: \"\",\r\n    authUser: \"\",\r\n    authRealm: \"\",\r\n    authIpAddress: \"\",\r\n  };\r\n\r\n  const [authEvent, setAuthEvent] = useState<AdminEventRepresentation>();\r\n  const [adminEventsEnabled, setAdminEventsEnabled] = useState<boolean>();\r\n  const [representationEvent, setRepresentationEvent] =\r\n    useState<AdminEventRepresentation>();\r\n\r\n  const filterLabels: Record<keyof AdminEventSearchForm, string> = {\r\n    resourceTypes: t(\"resourceTypes\"),\r\n    operationTypes: t(\"operationTypes\"),\r\n    resourcePath: t(\"resourcePath\"),\r\n    dateFrom: t(\"dateFrom\"),\r\n    dateTo: t(\"dateTo\"),\r\n    authClient: t(\"client\"),\r\n    authUser: t(\"userId\"),\r\n    authRealm: t(\"realm\"),\r\n    authIpAddress: t(\"ipAddress\"),\r\n  };\r\n\r\n  const form = useForm<AdminEventSearchForm>({\r\n    mode: \"onChange\",\r\n    defaultValues,\r\n  });\r\n  const {\r\n    getValues,\r\n    reset,\r\n    formState: { isDirty },\r\n    control,\r\n  } = form;\r\n\r\n  useFetch(\r\n    () => adminClient.realms.getConfigEvents({ realm }),\r\n    (events) => {\r\n      setAdminEventsEnabled(events?.adminEventsEnabled!);\r\n    },\r\n    [],\r\n  );\r\n\r\n  function loader(first?: number, max?: number) {\r\n    return adminClient.realms.findAdminEvents({\r\n      resourcePath,\r\n      // The admin client wants 'dateFrom' and 'dateTo' to be Date objects, however it cannot actually handle them so we need to cast to any.\r\n      ...(activeFilters as any),\r\n      realm,\r\n      first,\r\n      max,\r\n    });\r\n  }\r\n\r\n  function submitSearch() {\r\n    setSearchDropdownOpen(false);\r\n    commitFilters();\r\n  }\r\n\r\n  function resetSearch() {\r\n    reset();\r\n    commitFilters();\r\n  }\r\n\r\n  function removeFilter(key: keyof AdminEventSearchForm) {\r\n    const formValues: AdminEventSearchForm = { ...getValues() };\r\n    delete formValues[key];\r\n\r\n    reset({ ...defaultValues, ...formValues });\r\n    commitFilters();\r\n  }\r\n\r\n  function removeFilterValue(\r\n    key: keyof AdminEventSearchForm,\r\n    valueToRemove: string,\r\n  ) {\r\n    const formValues = getValues();\r\n    const fieldValue = formValues[key];\r\n    const newFieldValue = Array.isArray(fieldValue)\r\n      ? fieldValue.filter((val) => val !== valueToRemove)\r\n      : fieldValue;\r\n\r\n    reset({ ...formValues, [key]: newFieldValue });\r\n    commitFilters();\r\n  }\r\n\r\n  function commitFilters() {\r\n    const newFilters: Partial<AdminEventSearchForm> = pickBy(\r\n      getValues(),\r\n      (value) => value !== \"\" || (Array.isArray(value) && value.length > 0),\r\n    );\r\n\r\n    if (resourcePath) {\r\n      delete newFilters.resourcePath;\r\n    }\r\n\r\n    setActiveFilters(newFilters);\r\n    setKey(key + 1);\r\n  }\r\n\r\n  const code = useMemo(\r\n    () =>\r\n      representationEvent?.representation\r\n        ? prettyPrintJSON(JSON.parse(representationEvent.representation))\r\n        : \"\",\r\n    [representationEvent?.representation],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {authEvent && (\r\n        <DisplayDialog titleKey=\"auth\" onClose={() => setAuthEvent(undefined)}>\r\n          <Table\r\n            aria-label=\"authData\"\r\n            data-testid=\"auth-dialog\"\r\n            variant={TableVariant.compact}\r\n          >\r\n            <Thead>\r\n              <Tr>\r\n                <Th>{t(\"attribute\")}</Th>\r\n                <Th>{t(\"value\")}</Th>\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              <Tr>\r\n                <Td>{t(\"realm\")}</Td>\r\n                <Td>{authEvent.authDetails?.realmId}</Td>\r\n              </Tr>\r\n              <Tr>\r\n                <Td>{t(\"client\")}</Td>\r\n                <Td>{authEvent.authDetails?.clientId}</Td>\r\n              </Tr>\r\n              <Tr>\r\n                <Td>{t(\"user\")}</Td>\r\n                <Td>{authEvent.authDetails?.userId}</Td>\r\n              </Tr>\r\n              <Tr>\r\n                <Td>{t(\"ipAddress\")}</Td>\r\n                <Td>{authEvent.authDetails?.ipAddress}</Td>\r\n              </Tr>\r\n            </Tbody>\r\n          </Table>\r\n        </DisplayDialog>\r\n      )}\r\n      {representationEvent && (\r\n        <DisplayDialog\r\n          titleKey=\"representation\"\r\n          data-testid=\"representation-dialog\"\r\n          onClose={() => setRepresentationEvent(undefined)}\r\n        >\r\n          <CodeEditor readOnly value={code} language=\"json\" />\r\n        </DisplayDialog>\r\n      )}\r\n      {!adminEventsEnabled && <EventsBanners type=\"adminEvents\" />}\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        detailColumns={[\r\n          {\r\n            name: \"details\",\r\n            enabled: (event) => event.details !== undefined,\r\n            cellRenderer: DetailCell,\r\n          },\r\n        ]}\r\n        isPaginated\r\n        ariaLabelKey=\"adminEvents\"\r\n        toolbarItem={\r\n          <FormProvider {...form}>\r\n            <Flex\r\n              direction={{ default: \"column\" }}\r\n              spaceItems={{ default: \"spaceItemsNone\" }}\r\n            >\r\n              <FlexItem>\r\n                <DropdownPanel\r\n                  buttonText={t(\"searchForAdminEvent\")}\r\n                  setSearchDropdownOpen={setSearchDropdownOpen}\r\n                  searchDropdownOpen={searchDropdownOpen}\r\n                  marginRight=\"2.5rem\"\r\n                  width=\"15vw\"\r\n                >\r\n                  <Form\r\n                    isHorizontal\r\n                    className=\"keycloak__events_search__form\"\r\n                    data-testid=\"searchForm\"\r\n                  >\r\n                    <FormGroup\r\n                      label={t(\"resourceTypes\")}\r\n                      fieldId=\"kc-resourceTypes\"\r\n                      className=\"keycloak__events_search__form_label\"\r\n                    >\r\n                      <Controller\r\n                        name=\"resourceTypes\"\r\n                        control={control}\r\n                        render={({ field }) => (\r\n                          <KeycloakSelect\r\n                            className=\"keycloak__events_search__type_select\"\r\n                            data-testid=\"resource-types-searchField\"\r\n                            chipGroupProps={{\r\n                              numChips: 1,\r\n                              expandedText: t(\"hide\"),\r\n                              collapsedText: t(\"showRemaining\"),\r\n                            }}\r\n                            variant={SelectVariant.typeaheadMulti}\r\n                            typeAheadAriaLabel=\"Select\"\r\n                            onToggle={(isOpen) =>\r\n                              setSelectResourceTypesOpen(isOpen)\r\n                            }\r\n                            selections={field.value}\r\n                            onSelect={(selectedValue) => {\r\n                              const option = selectedValue.toString();\r\n                              const changedValue = field.value.includes(option)\r\n                                ? field.value.filter(\r\n                                    (item: string) => item !== option,\r\n                                  )\r\n                                : [...field.value, option];\r\n\r\n                              field.onChange(changedValue);\r\n                            }}\r\n                            onClear={() => {\r\n                              field.onChange([]);\r\n                            }}\r\n                            isOpen={selectResourceTypesOpen}\r\n                            aria-labelledby={\"resourceTypes\"}\r\n                            chipGroupComponent={\r\n                              <ChipGroup>\r\n                                {field.value.map((chip: string) => (\r\n                                  <Chip\r\n                                    key={chip}\r\n                                    onClick={(resource) => {\r\n                                      resource.stopPropagation();\r\n                                      field.onChange(\r\n                                        field.value.filter(\r\n                                          (val: string) => val !== chip,\r\n                                        ),\r\n                                      );\r\n                                    }}\r\n                                  >\r\n                                    {chip}\r\n                                  </Chip>\r\n                                ))}\r\n                              </ChipGroup>\r\n                            }\r\n                          >\r\n                            {resourceTypes?.map((option) => (\r\n                              <SelectOption key={option} value={option}>\r\n                                {option}\r\n                              </SelectOption>\r\n                            ))}\r\n                          </KeycloakSelect>\r\n                        )}\r\n                      />\r\n                    </FormGroup>\r\n                    <FormGroup\r\n                      label={t(\"operationTypes\")}\r\n                      fieldId=\"kc-operationTypes\"\r\n                      className=\"keycloak__events_search__form_label\"\r\n                    >\r\n                      <Controller\r\n                        name=\"operationTypes\"\r\n                        control={control}\r\n                        render={({ field }) => (\r\n                          <KeycloakSelect\r\n                            className=\"keycloak__events_search__type_select\"\r\n                            data-testid=\"operation-types-searchField\"\r\n                            chipGroupProps={{\r\n                              numChips: 1,\r\n                              expandedText: t(\"hide\"),\r\n                              collapsedText: t(\"showRemaining\"),\r\n                            }}\r\n                            variant={SelectVariant.typeaheadMulti}\r\n                            typeAheadAriaLabel=\"Select\"\r\n                            onToggle={(isOpen) =>\r\n                              setSelectOperationTypesOpen(isOpen)\r\n                            }\r\n                            selections={field.value}\r\n                            onSelect={(selectedValue) => {\r\n                              const option = selectedValue.toString();\r\n                              const changedValue = field.value.includes(option)\r\n                                ? field.value.filter(\r\n                                    (item: string) => item !== option,\r\n                                  )\r\n                                : [...field.value, option];\r\n\r\n                              field.onChange(changedValue);\r\n                            }}\r\n                            onClear={() => {\r\n                              field.onChange([]);\r\n                            }}\r\n                            isOpen={selectOperationTypesOpen}\r\n                            aria-labelledby={\"operationTypes\"}\r\n                            chipGroupComponent={\r\n                              <ChipGroup>\r\n                                {field.value.map((chip: string) => (\r\n                                  <Chip\r\n                                    key={chip}\r\n                                    onClick={(operation) => {\r\n                                      operation.stopPropagation();\r\n                                      field.onChange(\r\n                                        field.value.filter(\r\n                                          (val: string) => val !== chip,\r\n                                        ),\r\n                                      );\r\n                                    }}\r\n                                  >\r\n                                    {chip}\r\n                                  </Chip>\r\n                                ))}\r\n                              </ChipGroup>\r\n                            }\r\n                          >\r\n                            {operationTypes?.map((option) => (\r\n                              <SelectOption key={option} value={option}>\r\n                                {option}\r\n                              </SelectOption>\r\n                            ))}\r\n                          </KeycloakSelect>\r\n                        )}\r\n                      />\r\n                    </FormGroup>\r\n                    {!resourcePath && (\r\n                      <TextControl\r\n                        name=\"resourcePath\"\r\n                        label={t(\"resourcePath\")}\r\n                      />\r\n                    )}\r\n                    <TextControl name=\"authRealm\" label={t(\"realm\")} />\r\n                    <TextControl name=\"authClient\" label={t(\"client\")} />\r\n                    <TextControl name=\"authUser\" label={t(\"userId\")} />\r\n                    <TextControl name=\"authIpAddress\" label={t(\"ipAddress\")} />\r\n                    <FormGroup\r\n                      label={t(\"dateFrom\")}\r\n                      fieldId=\"kc-dateFrom\"\r\n                      className=\"keycloak__events_search__form_label\"\r\n                    >\r\n                      <Controller\r\n                        name=\"dateFrom\"\r\n                        control={control}\r\n                        render={({ field }) => (\r\n                          <DatePicker\r\n                            className=\"pf-v5-u-w-100\"\r\n                            value={field.value}\r\n                            onChange={(_, value) => field.onChange(value)}\r\n                            inputProps={{ id: \"kc-dateFrom\" }}\r\n                          />\r\n                        )}\r\n                      />\r\n                    </FormGroup>\r\n                    <FormGroup\r\n                      label={t(\"dateTo\")}\r\n                      fieldId=\"kc-dateTo\"\r\n                      className=\"keycloak__events_search__form_label\"\r\n                    >\r\n                      <Controller\r\n                        name=\"dateTo\"\r\n                        control={control}\r\n                        render={({ field }) => (\r\n                          <DatePicker\r\n                            className=\"pf-v5-u-w-100\"\r\n                            value={field.value}\r\n                            onChange={(_, value) => field.onChange(value)}\r\n                            inputProps={{ id: \"kc-dateTo\" }}\r\n                          />\r\n                        )}\r\n                      />\r\n                    </FormGroup>\r\n                    <ActionGroup>\r\n                      <Button\r\n                        variant={\"primary\"}\r\n                        onClick={submitSearch}\r\n                        data-testid=\"search-events-btn\"\r\n                        isDisabled={!isDirty}\r\n                      >\r\n                        {t(\"searchAdminEventsBtn\")}\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"secondary\"\r\n                        onClick={resetSearch}\r\n                        isDisabled={!isDirty}\r\n                      >\r\n                        {t(\"resetBtn\")}\r\n                      </Button>\r\n                    </ActionGroup>\r\n                  </Form>\r\n                </DropdownPanel>\r\n              </FlexItem>\r\n              <FlexItem>\r\n                {Object.entries(activeFilters).length > 0 && (\r\n                  <div className=\"keycloak__searchChips pf-v5-u-ml-md\">\r\n                    {Object.entries(activeFilters).map((filter) => {\r\n                      const [key, value] = filter as [\r\n                        keyof AdminEventSearchForm,\r\n                        string | string[],\r\n                      ];\r\n\r\n                      if (key === \"resourcePath\" && !!resourcePath) {\r\n                        return null;\r\n                      }\r\n\r\n                      return (\r\n                        <ChipGroup\r\n                          className=\"pf-v5-u-mt-md pf-v5-u-mr-md\"\r\n                          key={key}\r\n                          categoryName={filterLabels[key]}\r\n                          onClick={() => removeFilter(key)}\r\n                        >\r\n                          {typeof value === \"string\" ? (\r\n                            <Chip isReadOnly>{value}</Chip>\r\n                          ) : (\r\n                            value.map((entry) => (\r\n                              <Chip\r\n                                key={entry}\r\n                                onClick={() => removeFilterValue(key, entry)}\r\n                              >\r\n                                {entry}\r\n                              </Chip>\r\n                            ))\r\n                          )}\r\n                        </ChipGroup>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </FlexItem>\r\n            </Flex>\r\n          </FormProvider>\r\n        }\r\n        actions={\r\n          [\r\n            {\r\n              title: t(\"auth\"),\r\n              onRowClick: (event) => setAuthEvent(event),\r\n            },\r\n            {\r\n              title: t(\"representation\"),\r\n              onRowClick: (event) => setRepresentationEvent(event),\r\n            },\r\n          ] as Action<AdminEventRepresentation>[]\r\n        }\r\n        columns={[\r\n          {\r\n            name: \"time\",\r\n            displayKey: \"time\",\r\n            cellRenderer: (row) =>\r\n              formatDate(new Date(row.time!), FORMAT_DATE_AND_TIME),\r\n          },\r\n          {\r\n            name: \"resourcePath\",\r\n            displayKey: \"resourcePath\",\r\n            cellRenderer: CellResourceLinkRenderer,\r\n          },\r\n          {\r\n            name: \"resourceType\",\r\n            displayKey: \"resourceType\",\r\n          },\r\n          {\r\n            name: \"operationType\",\r\n            displayKey: \"operationType\",\r\n            transforms: [cellWidth(10)],\r\n          },\r\n          {\r\n            name: \"\",\r\n            displayKey: \"user\",\r\n            cellRenderer: (event) => event.authDetails?.userId || \"\",\r\n          },\r\n        ]}\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"emptyAdminEvents\")}\r\n            instructions={t(\"emptyAdminEventsInstructions\")}\r\n            primaryActionText={t(\"refresh\")}\r\n            onPrimaryAction={() => setKey(key + 1)}\r\n          />\r\n        }\r\n        isSearching={Object.keys(activeFilters).length > 0}\r\n      />\r\n    </>\r\n  );\r\n};\r\n"],"names":["MAX_TEXT_LENGTH","Truncate","text","children","definedText","needsTruncation","truncatedText","jsx","Tooltip","isLinkable","event","idRegex","createLink","realm","part","id","toClient","toGroups","toClientScope","toUser","toFlow","toRealmRole","toEditOrganization","ResourceLink","useRealm","Link","CellResourceLinkRenderer","adminEvent","DisplayDialog","titleKey","onClose","t","useTranslation","Modal","ModalVariant","DetailCell","jsxs","DescriptionList","key","value","DescriptionListGroup","DescriptionListTerm","DescriptionListDescription","AdminEvents","resourcePath","adminClient","useAdminClient","serverInfo","useServerInfo","formatDate","useFormatDate","resourceTypes","operationTypes","setKey","useState","searchDropdownOpen","setSearchDropdownOpen","selectResourceTypesOpen","setSelectResourceTypesOpen","selectOperationTypesOpen","setSelectOperationTypesOpen","activeFilters","setActiveFilters","defaultValues","authEvent","setAuthEvent","adminEventsEnabled","setAdminEventsEnabled","representationEvent","setRepresentationEvent","filterLabels","form","useForm","getValues","reset","isDirty","control","useFetch","events","loader","first","max","submitSearch","commitFilters","resetSearch","removeFilter","formValues","removeFilterValue","valueToRemove","fieldValue","newFieldValue","val","newFilters","pickBy","code","useMemo","prettyPrintJSON","Fragment","Table","TableVariant","Thead","Tr","Th","Tbody","Td","CodeEditor","EventsBanners","KeycloakDataTable","FormProvider","Flex","FlexItem","DropdownPanel","Form","FormGroup","Controller","field","KeycloakSelect","SelectVariant","isOpen","selectedValue","option","changedValue","item","ChipGroup","chip","Chip","resource","SelectOption","operation","TextControl","DatePicker","_","ActionGroup","Button","filter","entry","row","FORMAT_DATE_AND_TIME","cellWidth","ListEmptyState"],"mappings":"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"}