import{jsxs as f,Fragment as T,jsx as a}from"react/jsx-runtime";import{useState as U}from"react";import{a as g}from"./CodeEditor-C4IS5oxi.js";import{a as k,M as b,k as y,g as F,cS as v,O as I,dY as O,dD as _,dE as w}from"./main-o1hptXRo.js";const H=({id:d,onChange:s,helpText:C="helpFileUpload",unWrap:c=!1,previewMaxLength:x=102400,language:L,extension:D,...r})=>{const{t}=k(),p={value:"",filename:"",isLoading:!1,modal:!1},[e,l]=U(p),m=()=>l({...e,modal:!1}),u=(n,i)=>{l({...e,filename:i.name})},o=n=>{l({...e,value:n}),s(n)},h=()=>{l({...e,modal:!0})};return f(T,{children:[e.modal&&a(b,{variant:y.small,title:t("clearFile"),isOpen:!0,onClose:m,actions:[a(F,{variant:"primary","data-testid":"clear-button",onClick:()=>{l(p),s("")},children:t("clear")},"confirm"),a(F,{"data-testid":"cancel",variant:"link",onClick:m,children:t("cancel")},"cancel")],children:t("clearFileExplain")}),c&&a(v,{id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:u,onDataChange:(n,i)=>o(i),onTextChange:(n,i)=>o(i),onClearClick:h,onReadStarted:()=>l({...e,isLoading:!0}),onReadFinished:()=>l({...e,isLoading:!1}),isLoading:e.isLoading,dropzoneProps:{accept:{"application/text":[D]}}}),!c&&f(I,{label:t("resourceFile"),fieldId:d+"-filename",children:[a(v,{"data-testid":d,id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:u,onDataChange:(n,i)=>o(i),onTextChange:(n,i)=>o(i),onClearClick:h,onReadStarted:()=>l({...e,isLoading:!0}),onReadFinished:()=>l({...e,isLoading:!1}),isLoading:e.isLoading,hideDefaultPreview:!0,children:!r.hideDefaultPreview&&(!e.value||e.value.length<x?a(g,{"aria-label":"File content",value:e.value,language:L,onChange:n=>o(n),readOnly:!r.allowEditingUploadedText}):a(g,{"aria-label":"File content",value:t("fileUploadPreviewDisabled"),readOnly:!0}))}),a(O,{children:a(_,{children:a(w,{children:t(C)})})})]})]})};export{H as F};
//# sourceMappingURL=FileUploadForm-3WTCaGLI.js.map
