{"version":3,"file":"ClientDetails-B6siFDnv.js","sources":["../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.1/node_modules/@patternfly/react-styles/css/components/CodeBlock/code-block.mjs","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/CodeBlock/CodeBlock.js","../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4._eb6583d8b0ee541b46a675e70b022816/node_modules/@patternfly/react-core/dist/esm/components/CodeBlock/CodeBlockAction.js","../../../../../../../src/components/download-dialog/DownloadDialog.tsx","../../../../../../../src/clients/advanced/TokenLifespan.tsx","../../../../../../../src/clients/advanced/AdvancedSettings.tsx","../../../../../../../src/clients/advanced/AuthenticationOverrides.tsx","../../../../../../../src/components/time-selector/TimeSelectorForm.tsx","../../../../../../../src/clients/advanced/AddHostDialog.tsx","../../../../../../../src/clients/advanced/ClusteringPanel.tsx","../../../../../../../src/clients/advanced/ApplicationUrls.tsx","../../../../../../../src/clients/advanced/FineGrainOpenIdConnect.tsx","../../../../../../../src/clients/advanced/FineGrainSamlEndpointConfig.tsx","../../../../../../../src/clients/advanced/OpenIdConnectCompatibilityModes.tsx","../../../../../../../src/clients/advanced/OpenIdVerifiableCredentials.tsx","../../../../../../../src/clients/constants.ts","../../../../../../../src/clients/AdvancedTab.tsx","../../../../../../../src/clients/ClientSessions.tsx","../../../../../../../src/clients/add/AccessSettings.tsx","../../../../../../../src/clients/add/LoginSettingsPanel.tsx","../../../../../../../src/clients/add/LogoutPanel.tsx","../../../../../../../src/clients/ClientSettings.tsx","../../../../../../../src/clients/authorization/KeyBasedAttributeInput.tsx","../../../../../../../src/clients/authorization/AuthorizationDataModal.tsx","../../../../../../../src/clients/authorization/AuthorizationEvaluateResourcePolicies.tsx","../../../../../../../src/clients/authorization/AuthorizationEvaluateResource.tsx","../../../../../../../src/clients/authorization/evaluate/Results.tsx","../../../../../../../src/clients/authorization/AuthorizationEvaluate.tsx","../../../../../../../src/clients/authorization/AuthorizationExport.tsx","../../../../../../../src/clients/authorization/EmptyPermissionsState.tsx","../../../../../../../src/clients/authorization/Permissions.tsx","../../../../../../../src/clients/authorization/DetailCell.tsx","../../../../../../../src/clients/authorization/Resources.tsx","../../../../../../../src/clients/authorization/Scopes.tsx","../../../../../../../src/clients/authorization/ImportDialog.tsx","../../../../../../../src/clients/authorization/Settings.tsx","../../../../../../../src/clients/credentials/ClientSecret.tsx","../../../../../../../src/clients/credentials/SignedJWT.tsx","../../../../../../../src/clients/credentials/X509.tsx","../../../../../../../src/clients/credentials/Credentials.tsx","../../../../../../../src/clients/keys/Certificate.tsx","../../../../../../../src/clients/keys/GenerateKeyDialog.tsx","../../../../../../../src/clients/keys/Keys.tsx","../../../../../../../src/clients/keys/ExportSamlKeyDialog.tsx","../../../../../../../src/clients/keys/SamlKeysDialog.tsx","../../../../../../../src/clients/keys/SamlImportKeyDialog.tsx","../../../../../../../src/clients/keys/SamlKeys.tsx","../../../../../../../src/clients/scopes/ClientScopes.tsx","../../../../../../../src/clients/scopes/GeneratedCodeTab.tsx","../../../../../../../src/clients/scopes/EvaluateScopes.tsx","../../../../../../../src/clients/service-account/ServiceAccount.tsx","../../../../../../../src/clients/ClientDetails.tsx"],"sourcesContent":["import './code-block.css';\nexport default {\n  \"codeBlock\": \"pf-v5-c-code-block\",\n  \"codeBlockActions\": \"pf-v5-c-code-block__actions\",\n  \"codeBlockCode\": \"pf-v5-c-code-block__code\",\n  \"codeBlockContent\": \"pf-v5-c-code-block__content\",\n  \"codeBlockHeader\": \"pf-v5-c-code-block__header\",\n  \"codeBlockPre\": \"pf-v5-c-code-block__pre\"\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/CodeBlock/code-block.mjs';\nimport { css } from '@patternfly/react-styles';\nexport const CodeBlock = (_a) => {\n    var { children = null, className, actions = null } = _a, props = __rest(_a, [\"children\", \"className\", \"actions\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(styles.codeBlock, className) }, props),\n        actions && (React.createElement(\"div\", { className: css(styles.codeBlockHeader) },\n            React.createElement(\"div\", { className: css(styles.codeBlockActions) }, actions))),\n        React.createElement(\"div\", { className: css(styles.codeBlockContent) }, children)));\n};\nCodeBlock.displayName = 'CodeBlock';\n//# sourceMappingURL=CodeBlock.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/CodeBlock/code-block.mjs';\nexport const CodeBlockAction = (_a) => {\n    var { children = null, className } = _a, props = __rest(_a, [\"children\", \"className\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(`${styles.codeBlockActions}-item`, className) }, props), children));\n};\nCodeBlockAction.displayName = 'CodeBlockAction';\n//# sourceMappingURL=CodeBlockAction.js.map","import { fetchWithError } from \"@keycloak/keycloak-admin-client\";\r\nimport { HelpItem, useFetch, useHelp } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Form,\r\n  FormGroup,\r\n  MenuToggle,\r\n  ModalVariant,\r\n  Select,\r\n  SelectList,\r\n  SelectOption,\r\n  Stack,\r\n  StackItem,\r\n  TextArea,\r\n} from \"@patternfly/react-core\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { addTrailingSlash, prettyPrintJSON } from \"../../util\";\r\nimport { getAuthorizationHeaders } from \"../../utils/getAuthorizationHeaders\";\r\nimport { ConfirmDialogModal } from \"../confirm-dialog/ConfirmDialog\";\r\n\r\ntype DownloadDialogProps = {\r\n  id: string;\r\n  protocol?: string;\r\n  open: boolean;\r\n  toggleDialog: () => void;\r\n};\r\n\r\nexport const DownloadDialog = ({\r\n  id,\r\n  open,\r\n  toggleDialog,\r\n  protocol = \"openid-connect\",\r\n}: DownloadDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { realm } = useRealm();\r\n  const { t } = useTranslation();\r\n  const { enabled } = useHelp();\r\n  const serverInfo = useServerInfo();\r\n\r\n  const configFormats = serverInfo.clientInstallations![protocol];\r\n  const [selected, setSelected] = useState(\r\n    configFormats[configFormats.length - 1].id,\r\n  );\r\n  const [snippet, setSnippet] = useState<string | ArrayBuffer>();\r\n  const [openType, setOpenType] = useState(false);\r\n\r\n  const selectedConfig = useMemo(\r\n    () => configFormats.find((config) => config.id === selected) ?? null,\r\n    [selected],\r\n  );\r\n\r\n  const sanitizeSnippet = (snippet: string) =>\r\n    snippet.replace(\r\n      /<PrivateKeyPem>.*<\\/PrivateKeyPem>/gs,\r\n      `<PrivateKeyPem>${t(\"privateKeyMask\")}</PrivateKeyPem>`,\r\n    );\r\n\r\n  useFetch(\r\n    async () => {\r\n      if (selectedConfig?.mediaType === \"application/zip\") {\r\n        const response = await fetchWithError(\r\n          `${addTrailingSlash(\r\n            adminClient.baseUrl,\r\n          )}admin/realms/${realm}/clients/${id}/installation/providers/${selected}`,\r\n          {\r\n            method: \"GET\",\r\n            headers: getAuthorizationHeaders(\r\n              await adminClient.getAccessToken(),\r\n            ),\r\n          },\r\n        );\r\n\r\n        return response.arrayBuffer();\r\n      } else {\r\n        const snippet = await adminClient.clients.getInstallationProviders({\r\n          id,\r\n          providerId: selected,\r\n        });\r\n        if (typeof snippet === \"string\") {\r\n          return sanitizeSnippet(snippet);\r\n        } else {\r\n          return prettyPrintJSON(snippet);\r\n        }\r\n      }\r\n    },\r\n    (snippet) => setSnippet(snippet),\r\n    [id, selected],\r\n  );\r\n\r\n  // Clear snippet when selected config changes, this prevents old snippets from being displayed during fetch.\r\n  useEffect(() => setSnippet(\"\"), [id, selected]);\r\n\r\n  return (\r\n    <ConfirmDialogModal\r\n      titleKey={t(\"downloadAdaptorTitle\")}\r\n      continueButtonLabel={t(\"download\")}\r\n      onConfirm={() => {\r\n        saveAs(\r\n          new Blob([snippet!], { type: selectedConfig?.mediaType }),\r\n          selectedConfig?.filename,\r\n        );\r\n      }}\r\n      open={open}\r\n      toggleDialog={toggleDialog}\r\n      variant={ModalVariant.medium}\r\n    >\r\n      <Form>\r\n        <Stack hasGutter>\r\n          <StackItem>\r\n            <FormGroup\r\n              fieldId=\"type\"\r\n              label={t(\"formatOption\")}\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"downloadType\")}\r\n                  fieldLabelId=\"formatOption\"\r\n                />\r\n              }\r\n            >\r\n              <Select\r\n                isOpen={openType}\r\n                onOpenChange={(isOpen) => setOpenType(isOpen)}\r\n                toggle={(ref) => (\r\n                  <MenuToggle\r\n                    id=\"type\"\r\n                    ref={ref}\r\n                    onClick={() => setOpenType(!openType)}\r\n                    isExpanded={openType}\r\n                  >\r\n                    {selected}\r\n                  </MenuToggle>\r\n                )}\r\n                selected={selected}\r\n                onSelect={(_, value) => {\r\n                  setSelected(value?.toString() || \"\");\r\n                  setOpenType(false);\r\n                }}\r\n                aria-label={t(\"selectOne\")}\r\n                popperProps={{\r\n                  appendTo: document.body,\r\n                }}\r\n              >\r\n                <SelectList>\r\n                  {configFormats.map((configFormat) => (\r\n                    <SelectOption\r\n                      key={configFormat.id}\r\n                      value={configFormat.id}\r\n                      isSelected={selected === configFormat.id}\r\n                      description={enabled ? configFormat.helpText : undefined}\r\n                    >\r\n                      {configFormat.displayType}\r\n                    </SelectOption>\r\n                  ))}\r\n                </SelectList>\r\n              </Select>\r\n            </FormGroup>\r\n          </StackItem>\r\n          {!selectedConfig?.downloadOnly && (\r\n            <StackItem isFilled>\r\n              <FormGroup\r\n                fieldId=\"details\"\r\n                label={t(\"details\")}\r\n                labelIcon={\r\n                  <HelpItem\r\n                    helpText={t(\"detailsHelp\")}\r\n                    fieldLabelId=\"details\"\r\n                  />\r\n                }\r\n              >\r\n                <TextArea\r\n                  id=\"details\"\r\n                  readOnly\r\n                  rows={12}\r\n                  resizeOrientation=\"vertical\"\r\n                  value={snippet && typeof snippet === \"string\" ? snippet : \"\"}\r\n                  aria-label=\"text area example\"\r\n                />\r\n              </FormGroup>\r\n            </StackItem>\r\n          )}\r\n        </Stack>\r\n      </Form>\r\n    </ConfirmDialogModal>\r\n  );\r\n};\r\n","import {\r\n  FormGroup,\r\n  MenuToggle,\r\n  Select,\r\n  SelectList,\r\n  SelectOption,\r\n  Split,\r\n  SplitItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  TimeSelector,\r\n  Unit,\r\n} from \"../../components/time-selector/TimeSelector\";\r\n\r\ntype TokenLifespanProps = {\r\n  id: string;\r\n  name: string;\r\n  defaultValue?: number;\r\n  units?: Unit[];\r\n};\r\n\r\nconst inherited = \"tokenLifespan.inherited\";\r\nconst expires = \"tokenLifespan.expires\";\r\n\r\nexport const TokenLifespan = ({\r\n  id,\r\n  name,\r\n  defaultValue,\r\n  units,\r\n}: TokenLifespanProps) => {\r\n  const { t } = useTranslation();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const [focused, setFocused] = useState(false);\r\n  const onFocus = () => setFocused(true);\r\n  const onBlur = () => setFocused(false);\r\n\r\n  const { control } = useFormContext();\r\n  const isExpireSet = (value: string | number) =>\r\n    typeof value === \"number\" ||\r\n    (typeof value === \"string\" && value !== \"\") ||\r\n    focused;\r\n\r\n  return (\r\n    <FormGroup\r\n      label={t(id)}\r\n      fieldId={id}\r\n      labelIcon={<HelpItem helpText={t(`${id}Help`)} fieldLabelId={id} />}\r\n      data-testid={`token-lifespan-${id}`}\r\n    >\r\n      <Controller\r\n        name={name}\r\n        defaultValue=\"\"\r\n        control={control}\r\n        render={({ field }) => (\r\n          <Split hasGutter>\r\n            <SplitItem>\r\n              <Select\r\n                toggle={(ref) => (\r\n                  <MenuToggle\r\n                    ref={ref}\r\n                    onClick={() => setOpen(!open)}\r\n                    isExpanded={open}\r\n                  >\r\n                    {isExpireSet(field.value) ? t(expires) : t(inherited)}\r\n                  </MenuToggle>\r\n                )}\r\n                isOpen={open}\r\n                onOpenChange={(isOpen) => setOpen(isOpen)}\r\n                onSelect={(_, value) => {\r\n                  field.onChange(value);\r\n                  setOpen(false);\r\n                }}\r\n                selected={isExpireSet(field.value) ? t(expires) : t(inherited)}\r\n              >\r\n                <SelectList>\r\n                  <SelectOption value=\"\">{t(inherited)}</SelectOption>\r\n                  <SelectOption value={60}>{t(expires)}</SelectOption>\r\n                </SelectList>\r\n              </Select>\r\n            </SplitItem>\r\n            <SplitItem hidden={!isExpireSet(field.value)}>\r\n              <TimeSelector\r\n                validated={\r\n                  isExpireSet(field.value) && field.value! < 1\r\n                    ? \"warning\"\r\n                    : \"default\"\r\n                }\r\n                units={units}\r\n                value={field.value === \"\" ? defaultValue : field.value}\r\n                onChange={field.onChange}\r\n                onFocus={onFocus}\r\n                onBlur={onBlur}\r\n                min={1}\r\n                isDisabled={!isExpireSet(field.value)}\r\n              />\r\n            </SplitItem>\r\n          </Split>\r\n        )}\r\n      />\r\n    </FormGroup>\r\n  );\r\n};\r\n","import { HelpItem, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ActionGroup, Button, FormGroup } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { KeyValueInput } from \"../../components/key-value-form/KeyValueInput\";\r\nimport { MultiLineInput } from \"../../components/multi-line-input/MultiLineInput\";\r\nimport { TimeSelector } from \"../../components/time-selector/TimeSelector\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { TokenLifespan } from \"./TokenLifespan\";\r\n\r\ntype AdvancedSettingsProps = {\r\n  save: () => void;\r\n  reset: () => void;\r\n  protocol?: string;\r\n  hasConfigureAccess?: boolean;\r\n};\r\n\r\nexport const AdvancedSettings = ({\r\n  save,\r\n  reset,\r\n  protocol,\r\n  hasConfigureAccess,\r\n}: AdvancedSettingsProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const { realmRepresentation: realm } = useRealm();\r\n\r\n  const { control } = useFormContext();\r\n  return (\r\n    <FormAccess\r\n      role=\"manage-realm\"\r\n      fineGrainedAccess={hasConfigureAccess}\r\n      isHorizontal\r\n    >\r\n      {protocol !== \"openid-connect\" && (\r\n        <FormGroup\r\n          label={t(\"assertionLifespan\")}\r\n          fieldId=\"assertionLifespan\"\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"assertionLifespanHelp\")}\r\n              fieldLabelId=\"assertionLifespan\"\r\n            />\r\n          }\r\n        >\r\n          <Controller\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.saml.assertion.lifespan\",\r\n            )}\r\n            defaultValue=\"\"\r\n            control={control}\r\n            render={({ field }) => (\r\n              <TimeSelector\r\n                units={[\"minute\", \"day\", \"hour\"]}\r\n                value={field.value}\r\n                onChange={field.onChange}\r\n              />\r\n            )}\r\n          />\r\n        </FormGroup>\r\n      )}\r\n      {protocol === \"openid-connect\" && (\r\n        <>\r\n          <TokenLifespan\r\n            id=\"accessTokenLifespan\"\r\n            name={convertAttributeNameToForm(\r\n              \"attributes.access.token.lifespan\",\r\n            )}\r\n            defaultValue={realm?.accessTokenLifespan}\r\n            units={[\"minute\", \"day\", \"hour\"]}\r\n          />\r\n          <TokenLifespan\r\n            id=\"clientSessionIdle\"\r\n            name={convertAttributeNameToForm(\r\n              \"attributes.client.session.idle.timeout\",\r\n            )}\r\n            defaultValue={realm?.clientSessionIdleTimeout}\r\n            units={[\"minute\", \"day\", \"hour\"]}\r\n          />\r\n          <TokenLifespan\r\n            id=\"clientSessionMax\"\r\n            name={convertAttributeNameToForm(\r\n              \"attributes.client.session.max.lifespan\",\r\n            )}\r\n            defaultValue={realm?.clientSessionMaxLifespan}\r\n            units={[\"minute\", \"day\", \"hour\"]}\r\n          />\r\n          <TokenLifespan\r\n            id=\"clientOfflineSessionIdle\"\r\n            name={convertAttributeNameToForm(\r\n              \"attributes.client.offline.session.idle.timeout\",\r\n            )}\r\n            defaultValue={realm?.offlineSessionIdleTimeout}\r\n            units={[\"minute\", \"day\", \"hour\"]}\r\n          />\r\n\r\n          {realm?.offlineSessionMaxLifespanEnabled && (\r\n            <TokenLifespan\r\n              id=\"clientOfflineSessionMax\"\r\n              name={convertAttributeNameToForm(\r\n                \"attributes.client.offline.session.max.lifespan\",\r\n              )}\r\n              defaultValue={\r\n                realm?.offlineSessionMaxLifespanEnabled\r\n                  ? realm.offlineSessionMaxLifespan\r\n                  : undefined\r\n              }\r\n              units={[\"minute\", \"day\", \"hour\"]}\r\n            />\r\n          )}\r\n          <DefaultSwitchControl\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.tls.client.certificate.bound.access.tokens\",\r\n            )}\r\n            label={t(\"oAuthMutual\")}\r\n            labelIcon={t(\"oAuthMutualHelp\")}\r\n            stringify\r\n          />\r\n          <DefaultSwitchControl\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.require.pushed.authorization.requests\",\r\n            )}\r\n            label={t(\"pushedAuthorizationRequestRequired\")}\r\n            labelIcon={t(\"pushedAuthorizationRequestRequiredHelp\")}\r\n            stringify\r\n          />\r\n          <DefaultSwitchControl\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.client.use.lightweight.access.token.enabled\",\r\n            )}\r\n            label={t(\"lightweightAccessToken\")}\r\n            labelIcon={t(\"lightweightAccessTokenHelp\")}\r\n            stringify\r\n          />\r\n\r\n          <DefaultSwitchControl\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.client.introspection.response.allow.jwt.claim.enabled\",\r\n            )}\r\n            label={t(\"supportJwtClaimInIntrospectionResponse\")}\r\n            labelIcon={t(\"supportJwtClaimInIntrospectionResponseHelp\")}\r\n            stringify\r\n          />\r\n          <FormGroup\r\n            label={t(\"acrToLoAMapping\")}\r\n            fieldId=\"acrToLoAMapping\"\r\n            labelIcon={\r\n              <HelpItem\r\n                helpText={t(\"acrToLoAMappingHelp\")}\r\n                fieldLabelId=\"acrToLoAMapping\"\r\n              />\r\n            }\r\n          >\r\n            <KeyValueInput\r\n              label={t(\"acrToLoAMapping\")}\r\n              name={convertAttributeNameToForm(\"attributes.acr.loa.map\")}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup\r\n            label={t(\"defaultACRValues\")}\r\n            fieldId=\"defaultACRValues\"\r\n            labelIcon={\r\n              <HelpItem\r\n                helpText={t(\"defaultACRValuesHelp\")}\r\n                fieldLabelId=\"defaultACRValues\"\r\n              />\r\n            }\r\n          >\r\n            <MultiLineInput\r\n              id=\"defaultACRValues\"\r\n              aria-label=\"defaultACRValues\"\r\n              name={convertAttributeNameToForm(\"attributes.default.acr.values\")}\r\n              stringify\r\n            />\r\n          </FormGroup>\r\n          <TextControl\r\n            type=\"text\"\r\n            name={convertAttributeNameToForm(\"attributes.minimum.acr.value\")}\r\n            label={t(\"minimumACRValue\")}\r\n            labelIcon={t(\"minimumACRValueHelp\")}\r\n          />\r\n        </>\r\n      )}\r\n      <ActionGroup>\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={save}\r\n          data-testid=\"OIDCAdvancedSave\"\r\n        >\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button variant=\"link\" onClick={reset} data-testid=\"OIDCAdvancedRevert\">\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import AuthenticationFlowRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/authenticationFlowRepresentation\";\r\nimport { SelectControl, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ActionGroup, Button } from \"@patternfly/react-core\";\r\nimport { sortBy } from \"lodash-es\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\n\r\ntype AuthenticationOverridesProps = {\r\n  save: () => void;\r\n  reset: () => void;\r\n  protocol?: string;\r\n  hasConfigureAccess?: boolean;\r\n};\r\n\r\nexport const AuthenticationOverrides = ({\r\n  protocol,\r\n  save,\r\n  reset,\r\n  hasConfigureAccess,\r\n}: AuthenticationOverridesProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const [flows, setFlows] = useState<AuthenticationFlowRepresentation[]>([]);\r\n\r\n  useFetch(\r\n    () => adminClient.authenticationManagement.getFlows(),\r\n    (flows) => {\r\n      let filteredFlows = [\r\n        ...flows.filter((flow) => flow.providerId !== \"client-flow\"),\r\n      ];\r\n      filteredFlows = sortBy(filteredFlows, [(f) => f.alias]);\r\n      setFlows(filteredFlows);\r\n    },\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <FormAccess\r\n      role=\"manage-clients\"\r\n      fineGrainedAccess={hasConfigureAccess}\r\n      isHorizontal\r\n    >\r\n      <SelectControl\r\n        name=\"authenticationFlowBindingOverrides.browser\"\r\n        label={t(\"browserFlow\")}\r\n        labelIcon={t(\"browserFlowHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={[\r\n          { key: \"\", value: t(\"choose\") },\r\n          ...flows.map(({ id, alias }) => ({ key: id!, value: alias! })),\r\n        ]}\r\n      />\r\n      {protocol === \"openid-connect\" && (\r\n        <SelectControl\r\n          name=\"authenticationFlowBindingOverrides.direct_grant\"\r\n          label={t(\"directGrant\")}\r\n          labelIcon={t(\"directGrantHelp\")}\r\n          controller={{\r\n            defaultValue: \"\",\r\n          }}\r\n          options={[\r\n            { key: \"\", value: t(\"choose\") },\r\n            ...flows.map(({ id, alias }) => ({ key: id!, value: alias! })),\r\n          ]}\r\n        />\r\n      )}\r\n      <ActionGroup>\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={save}\r\n          data-testid=\"OIDCAuthFlowOverrideSave\"\r\n        >\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button\r\n          variant=\"link\"\r\n          onClick={reset}\r\n          data-testid=\"OIDCAuthFlowOverrideRevert\"\r\n        >\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { useController } from \"react-hook-form\";\r\nimport { TimeSelector, TimeSelectorProps } from \"./TimeSelector\";\r\n\r\ntype TimeSelectorFormProps = TimeSelectorProps & {\r\n  name: string;\r\n};\r\n\r\nexport const TimeSelectorForm = (props: TimeSelectorFormProps) => {\r\n  const { field } = useController(props);\r\n\r\n  return <TimeSelector {...props} {...field} />;\r\n};\r\n","import {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  Modal,\r\n} from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype FormFields = {\r\n  node: string;\r\n};\r\n\r\ntype AddHostDialogProps = {\r\n  clientId: string;\r\n  isOpen: boolean;\r\n  onAdded: (host: string) => void;\r\n  onClose: () => void;\r\n};\r\n\r\nexport const AddHostDialog = ({\r\n  clientId: id,\r\n  isOpen,\r\n  onAdded,\r\n  onClose,\r\n}: AddHostDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const form = useForm<FormFields>();\r\n  const {\r\n    handleSubmit,\r\n    formState: { isDirty, isValid },\r\n  } = form;\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  async function onSubmit({ node }: FormFields) {\r\n    try {\r\n      await adminClient.clients.addClusterNode({\r\n        id,\r\n        node,\r\n      });\r\n      onAdded(node);\r\n      addAlert(t(\"addedNodeSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"addedNodeFail\", error);\r\n    }\r\n\r\n    onClose();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title={t(\"addNode\")}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      variant=\"small\"\r\n      actions={[\r\n        <Button\r\n          key=\"confirm\"\r\n          id=\"add-node-confirm\"\r\n          type=\"submit\"\r\n          form=\"add-host-form\"\r\n          isDisabled={!isDirty || !isValid}\r\n        >\r\n          {t(\"save\")}\r\n        </Button>,\r\n        <Button\r\n          key=\"cancel\"\r\n          id=\"add-node-cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={onClose}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form id=\"add-host-form\" onSubmit={handleSubmit(onSubmit)} isHorizontal>\r\n          <TextControl\r\n            name=\"node\"\r\n            label={t(\"nodeHost\")}\r\n            rules={{\r\n              required: t(\"required\"),\r\n            }}\r\n          />\r\n        </Form>\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  ExpandableSection,\r\n  FormGroup,\r\n  Split,\r\n  SplitItem,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Action, KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { TimeSelectorForm } from \"../../components/time-selector/TimeSelectorForm\";\r\nimport useFormatDate, { FORMAT_DATE_AND_TIME } from \"../../utils/useFormatDate\";\r\nimport { AddHostDialog } from \".././advanced/AddHostDialog\";\r\nimport { AdvancedProps, parseResult } from \"../AdvancedTab\";\r\n\r\ntype Node = {\r\n  host: string;\r\n  registration: string;\r\n};\r\n\r\nexport const ClusteringPanel = ({\r\n  save,\r\n  client: { id, registeredNodes, access },\r\n}: AdvancedProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const formatDate = useFormatDate();\r\n\r\n  const [nodes, setNodes] = useState(registeredNodes || {});\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [selectedNode, setSelectedNode] = useState(\"\");\r\n  const [addNodeOpen, setAddNodeOpen] = useState(false);\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(new Date().getTime());\r\n\r\n  const testCluster = async () => {\r\n    const result = await adminClient.clients.testNodesAvailable({ id: id! });\r\n    parseResult(result, \"testCluster\", addAlert, t);\r\n  };\r\n\r\n  const [toggleDeleteNodeConfirm, DeleteNodeConfirm] = useConfirmDialog({\r\n    titleKey: \"deleteNode\",\r\n    messageKey: t(\"deleteNodeBody\", {\r\n      node: selectedNode,\r\n    }),\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.deleteClusterNode({\r\n          id: id!,\r\n          node: selectedNode,\r\n        });\r\n        setNodes({\r\n          ...Object.keys(nodes).reduce((object: any, key) => {\r\n            if (key !== selectedNode) {\r\n              object[key] = nodes[key];\r\n            }\r\n            return object;\r\n          }, {}),\r\n        });\r\n        refresh();\r\n        addAlert(t(\"deleteNodeSuccess\"), AlertVariant.success);\r\n      } catch (error) {\r\n        addError(\"deleteNodeFail\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <FormAccess\r\n        role=\"manage-clients\"\r\n        fineGrainedAccess={access?.configure}\r\n        isHorizontal\r\n      >\r\n        <FormGroup\r\n          label={t(\"nodeReRegistrationTimeout\")}\r\n          fieldId=\"kc-node-reregistration-timeout\"\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"nodeReRegistrationTimeoutHelp\")}\r\n              fieldLabelId=\"nodeReRegistrationTimeout\"\r\n            />\r\n          }\r\n        >\r\n          <Split hasGutter>\r\n            <SplitItem>\r\n              <TimeSelectorForm name=\"nodeReRegistrationTimeout\" />\r\n            </SplitItem>\r\n            <SplitItem>\r\n              <Button variant={ButtonVariant.secondary} onClick={() => save()}>\r\n                {t(\"save\")}\r\n              </Button>\r\n            </SplitItem>\r\n          </Split>\r\n        </FormGroup>\r\n      </FormAccess>\r\n      <>\r\n        <DeleteNodeConfirm />\r\n        <AddHostDialog\r\n          clientId={id!}\r\n          isOpen={addNodeOpen}\r\n          onAdded={(node) => {\r\n            nodes[node] = Date.now() / 1000;\r\n            refresh();\r\n          }}\r\n          onClose={() => setAddNodeOpen(false)}\r\n        />\r\n        <ExpandableSection\r\n          toggleText={t(\"registeredClusterNodes\")}\r\n          onToggle={(_event, val) => setExpanded(val)}\r\n          isExpanded={expanded}\r\n        >\r\n          <KeycloakDataTable\r\n            key={key}\r\n            ariaLabelKey=\"registeredClusterNodes\"\r\n            loader={() =>\r\n              Promise.resolve<Node[]>(\r\n                Object.entries(nodes || {}).map((entry) => {\r\n                  return { host: entry[0], registration: entry[1] };\r\n                }),\r\n              )\r\n            }\r\n            toolbarItem={\r\n              <>\r\n                <ToolbarItem>\r\n                  <Button\r\n                    id=\"testClusterAvailability\"\r\n                    data-testid=\"test-cluster-availability\"\r\n                    onClick={testCluster}\r\n                    variant={ButtonVariant.secondary}\r\n                    isDisabled={Object.keys(nodes).length === 0}\r\n                  >\r\n                    {t(\"testClusterAvailability\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n                <ToolbarItem>\r\n                  <Button\r\n                    id=\"registerNodeManually\"\r\n                    data-testid=\"registerNodeManually\"\r\n                    onClick={() => setAddNodeOpen(true)}\r\n                    variant={ButtonVariant.tertiary}\r\n                  >\r\n                    {t(\"registerNodeManually\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n              </>\r\n            }\r\n            actions={[\r\n              {\r\n                title: t(\"delete\"),\r\n                onRowClick: (node) => {\r\n                  setSelectedNode(node.host);\r\n                  toggleDeleteNodeConfirm();\r\n                },\r\n              } as Action<Node>,\r\n            ]}\r\n            columns={[\r\n              {\r\n                name: \"host\",\r\n                displayKey: \"nodeHost\",\r\n              },\r\n              {\r\n                name: \"registration\",\r\n                displayKey: \"lastRegistration\",\r\n                cellFormatters: [\r\n                  (value) =>\r\n                    value\r\n                      ? formatDate(\r\n                          new Date(parseInt(value.toString()) * 1000),\r\n                          FORMAT_DATE_AND_TIME,\r\n                        )\r\n                      : \"\",\r\n                ],\r\n              },\r\n            ]}\r\n            emptyState={\r\n              <ListEmptyState\r\n                message={t(\"noNodes\")}\r\n                instructions={t(\"noNodesInstructions\")}\r\n                primaryActionText={t(\"registerNodeManually\")}\r\n                onPrimaryAction={() => setAddNodeOpen(true)}\r\n              />\r\n            }\r\n          />\r\n        </ExpandableSection>\r\n      </>\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype ApplicationUrlsProps = {\r\n  isDisabled?: boolean;\r\n};\r\n\r\nexport const ApplicationUrls = (props: ApplicationUrlsProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <>\r\n      <TextControl\r\n        name=\"attributes.logoUri\"\r\n        label={t(\"logoUrl\")}\r\n        labelIcon={t(\"logoUrlHelp\")}\r\n        type=\"url\"\r\n        {...props}\r\n      />\r\n      <TextControl\r\n        name=\"attributes.policyUri\"\r\n        label={t(\"policyUrl\")}\r\n        labelIcon={t(\"policyUrlHelp\")}\r\n        type=\"url\"\r\n        {...props}\r\n      />\r\n      <TextControl\r\n        name=\"attributes.tosUri\"\r\n        label={t(\"termsOfServiceUrl\")}\r\n        labelIcon={t(\"termsOfServiceUrlHelp\")}\r\n        type=\"url\"\r\n        {...props}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { ProviderRepresentation } from \"@keycloak/keycloak-admin-client/lib/defs/serverInfoRepesentation\";\r\nimport { ActionGroup, Button, FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem, SelectControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { MultiLineInput } from \"../../components/multi-line-input/MultiLineInput\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { convertAttributeNameToForm, sortProviders } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { ApplicationUrls } from \"./ApplicationUrls\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\n\r\ntype FineGrainOpenIdConnectProps = {\r\n  save: () => void;\r\n  reset: () => void;\r\n  hasConfigureAccess?: boolean;\r\n};\r\n\r\nexport const FineGrainOpenIdConnect = ({\r\n  save,\r\n  reset,\r\n  hasConfigureAccess,\r\n}: FineGrainOpenIdConnectProps) => {\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext();\r\n  const providers = useServerInfo().providers;\r\n  const clientSignatureProviders = providers?.clientSignature.providers;\r\n  const contentEncryptionProviders = providers?.contentencryption.providers;\r\n  const cekManagementProviders = providers?.cekmanagement.providers;\r\n  const signatureProviders = providers?.signature.providers;\r\n\r\n  const convert = (list: { [index: string]: ProviderRepresentation }) =>\r\n    sortProviders(list).map((i) => ({ key: i, value: i }));\r\n\r\n  const prependEmpty = (list: { [index: string]: ProviderRepresentation }) => [\r\n    { key: \"\", value: t(\"choose\") },\r\n    ...convert(list),\r\n  ];\r\n\r\n  const prependNone = (list: { [index: string]: ProviderRepresentation }) => [\r\n    { key: \"none\", value: t(\"none\") },\r\n    ...convert(list),\r\n  ];\r\n\r\n  return (\r\n    <FormAccess\r\n      role=\"manage-clients\"\r\n      fineGrainedAccess={hasConfigureAccess}\r\n      isHorizontal\r\n    >\r\n      <ApplicationUrls />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.access.token.signed.response.alg\",\r\n        )}\r\n        label={t(\"accessTokenSignatureAlgorithm\")}\r\n        labelIcon={t(\"accessTokenSignatureAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(clientSignatureProviders!)}\r\n      />\r\n      <FormGroup\r\n        label={t(\"useRfc9068AccessTokenType\")}\r\n        fieldId=\"useRfc9068AccessTokenType\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"useRfc9068AccessTokenTypeHelp\")}\r\n            fieldLabelId=\"useRfc9068AccessTokenType\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.access.token.header.type.rfc9068\",\r\n          )}\r\n          defaultValue=\"false\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"useRfc9068AccessTokenType\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"useRfc9068AccessTokenType\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.id.token.signed.response.alg\",\r\n        )}\r\n        label={t(\"idTokenSignatureAlgorithm\")}\r\n        labelIcon={t(\"idTokenSignatureAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(clientSignatureProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.id.token.encrypted.response.alg\",\r\n        )}\r\n        label={t(\"idTokenEncryptionKeyManagementAlgorithm\")}\r\n        labelIcon={t(\"idTokenEncryptionKeyManagementAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(cekManagementProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.id.token.encrypted.response.enc\",\r\n        )}\r\n        label={t(\"idTokenEncryptionContentEncryptionAlgorithm\")}\r\n        labelIcon={t(\"idTokenEncryptionContentEncryptionAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(contentEncryptionProviders!)}\r\n      />\r\n      <FormGroup\r\n        label={t(\"idTokenAsDetachedSignature\")}\r\n        fieldId=\"idTokenAsDetachedSignature\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"idTokenAsDetachedSignatureHelp\")}\r\n            fieldLabelId=\"idTokenAsDetachedSignature\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.id.token.as.detached.signature\",\r\n          )}\r\n          defaultValue=\"false\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"idTokenAsDetachedSignature\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"idTokenAsDetachedSignature\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.user.info.response.signature.alg\",\r\n        )}\r\n        label={t(\"userInfoSignedResponseAlgorithm\")}\r\n        labelIcon={t(\"userInfoSignedResponseAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(signatureProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.user.info.encrypted.response.alg\",\r\n        )}\r\n        label={t(\"userInfoResponseEncryptionKeyManagementAlgorithm\")}\r\n        labelIcon={t(\"userInfoResponseEncryptionKeyManagementAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(cekManagementProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.user.info.encrypted.response.enc\",\r\n        )}\r\n        label={t(\"userInfoResponseEncryptionContentEncryptionAlgorithm\")}\r\n        labelIcon={t(\r\n          \"userInfoResponseEncryptionContentEncryptionAlgorithmHelp\",\r\n        )}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(contentEncryptionProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.request.object.signature.alg\",\r\n        )}\r\n        label={t(\"requestObjectSignatureAlgorithm\")}\r\n        labelIcon={t(\"requestObjectSignatureAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependNone(clientSignatureProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.request.object.encryption.alg\",\r\n        )}\r\n        label={t(\"requestObjectEncryption\")}\r\n        labelIcon={t(\"requestObjectEncryptionHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(cekManagementProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.request.object.encryption.enc\",\r\n        )}\r\n        label={t(\"requestObjectEncoding\")}\r\n        labelIcon={t(\"requestObjectEncodingHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(contentEncryptionProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.request.object.required\",\r\n        )}\r\n        label={t(\"requestObjectRequired\")}\r\n        labelIcon={t(\"requestObjectRequiredHelp\")}\r\n        controller={{\r\n          defaultValue: \"not required\",\r\n        }}\r\n        options={[\r\n          \"not required\",\r\n          \"request or request_uri\",\r\n          \"request only\",\r\n          \"request_uri only\",\r\n        ].map((p) => ({\r\n          key: p,\r\n          value: t(`requestObject.${p}`),\r\n        }))}\r\n      />\r\n      <FormGroup\r\n        label={t(\"validRequestURIs\")}\r\n        fieldId=\"validRequestURIs\"\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"validRequestURIsHelp\")}\r\n            fieldLabelId=\"validRequestURIs\"\r\n          />\r\n        }\r\n      >\r\n        <MultiLineInput\r\n          name={convertAttributeNameToForm(\"attributes.request.uris\")}\r\n          aria-label={t(\"validRequestURIs\")}\r\n          addButtonLabel=\"addRequestUri\"\r\n          stringify\r\n        />\r\n      </FormGroup>\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.authorization.signed.response.alg\",\r\n        )}\r\n        label={t(\"authorizationSignedResponseAlg\")}\r\n        labelIcon={t(\"authorizationSignedResponseAlgHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(signatureProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.authorization.encrypted.response.alg\",\r\n        )}\r\n        label={t(\"authorizationEncryptedResponseAlg\")}\r\n        labelIcon={t(\"authorizationEncryptedResponseAlgHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(cekManagementProviders!)}\r\n      />\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.authorization.encrypted.response.enc\",\r\n        )}\r\n        label={t(\"authorizationEncryptedResponseEnc\")}\r\n        labelIcon={t(\"authorizationEncryptedResponseEncHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={prependEmpty(contentEncryptionProviders!)}\r\n      />\r\n      <ActionGroup>\r\n        <Button\r\n          variant=\"secondary\"\r\n          id=\"fineGrainSave\"\r\n          data-testid=\"fineGrainSave\"\r\n          onClick={save}\r\n        >\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button\r\n          id=\"fineGrainRevert\"\r\n          data-testid=\"fineGrainRevert\"\r\n          variant=\"link\"\r\n          onClick={reset}\r\n        >\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { ActionGroup, Button } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ApplicationUrls } from \"./ApplicationUrls\";\r\n\r\ntype FineGrainSamlEndpointConfigProps = {\r\n  save: () => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport const FineGrainSamlEndpointConfig = ({\r\n  save,\r\n  reset,\r\n}: FineGrainSamlEndpointConfigProps) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <FormAccess role=\"manage-realm\" isHorizontal>\r\n      <ApplicationUrls />\r\n      <TextControl\r\n        name=\"attributes.saml_assertion_consumer_url_post\"\r\n        label={t(\"assertionConsumerServicePostBindingURL\")}\r\n        labelIcon={t(\"assertionConsumerServicePostBindingURLHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_assertion_consumer_url_redirect\"\r\n        label={t(\"assertionConsumerServiceRedirectBindingURL\")}\r\n        labelIcon={t(\"assertionConsumerServiceRedirectBindingURLHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_single_logout_service_url_post\"\r\n        label={t(\"logoutServicePostBindingURL\")}\r\n        labelIcon={t(\"logoutServicePostBindingURLHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_single_logout_service_url_redirect\"\r\n        label={t(\"logoutServiceRedirectBindingURL\")}\r\n        labelIcon={t(\"logoutServiceRedirectBindingURLHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_single_logout_service_url_soap\"\r\n        label={t(\"logoutServiceSoapBindingUrl\")}\r\n        labelIcon={t(\"logoutServiceSoapBindingUrlHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_single_logout_service_url_artifact\"\r\n        label={t(\"logoutServiceArtifactBindingUrl\")}\r\n        labelIcon={t(\"logoutServiceArtifactBindingUrlHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_artifact_binding_url\"\r\n        label={t(\"artifactBindingUrl\")}\r\n        labelIcon={t(\"artifactBindingUrlHelp\")}\r\n        type=\"url\"\r\n      />\r\n      <TextControl\r\n        name=\"attributes.saml_artifact_resolution_service_url\"\r\n        label={t(\"artifactResolutionService\")}\r\n        labelIcon={t(\"artifactResolutionServiceHelp\")}\r\n        type=\"url\"\r\n      />\r\n\r\n      <ActionGroup>\r\n        <Button variant=\"tertiary\" onClick={save} data-testid=\"fineGrainSave\">\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button variant=\"link\" onClick={reset} data-testid=\"fineGrainRevert\">\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { ActionGroup, Button, FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { HelpItem, SelectControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport useIsFeatureEnabled, { Feature } from \"../../utils/useIsFeatureEnabled\";\r\n\r\ntype OpenIdConnectCompatibilityModesProps = {\r\n  save: () => void;\r\n  reset: () => void;\r\n  hasConfigureAccess?: boolean;\r\n};\r\n\r\nexport const OpenIdConnectCompatibilityModes = ({\r\n  save,\r\n  reset,\r\n  hasConfigureAccess,\r\n}: OpenIdConnectCompatibilityModesProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, watch } = useFormContext();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n  const tokenExchangeEnabled = watch(\r\n    convertAttributeNameToForm<FormFields>(\r\n      \"attributes.standard.token.exchange.enabled\",\r\n    ),\r\n  );\r\n  const useRefreshTokens = watch(\r\n    convertAttributeNameToForm<FormFields>(\"attributes.use.refresh.tokens\"),\r\n    \"true\",\r\n  );\r\n  return (\r\n    <FormAccess\r\n      role=\"manage-clients\"\r\n      fineGrainedAccess={hasConfigureAccess}\r\n      isHorizontal\r\n    >\r\n      <FormGroup\r\n        label={t(\"excludeSessionStateFromAuthenticationResponse\")}\r\n        fieldId=\"excludeSessionStateFromAuthenticationResponse\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"excludeSessionStateFromAuthenticationResponseHelp\")}\r\n            fieldLabelId=\"excludeSessionStateFromAuthenticationResponse\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.exclude.session.state.from.auth.response\",\r\n          )}\r\n          defaultValue=\"\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"excludeSessionStateFromAuthenticationResponse-switch\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"excludeSessionStateFromAuthenticationResponse\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <FormGroup\r\n        label={t(\"excludeIssuerFromAuthenticationResponse\")}\r\n        fieldId=\"excludeIssuerFromAuthenticationResponse\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"excludeIssuerFromAuthenticationResponseHelp\")}\r\n            fieldLabelId=\"excludeIssuerFromAuthenticationResponse\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.exclude.issuer.from.auth.response\",\r\n          )}\r\n          defaultValue=\"\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"excludeIssuerFromAuthenticationResponse-switch\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"excludeIssuerFromAuthenticationResponse\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <FormGroup\r\n        label={t(\"useRefreshTokens\")}\r\n        fieldId=\"useRefreshTokens\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"useRefreshTokensHelp\")}\r\n            fieldLabelId=\"useRefreshTokens\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.use.refresh.tokens\",\r\n          )}\r\n          defaultValue=\"true\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"useRefreshTokens\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"useRefreshTokens\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <FormGroup\r\n        label={t(\"useRefreshTokenForClientCredentialsGrant\")}\r\n        fieldId=\"useRefreshTokenForClientCredentialsGrant\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"useRefreshTokenForClientCredentialsGrantHelp\")}\r\n            fieldLabelId=\"useRefreshTokenForClientCredentialsGrant\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.client_credentials.use_refresh_token\",\r\n          )}\r\n          defaultValue=\"false\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"useRefreshTokenForClientCredentialsGrant\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"useRefreshTokenForClientCredentialsGrant\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      <FormGroup\r\n        label={t(\"useLowerCaseBearerType\")}\r\n        fieldId=\"useLowerCaseBearerType\"\r\n        hasNoPaddingTop\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"useLowerCaseBearerTypeHelp\")}\r\n            fieldLabelId=\"useLowerCaseBearerType\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.token.response.type.bearer.lower-case\",\r\n          )}\r\n          defaultValue=\"false\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"useLowerCaseBearerType\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value === \"true\"}\r\n              onChange={(_event, value) => field.onChange(value.toString())}\r\n              aria-label={t(\"useLowerCaseBearerType\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n\r\n      {isFeatureEnabled(Feature.StandardTokenExchangeV2) && (\r\n        <SelectControl\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.standard.token.exchange.enableRefreshRequestedTokenType\",\r\n          )}\r\n          label={t(\"enableRefreshRequestedTokenType\")}\r\n          labelIcon={t(\"enableRefreshRequestedTokenTypeHelp\")}\r\n          controller={{\r\n            defaultValue: \"\",\r\n          }}\r\n          isDisabled={\r\n            tokenExchangeEnabled?.toString() !== \"true\" ||\r\n            useRefreshTokens?.toString() !== \"true\"\r\n          }\r\n          options={[\r\n            { key: \"\", value: t(\"choose\") },\r\n            { key: \"NO\", value: t(\"no\") },\r\n            { key: \"SAME_SESSION\", value: t(\"sameSession\") },\r\n          ]}\r\n        />\r\n      )}\r\n      <ActionGroup>\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={save}\r\n          data-testid=\"OIDCCompatabilitySave\"\r\n        >\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button\r\n          variant=\"link\"\r\n          onClick={reset}\r\n          data-testid=\"OIDCCompatabilityRevert\"\r\n        >\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { Button, ActionGroup } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields, SaveOptions } from \"../ClientDetails\";\r\nimport ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\n\r\ntype OpenIdVerifiableCredentialsProps = {\r\n  client: ClientRepresentation;\r\n  save: (options?: SaveOptions) => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport const OpenIdVerifiableCredentials = ({\r\n  save,\r\n  reset,\r\n}: OpenIdVerifiableCredentialsProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <FormAccess role=\"manage-clients\" isHorizontal>\r\n      <DefaultSwitchControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.oid4vci.enabled\",\r\n        )}\r\n        label={t(\"oid4vciEnabled\")}\r\n        labelIcon={t(\"oid4vciEnabledHelp\")}\r\n        stringify\r\n      />\r\n      <ActionGroup>\r\n        <Button\r\n          variant=\"secondary\"\r\n          id=\"oid4vciSave\"\r\n          data-testid=\"oid4vciSave\"\r\n          onClick={() => save()}\r\n        >\r\n          {t(\"save\")}\r\n        </Button>\r\n        <Button\r\n          id=\"oid4vciRevert\"\r\n          data-testid=\"oid4vciRevert\"\r\n          variant=\"link\"\r\n          onClick={reset}\r\n        >\r\n          {t(\"revert\")}\r\n        </Button>\r\n      </ActionGroup>\r\n    </FormAccess>\r\n  );\r\n};\r\n","export const PROTOCOL_OIDC = \"openid-connect\";\r\nexport const PROTOCOL_OID4VC = \"oid4vc\";\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type GlobalRequestResult from \"@keycloak/keycloak-admin-client/lib/defs/globalRequestResult\";\r\nimport { AlertVariant, PageSection, Text } from \"@patternfly/react-core\";\r\nimport type { TFunction } from \"i18next\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ScrollForm } from \"@keycloak/keycloak-ui-shared\";\r\nimport type { AddAlertFunction } from \"@keycloak/keycloak-ui-shared\";\r\nimport { convertAttributeNameToForm, toUpperCase } from \"../util\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\nimport type { FormFields, SaveOptions } from \"./ClientDetails\";\r\nimport { AdvancedSettings } from \"./advanced/AdvancedSettings\";\r\nimport { AuthenticationOverrides } from \"./advanced/AuthenticationOverrides\";\r\nimport { ClusteringPanel } from \"./advanced/ClusteringPanel\";\r\nimport { FineGrainOpenIdConnect } from \"./advanced/FineGrainOpenIdConnect\";\r\nimport { FineGrainSamlEndpointConfig } from \"./advanced/FineGrainSamlEndpointConfig\";\r\nimport { OpenIdConnectCompatibilityModes } from \"./advanced/OpenIdConnectCompatibilityModes\";\r\nimport { OpenIdVerifiableCredentials } from \"./advanced/OpenIdVerifiableCredentials\";\r\nimport { PROTOCOL_OIDC, PROTOCOL_OID4VC } from \"./constants\";\r\n\r\nexport const parseResult = (\r\n  result: GlobalRequestResult,\r\n  prefixKey: string,\r\n  addAlert: AddAlertFunction,\r\n  t: TFunction,\r\n) => {\r\n  const successCount = result.successRequests?.length || 0;\r\n  const failedCount = result.failedRequests?.length || 0;\r\n\r\n  if (successCount === 0 && failedCount === 0) {\r\n    addAlert(t(\"noAdminUrlSet\"), AlertVariant.warning);\r\n  } else if (failedCount > 0) {\r\n    addAlert(\r\n      t(prefixKey + \"Success\", { successNodes: result.successRequests }),\r\n      AlertVariant.success,\r\n    );\r\n    addAlert(\r\n      t(prefixKey + \"Fail\", { failedNodes: result.failedRequests }),\r\n      AlertVariant.danger,\r\n    );\r\n  } else {\r\n    addAlert(\r\n      t(prefixKey + \"Success\", { successNodes: result.successRequests }),\r\n      AlertVariant.success,\r\n    );\r\n  }\r\n};\r\n\r\nexport type AdvancedProps = {\r\n  save: (options?: SaveOptions) => void;\r\n  client: ClientRepresentation;\r\n};\r\n\r\nexport const AdvancedTab = ({ save, client }: AdvancedProps) => {\r\n  const { t } = useTranslation();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n\r\n  const { setValue } = useFormContext();\r\n  const {\r\n    publicClient,\r\n    attributes,\r\n    protocol,\r\n    authenticationFlowBindingOverrides,\r\n  } = client;\r\n\r\n  const resetFields = (names: string[]) => {\r\n    for (const name of names) {\r\n      setValue(\r\n        convertAttributeNameToForm<FormFields>(`attributes.${name}`),\r\n        attributes?.[name] || \"\",\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-py-0\">\r\n      <ScrollForm\r\n        label={t(\"jumpToSection\")}\r\n        sections={[\r\n          {\r\n            title: t(\"clustering\"),\r\n            isHidden: !publicClient,\r\n            panel: <ClusteringPanel client={client} save={save} />,\r\n          },\r\n          {\r\n            title: t(\"fineGrainOpenIdConnectConfiguration\"),\r\n            isHidden: protocol !== PROTOCOL_OIDC,\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"fineGrainOpenIdConnectConfigurationHelp\")}\r\n                </Text>\r\n                <FineGrainOpenIdConnect\r\n                  save={save}\r\n                  reset={() => {\r\n                    resetFields([\r\n                      \"logoUri\",\r\n                      \"policyUri\",\r\n                      \"tosUri\",\r\n                      \"access.token.signed.response.alg\",\r\n                      \"access.token.header.type.rfc9068\",\r\n                      \"id.token.signed.response.alg\",\r\n                      \"id.token.encrypted.response.alg\",\r\n                      \"id.token.encrypted.response.enc\",\r\n                      \"id.token.as.detached.signature\",\r\n                      \"user.info.response.signature.alg\",\r\n                      \"user.info.encrypted.response.alg\",\r\n                      \"user.info.encrypted.response.enc\",\r\n                      \"request.object.signature.alg\",\r\n                      \"request.object.encryption.alg\",\r\n                      \"request.object.encryption.enc\",\r\n                      \"request.object.required\",\r\n                      \"request.uris\",\r\n                      \"authorization.signed.response.alg\",\r\n                      \"authorization.encrypted.response.alg\",\r\n                      \"authorization.encrypted.response.enc\",\r\n                    ]);\r\n                  }}\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n          {\r\n            title: t(\"openIdConnectCompatibilityModes\"),\r\n            isHidden: protocol !== PROTOCOL_OIDC,\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"openIdConnectCompatibilityModesHelp\")}\r\n                </Text>\r\n                <OpenIdConnectCompatibilityModes\r\n                  save={() => save()}\r\n                  reset={() =>\r\n                    resetFields([\r\n                      \"exclude.session.state.from.auth.response\",\r\n                      \"use.refresh.tokens\",\r\n                      \"client_credentials.use_refresh_token\",\r\n                      \"token.response.type.bearer.lower-case\",\r\n                    ])\r\n                  }\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n          {\r\n            title: t(\"fineGrainSamlEndpointConfig\"),\r\n            isHidden: protocol === PROTOCOL_OIDC,\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"fineGrainSamlEndpointConfigHelp\")}\r\n                </Text>\r\n                <FineGrainSamlEndpointConfig\r\n                  save={() => save()}\r\n                  reset={() =>\r\n                    resetFields([\r\n                      \"logoUri\",\r\n                      \"policyUri\",\r\n                      \"tosUri\",\r\n                      \"saml_assertion_consumer_url_post\",\r\n                      \"saml_assertion_consumer_url_redirect\",\r\n                      \"saml_single_logout_service_url_post\",\r\n                      \"saml_single_logout_service_url_redirect\",\r\n                      \"saml_single_logout_service_url_artifact\",\r\n                      \"saml_artifact_binding_url\",\r\n                      \"saml_artifact_resolution_service_url\",\r\n                    ])\r\n                  }\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n          {\r\n            title: t(\"advancedSettings\"),\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"advancedSettings\" + toUpperCase(protocol || \"\"))}\r\n                </Text>\r\n                <AdvancedSettings\r\n                  protocol={protocol}\r\n                  save={() => save()}\r\n                  reset={() => {\r\n                    resetFields([\r\n                      \"saml.assertion.lifespan\",\r\n                      \"access.token.lifespan\",\r\n                      \"session.idle.timeout\",\r\n                      \"client.session.max.lifespan\",\r\n                      \"client.offline.session.idle.timeout\",\r\n                      \"client.offline.session.max.lifespan\",\r\n                      \"dpop.bound.access.tokens\",\r\n                      \"tls.client.certificate.bound.access.tokens\",\r\n                      \"require.pushed.authorization.requests\",\r\n                      \"client.use.lightweight.access.token.enabled\",\r\n                      \"client.introspection.response.allow.jwt.claim.enabled\",\r\n                      \"pkce.code.challenge.method\",\r\n                      \"acr.loa.map\",\r\n                      \"default.acr.values\",\r\n                      \"minimum.acr.value\",\r\n                    ]);\r\n                  }}\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n          {\r\n            title: t(\"openIdVerifiableCredentials\"),\r\n            isHidden:\r\n              (protocol !== PROTOCOL_OIDC && protocol !== PROTOCOL_OID4VC) ||\r\n              !isFeatureEnabled(Feature.OpenId4VCI),\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"openIdVerifiableCredentialsHelp\")}\r\n                </Text>\r\n                <OpenIdVerifiableCredentials\r\n                  client={client}\r\n                  save={save}\r\n                  reset={() => resetFields([\"oid4vci.enabled\"])}\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n          {\r\n            title: t(\"authenticationOverrides\"),\r\n            panel: (\r\n              <>\r\n                <Text className=\"pf-v5-u-pb-lg\">\r\n                  {t(\"authenticationOverridesHelp\")}\r\n                </Text>\r\n                <AuthenticationOverrides\r\n                  protocol={protocol}\r\n                  save={() => save()}\r\n                  reset={() => {\r\n                    setValue(\r\n                      \"authenticationFlowBindingOverrides.browser\",\r\n                      authenticationFlowBindingOverrides?.browser,\r\n                    );\r\n                    setValue(\r\n                      \"authenticationFlowBindingOverrides.direct_grant\",\r\n                      authenticationFlowBindingOverrides?.direct_grant,\r\n                    );\r\n                  }}\r\n                />\r\n              </>\r\n            ),\r\n          },\r\n        ]}\r\n        borders\r\n      />\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type UserSessionRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userSessionRepresentation\";\r\nimport { PageSection } from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport { fetchAdminUI } from \"../context/auth/admin-ui-endpoint\";\r\nimport SessionsTable from \"../sessions/SessionsTable\";\r\n\r\ntype ClientSessionsProps = {\r\n  client: ClientRepresentation;\r\n};\r\n\r\nexport const ClientSessions = ({ client }: ClientSessionsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const loader = async (first?: number, max?: number, search?: string) =>\r\n    fetchAdminUI<UserSessionRepresentation[]>(\r\n      adminClient,\r\n      \"ui-ext/sessions/client\",\r\n      {\r\n        first: `${first}`,\r\n        max: `${max}`,\r\n        type: \"ALL\",\r\n        clientId: client.id!,\r\n        search: search || \"\",\r\n      },\r\n    );\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <SessionsTable\r\n        loader={loader}\r\n        hiddenColumns={[\"clients\"]}\r\n        emptyInstructions={t(\"noSessionsForClient\")}\r\n      />\r\n    </PageSection>\r\n  );\r\n};\r\n","import { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nimport { FixedButtonsGroup } from \"../../components/form/FixedButtonGroup\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport type { ClientSettingsProps } from \"../ClientSettings\";\r\nimport { LoginSettings } from \"./LoginSettings\";\r\n\r\nexport const AccessSettings = ({\r\n  client,\r\n  save,\r\n  reset,\r\n}: ClientSettingsProps) => {\r\n  const { t } = useTranslation();\r\n  const { watch } = useFormContext<FormFields>();\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-clients\") || client.access?.configure;\r\n\r\n  const protocol = watch(\"protocol\");\r\n\r\n  return (\r\n    <FormAccess\r\n      isHorizontal\r\n      fineGrainedAccess={client.access?.configure}\r\n      role=\"manage-clients\"\r\n    >\r\n      {!client.bearerOnly && <LoginSettings protocol={protocol} />}\r\n      {protocol !== \"saml\" && (\r\n        <TextControl\r\n          type=\"url\"\r\n          name=\"adminUrl\"\r\n          label={t(\"adminURL\")}\r\n          labelIcon={t(\"adminURLHelp\")}\r\n        />\r\n      )}\r\n      {client.bearerOnly && (\r\n        <FixedButtonsGroup\r\n          name=\"settings\"\r\n          save={save}\r\n          reset={reset}\r\n          isDisabled={isManager}\r\n        />\r\n      )}\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { SelectControl, TextAreaControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\n\r\nexport const LoginSettingsPanel = ({ access }: { access?: boolean }) => {\r\n  const { t } = useTranslation();\r\n  const { watch } = useFormContext<FormFields>();\r\n\r\n  const loginThemes = useServerInfo().themes![\"login\"];\r\n  const consentRequired = watch(\"consentRequired\");\r\n  const displayOnConsentScreen: string = watch(\r\n    convertAttributeNameToForm<FormFields>(\r\n      \"attributes.display.on.consent.screen\",\r\n    ),\r\n  );\r\n\r\n  return (\r\n    <FormAccess isHorizontal fineGrainedAccess={access} role=\"manage-clients\">\r\n      <SelectControl\r\n        name=\"attributes.login_theme\"\r\n        label={t(\"loginTheme\")}\r\n        labelIcon={t(\"loginThemeHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        options={[\r\n          { key: \"\", value: t(\"choose\") },\r\n          ...loginThemes.map(({ name }) => ({ key: name, value: name })),\r\n        ]}\r\n      />\r\n      <DefaultSwitchControl\r\n        name=\"consentRequired\"\r\n        label={t(\"consentRequired\")}\r\n        labelIcon={t(\"consentRequiredHelp\")}\r\n      />\r\n      <DefaultSwitchControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.display.on.consent.screen\",\r\n        )}\r\n        label={t(\"displayOnClient\")}\r\n        labelIcon={t(\"displayOnClientHelp\")}\r\n        isDisabled={!consentRequired}\r\n        stringify\r\n      />\r\n      <TextAreaControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.consent.screen.text\",\r\n        )}\r\n        label={t(\"consentScreenText\")}\r\n        labelIcon={t(\"consentScreenTextHelp\")}\r\n        isDisabled={!(consentRequired && displayOnConsentScreen === \"true\")}\r\n      />\r\n    </FormAccess>\r\n  );\r\n};\r\n","import { FormGroup, Switch } from \"@patternfly/react-core\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem, TextControl } from \"@keycloak/keycloak-ui-shared\";\r\n\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { FixedButtonsGroup } from \"../../components/form/FixedButtonGroup\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport type { ClientSettingsProps } from \"../ClientSettings\";\r\n\r\nconst validateUrl = (uri: string | undefined, error: string) =>\r\n  ((uri?.startsWith(\"https://\") || uri?.startsWith(\"http://\")) &&\r\n    !uri.includes(\"*\")) ||\r\n  uri === \"\" ||\r\n  error;\r\n\r\nexport const LogoutPanel = ({\r\n  save,\r\n  reset,\r\n  client: { access },\r\n}: ClientSettingsProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, watch } = useFormContext<FormFields>();\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-clients\") || access?.configure;\r\n\r\n  const protocol = watch(\"protocol\");\r\n  const frontchannelLogout = watch(\"frontchannelLogout\");\r\n  const frontchannelLogoutTooltip =\r\n    protocol === \"openid-connect\"\r\n      ? \"frontchannelLogoutOIDCHelp\"\r\n      : \"frontchannelLogoutHelp\";\r\n\r\n  return (\r\n    <FormAccess\r\n      isHorizontal\r\n      fineGrainedAccess={access?.configure}\r\n      role=\"manage-clients\"\r\n    >\r\n      <FormGroup\r\n        label={t(\"frontchannelLogout\")}\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(frontchannelLogoutTooltip)}\r\n            fieldLabelId=\"frontchannelLogout\"\r\n          />\r\n        }\r\n        fieldId=\"kc-frontchannelLogout\"\r\n        hasNoPaddingTop\r\n      >\r\n        <Controller\r\n          name=\"frontchannelLogout\"\r\n          defaultValue={true}\r\n          control={control}\r\n          render={({ field }) => (\r\n            <Switch\r\n              id=\"kc-frontchannelLogout-switch\"\r\n              label={t(\"on\")}\r\n              labelOff={t(\"off\")}\r\n              isChecked={field.value}\r\n              onChange={field.onChange}\r\n              aria-label={t(\"frontchannelLogout\")}\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n      {protocol === \"openid-connect\" && frontchannelLogout && (\r\n        <TextControl\r\n          data-testid=\"frontchannelLogoutUrl\"\r\n          type=\"url\"\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.frontchannel.logout.url\",\r\n          )}\r\n          label={t(\"frontchannelLogoutUrl\")}\r\n          labelIcon={t(\"frontchannelLogoutUrlHelp\")}\r\n          rules={{\r\n            validate: (uri) => validateUrl(uri, t(\"frontchannelUrlInvalid\")),\r\n          }}\r\n        />\r\n      )}\r\n      {protocol === \"openid-connect\" && frontchannelLogout && (\r\n        <DefaultSwitchControl\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.frontchannel.logout.session.required\",\r\n          )}\r\n          defaultValue=\"true\"\r\n          label={t(\"frontchannelLogoutSessionRequired\")}\r\n          labelIcon={t(\"frontchannelLogoutSessionRequiredHelp\")}\r\n          stringify\r\n        />\r\n      )}\r\n      {protocol === \"openid-connect\" && !frontchannelLogout && (\r\n        <>\r\n          <TextControl\r\n            data-testid=\"backchannelLogoutUrl\"\r\n            type=\"url\"\r\n            name={convertAttributeNameToForm<FormFields>(\r\n              \"attributes.backchannel.logout.url\",\r\n            )}\r\n            label={t(\"backchannelLogoutUrl\")}\r\n            labelIcon={t(\"backchannelLogoutUrlHelp\")}\r\n            rules={{\r\n              validate: (uri) => validateUrl(uri, t(\"backchannelUrlInvalid\")),\r\n            }}\r\n          />\r\n          <FormGroup\r\n            label={t(\"backchannelLogoutSessionRequired\")}\r\n            labelIcon={\r\n              <HelpItem\r\n                helpText={t(\"backchannelLogoutSessionRequiredHelp\")}\r\n                fieldLabelId=\"backchannelLogoutSessionRequired\"\r\n              />\r\n            }\r\n            fieldId=\"backchannelLogoutSessionRequired\"\r\n            hasNoPaddingTop\r\n          >\r\n            <Controller\r\n              name={convertAttributeNameToForm<FormFields>(\r\n                \"attributes.backchannel.logout.session.required\",\r\n              )}\r\n              defaultValue=\"false\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <Switch\r\n                  id=\"backchannelLogoutSessionRequired\"\r\n                  label={t(\"on\")}\r\n                  labelOff={t(\"off\")}\r\n                  isChecked={field.value === \"true\"}\r\n                  onChange={(_event, value) => field.onChange(value.toString())}\r\n                  aria-label={t(\"backchannelLogoutSessionRequired\")}\r\n                />\r\n              )}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup\r\n            label={t(\"backchannelLogoutRevokeOfflineSessions\")}\r\n            labelIcon={\r\n              <HelpItem\r\n                helpText={t(\"backchannelLogoutRevokeOfflineSessionsHelp\")}\r\n                fieldLabelId=\"backchannelLogoutRevokeOfflineSessions\"\r\n              />\r\n            }\r\n            fieldId=\"backchannelLogoutRevokeOfflineSessions\"\r\n            hasNoPaddingTop\r\n          >\r\n            <Controller\r\n              name={convertAttributeNameToForm<FormFields>(\r\n                \"attributes.backchannel.logout.revoke.offline.tokens\",\r\n              )}\r\n              defaultValue=\"false\"\r\n              control={control}\r\n              render={({ field }) => (\r\n                <Switch\r\n                  id=\"backchannelLogoutRevokeOfflineSessions\"\r\n                  label={t(\"on\")}\r\n                  labelOff={t(\"off\")}\r\n                  isChecked={field.value === \"true\"}\r\n                  onChange={(_event, value) => field.onChange(value.toString())}\r\n                  aria-label={t(\"backchannelLogoutRevokeOfflineSessions\")}\r\n                />\r\n              )}\r\n            />\r\n          </FormGroup>\r\n        </>\r\n      )}\r\n      {protocol === \"openid-connect\" && (\r\n        <DefaultSwitchControl\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.logout.confirmation.enabled\",\r\n          )}\r\n          defaultValue=\"false\"\r\n          label={t(\"logoutConfirmation\")}\r\n          labelIcon={t(\"logoutConfirmationHelp\")}\r\n          stringify\r\n        />\r\n      )}\r\n      <FixedButtonsGroup\r\n        name=\"settings\"\r\n        save={save}\r\n        reset={reset}\r\n        isDisabled={!isManager}\r\n      />\r\n    </FormAccess>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport { Form } from \"@patternfly/react-core\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ScrollForm } from \"@keycloak/keycloak-ui-shared\";\r\nimport { ClientDescription } from \"./ClientDescription\";\r\nimport { FormFields } from \"./ClientDetails\";\r\nimport { AccessSettings } from \"./add/AccessSettings\";\r\nimport { CapabilityConfig } from \"./add/CapabilityConfig\";\r\nimport { LoginSettingsPanel } from \"./add/LoginSettingsPanel\";\r\nimport { LogoutPanel } from \"./add/LogoutPanel\";\r\nimport { SamlConfig } from \"./add/SamlConfig\";\r\nimport { SamlSignature } from \"./add/SamlSignature\";\r\n\r\nexport type ClientSettingsProps = {\r\n  client: ClientRepresentation;\r\n  save: () => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport const ClientSettings = (props: ClientSettingsProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const { watch } = useFormContext<FormFields>();\r\n  const protocol = watch(\"protocol\");\r\n\r\n  const { client } = props;\r\n\r\n  return (\r\n    <ScrollForm\r\n      label={t(\"jumpToSection\")}\r\n      className=\"pf-v5-u-px-lg pf-v5-u-pb-lg\"\r\n      sections={[\r\n        {\r\n          title: t(\"generalSettings\"),\r\n          panel: (\r\n            <Form isHorizontal>\r\n              <ClientDescription\r\n                protocol={client.protocol}\r\n                hasConfigureAccess={client.access?.configure}\r\n              />\r\n            </Form>\r\n          ),\r\n        },\r\n        {\r\n          title: t(\"accessSettings\"),\r\n          panel: <AccessSettings {...props} />,\r\n        },\r\n        {\r\n          title: t(\"samlCapabilityConfig\"),\r\n          isHidden: protocol !== \"saml\" || client.bearerOnly,\r\n          panel: <SamlConfig />,\r\n        },\r\n        {\r\n          title: t(\"signatureAndEncryption\"),\r\n          isHidden: protocol !== \"saml\" || client.bearerOnly,\r\n          panel: <SamlSignature />,\r\n        },\r\n        {\r\n          title: t(\"capabilityConfig\"),\r\n          isHidden: protocol !== \"openid-connect\" || client.bearerOnly,\r\n          panel: <CapabilityConfig />,\r\n        },\r\n        {\r\n          title: t(\"loginSettings\"),\r\n          isHidden: client.bearerOnly,\r\n          panel: <LoginSettingsPanel access={client.access?.configure} />,\r\n        },\r\n        {\r\n          title: t(\"logoutSettings\"),\r\n          isHidden: client.bearerOnly,\r\n          panel: <LogoutPanel {...props} />,\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n","import type ResourceRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceRepresentation\";\r\nimport { KeycloakSelect, SelectVariant } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Button, SelectOption, TextInput } from \"@patternfly/react-core\";\r\nimport { MinusCircleIcon, PlusCircleIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Tbody, Td, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { camelCase } from \"lodash-es\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { Controller, useFieldArray, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { defaultContextAttributes } from \"../utils\";\r\n\r\nimport \"./key-based-attribute-input.css\";\r\n\r\nexport type AttributeType = {\r\n  key?: string;\r\n  name: string;\r\n  custom?: boolean;\r\n  values?: {\r\n    [key: string]: string;\r\n  }[];\r\n};\r\n\r\ntype AttributeInputProps = {\r\n  name: string;\r\n  selectableValues?: AttributeType[];\r\n  resources?: ResourceRepresentation[];\r\n};\r\n\r\ntype ValueInputProps = {\r\n  name: string;\r\n  rowIndex: number;\r\n  attribute: any;\r\n  selectableValues?: AttributeType[];\r\n  resources?: ResourceRepresentation[];\r\n};\r\n\r\nconst ValueInput = ({\r\n  name,\r\n  rowIndex,\r\n  attribute,\r\n  selectableValues,\r\n  resources,\r\n}: ValueInputProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, register, getValues } = useFormContext();\r\n  const [isValueOpenArray, setIsValueOpenArray] = useState([false]);\r\n\r\n  const toggleValueSelect = (rowIndex: number, open: boolean) => {\r\n    const arr = [...isValueOpenArray];\r\n    arr[rowIndex] = open;\r\n    setIsValueOpenArray(arr);\r\n  };\r\n\r\n  const attributeValues = useMemo(() => {\r\n    let values: AttributeType[] | undefined = [];\r\n\r\n    if (selectableValues) {\r\n      values = defaultContextAttributes.find(\r\n        (attr) => attr.key === getValues().context?.[rowIndex]?.key,\r\n      )?.values;\r\n    }\r\n\r\n    return values;\r\n  }, [getValues]);\r\n\r\n  const renderSelectOptionType = () => {\r\n    const scopeValues = resources?.find(\r\n      (resource) => resource.name === getValues().resources?.[rowIndex]?.key,\r\n    )?.scopes;\r\n\r\n    if (attributeValues?.length && !resources) {\r\n      return attributeValues.map((attr) => (\r\n        <SelectOption key={attr.key} value={attr.key}>\r\n          {attr.name}\r\n        </SelectOption>\r\n      ));\r\n    } else if (scopeValues?.length) {\r\n      return scopeValues.map((scope) => (\r\n        <SelectOption key={scope.name} value={scope.name}>\r\n          {scope.name}\r\n        </SelectOption>\r\n      ));\r\n    }\r\n  };\r\n\r\n  const getMessageBundleKey = (attributeName: string) =>\r\n    camelCase(attributeName).replace(/\\W/g, \"\");\r\n\r\n  return (\r\n    <Td>\r\n      {resources || attributeValues?.length ? (\r\n        <Controller\r\n          name={`${name}.${rowIndex}.value`}\r\n          defaultValue={[]}\r\n          control={control}\r\n          render={({ field }) => (\r\n            <KeycloakSelect\r\n              toggleId={`${attribute.id}-value`}\r\n              className=\"kc-attribute-value-selectable\"\r\n              chipGroupProps={{\r\n                numChips: 1,\r\n                expandedText: t(\"hide\"),\r\n                collapsedText: t(\"showRemaining\"),\r\n              }}\r\n              onToggle={(open) => toggleValueSelect(rowIndex, open)}\r\n              isOpen={isValueOpenArray[rowIndex]}\r\n              variant={SelectVariant.typeahead}\r\n              typeAheadAriaLabel={t(\"selectOrTypeAKey\")}\r\n              placeholderText={t(\"selectOrTypeAKey\")}\r\n              selections={field.value}\r\n              onSelect={(v) => {\r\n                field.onChange(v);\r\n\r\n                toggleValueSelect(rowIndex, false);\r\n              }}\r\n            >\r\n              {renderSelectOptionType()}\r\n            </KeycloakSelect>\r\n          )}\r\n        />\r\n      ) : (\r\n        <TextInput\r\n          id={`${getMessageBundleKey(attribute.key)}-value`}\r\n          className=\"value-input\"\r\n          defaultValue={attribute.value}\r\n          data-testid=\"attribute-value-input\"\r\n          aria-label={t(\"value\")}\r\n          {...register(`${name}.${rowIndex}.value`)}\r\n        />\r\n      )}\r\n    </Td>\r\n  );\r\n};\r\n\r\nexport const KeyBasedAttributeInput = ({\r\n  name,\r\n  selectableValues,\r\n  resources,\r\n}: AttributeInputProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, watch } = useFormContext();\r\n  const { fields, append, remove } = useFieldArray({\r\n    control: control,\r\n    name,\r\n  });\r\n\r\n  const [isKeyOpenArray, setIsKeyOpenArray] = useState([false]);\r\n  const toggleKeySelect = (rowIndex: number, open: boolean) => {\r\n    const arr = [...isKeyOpenArray];\r\n    arr[rowIndex] = open;\r\n    setIsKeyOpenArray(arr);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!fields.length) {\r\n      append({ key: \"\", value: \"\" }, { shouldFocus: false });\r\n    }\r\n  }, [fields]);\r\n\r\n  const watchLastValue = watch(`${name}.${fields.length - 1}.value`, \"\");\r\n\r\n  return (\r\n    <Table\r\n      className=\"kc-attributes__table\"\r\n      aria-label=\"Role attribute keys and values\"\r\n      variant=\"compact\"\r\n    >\r\n      <Thead>\r\n        <Tr>\r\n          <Th width={40}>{t(\"key\")}</Th>\r\n          <Th width={40}>{t(\"value\")}</Th>\r\n        </Tr>\r\n      </Thead>\r\n      <Tbody>\r\n        {fields.map((attribute, rowIndex) => (\r\n          <Tr key={attribute.id} data-testid=\"attribute-row\">\r\n            <Td>\r\n              <Controller\r\n                name={`${name}.${rowIndex}.key`}\r\n                defaultValue=\"\"\r\n                control={control}\r\n                render={({ field }) => (\r\n                  <KeycloakSelect\r\n                    toggleId={`${name}.${rowIndex}.key`}\r\n                    className=\"kc-attribute-key-selectable\"\r\n                    onToggle={(open) => toggleKeySelect(rowIndex, open)}\r\n                    isOpen={isKeyOpenArray[rowIndex]}\r\n                    variant={SelectVariant.typeahead}\r\n                    typeAheadAriaLabel={t(\"selectOrTypeAKey\")}\r\n                    placeholderText={t(\"selectOrTypeAKey\")}\r\n                    selections={field.value}\r\n                    onSelect={(v) => {\r\n                      field.onChange(v.toString());\r\n\r\n                      toggleKeySelect(rowIndex, false);\r\n                    }}\r\n                  >\r\n                    {selectableValues?.map((attribute) => (\r\n                      <SelectOption\r\n                        selected={attribute.name === field.value}\r\n                        key={attribute.key}\r\n                        value={resources ? attribute.name : attribute.key}\r\n                      >\r\n                        {attribute.name}\r\n                      </SelectOption>\r\n                    ))}\r\n                  </KeycloakSelect>\r\n                )}\r\n              />\r\n            </Td>\r\n            <ValueInput\r\n              name={name}\r\n              attribute={attribute}\r\n              rowIndex={rowIndex}\r\n              selectableValues={selectableValues}\r\n              resources={resources}\r\n            />\r\n            <Td>\r\n              <Button\r\n                id={`${name}-minus-button-${rowIndex}`}\r\n                variant=\"link\"\r\n                className=\"kc-attributes__minus-icon\"\r\n                onClick={() => remove(rowIndex)}\r\n                aria-label={t(\"remove\")}\r\n              >\r\n                <MinusCircleIcon />\r\n              </Button>\r\n            </Td>\r\n          </Tr>\r\n        ))}\r\n        <Tr>\r\n          <Td>\r\n            <Button\r\n              aria-label={t(\"addAttribute\", { label: t(\"attribute\") })}\r\n              id={`${name}-plus-icon`}\r\n              variant=\"link\"\r\n              className=\"kc-attributes__plus-icon\"\r\n              onClick={() => {\r\n                append({ key: \"\", value: \"\" });\r\n                setIsKeyOpenArray([...isKeyOpenArray, false]);\r\n              }}\r\n              icon={<PlusCircleIcon />}\r\n              isDisabled={!watchLastValue}\r\n              data-testid=\"attribute-add-row\"\r\n            >\r\n              {t(\"addAttribute\", { label: t(\"attribute\") })}\r\n            </Button>\r\n          </Td>\r\n        </Tr>\r\n      </Tbody>\r\n    </Table>\r\n  );\r\n};\r\n","import type AccessTokenRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/accessTokenRepresentation\";\r\nimport {\r\n  Button,\r\n  Modal,\r\n  ModalVariant,\r\n  Text,\r\n  TextArea,\r\n  TextContent,\r\n  TextVariants,\r\n} from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { prettyPrintJSON } from \"../../util\";\r\nimport useToggle from \"../../utils/useToggle\";\r\n\r\ntype AuthorizationDataModalProps = {\r\n  data: AccessTokenRepresentation;\r\n};\r\n\r\nexport const AuthorizationDataModal = ({\r\n  data,\r\n}: AuthorizationDataModalProps) => {\r\n  const { t } = useTranslation();\r\n  const [show, toggle] = useToggle();\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        data-testid=\"authorization-revert\"\r\n        onClick={toggle}\r\n        variant=\"secondary\"\r\n      >\r\n        {t(\"showAuthData\")}\r\n      </Button>\r\n      <Modal\r\n        variant={ModalVariant.medium}\r\n        isOpen={show}\r\n        aria-label={t(\"authData\")}\r\n        header={\r\n          <TextContent>\r\n            <Text component={TextVariants.h1}>{t(\"authData\")}</Text>\r\n            <Text>{t(\"authDataDescription\")}</Text>\r\n          </TextContent>\r\n        }\r\n        onClose={toggle}\r\n        actions={[\r\n          <Button\r\n            data-testid=\"cancel\"\r\n            id=\"modal-cancel\"\r\n            key=\"cancel\"\r\n            onClick={toggle}\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <TextArea readOnly rows={20} value={prettyPrintJSON(data)} />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n","import type EvaluationResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/evaluationResultRepresentation\";\r\nimport { DecisionEffect } from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport type PolicyResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyResultRepresentation\";\r\nimport {\r\n  capitalize,\r\n  DescriptionList,\r\n  TextContent,\r\n  TextList,\r\n  TextListItem,\r\n} from \"@patternfly/react-core\";\r\nimport { ExpandableRowContent, Tbody, Td, Tr } from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { useParams } from \"../../utils/useParams\";\r\nimport type { ClientParams } from \"../routes/Client\";\r\nimport { toPermissionDetails } from \"../routes/PermissionDetails\";\r\nimport { toPolicyDetails } from \"../routes/PolicyDetails\";\r\n\r\ntype Props = {\r\n  idx: number;\r\n  rowIndex: number;\r\n  outerPolicy: PolicyResultRepresentation;\r\n  resource: EvaluationResultRepresentation;\r\n};\r\n\r\nexport const AuthorizationEvaluateResourcePolicies = ({\r\n  idx,\r\n  rowIndex,\r\n  outerPolicy,\r\n  resource,\r\n}: Props) => {\r\n  const [expanded, setExpanded] = useState<boolean>(false);\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const { clientId } = useParams<ClientParams>();\r\n\r\n  return (\r\n    <Tbody key={idx} isExpanded={expanded}>\r\n      <Tr>\r\n        <Td\r\n          expand={{\r\n            rowIndex,\r\n            isExpanded: expanded,\r\n            onToggle: () => setExpanded((prev) => !prev),\r\n          }}\r\n        />\r\n        <Td data-testid={`name-column-${resource.resource}`}>\r\n          <Link\r\n            to={toPermissionDetails({\r\n              realm,\r\n              id: clientId,\r\n              permissionType: outerPolicy.policy?.type!,\r\n              permissionId: outerPolicy.policy?.id!,\r\n            })}\r\n          >\r\n            {outerPolicy.policy?.name}\r\n          </Link>\r\n        </Td>\r\n        <Td id={outerPolicy.status?.toLowerCase()}>\r\n          {t(outerPolicy.status?.toLowerCase() as string)}\r\n        </Td>\r\n        <Td>{t(`${outerPolicy.policy?.decisionStrategy?.toLowerCase()}`)}</Td>\r\n        <Td>\r\n          {outerPolicy.status === DecisionEffect.Permit\r\n            ? resource.policies?.[rowIndex]?.scopes?.join(\", \")\r\n            : \"-\"}\r\n        </Td>\r\n        <Td>\r\n          {outerPolicy.status === DecisionEffect.Deny &&\r\n          resource.policies?.[rowIndex]?.scopes?.length\r\n            ? resource.policies[rowIndex].scopes?.join(\", \")\r\n            : \"-\"}\r\n        </Td>\r\n      </Tr>\r\n      <Tr key={`child-${resource.resource}`} isExpanded={expanded}>\r\n        <Td />\r\n        <Td colSpan={5}>\r\n          {expanded && (\r\n            <ExpandableRowContent>\r\n              <DescriptionList\r\n                isHorizontal\r\n                className=\"keycloak_resource_details\"\r\n              >\r\n                <TextContent>\r\n                  <TextList>\r\n                    {outerPolicy.associatedPolicies?.map((item) => (\r\n                      <TextListItem key=\"policyDetails\">\r\n                        <Link\r\n                          to={toPolicyDetails({\r\n                            realm,\r\n                            id: clientId,\r\n                            policyType: item.policy?.type!,\r\n                            policyId: item.policy?.id!,\r\n                          })}\r\n                        >\r\n                          {item.policy?.name}\r\n                        </Link>{\" \"}\r\n                        {t(\"votedToStatus\", {\r\n                          status: capitalize(item.status as string),\r\n                        })}\r\n                      </TextListItem>\r\n                    ))}\r\n                  </TextList>\r\n                </TextContent>\r\n              </DescriptionList>\r\n            </ExpandableRowContent>\r\n          )}\r\n        </Td>\r\n      </Tr>\r\n    </Tbody>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport {\r\n  ExpandableRowContent,\r\n  Table,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\nimport { DescriptionList } from \"@patternfly/react-core/dist/esm/components\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { AuthorizationEvaluateResourcePolicies } from \"./AuthorizationEvaluateResourcePolicies\";\r\nimport type EvaluationResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/evaluationResultRepresentation\";\r\nimport type PolicyResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyResultRepresentation\";\r\n\r\ntype Props = {\r\n  rowIndex: number;\r\n  resource: EvaluationResultRepresentation;\r\n  evaluateResults: any;\r\n};\r\n\r\nexport const AuthorizationEvaluateResource = ({\r\n  rowIndex,\r\n  resource,\r\n  evaluateResults,\r\n}: Props) => {\r\n  const [expanded, setExpanded] = useState<boolean>(false);\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Tbody isExpanded={expanded}>\r\n      <Tr>\r\n        <Td\r\n          expand={{\r\n            rowIndex,\r\n            isExpanded: expanded,\r\n            onToggle: () => setExpanded((prev) => !prev),\r\n          }}\r\n        />\r\n        <Td data-testid={`name-column-${resource.resource}`}>\r\n          {resource.resource?.name}\r\n        </Td>\r\n        <Td id={resource.status?.toLowerCase()}>\r\n          {t(`${resource.status?.toLowerCase()}`)}\r\n        </Td>\r\n        <Td>\r\n          {resource.allowedScopes?.length\r\n            ? resource.allowedScopes.map((item) => item.name)\r\n            : \"-\"}\r\n        </Td>\r\n      </Tr>\r\n      <Tr key={`child-${resource.resource}`} isExpanded={expanded}>\r\n        <Td />\r\n        <Td colSpan={5}>\r\n          <ExpandableRowContent>\r\n            {expanded && (\r\n              <DescriptionList\r\n                isHorizontal\r\n                className=\"keycloak_resource_details\"\r\n              >\r\n                <Table aria-label={t(\"evaluationResults\")}>\r\n                  <Thead>\r\n                    <Tr>\r\n                      <Th aria-hidden=\"true\" />\r\n                      <Th>{t(\"permission\")}</Th>\r\n                      <Th>{t(\"results\")}</Th>\r\n                      <Th>{t(\"decisionStrategy\")}</Th>\r\n                      <Th>{t(\"grantedScopes\")}</Th>\r\n                      <Th>{t(\"deniedScopes\")}</Th>\r\n                      <Th aria-hidden=\"true\" />\r\n                    </Tr>\r\n                  </Thead>\r\n                  {Object.values(evaluateResults[rowIndex].policies).map(\r\n                    (outerPolicy, idx) => (\r\n                      <AuthorizationEvaluateResourcePolicies\r\n                        key={idx}\r\n                        idx={idx}\r\n                        rowIndex={rowIndex}\r\n                        outerPolicy={outerPolicy as PolicyResultRepresentation}\r\n                        resource={resource}\r\n                      />\r\n                    ),\r\n                  )}\r\n                </Table>\r\n              </DescriptionList>\r\n            )}\r\n          </ExpandableRowContent>\r\n        </Td>\r\n      </Tr>\r\n    </Tbody>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  ButtonVariant,\r\n  Divider,\r\n  Form,\r\n  InputGroup,\r\n  PageSection,\r\n  TextInput,\r\n  Toolbar,\r\n  ToolbarGroup,\r\n  ToolbarItem,\r\n  InputGroupItem,\r\n  Select,\r\n  MenuToggle,\r\n  SelectList,\r\n  SelectOption,\r\n} from \"@patternfly/react-core\";\r\nimport { SearchIcon } from \"@patternfly/react-icons\";\r\nimport { Table, Th, Thead, Tr } from \"@patternfly/react-table\";\r\nimport { KeyboardEvent, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport type EvaluationResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/evaluationResultRepresentation\";\r\nimport type PolicyEvaluationResponse from \"@keycloak/keycloak-admin-client/lib/defs/policyEvaluationResponse\";\r\nimport { FixedButtonsGroup } from \"../../../components/form/FixedButtonGroup\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport useToggle from \"../../../utils/useToggle\";\r\nimport { AuthorizationDataModal } from \"../AuthorizationDataModal\";\r\nimport { AuthorizationEvaluateResource } from \"../AuthorizationEvaluateResource\";\r\n\r\ntype ResultProps = {\r\n  evaluateResult: PolicyEvaluationResponse;\r\n  refresh: () => void;\r\n  back: () => void;\r\n};\r\n\r\nenum ResultsFilter {\r\n  All = \"ALL\",\r\n  StatusDenied = \"STATUS_DENIED\",\r\n  StatusPermitted = \"STATUS_PERMITTED\",\r\n}\r\n\r\nfunction filterResults(\r\n  results: EvaluationResultRepresentation[],\r\n  filter: ResultsFilter,\r\n) {\r\n  switch (filter) {\r\n    case ResultsFilter.StatusPermitted:\r\n      return results.filter(({ status }) => status === \"PERMIT\");\r\n    case ResultsFilter.StatusDenied:\r\n      return results.filter(({ status }) => status === \"DENY\");\r\n    default:\r\n      return results;\r\n  }\r\n}\r\n\r\nexport const Results = ({ evaluateResult, refresh, back }: ResultProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [filterDropdownOpen, toggleFilterDropdown] = useToggle();\r\n\r\n  const [filter, setFilter] = useState(ResultsFilter.All);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n\r\n  const confirmSearchQuery = () => {\r\n    setSearchQuery(searchInput);\r\n  };\r\n\r\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\") {\r\n      confirmSearchQuery();\r\n    }\r\n  };\r\n\r\n  const filteredResources = useMemo(\r\n    () =>\r\n      filterResults(evaluateResult.results!, filter).filter(\r\n        ({ resource }) => resource?.name?.includes(searchQuery) ?? false,\r\n      ),\r\n    [evaluateResult.results, filter, searchQuery],\r\n  );\r\n\r\n  const noEvaluatedData = evaluateResult.results!.length === 0;\r\n  const noFilteredData = filteredResources.length === 0;\r\n\r\n  return (\r\n    <PageSection>\r\n      <Toolbar>\r\n        <ToolbarGroup className=\"providers-toolbar\">\r\n          <ToolbarItem>\r\n            <InputGroup>\r\n              <InputGroupItem isFill>\r\n                <TextInput\r\n                  name={\"inputGroupName\"}\r\n                  id={\"inputGroupName\"}\r\n                  type=\"search\"\r\n                  aria-label={t(\"search\")}\r\n                  placeholder={t(\"search\")}\r\n                  onChange={(_event, val) => setSearchInput(val)}\r\n                  onKeyDown={handleKeyDown}\r\n                />\r\n              </InputGroupItem>\r\n              <InputGroupItem>\r\n                <Button\r\n                  variant={ButtonVariant.control}\r\n                  aria-label={t(\"search\")}\r\n                  onClick={() => confirmSearchQuery()}\r\n                >\r\n                  <SearchIcon />\r\n                </Button>\r\n              </InputGroupItem>\r\n            </InputGroup>\r\n          </ToolbarItem>\r\n          <ToolbarItem>\r\n            <Select\r\n              data-testid=\"filter-type-select\"\r\n              isOpen={filterDropdownOpen}\r\n              className=\"kc-filter-type-select\"\r\n              toggle={(ref) => (\r\n                <MenuToggle\r\n                  ref={ref}\r\n                  onClick={toggleFilterDropdown}\r\n                  isExpanded={filterDropdownOpen}\r\n                  style={{ width: \"300px\" }}\r\n                >\r\n                  {filter}\r\n                </MenuToggle>\r\n              )}\r\n              onSelect={(_, value) => {\r\n                setFilter(value as ResultsFilter);\r\n                toggleFilterDropdown();\r\n                refresh();\r\n              }}\r\n              selected={filter}\r\n            >\r\n              <SelectList>\r\n                <SelectOption\r\n                  data-testid=\"all-results-option\"\r\n                  value={ResultsFilter.All}\r\n                >\r\n                  {t(\"allResults\")}\r\n                </SelectOption>\r\n                <SelectOption\r\n                  data-testid=\"result-permit-option\"\r\n                  value={ResultsFilter.StatusPermitted}\r\n                >\r\n                  {t(\"resultPermit\")}\r\n                </SelectOption>\r\n                <SelectOption\r\n                  data-testid=\"result-deny-option\"\r\n                  value={ResultsFilter.StatusDenied}\r\n                >\r\n                  {t(\"resultDeny\")}\r\n                </SelectOption>\r\n              </SelectList>\r\n            </Select>\r\n          </ToolbarItem>\r\n        </ToolbarGroup>\r\n      </Toolbar>\r\n      {!noFilteredData && (\r\n        <Table aria-label={t(\"evaluationResults\")}>\r\n          <Thead>\r\n            <Tr>\r\n              <Th aria-hidden=\"true\" />\r\n              <Th>{t(\"resource\")}</Th>\r\n              <Th>{t(\"overallResults\")}</Th>\r\n              <Th>{t(\"scopes\")}</Th>\r\n              <Th aria-hidden=\"true\" />\r\n            </Tr>\r\n          </Thead>\r\n          {filteredResources.map((resource, rowIndex) => (\r\n            <AuthorizationEvaluateResource\r\n              key={rowIndex}\r\n              rowIndex={rowIndex}\r\n              resource={resource}\r\n              evaluateResults={evaluateResult.results}\r\n            />\r\n          ))}\r\n        </Table>\r\n      )}\r\n      {(noFilteredData || noEvaluatedData) && (\r\n        <>\r\n          <Divider />\r\n          <ListEmptyState\r\n            isSearchVariant\r\n            message={t(\"noSearchResults\")}\r\n            instructions={t(\"noSearchResultsInstructions\")}\r\n          />\r\n        </>\r\n      )}\r\n      <Form>\r\n        <FixedButtonsGroup name=\"authorization\">\r\n          <Button data-testid=\"authorization-eval\" id=\"back-btn\" onClick={back}>\r\n            {t(\"back\")}\r\n          </Button>{\" \"}\r\n          <Button\r\n            data-testid=\"authorization-reevaluate\"\r\n            id=\"reevaluate-btn\"\r\n            variant=\"secondary\"\r\n            onClick={refresh}\r\n          >\r\n            {t(\"reevaluate\")}\r\n          </Button>{\" \"}\r\n          <AuthorizationDataModal data={evaluateResult.rpt!} />\r\n        </FixedButtonsGroup>\r\n      </Form>\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type EvaluationResultRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/evaluationResultRepresentation\";\r\nimport type PolicyEvaluationResponse from \"@keycloak/keycloak-admin-client/lib/defs/policyEvaluationResponse\";\r\nimport type ResourceEvaluation from \"@keycloak/keycloak-admin-client/lib/defs/resourceEvaluation\";\r\nimport type ResourceRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceRepresentation\";\r\nimport type RoleRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\r\nimport type ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\r\nimport {\r\n  HelpItem,\r\n  SelectControl,\r\n  TextControl,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Button,\r\n  ExpandableSection,\r\n  FormGroup,\r\n  PageSection,\r\n  Panel,\r\n  PanelHeader,\r\n  PanelMainBody,\r\n  Switch,\r\n  Title,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ForbiddenSection } from \"../../ForbiddenSection\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { ClientSelect } from \"../../components/client/ClientSelect\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport {\r\n  KeyValueType,\r\n  keyValueToArray,\r\n} from \"../../components/key-value-form/key-value-convert\";\r\nimport { UserSelect } from \"../../components/users/UserSelect\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { defaultContextAttributes } from \"../utils\";\r\nimport { KeyBasedAttributeInput } from \"./KeyBasedAttributeInput\";\r\nimport { Results } from \"./evaluate/Results\";\r\n\r\ninterface EvaluateFormInputs\r\n  extends Omit<ResourceEvaluation, \"context\" | \"resources\"> {\r\n  alias: string;\r\n  authScopes: string[];\r\n  context: {\r\n    attributes: Record<string, string>[];\r\n  };\r\n  resources?: Record<string, string>[];\r\n  client: FormFields;\r\n  user: string[];\r\n}\r\n\r\nexport type AttributeType = {\r\n  key: string;\r\n  name: string;\r\n  custom?: boolean;\r\n  values?: {\r\n    [key: string]: string;\r\n  }[];\r\n};\r\n\r\ntype ClientSettingsProps = {\r\n  client: ClientRepresentation;\r\n  save: () => void;\r\n};\r\n\r\nexport type AttributeForm = Omit<\r\n  EvaluateFormInputs,\r\n  \"context\" | \"resources\"\r\n> & {\r\n  context: {\r\n    attributes?: KeyValueType[];\r\n  };\r\n  resources?: KeyValueType[];\r\n};\r\n\r\ntype Props = ClientSettingsProps & EvaluationResultRepresentation;\r\n\r\nexport const AuthorizationEvaluate = (props: Props) => {\r\n  const { hasAccess } = useAccess();\r\n\r\n  if (!hasAccess(\"view-users\")) {\r\n    return <ForbiddenSection permissionNeeded=\"view-users\" />;\r\n  }\r\n\r\n  return <AuthorizationEvaluateContent {...props} />;\r\n};\r\n\r\nconst AuthorizationEvaluateContent = ({ client }: Props) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const form = useForm<EvaluateFormInputs>({ mode: \"onChange\" });\r\n  const {\r\n    reset,\r\n    trigger,\r\n    formState: { isValid },\r\n  } = form;\r\n  const { t } = useTranslation();\r\n  const { addError } = useAlerts();\r\n  const realm = useRealm();\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [applyToResourceType, setApplyToResourceType] = useState(false);\r\n  const [resources, setResources] = useState<ResourceRepresentation[]>([]);\r\n  const [scopes, setScopes] = useState<ScopeRepresentation[]>([]);\r\n  const [evaluateResult, setEvaluateResult] =\r\n    useState<PolicyEvaluationResponse>();\r\n  const [clientRoles, setClientRoles] = useState<RoleRepresentation[]>([]);\r\n\r\n  useFetch(\r\n    () => adminClient.roles.find(),\r\n    (roles) => {\r\n      setClientRoles(roles);\r\n    },\r\n    [],\r\n  );\r\n\r\n  useFetch(\r\n    () =>\r\n      Promise.all([\r\n        adminClient.clients.listResources({\r\n          id: client.id!,\r\n        }),\r\n        adminClient.clients.listAllScopes({\r\n          id: client.id!,\r\n        }),\r\n      ]),\r\n    ([resources, scopes]) => {\r\n      setResources(resources);\r\n      setScopes(scopes);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const evaluate = async () => {\r\n    if (!(await trigger())) {\r\n      return;\r\n    }\r\n    const formValues = form.getValues();\r\n    const keys = keyValueToArray(formValues.resources as KeyValueType[]);\r\n    const resEval: ResourceEvaluation = {\r\n      roleIds: formValues.roleIds ?? [],\r\n      clientId: formValues.client.id!,\r\n      userId: formValues.user![0],\r\n      resources: resources\r\n        .filter((resource) => Object.keys(keys).includes(resource.name!))\r\n        .map((r) => ({\r\n          ...r,\r\n          scopes: r.scopes?.filter((s) =>\r\n            Object.values(keys)\r\n              .flatMap((v) => v)\r\n              .includes(s.name!),\r\n          ),\r\n        })),\r\n      entitlements: false,\r\n      context: {\r\n        attributes: Object.fromEntries(\r\n          formValues.context.attributes\r\n            .filter((item) => item.key || item.value !== \"\")\r\n            .map(({ key, value }) => [key, value]),\r\n        ),\r\n      },\r\n    };\r\n\r\n    try {\r\n      const evaluation = await adminClient.clients.evaluateResource(\r\n        { id: client.id!, realm: realm.realm },\r\n        resEval,\r\n      );\r\n\r\n      setEvaluateResult(evaluation);\r\n    } catch (error) {\r\n      addError(\"evaluateError\", error);\r\n    }\r\n  };\r\n\r\n  if (evaluateResult) {\r\n    return (\r\n      <Results\r\n        evaluateResult={evaluateResult}\r\n        refresh={evaluate}\r\n        back={() => setEvaluateResult(undefined)}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PageSection>\r\n      <FormProvider {...form}>\r\n        <Panel>\r\n          <PanelHeader>\r\n            <Title headingLevel=\"h2\">{t(\"identityInformation\")}</Title>\r\n          </PanelHeader>\r\n          <PanelMainBody>\r\n            <FormAccess isHorizontal role=\"view-clients\">\r\n              <ClientSelect\r\n                name=\"client\"\r\n                label=\"client\"\r\n                helpText={\"clientHelp\"}\r\n                defaultValue={client.clientId}\r\n              />\r\n              <UserSelect\r\n                name=\"user\"\r\n                label=\"users\"\r\n                helpText={t(\"selectUser\")}\r\n                defaultValue={[]}\r\n                variant=\"typeahead\"\r\n                isRequired\r\n              />\r\n              <SelectControl\r\n                name=\"roleIds\"\r\n                label={t(\"roles\")}\r\n                labelIcon={t(\"rolesHelp\")}\r\n                variant=\"typeaheadMulti\"\r\n                placeholderText={t(\"selectARole\")}\r\n                controller={{\r\n                  defaultValue: [],\r\n                  rules: {\r\n                    required: true,\r\n                  },\r\n                }}\r\n                options={clientRoles.map((role) => role.name!)}\r\n              />\r\n            </FormAccess>\r\n          </PanelMainBody>\r\n        </Panel>\r\n        <Panel>\r\n          <PanelHeader>\r\n            <Title headingLevel=\"h2\">{t(\"permissions\")}</Title>\r\n          </PanelHeader>\r\n          <PanelMainBody>\r\n            <FormAccess isHorizontal role=\"view-clients\">\r\n              <FormGroup\r\n                label={t(\"applyToResourceType\")}\r\n                fieldId=\"applyToResourceType\"\r\n                labelIcon={\r\n                  <HelpItem\r\n                    helpText={t(\"applyToResourceTypeHelp\")}\r\n                    fieldLabelId=\"applyToResourceType\"\r\n                  />\r\n                }\r\n              >\r\n                <Switch\r\n                  id=\"applyToResource-switch\"\r\n                  label={t(\"on\")}\r\n                  labelOff={t(\"off\")}\r\n                  isChecked={applyToResourceType}\r\n                  onChange={(_event, val) => setApplyToResourceType(val)}\r\n                  aria-label={t(\"applyToResourceType\")}\r\n                />\r\n              </FormGroup>\r\n              {!applyToResourceType ? (\r\n                <FormGroup\r\n                  label={t(\"resourcesAndScopes\")}\r\n                  id=\"resourcesAndScopes\"\r\n                  labelIcon={\r\n                    <HelpItem\r\n                      helpText={t(\"contextualAttributesHelp\")}\r\n                      fieldLabelId={`resourcesAndScopes`}\r\n                    />\r\n                  }\r\n                  fieldId=\"resourcesAndScopes\"\r\n                >\r\n                  <KeyBasedAttributeInput\r\n                    selectableValues={resources.map<AttributeType>((item) => ({\r\n                      name: item.name!,\r\n                      key: item._id!,\r\n                    }))}\r\n                    resources={resources}\r\n                    name=\"resources\"\r\n                  />\r\n                </FormGroup>\r\n              ) : (\r\n                <>\r\n                  <TextControl\r\n                    name=\"alias\"\r\n                    label={t(\"resourceType\")}\r\n                    labelIcon={t(\"resourceTypeHelp\")}\r\n                    rules={{ required: t(\"required\") }}\r\n                  />\r\n                  <SelectControl\r\n                    name=\"authScopes\"\r\n                    label={t(\"authScopes\")}\r\n                    labelIcon={t(\"scopesSelect\")}\r\n                    controller={{\r\n                      defaultValue: [],\r\n                    }}\r\n                    variant=\"typeaheadMulti\"\r\n                    options={scopes.map((s) => s.name!)}\r\n                  />\r\n                </>\r\n              )}\r\n              <ExpandableSection\r\n                toggleText={t(\"contextualInfo\")}\r\n                onToggle={() => setIsExpanded(!isExpanded)}\r\n                isExpanded={isExpanded}\r\n              >\r\n                <FormGroup\r\n                  label={t(\"contextualAttributes\")}\r\n                  id=\"contextualAttributes\"\r\n                  labelIcon={\r\n                    <HelpItem\r\n                      helpText={t(\"contextualAttributesHelp\")}\r\n                      fieldLabelId={`contextualAttributes`}\r\n                    />\r\n                  }\r\n                  fieldId=\"contextualAttributes\"\r\n                >\r\n                  <KeyBasedAttributeInput\r\n                    selectableValues={defaultContextAttributes}\r\n                    name=\"context.attributes\"\r\n                  />\r\n                </FormGroup>\r\n              </ExpandableSection>\r\n            </FormAccess>\r\n          </PanelMainBody>\r\n        </Panel>\r\n        <ActionGroup>\r\n          <Button\r\n            data-testid=\"authorization-eval\"\r\n            id=\"authorization-eval\"\r\n            className=\"pf-v5-u-mr-md\"\r\n            isDisabled={!isValid}\r\n            onClick={() => evaluate()}\r\n          >\r\n            {t(\"evaluate\")}\r\n          </Button>\r\n          <Button\r\n            data-testid=\"authorization-revert\"\r\n            id=\"authorization-revert\"\r\n            className=\"pf-v5-u-mr-md\"\r\n            variant=\"link\"\r\n            onClick={() => reset()}\r\n          >\r\n            {t(\"revert\")}\r\n          </Button>\r\n        </ActionGroup>\r\n      </FormProvider>\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport {\r\n  KeycloakSpinner,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  AlertVariant,\r\n  Button,\r\n  PageSection,\r\n} from \"@patternfly/react-core\";\r\nimport CodeEditor from \"@uiw/react-textarea-code-editor\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { prettyPrintJSON } from \"../../util\";\r\nimport { useParams } from \"../../utils/useParams\";\r\nimport type { ClientParams } from \"../routes/Client\";\r\n\r\nexport const AuthorizationExport = () => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { clientId } = useParams<ClientParams>();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const [code, setCode] = useState<string>();\r\n  const [authorizationDetails, setAuthorizationDetails] =\r\n    useState<ResourceServerRepresentation>();\r\n\r\n  useFetch(\r\n    () =>\r\n      adminClient.clients.exportResource({\r\n        id: clientId,\r\n      }),\r\n\r\n    (authDetails) => {\r\n      setCode(JSON.stringify(authDetails, null, 2));\r\n      setAuthorizationDetails(authDetails);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const exportAuthDetails = () => {\r\n    try {\r\n      saveAs(\r\n        new Blob([prettyPrintJSON(authorizationDetails)], {\r\n          type: \"application/json\",\r\n        }),\r\n        \"test-authz-config.json\",\r\n      );\r\n      addAlert(t(\"exportAuthDetailsSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"exportAuthDetailsError\", error);\r\n    }\r\n  };\r\n\r\n  if (!code) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <PageSection>\r\n      <FormAccess\r\n        isHorizontal\r\n        role=\"manage-authorization\"\r\n        className=\"pf-v5-u-mt-lg\"\r\n      >\r\n        <CodeEditor\r\n          data-testid=\"authorization-export-code-editor\"\r\n          value={code!}\r\n          language=\"json\"\r\n          readOnly\r\n          rows={10}\r\n          style={{ height: \"30rem\", overflow: \"scroll\" }}\r\n        />\r\n        <ActionGroup>\r\n          <Button\r\n            data-testid=\"authorization-export-download\"\r\n            onClick={() => exportAuthDetails()}\r\n          >\r\n            {t(\"download\")}\r\n          </Button>\r\n          <Button\r\n            data-testid=\"authorization-export-copy\"\r\n            variant=\"secondary\"\r\n            onClick={async () => {\r\n              try {\r\n                await navigator.clipboard.writeText(code!);\r\n                addAlert(t(\"copied\"), AlertVariant.success);\r\n              } catch (error) {\r\n                addError(\"copyError\", error);\r\n              }\r\n            }}\r\n          >\r\n            {t(\"copy\")}\r\n          </Button>\r\n        </ActionGroup>\r\n      </FormAccess>\r\n    </PageSection>\r\n  );\r\n};\r\n","import { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  EmptyState,\r\n  EmptyStateIcon,\r\n  EmptyStateBody,\r\n  Button,\r\n  Tooltip,\r\n  EmptyStateHeader,\r\n  EmptyStateFooter,\r\n} from \"@patternfly/react-core\";\r\nimport { PlusCircleIcon } from \"@patternfly/react-icons\";\r\n\r\nimport { PermissionType, toNewPermission } from \"../routes/NewPermission\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { toUpperCase } from \"../../util\";\r\n\r\ntype EmptyButtonProps = {\r\n  permissionType: PermissionType;\r\n  disabled?: boolean;\r\n  clientId: string;\r\n};\r\n\r\nconst EmptyButton = ({\r\n  permissionType,\r\n  disabled = false,\r\n  clientId,\r\n}: EmptyButtonProps) => {\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Button\r\n      data-testid={`create-${permissionType}`}\r\n      className={\r\n        disabled ? \"keycloak__permissions__empty_state \" : \"pf-v5-u-m-sm\"\r\n      }\r\n      variant=\"secondary\"\r\n      onClick={() =>\r\n        !disabled &&\r\n        navigate(toNewPermission({ realm, id: clientId, permissionType }))\r\n      }\r\n    >\r\n      {t(`create${toUpperCase(permissionType)}BasedPermission`)}\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst TooltipEmptyButton = ({\r\n  permissionType,\r\n  disabled,\r\n  ...props\r\n}: EmptyButtonProps) => {\r\n  const { t } = useTranslation();\r\n  return disabled ? (\r\n    <Tooltip content={t(`no${toUpperCase(permissionType)}CreateHint`)}>\r\n      <EmptyButton\r\n        {...props}\r\n        disabled={disabled}\r\n        permissionType={permissionType}\r\n      />\r\n    </Tooltip>\r\n  ) : (\r\n    <EmptyButton\r\n      {...props}\r\n      disabled={disabled}\r\n      permissionType={permissionType}\r\n    />\r\n  );\r\n};\r\n\r\ntype EmptyPermissionsStateProps = {\r\n  clientId: string;\r\n  isResourceEnabled?: boolean;\r\n  isScopeEnabled?: boolean;\r\n};\r\n\r\nexport const EmptyPermissionsState = ({\r\n  clientId,\r\n  isResourceEnabled,\r\n  isScopeEnabled,\r\n}: EmptyPermissionsStateProps) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <EmptyState data-testid=\"empty-state\" variant=\"lg\">\r\n      <EmptyStateHeader\r\n        titleText={<>{t(\"emptyPermissions\")}</>}\r\n        icon={<EmptyStateIcon icon={PlusCircleIcon} />}\r\n        headingLevel=\"h1\"\r\n      />\r\n      <EmptyStateBody>{t(\"emptyPermissionInstructions\")}</EmptyStateBody>\r\n      <EmptyStateFooter>\r\n        <TooltipEmptyButton\r\n          permissionType=\"resource\"\r\n          disabled={isResourceEnabled}\r\n          clientId={clientId}\r\n        />\r\n        <br />\r\n        <TooltipEmptyButton\r\n          permissionType=\"scope\"\r\n          disabled={isScopeEnabled}\r\n          clientId={clientId}\r\n        />\r\n      </EmptyStateFooter>\r\n    </EmptyState>\r\n  );\r\n};\r\n","import type PolicyProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyProviderRepresentation\";\r\nimport type PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport {\r\n  ListEmptyState,\r\n  PaginatingTableToolbar,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Alert,\r\n  AlertVariant,\r\n  ButtonVariant,\r\n  DescriptionList,\r\n  Divider,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n  PageSection,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  ExpandableRowContent,\r\n  Table,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { toNewPermission } from \"../routes/NewPermission\";\r\nimport { toPermissionDetails } from \"../routes/PermissionDetails\";\r\nimport { toPolicyDetails } from \"../routes/PolicyDetails\";\r\nimport { DetailDescriptionLink } from \"./DetailDescription\";\r\nimport { EmptyPermissionsState } from \"./EmptyPermissionsState\";\r\nimport { MoreLabel } from \"./MoreLabel\";\r\nimport { SearchDropdown, SearchForm } from \"./SearchDropdown\";\r\n\r\nimport \"./permissions.css\";\r\n\r\ntype PermissionsProps = {\r\n  clientId: string;\r\n  isDisabled?: boolean;\r\n};\r\n\r\ntype ExpandablePolicyRepresentation = PolicyRepresentation & {\r\n  associatedPolicies?: PolicyRepresentation[];\r\n  isExpanded: boolean;\r\n};\r\n\r\nconst AssociatedPoliciesRenderer = ({\r\n  row,\r\n}: {\r\n  row: ExpandablePolicyRepresentation;\r\n}) => {\r\n  return (\r\n    <>\r\n      {row.associatedPolicies?.[0]?.name || \"\"}{\" \"}\r\n      <MoreLabel array={row.associatedPolicies} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport const AuthorizationPermissions = ({\r\n  clientId,\r\n  isDisabled = false,\r\n}: PermissionsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n\r\n  const [permissions, setPermissions] =\r\n    useState<ExpandablePolicyRepresentation[]>();\r\n  const [selectedPermission, setSelectedPermission] =\r\n    useState<PolicyRepresentation>();\r\n  const [policyProviders, setPolicyProviders] =\r\n    useState<PolicyProviderRepresentation[]>();\r\n  const [disabledCreate, setDisabledCreate] = useState<{\r\n    resources: boolean;\r\n    scopes: boolean;\r\n  }>();\r\n  const [createOpen, toggleCreate] = useToggle();\r\n  const [search, setSearch] = useState<SearchForm>({});\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [max, setMax] = useState(10);\r\n  const [first, setFirst] = useState(0);\r\n\r\n  useFetch(\r\n    async () => {\r\n      const permissions = await adminClient.clients.findPermissions({\r\n        first,\r\n        max: max + 1,\r\n        id: clientId,\r\n        ...search,\r\n      });\r\n\r\n      return await Promise.all(\r\n        permissions.map(async (permission) => {\r\n          const associatedPolicies =\r\n            await adminClient.clients.getAssociatedPolicies({\r\n              id: clientId,\r\n              permissionId: permission.id!,\r\n            });\r\n\r\n          return {\r\n            ...permission,\r\n            associatedPolicies,\r\n            isExpanded: false,\r\n          };\r\n        }),\r\n      );\r\n    },\r\n    setPermissions,\r\n    [key, search, first, max],\r\n  );\r\n\r\n  useFetch(\r\n    async () => {\r\n      const params = {\r\n        first: 0,\r\n        max: 1,\r\n      };\r\n      const [policies, resources, scopes] = await Promise.all([\r\n        adminClient.clients.listPolicyProviders({\r\n          id: clientId,\r\n        }),\r\n        adminClient.clients.listResources({ ...params, id: clientId }),\r\n        adminClient.clients.listAllScopes({ ...params, id: clientId }),\r\n      ]);\r\n      return {\r\n        policies: policies.filter(\r\n          (p) => p.type === \"resource\" || p.type === \"scope\",\r\n        ),\r\n        resources: resources.length !== 1,\r\n        scopes: scopes.length !== 1,\r\n      };\r\n    },\r\n    ({ policies, resources, scopes }) => {\r\n      setPolicyProviders(policies);\r\n      setDisabledCreate({ resources, scopes });\r\n    },\r\n    [],\r\n  );\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"deletePermission\",\r\n    messageKey: t(\"deletePermissionConfirm\", {\r\n      permission: selectedPermission?.name,\r\n    }),\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    continueButtonLabel: \"confirm\",\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.delPermission({\r\n          id: clientId,\r\n          type: selectedPermission?.type!,\r\n          permissionId: selectedPermission?.id!,\r\n        });\r\n        addAlert(t(\"permissionDeletedSuccess\"), AlertVariant.success);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"permissionDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (!permissions) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  const noData = permissions.length === 0;\r\n  const searching = Object.keys(search).length !== 0;\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <DeleteConfirm />\r\n      {(!noData || searching) && (\r\n        <PaginatingTableToolbar\r\n          count={permissions.length}\r\n          first={first}\r\n          max={max}\r\n          onNextClick={setFirst}\r\n          onPreviousClick={setFirst}\r\n          onPerPageSelect={(first, max) => {\r\n            setFirst(first);\r\n            setMax(max);\r\n          }}\r\n          toolbarItem={\r\n            <>\r\n              <ToolbarItem>\r\n                <SearchDropdown\r\n                  types={policyProviders}\r\n                  search={search}\r\n                  onSearch={setSearch}\r\n                  type=\"permission\"\r\n                />\r\n              </ToolbarItem>\r\n              <ToolbarItem>\r\n                <Dropdown\r\n                  onOpenChange={toggleCreate}\r\n                  toggle={(ref) => (\r\n                    <MenuToggle\r\n                      ref={ref}\r\n                      onClick={toggleCreate}\r\n                      isDisabled={isDisabled}\r\n                      variant=\"primary\"\r\n                      data-testid=\"permissionCreateDropdown\"\r\n                    >\r\n                      {t(\"createPermission\")}\r\n                    </MenuToggle>\r\n                  )}\r\n                  isOpen={createOpen}\r\n                >\r\n                  <DropdownList>\r\n                    <DropdownItem\r\n                      data-testid=\"create-resource\"\r\n                      isDisabled={isDisabled || disabledCreate?.resources}\r\n                      component=\"button\"\r\n                      onClick={() =>\r\n                        navigate(\r\n                          toNewPermission({\r\n                            realm,\r\n                            id: clientId,\r\n                            permissionType: \"resource\",\r\n                          }),\r\n                        )\r\n                      }\r\n                    >\r\n                      {t(\"createResourceBasedPermission\")}\r\n                    </DropdownItem>\r\n                    <Divider />\r\n                    <DropdownItem\r\n                      data-testid=\"create-scope\"\r\n                      isDisabled={isDisabled || disabledCreate?.scopes}\r\n                      component=\"button\"\r\n                      onClick={() =>\r\n                        navigate(\r\n                          toNewPermission({\r\n                            realm,\r\n                            id: clientId,\r\n                            permissionType: \"scope\",\r\n                          }),\r\n                        )\r\n                      }\r\n                    >\r\n                      {t(\"createScopeBasedPermission\")}\r\n                      {disabledCreate?.scopes && (\r\n                        <Alert\r\n                          className=\"pf-v5-u-mt-sm\"\r\n                          variant=\"warning\"\r\n                          isInline\r\n                          isPlain\r\n                          title={t(\"noScopeCreateHint\")}\r\n                        />\r\n                      )}\r\n                    </DropdownItem>\r\n                  </DropdownList>\r\n                </Dropdown>\r\n              </ToolbarItem>\r\n            </>\r\n          }\r\n        >\r\n          {!noData && (\r\n            <Table aria-label={t(\"resources\")} variant=\"compact\">\r\n              <Thead>\r\n                <Tr>\r\n                  <Th aria-hidden=\"true\" />\r\n                  <Th>{t(\"name\")}</Th>\r\n                  <Th>{t(\"type\")}</Th>\r\n                  <Th>{t(\"associatedPolicy\")}</Th>\r\n                  <Th>{t(\"description\")}</Th>\r\n                  <Th aria-hidden=\"true\" />\r\n                </Tr>\r\n              </Thead>\r\n              {permissions.map((permission, rowIndex) => (\r\n                <Tbody key={permission.id} isExpanded={permission.isExpanded}>\r\n                  <Tr>\r\n                    <Td\r\n                      expand={{\r\n                        rowIndex,\r\n                        isExpanded: permission.isExpanded,\r\n                        onToggle: (_, rowIndex) => {\r\n                          const rows = permissions.map((p, index) =>\r\n                            index === rowIndex\r\n                              ? { ...p, isExpanded: !p.isExpanded }\r\n                              : p,\r\n                          );\r\n                          setPermissions(rows);\r\n                        },\r\n                      }}\r\n                    />\r\n                    <Td data-testid={`name-column-${permission.name}`}>\r\n                      <Link\r\n                        to={toPermissionDetails({\r\n                          realm,\r\n                          id: clientId,\r\n                          permissionType: permission.type!,\r\n                          permissionId: permission.id!,\r\n                        })}\r\n                      >\r\n                        {permission.name}\r\n                      </Link>\r\n                    </Td>\r\n                    <Td>\r\n                      {\r\n                        policyProviders?.find((p) => p.type === permission.type)\r\n                          ?.name\r\n                      }\r\n                    </Td>\r\n                    <Td>\r\n                      <AssociatedPoliciesRenderer row={permission} />\r\n                    </Td>\r\n                    <Td>{permission.description || \"\"}</Td>\r\n                    <Td\r\n                      actions={{\r\n                        items: [\r\n                          {\r\n                            title: t(\"delete\"),\r\n                            onClick: async () => {\r\n                              setSelectedPermission(permission);\r\n                              toggleDeleteDialog();\r\n                            },\r\n                          },\r\n                        ],\r\n                      }}\r\n                    ></Td>\r\n                  </Tr>\r\n                  <Tr\r\n                    key={`child-${permission.id}`}\r\n                    isExpanded={permission.isExpanded}\r\n                  >\r\n                    <Td />\r\n                    <Td colSpan={5}>\r\n                      <ExpandableRowContent>\r\n                        {permission.isExpanded && (\r\n                          <DescriptionList\r\n                            isHorizontal\r\n                            className=\"keycloak_resource_details\"\r\n                          >\r\n                            <DetailDescriptionLink\r\n                              name=\"associatedPolicy\"\r\n                              array={permission.associatedPolicies}\r\n                              convert={(p) => p.name!}\r\n                              link={(p) =>\r\n                                toPolicyDetails({\r\n                                  id: clientId,\r\n                                  realm,\r\n                                  policyId: p.id!,\r\n                                  policyType: p.type!,\r\n                                })\r\n                              }\r\n                            />\r\n                          </DescriptionList>\r\n                        )}\r\n                      </ExpandableRowContent>\r\n                    </Td>\r\n                  </Tr>\r\n                </Tbody>\r\n              ))}\r\n            </Table>\r\n          )}\r\n        </PaginatingTableToolbar>\r\n      )}\r\n      {noData && !searching && (\r\n        <EmptyPermissionsState\r\n          clientId={clientId}\r\n          isResourceEnabled={!isDisabled && disabledCreate?.resources}\r\n          isScopeEnabled={!isDisabled && disabledCreate?.scopes}\r\n        />\r\n      )}\r\n      {noData && searching && (\r\n        <ListEmptyState\r\n          isSearchVariant\r\n          message={t(\"noSearchResults\")}\r\n          instructions={t(\"noSearchResultsInstructions\")}\r\n        />\r\n      )}\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport { useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { DescriptionList } from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { toPermissionDetails } from \"../routes/PermissionDetails\";\r\nimport { toScopeDetails } from \"../routes/Scope\";\r\nimport { DetailDescription, DetailDescriptionLink } from \"./DetailDescription\";\r\n\r\nimport \"./detail-cell.css\";\r\n\r\ntype Scope = { id: string; name: string }[];\r\n\r\ntype DetailCellProps = {\r\n  id: string;\r\n  clientId: string;\r\n  uris?: string[];\r\n};\r\n\r\nexport const DetailCell = ({ id, clientId, uris }: DetailCellProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { realm } = useRealm();\r\n  const [scope, setScope] = useState<Scope>();\r\n  const [permissions, setPermissions] =\r\n    useState<ResourceServerRepresentation[]>();\r\n\r\n  useFetch(\r\n    () =>\r\n      Promise.all([\r\n        adminClient.clients.listScopesByResource({\r\n          id: clientId,\r\n          resourceName: id,\r\n        }),\r\n        adminClient.clients.listPermissionsByResource({\r\n          id: clientId,\r\n          resourceId: id,\r\n        }),\r\n      ]),\r\n    ([scopes, permissions]) => {\r\n      setScope(scopes);\r\n      setPermissions(permissions);\r\n    },\r\n    [],\r\n  );\r\n\r\n  if (!permissions || !scope) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <DescriptionList isHorizontal className=\"keycloak_resource_details\">\r\n      <DetailDescription name=\"uris\" array={uris} />\r\n      <DetailDescriptionLink\r\n        name=\"scopes\"\r\n        array={scope}\r\n        convert={(s) => s.name}\r\n        link={(scope) =>\r\n          toScopeDetails({ id: clientId, realm, scopeId: scope.id! })\r\n        }\r\n      />\r\n      <DetailDescriptionLink\r\n        name=\"associatedPermissions\"\r\n        array={permissions}\r\n        convert={(p) => p.name!}\r\n        link={(permission) =>\r\n          toPermissionDetails({\r\n            id: clientId,\r\n            realm,\r\n            permissionId: permission.id!,\r\n            permissionType: \"resource\",\r\n          })\r\n        }\r\n      />\r\n    </DescriptionList>\r\n  );\r\n};\r\n","import type ResourceRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceRepresentation\";\r\nimport type ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport {\r\n  ListEmptyState,\r\n  PaginatingTableToolbar,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Alert,\r\n  AlertVariant,\r\n  Button,\r\n  PageSection,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  ExpandableRowContent,\r\n  Table,\r\n  TableText,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { toNewPermission } from \"../routes/NewPermission\";\r\nimport { toCreateResource } from \"../routes/NewResource\";\r\nimport { toResourceDetails } from \"../routes/Resource\";\r\nimport { DetailCell } from \"./DetailCell\";\r\nimport { MoreLabel } from \"./MoreLabel\";\r\nimport { SearchDropdown, SearchForm } from \"./SearchDropdown\";\r\n\r\ntype ResourcesProps = {\r\n  clientId: string;\r\n  isDisabled?: boolean;\r\n};\r\n\r\ntype ExpandableResourceRepresentation = ResourceRepresentation & {\r\n  isExpanded: boolean;\r\n};\r\n\r\nconst UriRenderer = ({ row }: { row: ResourceRepresentation }) => (\r\n  <TableText wrapModifier=\"truncate\">\r\n    {row.uris?.[0]} <MoreLabel array={row.uris} />\r\n  </TableText>\r\n);\r\n\r\nexport const AuthorizationResources = ({\r\n  clientId,\r\n  isDisabled = false,\r\n}: ResourcesProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n\r\n  const [resources, setResources] =\r\n    useState<ExpandableResourceRepresentation[]>();\r\n  const [selectedResource, setSelectedResource] =\r\n    useState<ResourceRepresentation>();\r\n  const [permissions, setPermission] =\r\n    useState<ResourceServerRepresentation[]>();\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [max, setMax] = useState(10);\r\n  const [first, setFirst] = useState(0);\r\n  const [search, setSearch] = useState<SearchForm>({});\r\n\r\n  useFetch(\r\n    () => {\r\n      const params = {\r\n        first,\r\n        max: max + 1,\r\n        deep: false,\r\n        ...search,\r\n      };\r\n      return adminClient.clients.listResources({\r\n        ...params,\r\n        id: clientId,\r\n      });\r\n    },\r\n    (resources) =>\r\n      setResources(\r\n        resources.map((resource) => ({ ...resource, isExpanded: false })),\r\n      ),\r\n    [key, search, first, max],\r\n  );\r\n\r\n  const fetchPermissions = async (id: string) => {\r\n    return adminClient.clients.listPermissionsByResource({\r\n      id: clientId,\r\n      resourceId: id,\r\n    });\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"deleteResource\",\r\n    children: (\r\n      <>\r\n        {t(\"deleteResourceConfirm\")}\r\n        {permissions?.length && (\r\n          <Alert\r\n            variant=\"warning\"\r\n            isInline\r\n            isPlain\r\n            title={t(\"deleteResourceWarning\")}\r\n            className=\"pf-v5-u-pt-lg\"\r\n          >\r\n            <p className=\"pf-v5-u-pt-xs\">\r\n              {permissions.map((permission) => (\r\n                <strong key={permission.id} className=\"pf-v5-u-pr-md\">\r\n                  {permission.name}\r\n                </strong>\r\n              ))}\r\n            </p>\r\n          </Alert>\r\n        )}\r\n      </>\r\n    ),\r\n    continueButtonLabel: \"confirm\",\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.delResource({\r\n          id: clientId,\r\n          resourceId: selectedResource?._id!,\r\n        });\r\n        addAlert(t(\"resourceDeletedSuccess\"), AlertVariant.success);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"resourceDeletedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (!resources) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  const noData = resources.length === 0;\r\n  const searching = Object.keys(search).length !== 0;\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <DeleteConfirm />\r\n      {(!noData || searching) && (\r\n        <PaginatingTableToolbar\r\n          count={resources.length}\r\n          first={first}\r\n          max={max}\r\n          onNextClick={setFirst}\r\n          onPreviousClick={setFirst}\r\n          onPerPageSelect={(first, max) => {\r\n            setFirst(first);\r\n            setMax(max);\r\n          }}\r\n          toolbarItem={\r\n            <>\r\n              <ToolbarItem>\r\n                <SearchDropdown\r\n                  search={search}\r\n                  onSearch={setSearch}\r\n                  type=\"resource\"\r\n                />\r\n              </ToolbarItem>\r\n\r\n              <ToolbarItem>\r\n                <Button\r\n                  data-testid=\"createResource\"\r\n                  isDisabled={isDisabled}\r\n                  component={(props) => (\r\n                    <Link\r\n                      {...props}\r\n                      to={toCreateResource({ realm, id: clientId })}\r\n                    />\r\n                  )}\r\n                >\r\n                  {t(\"createResource\")}\r\n                </Button>\r\n              </ToolbarItem>\r\n            </>\r\n          }\r\n        >\r\n          {!noData && (\r\n            <Table aria-label={t(\"resources\")} variant=\"compact\">\r\n              <Thead>\r\n                <Tr>\r\n                  <Th aria-hidden=\"true\" />\r\n                  <Th>{t(\"name\")}</Th>\r\n                  <Th>{t(\"displayName\")}</Th>\r\n                  <Th>{t(\"type\")}</Th>\r\n                  <Th>{t(\"owner\")}</Th>\r\n                  <Th>{t(\"uris\")}</Th>\r\n                  {!isDisabled && (\r\n                    <>\r\n                      <Th aria-hidden=\"true\" />\r\n                      <Th aria-hidden=\"true\" />\r\n                    </>\r\n                  )}\r\n                </Tr>\r\n              </Thead>\r\n              {resources.map((resource, rowIndex) => (\r\n                <Tbody key={resource._id} isExpanded={resource.isExpanded}>\r\n                  <Tr>\r\n                    <Td\r\n                      expand={{\r\n                        rowIndex,\r\n                        isExpanded: resource.isExpanded,\r\n                        onToggle: (_, rowIndex) => {\r\n                          const rows = resources.map((resource, index) =>\r\n                            index === rowIndex\r\n                              ? {\r\n                                  ...resource,\r\n                                  isExpanded: !resource.isExpanded,\r\n                                }\r\n                              : resource,\r\n                          );\r\n                          setResources(rows);\r\n                        },\r\n                      }}\r\n                    />\r\n                    <Td data-testid={`name-column-${resource.name}`}>\r\n                      <TableText wrapModifier=\"truncate\">\r\n                        <Link\r\n                          to={toResourceDetails({\r\n                            realm,\r\n                            id: clientId,\r\n                            resourceId: resource._id!,\r\n                          })}\r\n                        >\r\n                          {resource.name}\r\n                        </Link>\r\n                      </TableText>\r\n                    </Td>\r\n                    <Td>\r\n                      <TableText wrapModifier=\"truncate\">\r\n                        {resource.displayName}\r\n                      </TableText>\r\n                    </Td>\r\n                    <Td>\r\n                      <TableText wrapModifier=\"truncate\">\r\n                        {resource.type}\r\n                      </TableText>\r\n                    </Td>\r\n                    <Td>\r\n                      <TableText wrapModifier=\"truncate\">\r\n                        {resource.owner?.name}\r\n                      </TableText>\r\n                    </Td>\r\n                    <Td>\r\n                      <UriRenderer row={resource} />\r\n                    </Td>\r\n                    {!isDisabled && (\r\n                      <>\r\n                        <Td width={10}>\r\n                          <Button\r\n                            variant=\"link\"\r\n                            component={(props) => (\r\n                              <Link\r\n                                {...props}\r\n                                to={toNewPermission({\r\n                                  realm,\r\n                                  id: clientId,\r\n                                  permissionType: \"resource\",\r\n                                  selectedId: resource._id,\r\n                                })}\r\n                              />\r\n                            )}\r\n                          >\r\n                            {t(\"createPermission\")}\r\n                          </Button>\r\n                        </Td>\r\n                        <Td\r\n                          actions={{\r\n                            items: [\r\n                              {\r\n                                title: t(\"delete\"),\r\n                                onClick: async () => {\r\n                                  setSelectedResource(resource);\r\n                                  setPermission(\r\n                                    await fetchPermissions(resource._id!),\r\n                                  );\r\n                                  toggleDeleteDialog();\r\n                                },\r\n                              },\r\n                            ],\r\n                          }}\r\n                        />\r\n                      </>\r\n                    )}\r\n                  </Tr>\r\n                  <Tr\r\n                    key={`child-${resource._id}`}\r\n                    isExpanded={resource.isExpanded}\r\n                  >\r\n                    <Td />\r\n                    <Td colSpan={4}>\r\n                      <ExpandableRowContent>\r\n                        {resource.isExpanded && (\r\n                          <DetailCell\r\n                            clientId={clientId}\r\n                            id={resource._id!}\r\n                            uris={resource.uris}\r\n                          />\r\n                        )}\r\n                      </ExpandableRowContent>\r\n                    </Td>\r\n                  </Tr>\r\n                </Tbody>\r\n              ))}\r\n            </Table>\r\n          )}\r\n        </PaginatingTableToolbar>\r\n      )}\r\n      {noData && searching && (\r\n        <ListEmptyState\r\n          isSearchVariant\r\n          message={t(\"noSearchResults\")}\r\n          instructions={t(\"noSearchResultsInstructions\")}\r\n        />\r\n      )}\r\n      {noData && !searching && (\r\n        <ListEmptyState\r\n          message={t(\"emptyResources\")}\r\n          instructions={t(\"emptyResourcesInstructions\")}\r\n          isDisabled={isDisabled}\r\n          primaryActionText={t(\"createResource\")}\r\n          onPrimaryAction={() =>\r\n            navigate(toCreateResource({ realm, id: clientId }))\r\n          }\r\n        />\r\n      )}\r\n    </PageSection>\r\n  );\r\n};\r\n","import type PolicyRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/policyRepresentation\";\r\nimport type ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\r\nimport {\r\n  ListEmptyState,\r\n  PaginatingTableToolbar,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  DescriptionList,\r\n  PageSection,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport {\r\n  ExpandableRowContent,\r\n  Table,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n} from \"@patternfly/react-table\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { toNewPermission } from \"../routes/NewPermission\";\r\nimport { toNewScope } from \"../routes/NewScope\";\r\nimport { toPermissionDetails } from \"../routes/PermissionDetails\";\r\nimport { toResourceDetails } from \"../routes/Resource\";\r\nimport { toScopeDetails } from \"../routes/Scope\";\r\nimport { DeleteScopeDialog } from \"./DeleteScopeDialog\";\r\nimport { DetailDescriptionLink } from \"./DetailDescription\";\r\n\r\ntype ScopesProps = {\r\n  clientId: string;\r\n  isDisabled?: boolean;\r\n};\r\n\r\nexport type PermissionScopeRepresentation = ScopeRepresentation & {\r\n  permissions?: PolicyRepresentation[];\r\n  isLoaded: boolean;\r\n};\r\n\r\ntype ExpandableRow = {\r\n  id: string;\r\n  isExpanded: boolean;\r\n};\r\n\r\nexport const AuthorizationScopes = ({\r\n  clientId,\r\n  isDisabled = false,\r\n}: ScopesProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { realm } = useRealm();\r\n\r\n  const [deleteDialog, toggleDeleteDialog] = useToggle();\r\n  const [scopes, setScopes] = useState<PermissionScopeRepresentation[]>();\r\n  const [selectedScope, setSelectedScope] =\r\n    useState<PermissionScopeRepresentation>();\r\n  const [collapsed, setCollapsed] = useState<ExpandableRow[]>([]);\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const [max, setMax] = useState(10);\r\n  const [first, setFirst] = useState(0);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useFetch(\r\n    () => {\r\n      const params = {\r\n        first,\r\n        max: max + 1,\r\n        deep: false,\r\n        name: search,\r\n      };\r\n      return adminClient.clients.listAllScopes({\r\n        ...params,\r\n        id: clientId,\r\n      });\r\n    },\r\n    (scopes) => {\r\n      setScopes(scopes.map((s) => ({ ...s, isLoaded: false })));\r\n      setCollapsed(scopes.map((s) => ({ id: s.id!, isExpanded: false })));\r\n    },\r\n    [key, search, first, max],\r\n  );\r\n\r\n  const getScope = (id: string) => scopes?.find((scope) => scope.id === id)!;\r\n  const isExpanded = (id: string | undefined) =>\r\n    collapsed.find((c) => c.id === id)?.isExpanded || false;\r\n\r\n  useFetch(\r\n    () => {\r\n      const newlyOpened = collapsed\r\n        .filter((row) => row.isExpanded)\r\n        .map(({ id }) => getScope(id))\r\n        .filter((s) => !s.isLoaded);\r\n\r\n      return Promise.all(\r\n        newlyOpened.map(async (scope) => {\r\n          const [resources, permissions] = await Promise.all([\r\n            adminClient.clients.listAllResourcesByScope({\r\n              id: clientId,\r\n              scopeId: scope.id!,\r\n            }),\r\n            adminClient.clients.listAllPermissionsByScope({\r\n              id: clientId,\r\n              scopeId: scope.id!,\r\n            }),\r\n          ]);\r\n\r\n          return {\r\n            ...scope,\r\n            resources,\r\n            permissions,\r\n            isLoaded: true,\r\n          };\r\n        }),\r\n      );\r\n    },\r\n    (resourcesScopes) => {\r\n      let result = [...(scopes || [])];\r\n      resourcesScopes.forEach((resourceScope) => {\r\n        const index = scopes?.findIndex(\r\n          (scope) => resourceScope.id === scope.id,\r\n        )!;\r\n        result = [\r\n          ...result.slice(0, index),\r\n          resourceScope,\r\n          ...result.slice(index + 1),\r\n        ];\r\n      });\r\n\r\n      setScopes(result);\r\n    },\r\n    [collapsed],\r\n  );\r\n\r\n  if (!scopes) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  const noData = scopes.length === 0;\r\n  const searching = search !== \"\";\r\n  return (\r\n    <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n      <DeleteScopeDialog\r\n        clientId={clientId}\r\n        open={deleteDialog}\r\n        toggleDialog={toggleDeleteDialog}\r\n        selectedScope={selectedScope}\r\n        refresh={refresh}\r\n      />\r\n      {(!noData || searching) && (\r\n        <PaginatingTableToolbar\r\n          count={scopes.length}\r\n          first={first}\r\n          max={max}\r\n          onNextClick={setFirst}\r\n          onPreviousClick={setFirst}\r\n          onPerPageSelect={(first, max) => {\r\n            setFirst(first);\r\n            setMax(max);\r\n          }}\r\n          inputGroupName=\"search\"\r\n          inputGroupPlaceholder={t(\"searchByName\")}\r\n          inputGroupOnEnter={setSearch}\r\n          toolbarItem={\r\n            <ToolbarItem>\r\n              <Button\r\n                data-testid=\"createAuthorizationScope\"\r\n                component={(props) => (\r\n                  <Link {...props} to={toNewScope({ realm, id: clientId })} />\r\n                )}\r\n              >\r\n                {t(\"createAuthorizationScope\")}\r\n              </Button>\r\n            </ToolbarItem>\r\n          }\r\n        >\r\n          {!noData && (\r\n            <Table aria-label={t(\"scopes\")} variant=\"compact\">\r\n              <Thead>\r\n                <Tr>\r\n                  <Th aria-hidden=\"true\" />\r\n                  <Th>{t(\"name\")}</Th>\r\n                  <Th>{t(\"displayName\")}</Th>\r\n                  <Th aria-hidden=\"true\" />\r\n                  <Th aria-hidden=\"true\" />\r\n                </Tr>\r\n              </Thead>\r\n              {scopes.map((scope, rowIndex) => (\r\n                <Tbody key={scope.id} isExpanded={isExpanded(scope.id)}>\r\n                  <Tr>\r\n                    <Td\r\n                      expand={{\r\n                        rowIndex,\r\n                        isExpanded: isExpanded(scope.id),\r\n                        onToggle: (_event, index, isExpanded) => {\r\n                          setCollapsed([\r\n                            ...collapsed.slice(0, index),\r\n                            { id: scope.id!, isExpanded },\r\n                            ...collapsed.slice(index + 1),\r\n                          ]);\r\n                        },\r\n                      }}\r\n                    />\r\n                    <Td data-testid={`name-column-${scope.name}`}>\r\n                      <Link\r\n                        to={toScopeDetails({\r\n                          realm,\r\n                          id: clientId,\r\n                          scopeId: scope.id!,\r\n                        })}\r\n                      >\r\n                        {scope.name}\r\n                      </Link>\r\n                    </Td>\r\n                    <Td>{scope.displayName}</Td>\r\n                    <Td width={10}>\r\n                      <Button\r\n                        variant=\"link\"\r\n                        component={(props) => (\r\n                          <Link\r\n                            {...props}\r\n                            to={toNewPermission({\r\n                              realm,\r\n                              id: clientId,\r\n                              permissionType: \"scope\",\r\n                              selectedId: scope.id,\r\n                            })}\r\n                          />\r\n                        )}\r\n                      >\r\n                        {t(\"createPermission\")}\r\n                      </Button>\r\n                    </Td>\r\n                    <Td\r\n                      isActionCell\r\n                      actions={{\r\n                        items: [\r\n                          {\r\n                            title: t(\"delete\"),\r\n                            onClick: () => {\r\n                              setSelectedScope(scope);\r\n                              toggleDeleteDialog();\r\n                            },\r\n                          },\r\n                        ],\r\n                      }}\r\n                    />\r\n                  </Tr>\r\n                  <Tr\r\n                    key={`child-${scope.id}`}\r\n                    isExpanded={isExpanded(scope.id)}\r\n                  >\r\n                    <Td />\r\n                    <Td colSpan={4}>\r\n                      <ExpandableRowContent>\r\n                        {isExpanded(scope.id) && scope.isLoaded ? (\r\n                          <DescriptionList\r\n                            isHorizontal\r\n                            className=\"keycloak_resource_details\"\r\n                          >\r\n                            <DetailDescriptionLink\r\n                              name=\"resources\"\r\n                              array={scope.resources}\r\n                              convert={(r) => r.name!}\r\n                              link={(r) =>\r\n                                toResourceDetails({\r\n                                  id: clientId,\r\n                                  realm,\r\n                                  resourceId: r._id!,\r\n                                })\r\n                              }\r\n                            />\r\n                            <DetailDescriptionLink\r\n                              name=\"associatedPermissions\"\r\n                              array={scope.permissions}\r\n                              convert={(p) => p.name!}\r\n                              link={(p) =>\r\n                                toPermissionDetails({\r\n                                  id: clientId,\r\n                                  realm,\r\n                                  permissionId: p.id!,\r\n                                  permissionType: p.type!,\r\n                                })\r\n                              }\r\n                            />\r\n                          </DescriptionList>\r\n                        ) : (\r\n                          <KeycloakSpinner />\r\n                        )}\r\n                      </ExpandableRowContent>\r\n                    </Td>\r\n                  </Tr>\r\n                </Tbody>\r\n              ))}\r\n            </Table>\r\n          )}\r\n        </PaginatingTableToolbar>\r\n      )}\r\n      {noData && !searching && (\r\n        <ListEmptyState\r\n          message={t(\"emptyAuthorizationScopes\")}\r\n          instructions={t(\"emptyAuthorizationInstructions\")}\r\n          isDisabled={isDisabled}\r\n          onPrimaryAction={() => navigate(toNewScope({ id: clientId, realm }))}\r\n          primaryActionText={t(\"createAuthorizationScope\")}\r\n        />\r\n      )}\r\n      {noData && searching && (\r\n        <ListEmptyState\r\n          isSearchVariant\r\n          isDisabled={isDisabled}\r\n          message={t(\"noSearchResults\")}\r\n          instructions={t(\"noSearchResultsInstructions\")}\r\n        />\r\n      )}\r\n    </PageSection>\r\n  );\r\n};\r\n","import { Fragment, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  Alert,\r\n  Button,\r\n  ButtonVariant,\r\n  Divider,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Radio,\r\n  Switch,\r\n} from \"@patternfly/react-core\";\r\n\r\nimport type ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport { JsonFileUpload } from \"../../components/json-file-upload/JsonFileUpload\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype ImportDialogProps = {\r\n  onConfirm: (value: ResourceServerRepresentation) => void;\r\n  closeDialog: () => void;\r\n};\r\n\r\nexport const ImportDialog = ({ onConfirm, closeDialog }: ImportDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const [imported, setImported] = useState<ResourceServerRepresentation>({});\r\n  return (\r\n    <Modal\r\n      title={t(\"import\")}\r\n      isOpen\r\n      variant=\"small\"\r\n      onClose={closeDialog}\r\n      actions={[\r\n        <Button\r\n          id=\"modal-confirm\"\r\n          key=\"confirm\"\r\n          onClick={() => {\r\n            onConfirm(imported);\r\n            closeDialog();\r\n          }}\r\n          data-testid=\"confirm\"\r\n        >\r\n          {t(\"confirm\")}\r\n        </Button>,\r\n        <Button\r\n          data-testid=\"cancel\"\r\n          id=\"modal-cancel\"\r\n          key=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={() => {\r\n            closeDialog();\r\n          }}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <Form>\r\n        <JsonFileUpload id=\"import-resource\" onChange={setImported} />\r\n      </Form>\r\n      {Object.keys(imported).length !== 0 && (\r\n        <>\r\n          <Divider />\r\n          <p className=\"pf-v5-u-my-lg\">{t(\"importResources\")}</p>\r\n          <Form isHorizontal>\r\n            <FormGroup\r\n              label={t(\"policyEnforcementMode\")}\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"policyEnforcementModeHelp\")}\r\n                  fieldLabelId=\"policyEnforcementMode\"\r\n                />\r\n              }\r\n              fieldId=\"policyEnforcementMode\"\r\n              hasNoPaddingTop\r\n            >\r\n              <Radio\r\n                id=\"policyEnforcementMode\"\r\n                name=\"policyEnforcementMode\"\r\n                label={t(\r\n                  `policyEnforcementModes.${imported.policyEnforcementMode}`,\r\n                )}\r\n                isChecked\r\n                isDisabled\r\n                className=\"pf-v5-u-mb-md\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup\r\n              label={t(\"decisionStrategy\")}\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"decisionStrategyHelp\")}\r\n                  fieldLabelId=\"decisionStrategy\"\r\n                />\r\n              }\r\n              fieldId=\"decisionStrategy\"\r\n              hasNoPaddingTop\r\n            >\r\n              <Radio\r\n                id=\"decisionStrategy\"\r\n                name=\"decisionStrategy\"\r\n                isChecked\r\n                isDisabled\r\n                label={t(`decisionStrategies.${imported.decisionStrategy}`)}\r\n                className=\"pf-v5-u-mb-md\"\r\n              />\r\n            </FormGroup>\r\n            <FormGroup\r\n              hasNoPaddingTop\r\n              label={t(\"allowRemoteResourceManagement\")}\r\n              fieldId=\"allowRemoteResourceManagement\"\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"allowRemoteResourceManagement\")}\r\n                  fieldLabelId=\"allowRemoteResourceManagement\"\r\n                />\r\n              }\r\n            >\r\n              <Switch\r\n                id=\"allowRemoteResourceManagement\"\r\n                label={t(\"on\")}\r\n                labelOff={t(\"off\")}\r\n                isChecked={imported.allowRemoteResourceManagement}\r\n                isDisabled\r\n                aria-label={t(\"allowRemoteResourceManagement\")}\r\n              />\r\n            </FormGroup>\r\n          </Form>\r\n          <div className=\"pf-v5-u-mt-md\">\r\n            {Object.entries(imported)\r\n              .filter(([, value]) => Array.isArray(value))\r\n              .map(([key, value]) => (\r\n                <Fragment key={key}>\r\n                  <Divider />\r\n                  <p className=\"pf-v5-u-my-sm\">\r\n                    <strong>\r\n                      {value.length} {t(key)}\r\n                    </strong>\r\n                  </p>\r\n                </Fragment>\r\n              ))}\r\n          </div>\r\n          <Divider />\r\n          <Alert\r\n            variant=\"warning\"\r\n            className=\"pf-v5-u-mt-lg\"\r\n            isInline\r\n            title={t(\"importWarning\")}\r\n          />\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n","import type ResourceServerRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/resourceServerRepresentation\";\r\nimport { HelpItem, useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  Divider,\r\n  FormGroup,\r\n  PageSection,\r\n  Radio,\r\n} from \"@patternfly/react-core\";\r\nimport { useState } from \"react\";\r\nimport { Controller, FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { FixedButtonsGroup } from \"../../components/form/FixedButtonGroup\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { DecisionStrategySelect } from \"./DecisionStrategySelect\";\r\nimport { ImportDialog } from \"./ImportDialog\";\r\n\r\nconst POLICY_ENFORCEMENT_MODES = [\r\n  \"ENFORCING\",\r\n  \"PERMISSIVE\",\r\n  \"DISABLED\",\r\n] as const;\r\n\r\nexport type FormFields = Omit<\r\n  ResourceServerRepresentation,\r\n  \"scopes\" | \"resources\"\r\n>;\r\n\r\nexport const AuthorizationSettings = ({ clientId }: { clientId: string }) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const [resource, setResource] = useState<ResourceServerRepresentation>();\r\n  const [importDialog, toggleImportDialog] = useToggle();\r\n\r\n  const form = useForm<FormFields>({});\r\n  const { control, reset, handleSubmit } = form;\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n  const { hasAccess } = useAccess();\r\n\r\n  const isDisabled = !hasAccess(\"manage-authorization\");\r\n\r\n  useFetch(\r\n    () => adminClient.clients.getResourceServer({ id: clientId }),\r\n    (resource) => {\r\n      setResource(resource);\r\n      reset(resource);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const importResource = async (value: ResourceServerRepresentation) => {\r\n    try {\r\n      await adminClient.clients.importResource({ id: clientId }, value);\r\n      addAlert(t(\"importResourceSuccess\"), AlertVariant.success);\r\n      reset({ ...value });\r\n    } catch (error) {\r\n      addError(\"importResourceError\", error);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (resource: ResourceServerRepresentation) => {\r\n    try {\r\n      await adminClient.clients.updateResourceServer(\r\n        { id: clientId },\r\n        resource,\r\n      );\r\n      addAlert(t(\"updateResourceSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"resourceSaveError\", error);\r\n    }\r\n  };\r\n\r\n  if (!resource) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <PageSection variant=\"light\">\r\n      {importDialog && (\r\n        <ImportDialog\r\n          onConfirm={importResource}\r\n          closeDialog={toggleImportDialog}\r\n        />\r\n      )}\r\n      <FormAccess\r\n        role=\"manage-authorization\"\r\n        isHorizontal\r\n        onSubmit={handleSubmit(onSubmit)}\r\n      >\r\n        <FormGroup\r\n          label={t(\"import\")}\r\n          fieldId=\"import\"\r\n          labelIcon={\r\n            <HelpItem helpText={t(\"importHelp\")} fieldLabelId=\"import\" />\r\n          }\r\n        >\r\n          <Button variant=\"secondary\" onClick={toggleImportDialog}>\r\n            {t(\"import\")}\r\n          </Button>\r\n        </FormGroup>\r\n        <Divider />\r\n        <FormGroup\r\n          label={t(\"policyEnforcementMode\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"policyEnforcementModeHelp\")}\r\n              fieldLabelId=\"policyEnforcementMode\"\r\n            />\r\n          }\r\n          fieldId=\"policyEnforcementMode\"\r\n          hasNoPaddingTop\r\n        >\r\n          <Controller\r\n            name=\"policyEnforcementMode\"\r\n            data-testid=\"policyEnforcementMode\"\r\n            defaultValue={POLICY_ENFORCEMENT_MODES[0]}\r\n            control={control}\r\n            render={({ field }) => (\r\n              <>\r\n                {POLICY_ENFORCEMENT_MODES.map((mode) => (\r\n                  <Radio\r\n                    id={mode}\r\n                    key={mode}\r\n                    data-testid={mode}\r\n                    isChecked={field.value === mode}\r\n                    isDisabled={isDisabled}\r\n                    name=\"policyEnforcementMode\"\r\n                    onChange={() => field.onChange(mode)}\r\n                    label={t(`policyEnforcementModes.${mode}`)}\r\n                    className=\"pf-v5-u-mb-md\"\r\n                  />\r\n                ))}\r\n              </>\r\n            )}\r\n          />\r\n        </FormGroup>\r\n        <FormProvider {...form}>\r\n          <DecisionStrategySelect isLimited />\r\n          <DefaultSwitchControl\r\n            name=\"allowRemoteResourceManagement\"\r\n            label={t(\"allowRemoteResourceManagement\")}\r\n            labelIcon={t(\"allowRemoteResourceManagementHelp\")}\r\n          />\r\n        </FormProvider>\r\n        <FixedButtonsGroup\r\n          name=\"authenticationSettings\"\r\n          reset={() => reset(resource)}\r\n          isSubmit\r\n        />\r\n      </FormAccess>\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport {\r\n  Alert,\r\n  Button,\r\n  FormGroup,\r\n  InputGroup,\r\n  InputGroupItem,\r\n  Split,\r\n  SplitItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { PasswordInput } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport useFormatDate from \"../../utils/useFormatDate\";\r\nimport { CopyToClipboardButton } from \"../../components/copy-to-clipboard-button/CopyToClipboardButton\";\r\n\r\nexport type ClientSecretProps = {\r\n  client: ClientRepresentation;\r\n  secret: string;\r\n  toggle: () => void;\r\n};\r\n\r\ntype SecretInputProps = ClientSecretProps & {\r\n  id: string;\r\n  buttonLabel: string;\r\n};\r\n\r\nconst SecretInput = ({\r\n  id,\r\n  buttonLabel,\r\n  client,\r\n  secret,\r\n  toggle,\r\n}: SecretInputProps) => {\r\n  const { t } = useTranslation();\r\n  const form = useFormContext<ClientRepresentation>();\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-clients\") || client.access?.configure;\r\n\r\n  return (\r\n    <Split hasGutter>\r\n      <SplitItem isFilled>\r\n        <InputGroup>\r\n          <InputGroupItem isFill>\r\n            <PasswordInput id={id} value={secret} readOnly />\r\n          </InputGroupItem>\r\n          <InputGroupItem>\r\n            <CopyToClipboardButton\r\n              id={id}\r\n              text={secret}\r\n              label=\"clientSecret\"\r\n              variant=\"control\"\r\n            />\r\n          </InputGroupItem>\r\n        </InputGroup>\r\n      </SplitItem>\r\n      <SplitItem>\r\n        <Button\r\n          variant=\"secondary\"\r\n          isDisabled={form.formState.isDirty || !isManager}\r\n          onClick={toggle}\r\n        >\r\n          {t(buttonLabel)}\r\n        </Button>\r\n      </SplitItem>\r\n    </Split>\r\n  );\r\n};\r\n\r\nconst ExpireDateFormatter = ({ time }: { time: number }) => {\r\n  const { t } = useTranslation();\r\n  const formatDate = useFormatDate();\r\n  const unixTimeToString = (time: number) =>\r\n    time\r\n      ? t(\"secretExpiresOn\", {\r\n          time: formatDate(new Date(time * 1000), {\r\n            dateStyle: \"full\",\r\n            timeStyle: \"long\",\r\n          }),\r\n        })\r\n      : undefined;\r\n\r\n  return <div className=\"pf-v5-u-my-md\">{unixTimeToString(time)}</div>;\r\n};\r\n\r\nexport const ClientSecret = ({ client, secret, toggle }: ClientSecretProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const [secretRotated, setSecretRotated] = useState<string | undefined>(\r\n    client.attributes?.[\"client.secret.rotated\"],\r\n  );\r\n  const secretExpirationTime: number =\r\n    client.attributes?.[\"client.secret.expiration.time\"];\r\n  const secretRotatedExpirationTime: number =\r\n    client.attributes?.[\"client.secret.rotated.expiration.time\"];\r\n\r\n  const expired = (time: number) => new Date().getTime() >= time * 1000;\r\n\r\n  const [toggleInvalidateConfirm, InvalidateConfirm] = useConfirmDialog({\r\n    titleKey: \"invalidateRotatedSecret\",\r\n    messageKey: \"invalidateRotatedSecretExplain\",\r\n    continueButtonLabel: \"confirm\",\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.invalidateSecret({\r\n          id: client.id!,\r\n        });\r\n        setSecretRotated(undefined);\r\n        addAlert(t(\"invalidateRotatedSuccess\"));\r\n      } catch (error) {\r\n        addError(\"invalidateRotatedError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (secretRotated !== client.attributes?.[\"client.secret.rotated\"]) {\r\n      setSecretRotated(client.attributes?.[\"client.secret.rotated\"]);\r\n    }\r\n  }, [client, secretRotated]);\r\n\r\n  return (\r\n    <>\r\n      <InvalidateConfirm />\r\n      <FormGroup\r\n        label={t(\"clientSecret\")}\r\n        fieldId=\"kc-client-secret\"\r\n        className=\"pf-v5-u-my-md\"\r\n      >\r\n        <SecretInput\r\n          id=\"kc-client-secret\"\r\n          client={client}\r\n          secret={secret}\r\n          toggle={toggle}\r\n          buttonLabel=\"regenerate\"\r\n        />\r\n        <ExpireDateFormatter time={secretExpirationTime} />\r\n        {expired(secretExpirationTime) && (\r\n          <Alert variant=\"warning\" isInline title={t(\"secretHasExpired\")} />\r\n        )}\r\n      </FormGroup>\r\n      {secretRotated && (\r\n        <FormGroup label={t(\"secretRotated\")} fieldId=\"secretRotated\">\r\n          <SecretInput\r\n            id=\"secretRotated\"\r\n            client={client}\r\n            secret={secretRotated}\r\n            toggle={toggleInvalidateConfirm}\r\n            buttonLabel=\"invalidateSecret\"\r\n          />\r\n          <ExpireDateFormatter time={secretRotatedExpirationTime} />\r\n        </FormGroup>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { SelectControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { TimeSelector } from \"../../components/time-selector/TimeSelector\";\r\nimport { FormGroup } from \"@patternfly/react-core\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype SignedJWTProps = {\r\n  clientAuthenticatorType: string;\r\n};\r\n\r\nexport const SignedJWT = ({ clientAuthenticatorType }: SignedJWTProps) => {\r\n  const { cryptoInfo } = useServerInfo();\r\n  const providers =\r\n    clientAuthenticatorType === \"client-jwt\"\r\n      ? (cryptoInfo?.clientSignatureAsymmetricAlgorithms ?? [])\r\n      : (cryptoInfo?.clientSignatureSymmetricAlgorithms ?? []);\r\n\r\n  const { t } = useTranslation();\r\n  const { control } = useFormContext<FormFields>();\r\n\r\n  return (\r\n    <>\r\n      <SelectControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.token.endpoint.auth.signing.alg\",\r\n        )}\r\n        label={t(\"signatureAlgorithm\")}\r\n        labelIcon={t(\"signatureAlgorithmHelp\")}\r\n        controller={{\r\n          defaultValue: \"\",\r\n        }}\r\n        isScrollable\r\n        maxMenuHeight=\"200px\"\r\n        options={[\r\n          { key: \"\", value: t(\"anyAlgorithm\") },\r\n          ...providers.map((option) => ({ key: option, value: option })),\r\n        ]}\r\n      />\r\n      <FormGroup\r\n        label={t(\"signatureMaxExp\")}\r\n        fieldId=\"signatureMaxExp\"\r\n        className=\"pf-v5-u-my-md\"\r\n        labelIcon={\r\n          <HelpItem\r\n            helpText={t(\"signatureMaxExpHelp\")}\r\n            fieldLabelId=\"signatureMaxExp\"\r\n          />\r\n        }\r\n      >\r\n        <Controller\r\n          name={convertAttributeNameToForm<FormFields>(\r\n            \"attributes.token.endpoint.auth.signing.max.exp\",\r\n          )}\r\n          defaultValue=\"\"\r\n          control={control}\r\n          render={({ field }) => (\r\n            <TimeSelector\r\n              value={field.value!}\r\n              onChange={field.onChange}\r\n              units={[\"second\", \"minute\"]}\r\n              min=\"1\"\r\n            />\r\n          )}\r\n        />\r\n      </FormGroup>\r\n    </>\r\n  );\r\n};\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { TextControl } from \"@keycloak/keycloak-ui-shared\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport { FormFields } from \"../ClientDetails\";\r\n\r\nexport const X509 = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <>\r\n      <DefaultSwitchControl\r\n        name={convertAttributeNameToForm<FormFields>(\r\n          \"attributes.x509.allow.regex.pattern.comparison\",\r\n        )}\r\n        label={t(\"allowRegexComparison\")}\r\n        labelIcon={t(\"allowRegexComparisonHelp\")}\r\n        stringify\r\n      />\r\n      <TextControl\r\n        name={convertAttributeNameToForm(\"attributes.x509.subjectdn\")}\r\n        label={t(\"subject\")}\r\n        labelIcon={t(\"subjectHelp\")}\r\n        rules={{\r\n          required: t(\"required\"),\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import type { AuthenticationProviderRepresentation } from \"@keycloak/keycloak-admin-client/lib/defs/authenticatorConfigRepresentation\";\r\nimport type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type CredentialRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/credentialRepresentation\";\r\nimport {\r\n  HelpItem,\r\n  SelectControl,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  Alert,\r\n  AlertVariant,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  ClipboardCopy,\r\n  Divider,\r\n  Form,\r\n  FormGroup,\r\n  PageSection,\r\n  Split,\r\n  SplitItem,\r\n} from \"@patternfly/react-core\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { useFormContext, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { DynamicComponents } from \"../../components/dynamic/DynamicComponents\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { ClientSecret } from \"./ClientSecret\";\r\nimport { SignedJWT } from \"./SignedJWT\";\r\nimport { X509 } from \"./X509\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\n\r\ntype AccessToken = {\r\n  registrationAccessToken: string;\r\n};\r\n\r\nexport type CredentialsProps = {\r\n  client: ClientRepresentation;\r\n  save: () => void;\r\n  refresh: () => void;\r\n};\r\n\r\nexport const Credentials = ({ client, save, refresh }: CredentialsProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const clientId = client.id!;\r\n\r\n  const [providers, setProviders] = useState<\r\n    AuthenticationProviderRepresentation[]\r\n  >([]);\r\n\r\n  const {\r\n    control,\r\n    formState: { isDirty },\r\n    handleSubmit,\r\n  } = useFormContext<FormFields>();\r\n\r\n  const clientAuthenticatorType = useWatch({\r\n    control: control,\r\n    name: \"clientAuthenticatorType\",\r\n    defaultValue: \"\",\r\n  });\r\n\r\n  const [secret, setSecret] = useState(\"\");\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n\r\n  const selectedProvider = providers.find(\r\n    (provider) => provider.id === clientAuthenticatorType,\r\n  );\r\n\r\n  const { componentTypes } = useServerInfo();\r\n  const providerProperties = useMemo(\r\n    () =>\r\n      componentTypes?.[\"org.keycloak.authentication.ClientAuthenticator\"]?.find(\r\n        (p) => p.id === clientAuthenticatorType,\r\n      )?.clientProperties,\r\n    [clientAuthenticatorType, componentTypes],\r\n  );\r\n\r\n  useFetch(\r\n    () =>\r\n      Promise.all([\r\n        adminClient.authenticationManagement.getClientAuthenticatorProviders(),\r\n        adminClient.clients.getClientSecret({\r\n          id: clientId,\r\n        }),\r\n      ]),\r\n    ([providers, secret]) => {\r\n      setProviders(providers);\r\n      setSecret(secret.value!);\r\n    },\r\n    [],\r\n  );\r\n\r\n  async function regenerate<T>(\r\n    call: (clientId: string) => Promise<T>,\r\n    message: string,\r\n  ): Promise<T | undefined> {\r\n    try {\r\n      const data = await call(clientId);\r\n      addAlert(t(`${message}Success`), AlertVariant.success);\r\n      return data;\r\n    } catch (error) {\r\n      addError(`${message}Error`, error);\r\n    }\r\n  }\r\n\r\n  const regenerateClientSecret = async () => {\r\n    const secret = await regenerate<CredentialRepresentation>(\r\n      (clientId) =>\r\n        adminClient.clients.generateNewClientSecret({ id: clientId }),\r\n      \"clientSecret\",\r\n    );\r\n    setSecret(secret?.value || \"\");\r\n    refresh();\r\n  };\r\n\r\n  const [toggleClientSecretConfirm, ClientSecretConfirm] = useConfirmDialog({\r\n    titleKey: \"confirmClientSecretTitle\",\r\n    messageKey: \"confirmClientSecretBody\",\r\n    continueButtonLabel: \"yes\",\r\n    cancelButtonLabel: \"no\",\r\n    onConfirm: regenerateClientSecret,\r\n  });\r\n\r\n  const regenerateAccessToken = async () => {\r\n    const accessToken = await regenerate<AccessToken>(\r\n      (clientId) =>\r\n        adminClient.clients.generateRegistrationAccessToken({ id: clientId }),\r\n      \"accessToken\",\r\n    );\r\n    setAccessToken(accessToken?.registrationAccessToken || \"\");\r\n  };\r\n\r\n  const [toggleAccessTokenConfirm, AccessTokenConfirm] = useConfirmDialog({\r\n    titleKey: \"confirmAccessTokenTitle\",\r\n    messageKey: \"confirmAccessTokenBody\",\r\n    continueButtonLabel: \"yes\",\r\n    cancelButtonLabel: \"no\",\r\n    onConfirm: regenerateAccessToken,\r\n  });\r\n\r\n  return (\r\n    <PageSection>\r\n      <FormAccess\r\n        onSubmit={handleSubmit(save)}\r\n        isHorizontal\r\n        className=\"pf-v5-u-mt-md\"\r\n        role=\"manage-clients\"\r\n        fineGrainedAccess={client.access?.configure}\r\n      >\r\n        <ClientSecretConfirm />\r\n        <AccessTokenConfirm />\r\n        <Card isFlat>\r\n          <CardBody>\r\n            <SelectControl\r\n              name=\"clientAuthenticatorType\"\r\n              label={t(\"clientAuthenticator\")}\r\n              labelIcon={t(\"clientAuthenticatorTypeHelp\")}\r\n              controller={{\r\n                defaultValue: \"\",\r\n              }}\r\n              options={providers.map(({ id, displayName }) => ({\r\n                key: id!,\r\n                value: displayName || id!,\r\n              }))}\r\n            />\r\n            {(clientAuthenticatorType === \"client-jwt\" ||\r\n              clientAuthenticatorType === \"client-secret-jwt\") && (\r\n              <SignedJWT clientAuthenticatorType={clientAuthenticatorType} />\r\n            )}\r\n            {clientAuthenticatorType === \"client-jwt\" && (\r\n              <FormGroup>\r\n                <Alert variant=\"info\" isInline title={t(\"signedJWTConfirm\")} />\r\n              </FormGroup>\r\n            )}\r\n            {clientAuthenticatorType === \"client-x509\" && <X509 />}\r\n            {providerProperties && (\r\n              <Form>\r\n                <DynamicComponents\r\n                  properties={providerProperties}\r\n                  convertToName={(name) =>\r\n                    convertAttributeNameToForm(`attributes.${name}`)\r\n                  }\r\n                />\r\n              </Form>\r\n            )}\r\n            <ActionGroup>\r\n              <Button variant=\"primary\" type=\"submit\" isDisabled={!isDirty}>\r\n                {t(\"save\")}\r\n              </Button>\r\n            </ActionGroup>\r\n          </CardBody>\r\n          {selectedProvider?.supportsSecret && (\r\n            <>\r\n              <Divider />\r\n              <CardBody>\r\n                <ClientSecret\r\n                  client={client}\r\n                  secret={secret}\r\n                  toggle={toggleClientSecretConfirm}\r\n                />\r\n              </CardBody>\r\n            </>\r\n          )}\r\n        </Card>\r\n        <Card isFlat>\r\n          <CardBody>\r\n            <FormGroup\r\n              label={t(\"registrationAccessToken\")}\r\n              fieldId=\"kc-access-token\"\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(\"registrationAccessTokenHelp\")}\r\n                  fieldLabelId=\"registrationAccessToken\"\r\n                />\r\n              }\r\n            >\r\n              <Split hasGutter>\r\n                <SplitItem isFilled>\r\n                  <ClipboardCopy id=\"kc-access-token\" isReadOnly>\r\n                    {accessToken}\r\n                  </ClipboardCopy>\r\n                </SplitItem>\r\n                <SplitItem>\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={toggleAccessTokenConfirm}\r\n                  >\r\n                    {t(\"regenerate\")}\r\n                  </Button>\r\n                </SplitItem>\r\n              </Split>\r\n            </FormGroup>\r\n          </CardBody>\r\n        </Card>\r\n      </FormAccess>\r\n    </PageSection>\r\n  );\r\n};\r\n","import type CertificateRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/certificateRepresentation\";\r\nimport { FormGroup, TextArea } from \"@patternfly/react-core\";\r\nimport { useId } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\n\r\ntype CertificateProps = Omit<CertificateDisplayProps, \"id\"> & {\r\n  plain?: boolean;\r\n};\r\n\r\ntype CertificateDisplayProps = {\r\n  id: string;\r\n  helpTextKey?: string;\r\n  keyInfo?: CertificateRepresentation;\r\n};\r\n\r\nconst CertificateDisplay = ({ id, keyInfo }: CertificateDisplayProps) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <TextArea\r\n      readOnly\r\n      rows={5}\r\n      id={id}\r\n      data-testid=\"certificate\"\r\n      value={keyInfo?.certificate}\r\n      aria-label={t(\"certificate\")}\r\n    />\r\n  );\r\n};\r\n\r\nexport const Certificate = ({\r\n  helpTextKey = \"certificateHelp\",\r\n  keyInfo,\r\n  plain = false,\r\n}: CertificateProps) => {\r\n  const { t } = useTranslation();\r\n  const id = useId();\r\n\r\n  return plain ? (\r\n    <CertificateDisplay id={id} keyInfo={keyInfo} />\r\n  ) : (\r\n    <FormGroup\r\n      label={t(\"certificate\")}\r\n      fieldId={id}\r\n      labelIcon={<HelpItem helpText={t(helpTextKey)} fieldLabelId={id} />}\r\n    >\r\n      <CertificateDisplay id={id} keyInfo={keyInfo} />\r\n    </FormGroup>\r\n  );\r\n};\r\n","import type KeyStoreConfig from \"@keycloak/keycloak-admin-client/lib/defs/keystoreConfig\";\r\nimport {\r\n  HelpItem,\r\n  NumberControl,\r\n  SelectControl,\r\n  FileUploadControl,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  Button,\r\n  ButtonVariant,\r\n  Form,\r\n  Modal,\r\n  ModalVariant,\r\n  Text,\r\n  TextContent,\r\n} from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { StoreSettings } from \"./StoreSettings\";\r\n\r\ntype GenerateKeyDialogProps = {\r\n  clientId: string;\r\n  toggleDialog: () => void;\r\n  save: (keyStoreConfig: KeyStoreConfig) => void;\r\n};\r\n\r\ntype KeyFormProps = {\r\n  useFile?: boolean;\r\n  isSaml?: boolean;\r\n  hasPem?: boolean;\r\n};\r\n\r\nconst CERT_PEM = \"Certificate PEM\" as const;\r\n\r\nconst extensions = new Map([\r\n  [\"PKCS12\", \"p12\"],\r\n  [\"JKS\", \"jks\"],\r\n  [\"BCFKS\", \"bcfks\"],\r\n]);\r\n\r\ntype FormFields = KeyStoreConfig & {\r\n  file: string | File;\r\n};\r\n\r\nexport const getFileExtension = (format: string) => extensions.get(format);\r\n\r\nexport const KeyForm = ({\r\n  isSaml = false,\r\n  hasPem = false,\r\n  useFile = false,\r\n}: KeyFormProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  const { watch } = useFormContext<FormFields>();\r\n  const format = watch(\"format\");\r\n\r\n  const { cryptoInfo } = useServerInfo();\r\n  const supportedKeystoreTypes = [\r\n    ...(cryptoInfo?.supportedKeystoreTypes ?? []),\r\n    ...(hasPem ? [CERT_PEM] : []),\r\n  ];\r\n  const keySizes = [\"4096\", \"3072\", \"2048\"];\r\n\r\n  return (\r\n    <Form className=\"pf-v5-u-pt-lg\">\r\n      <SelectControl\r\n        name=\"format\"\r\n        label={t(\"archiveFormat\")}\r\n        labelIcon={t(\"archiveFormatHelp\")}\r\n        controller={{\r\n          defaultValue: supportedKeystoreTypes[0],\r\n        }}\r\n        menuAppendTo=\"parent\"\r\n        options={supportedKeystoreTypes}\r\n      />\r\n      {useFile && (\r\n        <FileUploadControl\r\n          label={t(\"importFile\")}\r\n          labelIcon={\r\n            <HelpItem\r\n              helpText={t(\"importFileHelp\")}\r\n              fieldLabelId=\"importFile\"\r\n            />\r\n          }\r\n          rules={{\r\n            required: t(\"required\"),\r\n          }}\r\n          name=\"file\"\r\n          id=\"importFile\"\r\n        />\r\n      )}\r\n      {format !== CERT_PEM && (\r\n        <StoreSettings hidePassword={useFile} isSaml={isSaml} />\r\n      )}\r\n      {!useFile && (\r\n        <>\r\n          <SelectControl\r\n            name=\"keySize\"\r\n            label={t(\"keySize\")}\r\n            labelIcon={t(\"keySizeHelp\")}\r\n            controller={{\r\n              defaultValue: keySizes[0],\r\n            }}\r\n            menuAppendTo=\"parent\"\r\n            options={keySizes}\r\n          />\r\n          <NumberControl\r\n            name=\"validity\"\r\n            label={t(\"validity\")}\r\n            labelIcon={t(\"validityHelp\")}\r\n            controller={{\r\n              defaultValue: 3,\r\n              rules: { required: t(\"required\"), min: 1, max: 10 },\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport const GenerateKeyDialog = ({\r\n  clientId,\r\n  save,\r\n  toggleDialog,\r\n}: GenerateKeyDialogProps) => {\r\n  const { t } = useTranslation();\r\n  const form = useForm<KeyStoreConfig>({\r\n    defaultValues: { keyAlias: clientId },\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const {\r\n    handleSubmit,\r\n    formState: { isValid },\r\n  } = form;\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.medium}\r\n      title={t(\"generateKeys\")}\r\n      isOpen\r\n      onClose={toggleDialog}\r\n      actions={[\r\n        <Button\r\n          id=\"modal-confirm\"\r\n          key=\"confirm\"\r\n          data-testid=\"confirm\"\r\n          isDisabled={!isValid}\r\n          onClick={async () => {\r\n            await handleSubmit((config) => {\r\n              save(config);\r\n              toggleDialog();\r\n            })();\r\n          }}\r\n        >\r\n          {t(\"generate\")}\r\n        </Button>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          key=\"cancel\"\r\n          data-testid=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={() => {\r\n            toggleDialog();\r\n          }}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <TextContent>\r\n        <Text>{t(\"generateKeysDescription\")}</Text>\r\n      </TextContent>\r\n      <FormProvider {...form}>\r\n        <KeyForm />\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import type CertificateRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/certificateRepresentation\";\r\nimport type KeyStoreConfig from \"@keycloak/keycloak-admin-client/lib/defs/keystoreConfig\";\r\nimport { TextControl, useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  AlertVariant,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  CardTitle,\r\n  PageSection,\r\n  Text,\r\n  TextContent,\r\n} from \"@patternfly/react-core\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { useState } from \"react\";\r\nimport { useFormContext, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { DefaultSwitchControl } from \"../../components/SwitchControl\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { Certificate } from \"./Certificate\";\r\nimport { GenerateKeyDialog, getFileExtension } from \"./GenerateKeyDialog\";\r\nimport { ImportFile, ImportKeyDialog } from \"./ImportKeyDialog\";\r\n\r\ntype KeysProps = {\r\n  save: () => void;\r\n  refresh: () => void;\r\n  clientId: string;\r\n  hasConfigureAccess?: boolean;\r\n};\r\n\r\nconst attr = \"jwt.credential\";\r\n\r\nexport const Keys = ({\r\n  clientId,\r\n  save,\r\n  refresh: refreshParent,\r\n  hasConfigureAccess,\r\n}: KeysProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const {\r\n    control,\r\n    getValues,\r\n    formState: { isDirty },\r\n  } = useFormContext<FormFields>();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const [keyInfo, setKeyInfo] = useState<CertificateRepresentation>();\r\n  const [openGenerateKeys, toggleOpenGenerateKeys, setOpenGenerateKeys] =\r\n    useToggle();\r\n  const [openImportKeys, toggleOpenImportKeys, setOpenImportKeys] = useToggle();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => {\r\n    setKey(key + 1);\r\n    refreshParent();\r\n  };\r\n\r\n  const useJwksUrl = useWatch({\r\n    control,\r\n    name: convertAttributeNameToForm<FormFields>(\"attributes.use.jwks.url\"),\r\n    defaultValue: \"false\",\r\n  });\r\n\r\n  useFetch(\r\n    async () => {\r\n      try {\r\n        return await adminClient.clients.getKeyInfo({ id: clientId, attr });\r\n      } catch (error) {\r\n        addError(\"getKeyInfoError\", error);\r\n        return {} as CertificateRepresentation;\r\n      }\r\n    },\r\n    (info) => setKeyInfo(info),\r\n    [key],\r\n  );\r\n\r\n  const generate = async (config: KeyStoreConfig) => {\r\n    try {\r\n      const keyStore = await adminClient.clients.generateAndDownloadKey(\r\n        {\r\n          id: clientId,\r\n          attr,\r\n        },\r\n        config,\r\n      );\r\n      saveAs(\r\n        new Blob([keyStore], { type: \"application/octet-stream\" }),\r\n        `keystore.${getFileExtension(config.format ?? \"\")}`,\r\n      );\r\n      addAlert(t(\"generateSuccess\"), AlertVariant.success);\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\"generateError\", error);\r\n    }\r\n  };\r\n\r\n  const importKey = async (importFile: ImportFile) => {\r\n    try {\r\n      const formData = new FormData();\r\n      const { file, ...rest } = importFile;\r\n\r\n      for (const [key, value] of Object.entries(rest)) {\r\n        formData.append(key, value);\r\n      }\r\n\r\n      formData.append(\"file\", file);\r\n      await adminClient.clients.uploadCertificate(\r\n        { id: clientId, attr },\r\n        formData,\r\n      );\r\n      addAlert(t(\"importSuccess\"), AlertVariant.success);\r\n      refresh();\r\n    } catch (error) {\r\n      addError(\"importError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"keycloak__form\">\r\n      {openGenerateKeys && (\r\n        <GenerateKeyDialog\r\n          clientId={getValues(\"clientId\")!}\r\n          toggleDialog={toggleOpenGenerateKeys}\r\n          save={generate}\r\n        />\r\n      )}\r\n      {openImportKeys && (\r\n        <ImportKeyDialog toggleDialog={toggleOpenImportKeys} save={importKey} />\r\n      )}\r\n      <Card isFlat>\r\n        <CardHeader>\r\n          <CardTitle>{t(\"jwksUrlConfig\")}</CardTitle>\r\n        </CardHeader>\r\n        <CardBody>\r\n          <TextContent>\r\n            <Text>{t(\"keysIntro\")}</Text>\r\n          </TextContent>\r\n        </CardBody>\r\n        <CardBody>\r\n          <FormAccess\r\n            role=\"manage-clients\"\r\n            fineGrainedAccess={hasConfigureAccess}\r\n            isHorizontal\r\n          >\r\n            <DefaultSwitchControl\r\n              name={convertAttributeNameToForm(\"attributes.use.jwks.url\")}\r\n              label={t(\"useJwksUrl\")}\r\n              labelIcon={t(\"useJwksUrlHelp\")}\r\n              stringify\r\n            />\r\n            {useJwksUrl !== \"true\" &&\r\n              (keyInfo ? (\r\n                <Certificate plain keyInfo={keyInfo} />\r\n              ) : (\r\n                \"No client certificate configured\"\r\n              ))}\r\n            {useJwksUrl === \"true\" && (\r\n              <TextControl\r\n                name={convertAttributeNameToForm(\"attributes.jwks.url\")}\r\n                label={t(\"jwksUrl\")}\r\n                labelIcon={t(\"jwksUrlHelp\")}\r\n                type=\"url\"\r\n              />\r\n            )}\r\n            <ActionGroup>\r\n              <Button\r\n                data-testid=\"saveKeys\"\r\n                onClick={save}\r\n                isDisabled={!isDirty}\r\n              >\r\n                {t(\"save\")}\r\n              </Button>\r\n              <Button\r\n                data-testid=\"generate\"\r\n                variant=\"secondary\"\r\n                onClick={() => setOpenGenerateKeys(true)}\r\n              >\r\n                {t(\"generateNewKeys\")}\r\n              </Button>\r\n              <Button\r\n                data-testid=\"import\"\r\n                variant=\"secondary\"\r\n                onClick={() => setOpenImportKeys(true)}\r\n                isDisabled={useJwksUrl === \"true\"}\r\n              >\r\n                {t(\"import\")}\r\n              </Button>\r\n            </ActionGroup>\r\n          </FormAccess>\r\n        </CardBody>\r\n      </Card>\r\n    </PageSection>\r\n  );\r\n};\r\n","import KeyStoreConfig from \"@keycloak/keycloak-admin-client/lib/defs/keystoreConfig\";\r\nimport { Button, Form, Modal } from \"@patternfly/react-core\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { KeyForm, getFileExtension } from \"./GenerateKeyDialog\";\r\nimport { KeyTypes } from \"./SamlKeys\";\r\n\r\ntype ExportSamlKeyDialogProps = {\r\n  clientId: string;\r\n  close: () => void;\r\n  keyType: KeyTypes;\r\n};\r\n\r\nexport const ExportSamlKeyDialog = ({\r\n  clientId,\r\n  close,\r\n  keyType,\r\n}: ExportSamlKeyDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { realm } = useRealm();\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const form = useForm<KeyStoreConfig>({\r\n    defaultValues: { realmAlias: realm },\r\n  });\r\n\r\n  const download = async (config: KeyStoreConfig) => {\r\n    try {\r\n      const keyStore = await adminClient.clients.downloadKey(\r\n        {\r\n          id: clientId,\r\n          attr: keyType,\r\n        },\r\n        config,\r\n      );\r\n      saveAs(\r\n        new Blob([keyStore], { type: \"application/octet-stream\" }),\r\n        `keystore.${getFileExtension(config.format ?? \"\")}`,\r\n      );\r\n      addAlert(t(\"samlKeysExportSuccess\"));\r\n      close();\r\n    } catch (error) {\r\n      addError(\"samlKeysExportError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant=\"medium\"\r\n      title={t(\"exportSamlKeyTitle\")}\r\n      isOpen\r\n      onClose={close}\r\n      actions={[\r\n        <Button\r\n          id=\"modal-confirm\"\r\n          data-testid=\"confirm\"\r\n          key=\"confirm\"\r\n          type=\"submit\"\r\n          form=\"export-saml-key-form\"\r\n        >\r\n          {t(\"export\")}\r\n        </Button>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          data-testid=\"cancel\"\r\n          key=\"cancel\"\r\n          variant=\"link\"\r\n          onClick={() => {\r\n            close();\r\n          }}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <Form\r\n        id=\"export-saml-key-form\"\r\n        className=\"pf-v5-u-pt-lg\"\r\n        onSubmit={form.handleSubmit(download)}\r\n      >\r\n        <FormProvider {...form}>\r\n          <KeyForm isSaml />\r\n        </FormProvider>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n","import KeycloakAdminClient from \"@keycloak/keycloak-admin-client\";\r\nimport type CertificateRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/certificateRepresentation\";\r\nimport type KeyStoreConfig from \"@keycloak/keycloak-admin-client/lib/defs/keystoreConfig\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Flex,\r\n  FlexItem,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  ModalVariant,\r\n  Radio,\r\n  Split,\r\n  SplitItem,\r\n  Text,\r\n  TextContent,\r\n  Title,\r\n} from \"@patternfly/react-core\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { HelpItem } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Certificate } from \"./Certificate\";\r\nimport { KeyForm } from \"./GenerateKeyDialog\";\r\nimport type { KeyTypes } from \"./SamlKeys\";\r\n\r\ntype SamlKeysDialogProps = {\r\n  id: string;\r\n  attr: KeyTypes;\r\n  localeKey: string;\r\n  onClose: () => void;\r\n  onCancel: () => void;\r\n};\r\n\r\nexport type SamlKeysDialogForm = KeyStoreConfig & {\r\n  file: File;\r\n};\r\n\r\nexport const submitForm = async (\r\n  adminClient: KeycloakAdminClient,\r\n  form: SamlKeysDialogForm,\r\n  id: string,\r\n  attr: KeyTypes,\r\n  callback: (error?: unknown) => void,\r\n) => {\r\n  try {\r\n    const formData = new FormData();\r\n    const { file, ...rest } = form;\r\n    Object.entries(rest).map(([key, value]) =>\r\n      formData.append(\r\n        key === \"format\" ? \"keystoreFormat\" : key,\r\n        value.toString(),\r\n      ),\r\n    );\r\n    formData.append(\"file\", file);\r\n\r\n    await adminClient.clients.uploadKey({ id, attr }, formData);\r\n    callback();\r\n  } catch (error) {\r\n    callback(error);\r\n  }\r\n};\r\n\r\nexport const SamlKeysDialog = ({\r\n  id,\r\n  attr,\r\n  localeKey,\r\n  onClose,\r\n  onCancel,\r\n}: SamlKeysDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const [type, setType] = useState(false);\r\n  const [keys, setKeys] = useState<CertificateRepresentation>();\r\n  const form = useForm<SamlKeysDialogForm>({ mode: \"onChange\" });\r\n  const {\r\n    handleSubmit,\r\n    formState: { isValid },\r\n  } = form;\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const submit = async (form: SamlKeysDialogForm) => {\r\n    await submitForm(adminClient, form, id, attr, (error) => {\r\n      if (error) {\r\n        addError(\"importError\", error);\r\n      } else {\r\n        addAlert(t(\"importSuccess\"), AlertVariant.success);\r\n      }\r\n    });\r\n  };\r\n\r\n  const generate = async () => {\r\n    try {\r\n      const key = await adminClient.clients.generateKey({\r\n        id,\r\n        attr,\r\n      });\r\n      setKeys(key);\r\n      saveAs(\r\n        new Blob([key.privateKey!], {\r\n          type: \"application/octet-stream\",\r\n        }),\r\n        \"private.key\",\r\n      );\r\n\r\n      addAlert(t(\"generateSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"generateError\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      variant={ModalVariant.medium}\r\n      aria-label={t(\"enableClientSignatureRequiredModal\")}\r\n      header={\r\n        <TextContent>\r\n          <Title headingLevel=\"h1\">\r\n            {t(\"enableClientSignatureRequired\", {\r\n              key: t(localeKey),\r\n            })}\r\n          </Title>\r\n          <Text>\r\n            {t(\"enableClientSignatureRequiredExplain\", {\r\n              key: t(localeKey),\r\n            })}\r\n          </Text>\r\n        </TextContent>\r\n      }\r\n      isOpen={true}\r\n      onClose={onClose}\r\n      actions={[\r\n        <Button\r\n          id=\"modal-confirm\"\r\n          key=\"confirm\"\r\n          data-testid=\"confirm\"\r\n          variant=\"primary\"\r\n          isDisabled={!isValid && !keys}\r\n          onClick={async () => {\r\n            if (type) {\r\n              await handleSubmit(submit)();\r\n            }\r\n            onClose();\r\n          }}\r\n        >\r\n          {t(\"confirm\")}\r\n        </Button>,\r\n        <Button\r\n          id=\"modal-cancel\"\r\n          key=\"cancel\"\r\n          data-testid=\"cancel\"\r\n          variant={ButtonVariant.link}\r\n          onClick={onCancel}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <FormProvider {...form}>\r\n        <Form isHorizontal>\r\n          <FormGroup\r\n            label={t(\"selectMethod\")}\r\n            fieldId=\"selectMethod\"\r\n            hasNoPaddingTop\r\n          >\r\n            <Flex>\r\n              <FlexItem>\r\n                <Radio\r\n                  isChecked={!type}\r\n                  name=\"selectMethodType\"\r\n                  onChange={() => setType(false)}\r\n                  label={t(\"selectMethodType.generate\")}\r\n                  id=\"selectMethodType-generate\"\r\n                />\r\n              </FlexItem>\r\n              <FlexItem>\r\n                <Radio\r\n                  isChecked={type}\r\n                  name=\"selectMethodType\"\r\n                  onChange={() => setType(true)}\r\n                  label={t(\"selectMethodType.import\")}\r\n                  id=\"selectMethodType-import\"\r\n                />\r\n              </FlexItem>\r\n            </Flex>\r\n          </FormGroup>\r\n          {!type && (\r\n            <FormGroup\r\n              label={t(\"certificate\")}\r\n              fieldId=\"certificate\"\r\n              labelIcon={\r\n                <HelpItem\r\n                  helpText={t(`saml${localeKey}CertificateHelp`)}\r\n                  fieldLabelId=\"certificate\"\r\n                />\r\n              }\r\n            >\r\n              <Split hasGutter>\r\n                <SplitItem isFilled>\r\n                  <Certificate plain keyInfo={keys} />\r\n                </SplitItem>\r\n                <SplitItem>\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    data-testid=\"generate\"\r\n                    onClick={generate}\r\n                  >\r\n                    {t(\"generate\")}\r\n                  </Button>\r\n                </SplitItem>\r\n              </Split>\r\n            </FormGroup>\r\n          )}\r\n        </Form>\r\n        {type && <KeyForm useFile hasPem />}\r\n      </FormProvider>\r\n    </Modal>\r\n  );\r\n};\r\n","import { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport { AlertVariant } from \"@patternfly/react-core\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { KeyForm } from \"./GenerateKeyDialog\";\r\nimport type { KeyTypes } from \"./SamlKeys\";\r\nimport { SamlKeysDialogForm, submitForm } from \"./SamlKeysDialog\";\r\n\r\ntype SamlImportKeyDialogProps = {\r\n  id: string;\r\n  attr: KeyTypes;\r\n  onClose: () => void;\r\n  onImported: () => void;\r\n};\r\n\r\nexport const SamlImportKeyDialog = ({\r\n  id,\r\n  attr,\r\n  onClose,\r\n  onImported,\r\n}: SamlImportKeyDialogProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const form = useForm<SamlKeysDialogForm>();\r\n  const {\r\n    handleSubmit,\r\n    formState: { isValid },\r\n  } = form;\r\n\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const submit = async (form: SamlKeysDialogForm) => {\r\n    await submitForm(adminClient, form, id, attr, (error) => {\r\n      if (error) {\r\n        addError(\"importError\", error);\r\n      } else {\r\n        addAlert(t(\"importSuccess\"), AlertVariant.success);\r\n        onImported();\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <ConfirmDialogModal\r\n      open={true}\r\n      toggleDialog={onClose}\r\n      continueButtonLabel=\"import\"\r\n      titleKey=\"importKey\"\r\n      confirmButtonDisabled={!isValid}\r\n      onConfirm={async () => {\r\n        await handleSubmit(submit)();\r\n      }}\r\n    >\r\n      <FormProvider {...form}>\r\n        <KeyForm useFile hasPem />\r\n      </FormProvider>\r\n    </ConfirmDialogModal>\r\n  );\r\n};\r\n","import type CertificateRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/certificateRepresentation\";\r\nimport {\r\n  FormPanel,\r\n  HelpItem,\r\n  useAlerts,\r\n  useFetch,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ActionGroup,\r\n  AlertVariant,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  Form,\r\n  FormGroup,\r\n  PageSection,\r\n  Switch,\r\n  Text,\r\n  TextContent,\r\n} from \"@patternfly/react-core\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { Fragment, useState } from \"react\";\r\nimport { Controller, useFormContext } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { FormAccess } from \"../../components/form/FormAccess\";\r\nimport { convertAttributeNameToForm } from \"../../util\";\r\nimport useToggle from \"../../utils/useToggle\";\r\nimport { FormFields } from \"../ClientDetails\";\r\nimport { Certificate } from \"./Certificate\";\r\nimport { ExportSamlKeyDialog } from \"./ExportSamlKeyDialog\";\r\nimport { SamlImportKeyDialog } from \"./SamlImportKeyDialog\";\r\nimport { SamlKeysDialog } from \"./SamlKeysDialog\";\r\n\r\ntype SamlKeysProps = {\r\n  clientId: string;\r\n  save: () => void;\r\n};\r\n\r\ntype KeyMapping = {\r\n  name: string;\r\n  title: string;\r\n  key: string;\r\n  regenerateKey: string;\r\n  relatedKeys: string[];\r\n};\r\n\r\nconst KEYS = [\"saml.signing\", \"saml.encryption\"] as const;\r\nexport type KeyTypes = (typeof KEYS)[number];\r\n\r\nconst KEYS_MAPPING: { [key in KeyTypes]: KeyMapping } = {\r\n  \"saml.signing\": {\r\n    name: convertAttributeNameToForm(\"attributes.saml.client.signature\"),\r\n    title: \"signingKeysConfig\",\r\n    key: \"clientSignature\",\r\n    regenerateKey: \"reGenerateSigning\",\r\n    relatedKeys: [],\r\n  },\r\n  \"saml.encryption\": {\r\n    name: convertAttributeNameToForm(\"attributes.saml.encrypt\"),\r\n    title: \"encryptionKeysConfig\",\r\n    key: \"encryptAssertions\",\r\n    regenerateKey: \"reGenerateEncryption\",\r\n    relatedKeys: [\r\n      convertAttributeNameToForm(\"attributes.saml.encryption.algorithm\"),\r\n      convertAttributeNameToForm(\"attributes.saml.encryption.keyAlgorithm\"),\r\n      convertAttributeNameToForm(\"attributes.saml.encryption.digestMethod\"),\r\n      convertAttributeNameToForm(\r\n        \"attributes.saml.encryption.maskGenerationFunction\",\r\n      ),\r\n    ],\r\n  },\r\n};\r\n\r\ntype KeySectionProps = {\r\n  clientId: string;\r\n  keyInfo?: CertificateRepresentation;\r\n  attr: KeyTypes;\r\n  onChanged: (key: KeyTypes) => void;\r\n  onGenerate: (key: KeyTypes, regenerate: boolean) => void;\r\n  onImport: (key: KeyTypes) => void;\r\n  save: () => void;\r\n};\r\n\r\nconst KeySection = ({\r\n  clientId,\r\n  keyInfo,\r\n  attr,\r\n  onChanged,\r\n  onGenerate,\r\n  onImport,\r\n  save,\r\n}: KeySectionProps) => {\r\n  const { t } = useTranslation();\r\n  const { control, watch } = useFormContext<FormFields>();\r\n  const title = KEYS_MAPPING[attr].title;\r\n  const key = KEYS_MAPPING[attr].key;\r\n  const name = KEYS_MAPPING[attr].name;\r\n\r\n  const [showImportDialog, toggleImportDialog] = useToggle();\r\n\r\n  const section = watch(name as keyof FormFields);\r\n\r\n  const useMetadataDescriptorUrl = watch(\r\n    convertAttributeNameToForm<FormFields>(\r\n      \"attributes.saml.useMetadataDescriptorUrl\",\r\n    ),\r\n    \"false\",\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {showImportDialog && (\r\n        <ExportSamlKeyDialog\r\n          keyType={attr}\r\n          clientId={clientId}\r\n          close={toggleImportDialog}\r\n        />\r\n      )}\r\n      <FormPanel title={t(title)} className=\"kc-form-panel__panel\">\r\n        <TextContent className=\"pf-v5-u-pb-lg\">\r\n          <Text>{t(`${title}Explain`)}</Text>\r\n        </TextContent>\r\n        <FormAccess role=\"manage-clients\" isHorizontal>\r\n          <FormGroup\r\n            labelIcon={\r\n              <HelpItem helpText={t(`${key}Help`)} fieldLabelId={key} />\r\n            }\r\n            label={t(key)}\r\n            fieldId={key}\r\n            hasNoPaddingTop\r\n          >\r\n            <Controller\r\n              name={name as keyof FormFields}\r\n              control={control}\r\n              defaultValue=\"false\"\r\n              render={({ field }) => (\r\n                <Switch\r\n                  data-testid={key}\r\n                  id={key}\r\n                  label={t(\"on\")}\r\n                  labelOff={t(\"off\")}\r\n                  isChecked={field.value === \"true\"}\r\n                  onChange={(_event, value) => {\r\n                    const v = value.toString();\r\n                    if (v === \"true\" && useMetadataDescriptorUrl === \"true\") {\r\n                      field.onChange(v);\r\n                      save();\r\n                    } else if (v === \"true\") {\r\n                      onChanged(attr);\r\n                      field.onChange(v);\r\n                    } else {\r\n                      onGenerate(attr, false);\r\n                    }\r\n                  }}\r\n                  aria-label={t(key)}\r\n                />\r\n              )}\r\n            />\r\n          </FormGroup>\r\n        </FormAccess>\r\n      </FormPanel>\r\n      {useMetadataDescriptorUrl !== \"true\" &&\r\n        keyInfo?.certificate &&\r\n        section === \"true\" && (\r\n          <Card isFlat>\r\n            <CardBody className=\"kc-form-panel__body\">\r\n              <Form isHorizontal>\r\n                <Certificate\r\n                  helpTextKey={`saml${key}CertificateHelp`}\r\n                  keyInfo={keyInfo}\r\n                />\r\n                <ActionGroup>\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    onClick={() => onGenerate(attr, true)}\r\n                  >\r\n                    {t(\"regenerate\")}\r\n                  </Button>\r\n                  <Button variant=\"secondary\" onClick={() => onImport(attr)}>\r\n                    {t(\"importKey\")}\r\n                  </Button>\r\n                  <Button variant=\"tertiary\" onClick={toggleImportDialog}>\r\n                    {t(\"export\")}\r\n                  </Button>\r\n                </ActionGroup>\r\n              </Form>\r\n            </CardBody>\r\n          </Card>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport const SamlKeys = ({ clientId, save }: SamlKeysProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const [isChanged, setIsChanged] = useState<KeyTypes>();\r\n  const [keyInfo, setKeyInfo] = useState<CertificateRepresentation[]>();\r\n  const [selectedType, setSelectedType] = useState<KeyTypes>();\r\n  const [openImport, setImportOpen] = useState<KeyTypes>();\r\n  const [refresh, setRefresh] = useState(0);\r\n\r\n  const { setValue } = useFormContext();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  useFetch(\r\n    () =>\r\n      Promise.all(\r\n        KEYS.map((attr) =>\r\n          adminClient.clients.getKeyInfo({ id: clientId, attr }),\r\n        ),\r\n      ),\r\n    (info) => setKeyInfo(info),\r\n    [refresh],\r\n  );\r\n\r\n  const generate = async (attr: KeyTypes) => {\r\n    const index = KEYS.indexOf(attr);\r\n    try {\r\n      const info = [...(keyInfo || [])];\r\n      info[index] = await adminClient.clients.generateKey({\r\n        id: clientId,\r\n        attr,\r\n      });\r\n\r\n      setKeyInfo(info);\r\n      saveAs(\r\n        new Blob([info[index].privateKey!], {\r\n          type: \"application/octet-stream\",\r\n        }),\r\n        \"private.key\",\r\n      );\r\n\r\n      addAlert(t(\"generateSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"generateError\", error);\r\n    }\r\n  };\r\n\r\n  const key = selectedType ? KEYS_MAPPING[selectedType].key : \"\";\r\n  const [toggleDisableDialog, DisableConfirm] = useConfirmDialog({\r\n    titleKey: t(\"disableSigning\", {\r\n      key: t(key),\r\n    }),\r\n    messageKey: t(\"disableSigningExplain\", {\r\n      key: t(key),\r\n    }),\r\n    continueButtonLabel: \"yes\",\r\n    cancelButtonLabel: \"no\",\r\n    onConfirm: () => {\r\n      setValue(KEYS_MAPPING[selectedType!].name, \"false\");\r\n      for (const key of KEYS_MAPPING[selectedType!].relatedKeys) {\r\n        setValue(key, \"\"); // remove related attributes when disabled\r\n      }\r\n      save();\r\n    },\r\n  });\r\n\r\n  const regenerateKey = selectedType\r\n    ? KEYS_MAPPING[selectedType].regenerateKey\r\n    : \"\";\r\n  const [toggleReGenerateDialog, ReGenerateConfirm] = useConfirmDialog({\r\n    titleKey: regenerateKey,\r\n    messageKey: regenerateKey + \"Explain\",\r\n    continueButtonLabel: \"yes\",\r\n    cancelButtonLabel: \"no\",\r\n    onConfirm: async () => {\r\n      await generate(selectedType!);\r\n    },\r\n  });\r\n\r\n  return (\r\n    <PageSection variant=\"light\" className=\"keycloak__form\">\r\n      {isChanged && (\r\n        <SamlKeysDialog\r\n          id={clientId}\r\n          attr={isChanged}\r\n          localeKey={key}\r\n          onClose={() => {\r\n            setIsChanged(undefined);\r\n            for (const key of KEYS_MAPPING[selectedType!].relatedKeys) {\r\n              setValue(key, \"\"); // take defaults when enabled\r\n            }\r\n            save();\r\n            setRefresh(refresh + 1);\r\n          }}\r\n          onCancel={() => {\r\n            setValue(KEYS_MAPPING[selectedType!].name, \"false\");\r\n            setIsChanged(undefined);\r\n          }}\r\n        />\r\n      )}\r\n      <DisableConfirm />\r\n      <ReGenerateConfirm />\r\n      {KEYS.map((attr, index) => (\r\n        <Fragment key={attr}>\r\n          {openImport === attr && (\r\n            <SamlImportKeyDialog\r\n              id={clientId}\r\n              attr={attr}\r\n              onClose={() => setImportOpen(undefined)}\r\n              onImported={() => setRefresh(refresh + 1)}\r\n            />\r\n          )}\r\n          <KeySection\r\n            clientId={clientId}\r\n            keyInfo={keyInfo?.[index]}\r\n            attr={attr}\r\n            onChanged={(type) => {\r\n              setIsChanged(type);\r\n              setSelectedType(type);\r\n            }}\r\n            onGenerate={(type, isNew) => {\r\n              setSelectedType(type);\r\n              if (!isNew) {\r\n                toggleDisableDialog();\r\n              } else {\r\n                toggleReGenerateDialog();\r\n              }\r\n            }}\r\n            onImport={() => setImportOpen(attr)}\r\n            save={save}\r\n          />\r\n        </Fragment>\r\n      ))}\r\n    </PageSection>\r\n  );\r\n};\r\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\r\nimport { useAlerts } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  Button,\r\n  ButtonVariant,\r\n  Dropdown,\r\n  DropdownItem,\r\n  DropdownList,\r\n  MenuToggle,\r\n  ToolbarItem,\r\n} from \"@patternfly/react-core\";\r\nimport { EllipsisVIcon } from \"@patternfly/react-icons\";\r\nimport { useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { ChangeTypeDropdown } from \"../../client-scopes/ChangeTypeDropdown\";\r\nimport {\r\n  SearchDropdown,\r\n  SearchToolbar,\r\n  SearchType,\r\n  nameFilter,\r\n  typeFilter,\r\n} from \"../../client-scopes/details/SearchFilter\";\r\nimport {\r\n  AllClientScopeType,\r\n  AllClientScopes,\r\n  CellDropdown,\r\n  ClientScope,\r\n  addClientScope,\r\n  changeClientScope,\r\n  removeClientScope,\r\n} from \"../../components/client-scope/ClientScopeTypes\";\r\nimport { useConfirmDialog } from \"../../components/confirm-dialog/ConfirmDialog\";\r\nimport { ListEmptyState } from \"@keycloak/keycloak-ui-shared\";\r\nimport { Action, KeycloakDataTable } from \"@keycloak/keycloak-ui-shared\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { translationFormatter } from \"../../utils/translationFormatter\";\r\nimport useLocaleSort, { mapByKey } from \"../../utils/useLocaleSort\";\r\nimport { toDedicatedScope } from \"../routes/DedicatedScopeDetails\";\r\nimport { AddScopeDialog } from \"./AddScopeDialog\";\r\nimport useIsFeatureEnabled, { Feature } from \"../../utils/useIsFeatureEnabled\";\r\nimport { PROTOCOL_OIDC, PROTOCOL_OID4VC } from \"../constants\";\r\n\r\nimport \"./client-scopes.css\";\r\n\r\nexport type ClientScopesProps = {\r\n  clientId: string;\r\n  protocol: string;\r\n  clientName: string;\r\n  fineGrainedAccess?: boolean;\r\n};\r\n\r\nexport type Row = ClientScopeRepresentation & {\r\n  type: AllClientScopeType;\r\n  description?: string;\r\n};\r\n\r\nconst DEDICATED_ROW = \"dedicated\";\r\n\r\ntype TypeSelectorProps = Row & {\r\n  clientId: string;\r\n  fineGrainedAccess?: boolean;\r\n  refresh: () => void;\r\n};\r\n\r\nconst TypeSelector = ({\r\n  clientId,\r\n  refresh,\r\n  fineGrainedAccess,\r\n  ...scope\r\n}: TypeSelectorProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n\r\n  const { hasAccess } = useAccess();\r\n\r\n  const isDedicatedRow = (value: Row) => value.id === DEDICATED_ROW;\r\n  const isManager = hasAccess(\"manage-clients\") || fineGrainedAccess;\r\n\r\n  return (\r\n    <CellDropdown\r\n      isDisabled={isDedicatedRow(scope) || !isManager}\r\n      clientScope={scope}\r\n      type={scope.type}\r\n      onSelect={async (value) => {\r\n        try {\r\n          await changeClientScope(\r\n            adminClient,\r\n            clientId,\r\n            scope,\r\n            scope.type,\r\n            value as ClientScope,\r\n          );\r\n          addAlert(t(\"clientScopeSuccess\"), AlertVariant.success);\r\n          refresh();\r\n        } catch (error) {\r\n          addError(\"clientScopeError\", error);\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport const ClientScopes = ({\r\n  clientId,\r\n  protocol,\r\n  clientName,\r\n  fineGrainedAccess,\r\n}: ClientScopesProps) => {\r\n  const { adminClient } = useAdminClient();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n  const localeSort = useLocaleSort();\r\n\r\n  const [searchType, setSearchType] = useState<SearchType>(\"name\");\r\n\r\n  const [searchTypeType, setSearchTypeType] = useState<AllClientScopes>(\r\n    AllClientScopes.none,\r\n  );\r\n\r\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\r\n\r\n  const [rest, setRest] = useState<ClientScopeRepresentation[]>();\r\n  const [selectedRows, setSelectedRowState] = useState<Row[]>([]);\r\n  const setSelectedRows = (rows: Row[]) =>\r\n    setSelectedRowState(rows.filter(({ id }) => id !== DEDICATED_ROW));\r\n  const [kebabOpen, setKebabOpen] = useState(false);\r\n\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n  const isDedicatedRow = (value: Row) => value.id === DEDICATED_ROW;\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-clients\") || fineGrainedAccess;\r\n  const isViewer = hasAccess(\"view-clients\") || fineGrainedAccess;\r\n\r\n  const loader = async (first?: number, max?: number, search?: string) => {\r\n    const defaultClientScopes =\r\n      await adminClient.clients.listDefaultClientScopes({ id: clientId });\r\n    const optionalClientScopes =\r\n      await adminClient.clients.listOptionalClientScopes({ id: clientId });\r\n    const clientScopes = await adminClient.clientScopes.find();\r\n\r\n    const find = (id: string) =>\r\n      clientScopes.find((clientScope) => id === clientScope.id);\r\n\r\n    const optional = optionalClientScopes.map((c) => {\r\n      const scope = find(c.id!);\r\n      const row: Row = {\r\n        ...c,\r\n        type: ClientScope.optional,\r\n        description: scope?.description,\r\n      };\r\n      return row;\r\n    });\r\n\r\n    const defaultScopes = defaultClientScopes.map((c) => {\r\n      const scope = find(c.id!);\r\n      const row: Row = {\r\n        ...c,\r\n        type: ClientScope.default,\r\n        description: scope?.description,\r\n      };\r\n      return row;\r\n    });\r\n\r\n    let rows = [...optional, ...defaultScopes];\r\n    const names = rows.map((row) => row.name);\r\n\r\n    const allowedProtocols = (() => {\r\n      if (protocol === PROTOCOL_OIDC) {\r\n        return isFeatureEnabled(Feature.OpenId4VCI)\r\n          ? [PROTOCOL_OIDC, PROTOCOL_OID4VC]\r\n          : [PROTOCOL_OIDC];\r\n      }\r\n      return [protocol];\r\n    })();\r\n\r\n    setRest(\r\n      clientScopes\r\n        .filter((scope) => !names.includes(scope.name))\r\n        .filter(\r\n          (scope) =>\r\n            scope.protocol && allowedProtocols.includes(scope.protocol),\r\n        ),\r\n    );\r\n\r\n    rows = localeSort(rows, mapByKey(\"name\"));\r\n\r\n    if (isViewer) {\r\n      rows.unshift({\r\n        id: DEDICATED_ROW,\r\n        name: t(\"dedicatedScopeName\", { clientName }),\r\n        type: AllClientScopes.none,\r\n        description: t(\"dedicatedScopeDescription\"),\r\n      });\r\n    }\r\n\r\n    const filter =\r\n      searchType === \"name\" ? nameFilter(search) : typeFilter(searchTypeType);\r\n    const firstNum = Number(first);\r\n\r\n    return rows.filter(filter).slice(firstNum, firstNum + Number(max));\r\n  };\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: t(\"deleteClientScope\", {\r\n      count: selectedRows.length,\r\n      name: selectedRows[0]?.name,\r\n    }),\r\n    messageKey: \"deleteConfirmClientScopes\",\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await removeClientScope(\r\n          adminClient,\r\n          clientId,\r\n          selectedRows[0],\r\n          selectedRows[0].type as ClientScope,\r\n        );\r\n        addAlert(t(\"clientScopeRemoveSuccess\"), AlertVariant.success);\r\n        refresh();\r\n      } catch (error) {\r\n        addError(\"clientScopeRemoveError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {rest && (\r\n        <AddScopeDialog\r\n          clientScopes={rest}\r\n          clientName={clientName!}\r\n          open={addDialogOpen}\r\n          toggleDialog={() => setAddDialogOpen(!addDialogOpen)}\r\n          onAdd={async (scopes) => {\r\n            try {\r\n              await Promise.all(\r\n                scopes.map(\r\n                  async (scope) =>\r\n                    await addClientScope(\r\n                      adminClient,\r\n                      clientId,\r\n                      scope.scope,\r\n                      scope.type!,\r\n                    ),\r\n                ),\r\n              );\r\n              addAlert(t(\"clientScopeSuccess\"), AlertVariant.success);\r\n              refresh();\r\n            } catch (error) {\r\n              addError(\"clientScopeError\", error);\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <KeycloakDataTable\r\n        key={key}\r\n        loader={loader}\r\n        ariaLabelKey=\"clientScopeList\"\r\n        searchPlaceholderKey={\r\n          searchType === \"name\" ? \"searchByName\" : undefined\r\n        }\r\n        canSelectAll\r\n        isPaginated\r\n        isSearching={searchType === \"type\"}\r\n        onSelect={(rows) => setSelectedRows([...rows])}\r\n        searchTypeComponent={\r\n          <SearchDropdown\r\n            searchType={searchType}\r\n            onSelect={(searchType) => setSearchType(searchType)}\r\n          />\r\n        }\r\n        toolbarItem={\r\n          <>\r\n            <SearchToolbar\r\n              searchType={searchType}\r\n              type={searchTypeType}\r\n              onSelect={(searchType) => setSearchType(searchType)}\r\n              onType={(value) => {\r\n                setSearchTypeType(value);\r\n                refresh();\r\n              }}\r\n            />\r\n            {isManager && (\r\n              <>\r\n                <DeleteConfirm />\r\n                <ToolbarItem>\r\n                  <Button onClick={() => setAddDialogOpen(true)}>\r\n                    {t(\"addClientScope\")}\r\n                  </Button>\r\n                </ToolbarItem>\r\n                <ToolbarItem>\r\n                  <ChangeTypeDropdown\r\n                    clientId={clientId}\r\n                    selectedRows={selectedRows}\r\n                    refresh={refresh}\r\n                  />\r\n                </ToolbarItem>\r\n                <ToolbarItem>\r\n                  <Dropdown\r\n                    onOpenChange={(isOpen) => setKebabOpen(isOpen)}\r\n                    toggle={(ref) => (\r\n                      <MenuToggle\r\n                        data-testid=\"kebab\"\r\n                        aria-label=\"Kebab toggle\"\r\n                        ref={ref}\r\n                        variant=\"plain\"\r\n                        onClick={() => setKebabOpen(!kebabOpen)}\r\n                        isExpanded={kebabOpen}\r\n                      >\r\n                        <EllipsisVIcon />\r\n                      </MenuToggle>\r\n                    )}\r\n                    isOpen={kebabOpen}\r\n                  >\r\n                    <DropdownList>\r\n                      <DropdownItem\r\n                        key=\"deleteAll\"\r\n                        isDisabled={selectedRows.length === 0}\r\n                        onClick={async () => {\r\n                          try {\r\n                            await Promise.all(\r\n                              selectedRows.map((row) =>\r\n                                removeClientScope(\r\n                                  adminClient,\r\n                                  clientId,\r\n                                  { ...row },\r\n                                  row.type as ClientScope,\r\n                                ),\r\n                              ),\r\n                            );\r\n\r\n                            setKebabOpen(false);\r\n                            setSelectedRows([]);\r\n                            addAlert(t(\"clientScopeRemoveSuccess\"));\r\n                            refresh();\r\n                          } catch (error) {\r\n                            addError(\"clientScopeRemoveError\", error);\r\n                          }\r\n                        }}\r\n                      >\r\n                        {t(\"remove\")}\r\n                      </DropdownItem>\r\n                    </DropdownList>\r\n                  </Dropdown>\r\n                </ToolbarItem>\r\n              </>\r\n            )}\r\n          </>\r\n        }\r\n        columns={[\r\n          {\r\n            name: \"name\",\r\n            displayKey: \"assignedClientScope\",\r\n            cellRenderer: (row) => {\r\n              if (isDedicatedRow(row)) {\r\n                return (\r\n                  <Link to={toDedicatedScope({ realm, clientId })}>\r\n                    {row.name}\r\n                  </Link>\r\n                );\r\n              }\r\n              return row.name!;\r\n            },\r\n          },\r\n          {\r\n            name: \"type\",\r\n            displayKey: \"assignedType\",\r\n            cellRenderer: (row) => (\r\n              <TypeSelector clientId={clientId} refresh={refresh} {...row} />\r\n            ),\r\n          },\r\n          { name: \"description\", cellFormatters: [translationFormatter(t)] },\r\n        ]}\r\n        actions={\r\n          isManager\r\n            ? [\r\n                {\r\n                  title: t(\"remove\"),\r\n                  onRowClick: async (row) => {\r\n                    setSelectedRows([row]);\r\n                    toggleDeleteDialog();\r\n                    return true;\r\n                  },\r\n                } as Action<Row>,\r\n              ]\r\n            : []\r\n        }\r\n        emptyState={\r\n          <ListEmptyState\r\n            message={t(\"emptyClientScopes\")}\r\n            instructions={t(\"emptyClientScopesInstructions\")}\r\n            primaryActionText={t(\"emptyClientScopesPrimaryAction\")}\r\n            onPrimaryAction={() => setAddDialogOpen(true)}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport {\r\n  CodeBlock,\r\n  CodeBlockAction,\r\n  EmptyState,\r\n  EmptyStateBody,\r\n  EmptyStateHeader,\r\n  TextArea,\r\n} from \"@patternfly/react-core\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { CopyToClipboardButton } from \"../../components/copy-to-clipboard-button/CopyToClipboardButton\";\r\n\r\ntype GeneratedCodeTabProps = {\r\n  user?: UserRepresentation;\r\n  text: string;\r\n  label: string;\r\n};\r\n\r\nexport const GeneratedCodeTab = ({\r\n  text,\r\n  user,\r\n  label,\r\n}: GeneratedCodeTabProps) => {\r\n  const { t } = useTranslation();\r\n\r\n  return user ? (\r\n    <CodeBlock\r\n      id={label}\r\n      actions={\r\n        <CodeBlockAction>\r\n          <CopyToClipboardButton id=\"code\" text={text} label={label} />\r\n        </CodeBlockAction>\r\n      }\r\n    >\r\n      <TextArea\r\n        id={`text-area-${label}`}\r\n        rows={20}\r\n        value={text}\r\n        aria-label={label}\r\n      />\r\n    </CodeBlock>\r\n  ) : (\r\n    <EmptyState variant=\"lg\" id={label}>\r\n      <EmptyStateHeader titleText={<>{t(`${label}No`)}</>} headingLevel=\"h2\" />\r\n      <EmptyStateBody>{t(`${label}IsDisabled`)}</EmptyStateBody>\r\n    </EmptyState>\r\n  );\r\n};\r\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\r\nimport type ProtocolMapperRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/protocolMapperRepresentation\";\r\nimport type RoleRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\r\nimport type { ProtocolMapperTypeRepresentation } from \"@keycloak/keycloak-admin-client/lib/defs/serverInfoRepesentation\";\r\nimport {\r\n  HelpItem,\r\n  KeycloakDataTable,\r\n  KeycloakSelect,\r\n  SelectVariant,\r\n  useFetch,\r\n  useHelp,\r\n} from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  ClipboardCopy,\r\n  Form,\r\n  FormGroup,\r\n  Grid,\r\n  GridItem,\r\n  PageSection,\r\n  SelectOption,\r\n  Split,\r\n  SplitItem,\r\n  Tab,\r\n  TabContent,\r\n  Tabs,\r\n  TabTitleText,\r\n  Text,\r\n  TextContent,\r\n} from \"@patternfly/react-core\";\r\nimport { QuestionCircleIcon } from \"@patternfly/react-icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { FormProvider, useForm } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { ClientSelect } from \"../../components/client/ClientSelect\";\r\nimport { UserSelect } from \"../../components/users/UserSelect\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { useServerInfo } from \"../../context/server-info/ServerInfoProvider\";\r\nimport { prettyPrintJSON } from \"../../util\";\r\nimport { GeneratedCodeTab } from \"./GeneratedCodeTab\";\r\n\r\nimport \"./evaluate.css\";\r\n\r\nexport type EvaluateScopesProps = {\r\n  clientId: string;\r\n  protocol: string;\r\n};\r\n\r\nconst ProtocolMappers = ({\r\n  protocolMappers,\r\n}: {\r\n  protocolMappers: ProtocolMapperRepresentation[];\r\n}) => {\r\n  const [key, setKey] = useState(0);\r\n  useEffect(() => {\r\n    setKey(key + 1);\r\n  }, [protocolMappers]);\r\n  return (\r\n    <KeycloakDataTable\r\n      key={key}\r\n      loader={() => Promise.resolve(protocolMappers)}\r\n      ariaLabelKey=\"effectiveProtocolMappers\"\r\n      searchPlaceholderKey=\"searchForProtocol\"\r\n      data-testid=\"effective-protocol-mappers\"\r\n      columns={[\r\n        {\r\n          name: \"mapperName\",\r\n          displayKey: \"name\",\r\n        },\r\n        {\r\n          name: \"containerName\",\r\n          displayKey: \"parentClientScope\",\r\n        },\r\n        {\r\n          name: \"type.category\",\r\n          displayKey: \"category\",\r\n        },\r\n        {\r\n          name: \"type.priority\",\r\n          displayKey: \"priority\",\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nconst EffectiveRoles = ({\r\n  effectiveRoles,\r\n}: {\r\n  effectiveRoles: RoleRepresentation[];\r\n}) => {\r\n  const [key, setKey] = useState(0);\r\n  useEffect(() => {\r\n    setKey(key + 1);\r\n  }, [effectiveRoles]);\r\n\r\n  return (\r\n    <KeycloakDataTable\r\n      key={key}\r\n      loader={() => Promise.resolve(effectiveRoles)}\r\n      ariaLabelKey=\"effectiveRoleScopeMappings\"\r\n      searchPlaceholderKey=\"searchForRole\"\r\n      data-testid=\"effective-role-scope-mappings\"\r\n      columns={[\r\n        {\r\n          name: \"name\",\r\n          displayKey: \"role\",\r\n        },\r\n        {\r\n          name: \"containerId\",\r\n          displayKey: \"origin\",\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n\r\nexport const EvaluateScopes = ({ clientId, protocol }: EvaluateScopesProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const prefix = \"openid\";\r\n  const { t } = useTranslation();\r\n  const { enabled } = useHelp();\r\n  const { realm } = useRealm();\r\n  const mapperTypes = useServerInfo().protocolMapperTypes![protocol];\r\n\r\n  const [selectableScopes, setSelectableScopes] = useState<\r\n    ClientScopeRepresentation[]\r\n  >([]);\r\n  const [isScopeOpen, setIsScopeOpen] = useState(false);\r\n  const [selected, setSelected] = useState<string[]>([prefix]);\r\n  const [activeTab, setActiveTab] = useState(0);\r\n\r\n  const [key, setKey] = useState(\"\");\r\n  const refresh = () => setKey(`${new Date().getTime()}`);\r\n  const [effectiveRoles, setEffectiveRoles] = useState<RoleRepresentation[]>(\r\n    [],\r\n  );\r\n  const [protocolMappers, setProtocolMappers] = useState<\r\n    ProtocolMapperRepresentation[]\r\n  >([]);\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n  const [userInfo, setUserInfo] = useState(\"\");\r\n  const [idToken, setIdToken] = useState(\"\");\r\n\r\n  const tabContent1 = useRef(null);\r\n  const tabContent2 = useRef(null);\r\n  const tabContent3 = useRef(null);\r\n  const tabContent4 = useRef(null);\r\n  const tabContent5 = useRef(null);\r\n\r\n  const form = useForm();\r\n  const { watch } = form;\r\n  const selectedAudience: string[] = watch(\"targetAudience\");\r\n\r\n  const { hasAccess } = useAccess();\r\n  const hasViewUsers = hasAccess(\"view-users\");\r\n\r\n  useFetch(\r\n    () => adminClient.clients.listOptionalClientScopes({ id: clientId }),\r\n    (optionalClientScopes) => setSelectableScopes(optionalClientScopes),\r\n    [],\r\n  );\r\n\r\n  useFetch(\r\n    async () => {\r\n      const scope = selected.join(\" \");\r\n      const effectiveRoles = await adminClient.clients.evaluatePermission({\r\n        id: clientId,\r\n        roleContainer: realm,\r\n        scope,\r\n        type: \"granted\",\r\n      });\r\n\r\n      const mapperList = (await adminClient.clients.evaluateListProtocolMapper({\r\n        id: clientId,\r\n        scope,\r\n      })) as ({\r\n        type: ProtocolMapperTypeRepresentation;\r\n      } & ProtocolMapperRepresentation)[];\r\n\r\n      return {\r\n        mapperList,\r\n        effectiveRoles,\r\n      };\r\n    },\r\n    ({ mapperList, effectiveRoles }) => {\r\n      setEffectiveRoles(effectiveRoles);\r\n      mapperList.map((mapper) => {\r\n        mapper.type = mapperTypes.find(\r\n          (type) => type.id === mapper.protocolMapper,\r\n        )!;\r\n      });\r\n\r\n      setProtocolMappers(mapperList);\r\n      refresh();\r\n    },\r\n    [selected],\r\n  );\r\n\r\n  useFetch(\r\n    async () => {\r\n      const scope = selected.join(\" \");\r\n      const user = form.getValues(\"user\");\r\n      if (user.length === 0) {\r\n        return [];\r\n      }\r\n      const audience = selectedAudience.join(\" \");\r\n\r\n      return await Promise.all([\r\n        adminClient.clients.evaluateGenerateAccessToken({\r\n          id: clientId,\r\n          userId: user[0],\r\n          scope,\r\n          audience,\r\n        }),\r\n        adminClient.clients.evaluateGenerateUserInfo({\r\n          id: clientId,\r\n          userId: user[0],\r\n          scope,\r\n        }),\r\n        adminClient.clients.evaluateGenerateIdToken({\r\n          id: clientId,\r\n          userId: user[0],\r\n          scope,\r\n        }),\r\n      ]);\r\n    },\r\n    ([accessToken, userInfo, idToken]) => {\r\n      setAccessToken(prettyPrintJSON(accessToken));\r\n      setUserInfo(prettyPrintJSON(userInfo));\r\n      setIdToken(prettyPrintJSON(idToken));\r\n    },\r\n    [form.getValues(\"user\"), selected, selectedAudience],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <PageSection variant=\"light\">\r\n        {enabled && (\r\n          <TextContent className=\"keycloak__section_intro__help\">\r\n            <Text>\r\n              <QuestionCircleIcon /> {t(\"evaluateExplain\")}\r\n            </Text>\r\n          </TextContent>\r\n        )}\r\n        <Form isHorizontal>\r\n          <FormGroup\r\n            label={t(\"scopeParameter\")}\r\n            fieldId=\"scopeParameter\"\r\n            labelIcon={\r\n              <HelpItem\r\n                helpText={t(\"scopeParameterHelp\")}\r\n                fieldLabelId=\"scopeParameter\"\r\n              />\r\n            }\r\n          >\r\n            <Split hasGutter>\r\n              <SplitItem isFilled>\r\n                <KeycloakSelect\r\n                  toggleId=\"scopeParameter\"\r\n                  variant={SelectVariant.typeaheadMulti}\r\n                  typeAheadAriaLabel={t(\"scopeParameter\")}\r\n                  onToggle={() => setIsScopeOpen(!isScopeOpen)}\r\n                  isOpen={isScopeOpen}\r\n                  selections={selected}\r\n                  onSelect={(value) => {\r\n                    const option = value as string;\r\n                    if (selected.includes(option)) {\r\n                      if (option !== prefix) {\r\n                        setSelected(selected.filter((item) => item !== option));\r\n                      }\r\n                    } else {\r\n                      setSelected([...selected, option]);\r\n                    }\r\n                  }}\r\n                  aria-labelledby={t(\"scopeParameter\")}\r\n                  placeholderText={t(\"scopeParameterPlaceholder\")}\r\n                >\r\n                  {selectableScopes.map((option, index) => (\r\n                    <SelectOption key={index} value={option.name}>\r\n                      {option.name}\r\n                    </SelectOption>\r\n                  ))}\r\n                </KeycloakSelect>\r\n              </SplitItem>\r\n              <SplitItem>\r\n                <ClipboardCopy className=\"keycloak__scopes_evaluate__clipboard-copy\">\r\n                  {selected.join(\" \")}\r\n                </ClipboardCopy>\r\n              </SplitItem>\r\n            </Split>\r\n          </FormGroup>\r\n          {hasViewUsers && (\r\n            <FormProvider {...form}>\r\n              <UserSelect\r\n                name=\"user\"\r\n                label=\"users\"\r\n                helpText={t(\"userHelp\")}\r\n                defaultValue=\"\"\r\n                variant={SelectVariant.typeahead}\r\n                isRequired\r\n              />\r\n            </FormProvider>\r\n          )}\r\n          <FormProvider {...form}>\r\n            <ClientSelect\r\n              name=\"targetAudience\"\r\n              label={t(\"targetAudience\")}\r\n              helpText={t(\"targetAudienceHelp\")}\r\n              defaultValue={[]}\r\n              variant=\"typeaheadMulti\"\r\n              placeholderText={t(\"targetAudiencePlaceHolder\")}\r\n            />\r\n          </FormProvider>\r\n        </Form>\r\n      </PageSection>\r\n\r\n      <Grid hasGutter className=\"keycloak__scopes_evaluate__tabs\">\r\n        <GridItem span={8}>\r\n          <TabContent\r\n            aria-labelledby=\"pf-tab-0-effectiveProtocolMappers\"\r\n            eventKey={0}\r\n            id=\"effectiveProtocolMappers\"\r\n            ref={tabContent1}\r\n          >\r\n            <ProtocolMappers protocolMappers={protocolMappers} />\r\n          </TabContent>\r\n          <TabContent\r\n            aria-labelledby=\"pf-tab-0-effectiveRoleScopeMappings\"\r\n            eventKey={1}\r\n            id=\"effectiveRoleScopeMappings\"\r\n            ref={tabContent2}\r\n            hidden\r\n          >\r\n            <EffectiveRoles effectiveRoles={effectiveRoles} />\r\n          </TabContent>\r\n          <TabContent\r\n            aria-labelledby={t(\"generatedAccessToken\")}\r\n            eventKey={2}\r\n            id=\"tab-generated-access-token\"\r\n            ref={tabContent3}\r\n            hidden\r\n          >\r\n            <GeneratedCodeTab\r\n              text={accessToken}\r\n              user={form.getValues(\"user\")}\r\n              label=\"generatedAccessToken\"\r\n            />\r\n          </TabContent>\r\n          <TabContent\r\n            aria-labelledby={t(\"generatedIdToken\")}\r\n            eventKey={3}\r\n            id=\"tab-generated-id-token\"\r\n            ref={tabContent4}\r\n            hidden\r\n          >\r\n            <GeneratedCodeTab\r\n              text={idToken}\r\n              user={form.getValues(\"user\")}\r\n              label=\"generatedIdToken\"\r\n            />\r\n          </TabContent>\r\n          <TabContent\r\n            aria-labelledby={t(\"generatedUserInfo\")}\r\n            eventKey={4}\r\n            id=\"tab-generated-user-info\"\r\n            ref={tabContent5}\r\n            hidden\r\n          >\r\n            <GeneratedCodeTab\r\n              text={userInfo}\r\n              user={form.getValues(\"user\")}\r\n              label=\"generatedUserInfo\"\r\n            />\r\n          </TabContent>\r\n        </GridItem>\r\n        <GridItem span={4}>\r\n          <Tabs\r\n            id=\"tabs\"\r\n            key={key}\r\n            isVertical\r\n            activeKey={activeTab}\r\n            onSelect={(_, key) => setActiveTab(key as number)}\r\n          >\r\n            <Tab\r\n              id=\"effectiveProtocolMappers\"\r\n              aria-controls=\"effectiveProtocolMappers\"\r\n              data-testid=\"effective-protocol-mappers-tab\"\r\n              eventKey={0}\r\n              title={\r\n                <TabTitleText>\r\n                  {t(\"effectiveProtocolMappers\")}{\" \"}\r\n                  <HelpItem\r\n                    fieldLabelId=\"effectiveProtocolMappers\"\r\n                    helpText={t(\"effectiveProtocolMappersHelp\")}\r\n                    noVerticalAlign={false}\r\n                    unWrap\r\n                  />\r\n                </TabTitleText>\r\n              }\r\n              tabContentRef={tabContent1}\r\n            />\r\n            <Tab\r\n              id=\"effectiveRoleScopeMappings\"\r\n              aria-controls=\"effectiveRoleScopeMappings\"\r\n              data-testid=\"effective-role-scope-mappings-tab\"\r\n              eventKey={1}\r\n              title={\r\n                <TabTitleText>\r\n                  {t(\"effectiveRoleScopeMappings\")}{\" \"}\r\n                  <HelpItem\r\n                    fieldLabelId=\"effectiveRoleScopeMappings\"\r\n                    helpText={t(\"effectiveRoleScopeMappingsHelp\")}\r\n                    noVerticalAlign={false}\r\n                    unWrap\r\n                  />\r\n                </TabTitleText>\r\n              }\r\n              tabContentRef={tabContent2}\r\n            ></Tab>\r\n            <Tab\r\n              id=\"generatedAccessToken\"\r\n              aria-controls=\"generatedAccessToken\"\r\n              data-testid=\"generated-access-token-tab\"\r\n              eventKey={2}\r\n              title={\r\n                <TabTitleText>\r\n                  {t(\"generatedAccessToken\")}{\" \"}\r\n                  <HelpItem\r\n                    fieldLabelId=\"generatedAccessToken\"\r\n                    helpText={t(\"generatedAccessTokenHelp\")}\r\n                    noVerticalAlign={false}\r\n                    unWrap\r\n                  />\r\n                </TabTitleText>\r\n              }\r\n              tabContentRef={tabContent3}\r\n            />\r\n            <Tab\r\n              id=\"generatedIdToken\"\r\n              aria-controls=\"generatedIdToken\"\r\n              data-testid=\"generated-id-token-tab\"\r\n              eventKey={3}\r\n              title={\r\n                <TabTitleText>\r\n                  {t(\"generatedIdToken\")}{\" \"}\r\n                  <HelpItem\r\n                    fieldLabelId=\"generatedIdToken\"\r\n                    helpText={t(\"generatedIdTokenHelp\")}\r\n                    noVerticalAlign={false}\r\n                    unWrap\r\n                  />\r\n                </TabTitleText>\r\n              }\r\n              tabContentRef={tabContent4}\r\n            />\r\n            <Tab\r\n              id=\"generatedUserInfo\"\r\n              aria-controls=\"generatedUserInfo\"\r\n              data-testid=\"generated-user-info-tab\"\r\n              eventKey={4}\r\n              title={\r\n                <TabTitleText>\r\n                  {t(\"generatedUserInfo\")}{\" \"}\r\n                  <HelpItem\r\n                    fieldLabelId=\"generatedUserInfo\"\r\n                    helpText={t(\"generatedUserInfoHelp\")}\r\n                    noVerticalAlign={false}\r\n                    unWrap\r\n                  />\r\n                </TabTitleText>\r\n              }\r\n              tabContentRef={tabContent5}\r\n            />\r\n          </Tabs>\r\n        </GridItem>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport type { RoleMappingPayload } from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\r\nimport type UserRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/userRepresentation\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport { AlertVariant, PageSection } from \"@patternfly/react-core\";\r\nimport { InfoCircleIcon } from \"@patternfly/react-icons\";\r\nimport { useState } from \"react\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../../admin-client\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { RoleMapping, Row } from \"../../components/role-mapping/RoleMapping\";\r\nimport { useAccess } from \"../../context/access/Access\";\r\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\r\nimport { toUser } from \"../../user/routes/User\";\r\n\r\nimport \"./service-account.css\";\r\n\r\ntype ServiceAccountProps = {\r\n  client: ClientRepresentation;\r\n};\r\n\r\nexport const ServiceAccount = ({ client }: ServiceAccountProps) => {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n\r\n  const [serviceAccount, setServiceAccount] = useState<UserRepresentation>();\r\n\r\n  const { hasAccess } = useAccess();\r\n  const hasManageClients = hasAccess(\"manage-clients\");\r\n\r\n  useFetch(\r\n    () =>\r\n      adminClient.clients.getServiceAccountUser({\r\n        id: client.id!,\r\n      }),\r\n    (serviceAccount) => setServiceAccount(serviceAccount),\r\n    [],\r\n  );\r\n\r\n  const assignRoles = async (rows: Row[]) => {\r\n    try {\r\n      const realmRoles = rows\r\n        .filter((row) => row.client === undefined)\r\n        .map((row) => row.role as RoleMappingPayload)\r\n        .flat();\r\n      await adminClient.users.addRealmRoleMappings({\r\n        id: serviceAccount?.id!,\r\n        roles: realmRoles,\r\n      });\r\n      await Promise.all(\r\n        rows\r\n          .filter((row) => row.client !== undefined)\r\n          .map((row) =>\r\n            adminClient.users.addClientRoleMappings({\r\n              id: serviceAccount?.id!,\r\n              clientUniqueId: row.client!.id!,\r\n              roles: [row.role as RoleMappingPayload],\r\n            }),\r\n          ),\r\n      );\r\n      addAlert(t(\"roleMappingUpdatedSuccess\"), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"roleMappingUpdatedError\", error);\r\n    }\r\n  };\r\n  return serviceAccount ? (\r\n    <>\r\n      <PageSection className=\"pf-v5-u-pb-0\">\r\n        <InfoCircleIcon className=\"pf-v5-c-alert__icon keycloak--service-account--info-text\" />\r\n        <span className=\"pf-v5-u-pl-sm\">\r\n          <Trans i18nKey=\"manageServiceAccountUser\">\r\n            {\"\"}\r\n            <Link\r\n              to={toUser({ realm, id: serviceAccount.id!, tab: \"settings\" })}\r\n            >\r\n              {{ link: serviceAccount.username }}\r\n            </Link>\r\n          </Trans>\r\n        </span>\r\n      </PageSection>\r\n      <RoleMapping\r\n        name={client.clientId!}\r\n        id={serviceAccount.id!}\r\n        type=\"users\"\r\n        isManager={hasManageClients || client.access?.configure}\r\n        save={assignRoles}\r\n      />\r\n    </>\r\n  ) : (\r\n    <KeycloakSpinner />\r\n  );\r\n};\r\n","import type ClientRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientRepresentation\";\r\nimport { useAlerts, useFetch } from \"@keycloak/keycloak-ui-shared\";\r\nimport {\r\n  AlertVariant,\r\n  ButtonVariant,\r\n  Divider,\r\n  DropdownItem,\r\n  Label,\r\n  PageSection,\r\n  Tab,\r\n  Tabs,\r\n  TabTitleText,\r\n  Tooltip,\r\n} from \"@patternfly/react-core\";\r\nimport { InfoCircleIcon } from \"@patternfly/react-icons\";\r\nimport { cloneDeep, sortBy } from \"lodash-es\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { Controller, FormProvider, useForm, useWatch } from \"react-hook-form\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAdminClient } from \"../admin-client\";\r\nimport {\r\n  ConfirmDialogModal,\r\n  useConfirmDialog,\r\n} from \"../components/confirm-dialog/ConfirmDialog\";\r\nimport { DownloadDialog } from \"../components/download-dialog/DownloadDialog\";\r\nimport type { KeyValueType } from \"../components/key-value-form/key-value-convert\";\r\nimport { KeycloakSpinner } from \"@keycloak/keycloak-ui-shared\";\r\nimport { PermissionsTab } from \"../components/permission-tab/PermissionTab\";\r\nimport { RolesList } from \"../components/roles-list/RolesList\";\r\nimport {\r\n  RoutableTabs,\r\n  useRoutableTab,\r\n} from \"../components/routable-tabs/RoutableTabs\";\r\nimport {\r\n  ViewHeader,\r\n  ViewHeaderBadge,\r\n} from \"../components/view-header/ViewHeader\";\r\nimport { useAccess } from \"../context/access/Access\";\r\nimport { useRealm } from \"../context/realm-context/RealmContext\";\r\nimport {\r\n  convertAttributeNameToForm,\r\n  convertFormValuesToObject,\r\n  convertToFormValues,\r\n  exportClient,\r\n} from \"../util\";\r\nimport useIsFeatureEnabled, { Feature } from \"../utils/useIsFeatureEnabled\";\r\nimport { useParams } from \"../utils/useParams\";\r\nimport useToggle from \"../utils/useToggle\";\r\nimport { AdvancedTab } from \"./AdvancedTab\";\r\nimport { ClientSessions } from \"./ClientSessions\";\r\nimport { ClientSettings } from \"./ClientSettings\";\r\nimport { AuthorizationEvaluate } from \"./authorization/AuthorizationEvaluate\";\r\nimport { AuthorizationExport } from \"./authorization/AuthorizationExport\";\r\nimport { AuthorizationPermissions } from \"./authorization/Permissions\";\r\nimport { AuthorizationPolicies } from \"./authorization/Policies\";\r\nimport { AuthorizationResources } from \"./authorization/Resources\";\r\nimport { AuthorizationScopes } from \"./authorization/Scopes\";\r\nimport { AuthorizationSettings } from \"./authorization/Settings\";\r\nimport { Credentials } from \"./credentials/Credentials\";\r\nimport { Keys } from \"./keys/Keys\";\r\nimport { SamlKeys } from \"./keys/SamlKeys\";\r\nimport {\r\n  AuthorizationTab,\r\n  toAuthorizationTab,\r\n} from \"./routes/AuthenticationTab\";\r\nimport { ClientParams, ClientTab, toClient } from \"./routes/Client\";\r\nimport { toClientRole } from \"./routes/ClientRole\";\r\nimport { ClientScopesTab, toClientScopesTab } from \"./routes/ClientScopeTab\";\r\nimport { toClients } from \"./routes/Clients\";\r\nimport { toCreateRole } from \"./routes/NewRole\";\r\nimport { ClientScopes } from \"./scopes/ClientScopes\";\r\nimport { EvaluateScopes } from \"./scopes/EvaluateScopes\";\r\nimport { ServiceAccount } from \"./service-account/ServiceAccount\";\r\nimport { getProtocolName, isRealmClient } from \"./utils\";\r\nimport { UserEvents } from \"../events/UserEvents\";\r\nimport { useIsAdminPermissionsClient } from \"../utils/useIsAdminPermissionsClient\";\r\nimport { AdminEvents } from \"../events/AdminEvents\";\r\n\r\ntype ClientDetailHeaderProps = {\r\n  onChange: (value: boolean) => void;\r\n  value: boolean | undefined;\r\n  save: () => void;\r\n  client: ClientRepresentation;\r\n  toggleDownloadDialog: () => void;\r\n  toggleDeleteDialog: () => void;\r\n};\r\n\r\nconst ClientDetailHeader = ({\r\n  onChange,\r\n  value,\r\n  save,\r\n  client,\r\n  toggleDownloadDialog,\r\n  toggleDeleteDialog,\r\n}: ClientDetailHeaderProps) => {\r\n  const { t } = useTranslation();\r\n  const [toggleDisableDialog, DisableConfirm] = useConfirmDialog({\r\n    titleKey: \"disableConfirmClientTitle\",\r\n    messageKey: \"disableConfirmClient\",\r\n    continueButtonLabel: \"disable\",\r\n    onConfirm: () => {\r\n      onChange(!value);\r\n      save();\r\n    },\r\n  });\r\n\r\n  const badges = useMemo<ViewHeaderBadge[]>(() => {\r\n    const protocolName = getProtocolName(\r\n      t,\r\n      client.protocol ?? \"openid-connect\",\r\n    );\r\n\r\n    const text = client.bearerOnly ? (\r\n      <Tooltip\r\n        data-testid=\"bearer-only-explainer-tooltip\"\r\n        content={t(\"explainBearerOnly\")}\r\n      >\r\n        <Label\r\n          data-testid=\"bearer-only-explainer-label\"\r\n          icon={<InfoCircleIcon />}\r\n        >\r\n          {protocolName}\r\n        </Label>\r\n      </Tooltip>\r\n    ) : (\r\n      <Label>{protocolName}</Label>\r\n    );\r\n\r\n    return [{ text }];\r\n  }, [client, t]);\r\n\r\n  const { hasAccess } = useAccess();\r\n  const isManager = hasAccess(\"manage-clients\") || client.access?.configure;\r\n\r\n  const dropdownItems = [\r\n    <DropdownItem key=\"download\" onClick={toggleDownloadDialog}>\r\n      {t(\"downloadAdapterConfig\")}\r\n    </DropdownItem>,\r\n    <DropdownItem key=\"export\" onClick={() => exportClient(client)}>\r\n      {t(\"export\")}\r\n    </DropdownItem>,\r\n    ...(!isRealmClient(client) && isManager\r\n      ? [\r\n          <Divider key=\"divider\" />,\r\n          <DropdownItem\r\n            data-testid=\"delete-client\"\r\n            key=\"delete\"\r\n            onClick={toggleDeleteDialog}\r\n          >\r\n            {t(\"delete\")}\r\n          </DropdownItem>,\r\n        ]\r\n      : []),\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <DisableConfirm />\r\n      <ViewHeader\r\n        titleKey={client.clientId!}\r\n        subKey=\"clientsExplain\"\r\n        badges={badges}\r\n        divider={false}\r\n        isReadOnly={!isManager}\r\n        helpTextKey=\"enableDisable\"\r\n        dropdownItems={dropdownItems}\r\n        isEnabled={value}\r\n        onToggle={(value) => {\r\n          if (!value) {\r\n            toggleDisableDialog();\r\n          } else {\r\n            onChange(value);\r\n            save();\r\n          }\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport type SaveOptions = {\r\n  confirmed?: boolean;\r\n  messageKey?: string;\r\n};\r\n\r\nexport type FormFields = Omit<\r\n  ClientRepresentation,\r\n  \"authorizationSettings\" | \"resources\"\r\n>;\r\n\r\nexport default function ClientDetails() {\r\n  const { adminClient } = useAdminClient();\r\n\r\n  const { t } = useTranslation();\r\n  const { addAlert, addError } = useAlerts();\r\n  const { realm } = useRealm();\r\n  const { hasAccess } = useAccess();\r\n  const isFeatureEnabled = useIsFeatureEnabled();\r\n\r\n  const hasManageAuthorization = hasAccess(\"manage-authorization\");\r\n  const hasViewAuthorization = hasAccess(\"view-authorization\");\r\n  const hasManageClients = hasAccess(\"manage-clients\");\r\n  const hasViewClients = hasAccess(\"view-clients\");\r\n  const hasViewUsers = hasAccess(\"view-users\");\r\n  const permissionsEnabled =\r\n    isFeatureEnabled(Feature.AdminFineGrainedAuthz) &&\r\n    (hasManageAuthorization || hasViewAuthorization);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [downloadDialogOpen, toggleDownloadDialogOpen] = useToggle();\r\n  const [changeAuthenticatorOpen, toggleChangeAuthenticatorOpen] = useToggle();\r\n\r\n  const form = useForm<FormFields>();\r\n  const { clientId } = useParams<ClientParams>();\r\n  const [key, setKey] = useState(0);\r\n  const refresh = () => setKey(key + 1);\r\n\r\n  const isAdminPermissionsClient = useIsAdminPermissionsClient(clientId);\r\n\r\n  const clientAuthenticatorType = useWatch({\r\n    control: form.control,\r\n    name: \"clientAuthenticatorType\",\r\n    defaultValue: \"client-secret\",\r\n  });\r\n\r\n  const [client, setClient] = useState<ClientRepresentation>();\r\n\r\n  const loader = async () => {\r\n    const roles = await adminClient.clients.listRoles({ id: clientId });\r\n    return sortBy(roles, (role) => role.name?.toUpperCase());\r\n  };\r\n\r\n  const tab = (tab: ClientTab) =>\r\n    toClient({\r\n      realm,\r\n      clientId,\r\n      tab,\r\n    });\r\n\r\n  const settingsTab = useRoutableTab(tab(\"settings\"));\r\n  const keysTab = useRoutableTab(tab(\"keys\"));\r\n  const credentialsTab = useRoutableTab(tab(\"credentials\"));\r\n  const rolesTab = useRoutableTab(tab(\"roles\"));\r\n  const clientScopesTab = useRoutableTab(tab(\"clientScopes\"));\r\n  const authorizationTab = useRoutableTab(tab(\"authorization\"));\r\n  const serviceAccountTab = useRoutableTab(tab(\"serviceAccount\"));\r\n  const sessionsTab = useRoutableTab(tab(\"sessions\"));\r\n  const permissionsTab = useRoutableTab(tab(\"permissions\"));\r\n  const advancedTab = useRoutableTab(tab(\"advanced\"));\r\n  const eventsTab = useRoutableTab(tab(\"events\"));\r\n\r\n  const [activeEventsTab, setActiveEventsTab] = useState(\"userEvents\");\r\n\r\n  const clientScopesTabRoute = (tab: ClientScopesTab) =>\r\n    toClientScopesTab({\r\n      realm,\r\n      clientId,\r\n      tab,\r\n    });\r\n\r\n  const clientScopesSetupTab = useRoutableTab(clientScopesTabRoute(\"setup\"));\r\n  const clientScopesEvaluateTab = useRoutableTab(\r\n    clientScopesTabRoute(\"evaluate\"),\r\n  );\r\n\r\n  const authorizationTabRoute = (tab: AuthorizationTab) =>\r\n    toAuthorizationTab({\r\n      realm,\r\n      clientId,\r\n      tab,\r\n    });\r\n\r\n  const authorizationSettingsTab = useRoutableTab(\r\n    authorizationTabRoute(\"settings\"),\r\n  );\r\n  const authorizationResourcesTab = useRoutableTab(\r\n    authorizationTabRoute(\"resources\"),\r\n  );\r\n  const authorizationScopesTab = useRoutableTab(\r\n    authorizationTabRoute(\"scopes\"),\r\n  );\r\n  const authorizationPoliciesTab = useRoutableTab(\r\n    authorizationTabRoute(\"policies\"),\r\n  );\r\n  const authorizationPermissionsTab = useRoutableTab(\r\n    authorizationTabRoute(\"permissions\"),\r\n  );\r\n  const authorizationEvaluateTab = useRoutableTab(\r\n    authorizationTabRoute(\"evaluate\"),\r\n  );\r\n  const authorizationExportTab = useRoutableTab(\r\n    authorizationTabRoute(\"export\"),\r\n  );\r\n\r\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\r\n    titleKey: \"clientDeleteConfirmTitle\",\r\n    messageKey: \"clientDeleteConfirm\",\r\n    continueButtonLabel: \"delete\",\r\n    continueButtonVariant: ButtonVariant.danger,\r\n    onConfirm: async () => {\r\n      try {\r\n        await adminClient.clients.del({ id: clientId });\r\n        addAlert(t(\"clientDeletedSuccess\"), AlertVariant.success);\r\n        navigate(toClients({ realm }));\r\n      } catch (error) {\r\n        addError(\"clientDeleteError\", error);\r\n      }\r\n    },\r\n  });\r\n\r\n  const setupForm = (client: ClientRepresentation) => {\r\n    convertToFormValues(client, form.setValue);\r\n    if (client.attributes?.[\"acr.loa.map\"]) {\r\n      form.setValue(\r\n        convertAttributeNameToForm(\"attributes.acr.loa.map\"),\r\n        // @ts-ignore\r\n        Object.entries(JSON.parse(client.attributes[\"acr.loa.map\"])).flatMap(\r\n          ([key, value]) => ({ key, value }),\r\n        ),\r\n      );\r\n    }\r\n    // reset dirty as for reason it is not resetting\r\n    form.reset(form.getValues(), { keepDirty: false });\r\n  };\r\n\r\n  useFetch(\r\n    () => adminClient.clients.findOne({ id: clientId }),\r\n    (fetchedClient) => {\r\n      if (!fetchedClient) {\r\n        throw new Error(t(\"notFound\"));\r\n      }\r\n      setClient(cloneDeep(fetchedClient));\r\n      setupForm(fetchedClient);\r\n    },\r\n    [clientId, key],\r\n  );\r\n\r\n  const save = async (\r\n    { confirmed = false, messageKey = \"clientSaveSuccess\" }: SaveOptions = {\r\n      confirmed: false,\r\n      messageKey: \"clientSaveSuccess\",\r\n    },\r\n  ) => {\r\n    if (!(await form.trigger())) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !client?.publicClient &&\r\n      client?.clientAuthenticatorType !== clientAuthenticatorType &&\r\n      !confirmed\r\n    ) {\r\n      toggleChangeAuthenticatorOpen();\r\n      return;\r\n    }\r\n\r\n    const values = convertFormValuesToObject(form.getValues());\r\n\r\n    const submittedClient =\r\n      convertFormValuesToObject<ClientRepresentation>(values);\r\n\r\n    if (submittedClient.attributes?.[\"acr.loa.map\"]) {\r\n      submittedClient.attributes[\"acr.loa.map\"] = JSON.stringify(\r\n        Object.fromEntries(\r\n          (submittedClient.attributes[\"acr.loa.map\"] as KeyValueType[])\r\n            .filter(({ key }) => key !== \"\")\r\n            .map(({ key, value }) => [key, value]),\r\n        ),\r\n      );\r\n    }\r\n\r\n    try {\r\n      const newClient: ClientRepresentation = {\r\n        ...client,\r\n        ...submittedClient,\r\n      };\r\n\r\n      newClient.clientId = newClient.clientId?.trim();\r\n\r\n      await adminClient.clients.update({ id: clientId }, newClient);\r\n      setupForm(newClient);\r\n      setClient(newClient);\r\n      addAlert(t(messageKey), AlertVariant.success);\r\n    } catch (error) {\r\n      addError(\"clientSaveError\", error);\r\n    }\r\n  };\r\n\r\n  if (!client) {\r\n    return <KeycloakSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ConfirmDialogModal\r\n        continueButtonLabel=\"yes\"\r\n        cancelButtonLabel=\"no\"\r\n        titleKey={t(\"changeAuthenticatorConfirmTitle\", {\r\n          clientAuthenticatorType: clientAuthenticatorType,\r\n        })}\r\n        open={changeAuthenticatorOpen}\r\n        toggleDialog={toggleChangeAuthenticatorOpen}\r\n        onConfirm={() => save({ confirmed: true })}\r\n      >\r\n        <>\r\n          {t(\"changeAuthenticatorConfirm\", {\r\n            clientAuthenticatorType: clientAuthenticatorType,\r\n          })}\r\n        </>\r\n      </ConfirmDialogModal>\r\n      <DeleteConfirm />\r\n      {downloadDialogOpen && (\r\n        <DownloadDialog\r\n          id={client.id!}\r\n          protocol={client.protocol}\r\n          open\r\n          toggleDialog={toggleDownloadDialogOpen}\r\n        />\r\n      )}\r\n      <Controller\r\n        name=\"enabled\"\r\n        control={form.control}\r\n        defaultValue={true}\r\n        render={({ field }) => (\r\n          <ClientDetailHeader\r\n            value={field.value}\r\n            onChange={field.onChange}\r\n            client={client}\r\n            save={save}\r\n            toggleDeleteDialog={toggleDeleteDialog}\r\n            toggleDownloadDialog={toggleDownloadDialogOpen}\r\n          />\r\n        )}\r\n      />\r\n      <PageSection variant=\"light\" className=\"pf-v5-u-p-0\">\r\n        <FormProvider {...form}>\r\n          <RoutableTabs\r\n            data-testid=\"client-tabs\"\r\n            aria-label=\"client-tabs\"\r\n            isBox\r\n            mountOnEnter\r\n          >\r\n            <Tab\r\n              id=\"settings\"\r\n              data-testid=\"clientSettingsTab\"\r\n              title={<TabTitleText>{t(\"settings\")}</TabTitleText>}\r\n              {...settingsTab}\r\n            >\r\n              <ClientSettings\r\n                client={client}\r\n                save={() => save()}\r\n                reset={() => setupForm(client)}\r\n              />\r\n            </Tab>\r\n            {((!client.publicClient && !isRealmClient(client)) ||\r\n              client.protocol === \"saml\") && (\r\n              <Tab\r\n                id=\"keys\"\r\n                data-testid=\"keysTab\"\r\n                title={<TabTitleText>{t(\"keys\")}</TabTitleText>}\r\n                {...keysTab}\r\n              >\r\n                {client.protocol === \"openid-connect\" && (\r\n                  <Keys\r\n                    clientId={clientId}\r\n                    save={save}\r\n                    refresh={refresh}\r\n                    hasConfigureAccess={client.access?.configure}\r\n                  />\r\n                )}\r\n                {client.protocol === \"saml\" && (\r\n                  <SamlKeys clientId={clientId} save={save} />\r\n                )}\r\n              </Tab>\r\n            )}\r\n            {!client.publicClient &&\r\n              !isRealmClient(client) &&\r\n              (hasViewClients ||\r\n                client.access?.configure ||\r\n                client.access?.view) && (\r\n                <Tab\r\n                  id=\"credentials\"\r\n                  title={<TabTitleText>{t(\"credentials\")}</TabTitleText>}\r\n                  {...credentialsTab}\r\n                >\r\n                  <Credentials\r\n                    key={key}\r\n                    client={client}\r\n                    save={save}\r\n                    refresh={refresh}\r\n                  />\r\n                </Tab>\r\n              )}\r\n            <Tab\r\n              id=\"roles\"\r\n              data-testid=\"rolesTab\"\r\n              title={<TabTitleText>{t(\"roles\")}</TabTitleText>}\r\n              {...rolesTab}\r\n            >\r\n              <RolesList\r\n                loader={loader}\r\n                paginated={false}\r\n                messageBundle=\"client\"\r\n                toCreate={toCreateRole({ realm, clientId: client.id! })}\r\n                toDetail={(roleId) =>\r\n                  toClientRole({\r\n                    realm,\r\n                    clientId: client.id!,\r\n                    id: roleId,\r\n                    tab: \"details\",\r\n                  })\r\n                }\r\n                isReadOnly={!(hasManageClients || client.access?.configure)}\r\n              />\r\n            </Tab>\r\n            {!isRealmClient(client) && !client.bearerOnly && (\r\n              <Tab\r\n                id=\"clientScopes\"\r\n                data-testid=\"clientScopesTab\"\r\n                title={<TabTitleText>{t(\"clientScopes\")}</TabTitleText>}\r\n                {...clientScopesTab}\r\n              >\r\n                <RoutableTabs\r\n                  defaultLocation={toClientScopesTab({\r\n                    realm,\r\n                    clientId,\r\n                    tab: \"setup\",\r\n                  })}\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tab\r\n                    id=\"setup\"\r\n                    data-testid=\"clientScopesSetupTab\"\r\n                    title={<TabTitleText>{t(\"setup\")}</TabTitleText>}\r\n                    {...clientScopesSetupTab}\r\n                  >\r\n                    <ClientScopes\r\n                      clientName={client.clientId!}\r\n                      clientId={clientId}\r\n                      protocol={client!.protocol!}\r\n                      fineGrainedAccess={client!.access?.manage}\r\n                    />\r\n                  </Tab>\r\n                  <Tab\r\n                    id=\"evaluate\"\r\n                    data-testid=\"clientScopesEvaluateTab\"\r\n                    title={<TabTitleText>{t(\"evaluate\")}</TabTitleText>}\r\n                    {...clientScopesEvaluateTab}\r\n                  >\r\n                    <EvaluateScopes\r\n                      clientId={clientId}\r\n                      protocol={client!.protocol!}\r\n                    />\r\n                  </Tab>\r\n                </RoutableTabs>\r\n              </Tab>\r\n            )}\r\n            {client!.authorizationServicesEnabled &&\r\n              !isAdminPermissionsClient &&\r\n              (hasManageAuthorization || hasViewAuthorization) && (\r\n                <Tab\r\n                  id=\"authorization\"\r\n                  data-testid=\"authorizationTab\"\r\n                  title={<TabTitleText>{t(\"authorization\")}</TabTitleText>}\r\n                  {...authorizationTab}\r\n                >\r\n                  <RoutableTabs\r\n                    mountOnEnter\r\n                    unmountOnExit\r\n                    defaultLocation={toAuthorizationTab({\r\n                      realm,\r\n                      clientId,\r\n                      tab: \"settings\",\r\n                    })}\r\n                  >\r\n                    <Tab\r\n                      id=\"settings\"\r\n                      data-testid=\"authorizationSettings\"\r\n                      title={<TabTitleText>{t(\"settings\")}</TabTitleText>}\r\n                      {...authorizationSettingsTab}\r\n                    >\r\n                      <AuthorizationSettings clientId={clientId} />\r\n                    </Tab>\r\n                    <Tab\r\n                      id=\"resources\"\r\n                      data-testid=\"authorizationResources\"\r\n                      title={<TabTitleText>{t(\"resources\")}</TabTitleText>}\r\n                      {...authorizationResourcesTab}\r\n                    >\r\n                      <AuthorizationResources\r\n                        clientId={clientId}\r\n                        isDisabled={!hasManageAuthorization}\r\n                      />\r\n                    </Tab>\r\n                    <Tab\r\n                      id=\"scopes\"\r\n                      data-testid=\"authorizationScopes\"\r\n                      title={<TabTitleText>{t(\"scopes\")}</TabTitleText>}\r\n                      {...authorizationScopesTab}\r\n                    >\r\n                      <AuthorizationScopes\r\n                        clientId={clientId}\r\n                        isDisabled={!hasManageAuthorization}\r\n                      />\r\n                    </Tab>\r\n                    <Tab\r\n                      id=\"policies\"\r\n                      data-testid=\"authorizationPolicies\"\r\n                      title={<TabTitleText>{t(\"policies\")}</TabTitleText>}\r\n                      {...authorizationPoliciesTab}\r\n                    >\r\n                      <AuthorizationPolicies\r\n                        clientId={clientId}\r\n                        isDisabled={!hasManageAuthorization}\r\n                      />\r\n                    </Tab>\r\n                    <Tab\r\n                      id=\"permissions\"\r\n                      data-testid=\"authorizationPermissions\"\r\n                      title={<TabTitleText>{t(\"permissions\")}</TabTitleText>}\r\n                      {...authorizationPermissionsTab}\r\n                    >\r\n                      <AuthorizationPermissions\r\n                        clientId={clientId}\r\n                        isDisabled={!hasManageAuthorization}\r\n                      />\r\n                    </Tab>\r\n                    {hasViewUsers && (\r\n                      <Tab\r\n                        id=\"evaluate\"\r\n                        data-testid=\"authorizationEvaluate\"\r\n                        title={<TabTitleText>{t(\"evaluate\")}</TabTitleText>}\r\n                        {...authorizationEvaluateTab}\r\n                      >\r\n                        <AuthorizationEvaluate client={client} save={save} />\r\n                      </Tab>\r\n                    )}\r\n                    {hasAccess(\"manage-authorization\") && (\r\n                      <Tab\r\n                        id=\"export\"\r\n                        data-testid=\"authorizationExport\"\r\n                        title={<TabTitleText>{t(\"export\")}</TabTitleText>}\r\n                        {...authorizationExportTab}\r\n                      >\r\n                        <AuthorizationExport />\r\n                      </Tab>\r\n                    )}\r\n                  </RoutableTabs>\r\n                </Tab>\r\n              )}\r\n            {client!.serviceAccountsEnabled && hasViewUsers && (\r\n              <Tab\r\n                id=\"serviceAccount\"\r\n                data-testid=\"serviceAccountTab\"\r\n                title={<TabTitleText>{t(\"serviceAccount\")}</TabTitleText>}\r\n                {...serviceAccountTab}\r\n              >\r\n                <ServiceAccount client={client} />\r\n              </Tab>\r\n            )}\r\n            <Tab\r\n              id=\"sessions\"\r\n              data-testid=\"sessionsTab\"\r\n              title={<TabTitleText>{t(\"sessions\")}</TabTitleText>}\r\n              {...sessionsTab}\r\n            >\r\n              <ClientSessions client={client} />\r\n            </Tab>\r\n            {permissionsEnabled &&\r\n              (hasManageClients || client.access?.manage) && (\r\n                <Tab\r\n                  id=\"permissions\"\r\n                  data-testid=\"permissionsTab\"\r\n                  title={<TabTitleText>{t(\"permissions\")}</TabTitleText>}\r\n                  {...permissionsTab}\r\n                >\r\n                  <PermissionsTab id={client.id!} type=\"clients\" />\r\n                </Tab>\r\n              )}\r\n            <Tab\r\n              id=\"advanced\"\r\n              data-testid=\"advancedTab\"\r\n              title={<TabTitleText>{t(\"advanced\")}</TabTitleText>}\r\n              {...advancedTab}\r\n            >\r\n              <AdvancedTab save={save} client={client} />\r\n            </Tab>\r\n            {hasAccess(\"view-events\") && (\r\n              <Tab\r\n                data-testid=\"events-tab\"\r\n                title={<TabTitleText>{t(\"events\")}</TabTitleText>}\r\n                {...eventsTab}\r\n              >\r\n                <Tabs\r\n                  activeKey={activeEventsTab}\r\n                  onSelect={(_, key) => setActiveEventsTab(key as string)}\r\n                >\r\n                  <Tab\r\n                    eventKey=\"userEvents\"\r\n                    title={<TabTitleText>{t(\"userEvents\")}</TabTitleText>}\r\n                  >\r\n                    <UserEvents client={client.clientId} />\r\n                  </Tab>\r\n                  <Tab\r\n                    eventKey=\"adminEvents\"\r\n                    title={<TabTitleText>{t(\"adminEvents\")}</TabTitleText>}\r\n                  >\r\n                    <AdminEvents resourcePath={`clients/${client.id}`} />\r\n                  </Tab>\r\n                </Tabs>\r\n              </Tab>\r\n            )}\r\n          </RoutableTabs>\r\n        </FormProvider>\r\n      </PageSection>\r\n    </>\r\n  );\r\n}\r\n"],"names":["styles","CodeBlock","_a","children","className","actions","props","__rest","React","css","CodeBlockAction","DownloadDialog","id","open","toggleDialog","protocol","adminClient","useAdminClient","realm","useRealm","t","useTranslation","enabled","useHelp","configFormats","useServerInfo","selected","setSelected","useState","snippet","setSnippet","openType","setOpenType","selectedConfig","useMemo","config","sanitizeSnippet","useFetch","fetchWithError","addTrailingSlash","getAuthorizationHeaders","prettyPrintJSON","useEffect","jsx","ConfirmDialogModal","saveAs","ModalVariant","Form","jsxs","Stack","StackItem","FormGroup","HelpItem","Select","isOpen","ref","MenuToggle","_","value","SelectList","configFormat","SelectOption","TextArea","inherited","expires","TokenLifespan","name","defaultValue","units","setOpen","focused","setFocused","onFocus","onBlur","control","useFormContext","isExpireSet","Controller","field","Split","SplitItem","TimeSelector","AdvancedSettings","save","reset","hasConfigureAccess","FormAccess","convertAttributeNameToForm","Fragment","DefaultSwitchControl","KeyValueInput","MultiLineInput","TextControl","ActionGroup","Button","AuthenticationOverrides","flows","setFlows","filteredFlows","flow","sortBy","SelectControl","alias","TimeSelectorForm","useController","AddHostDialog","onAdded","onClose","form","useForm","handleSubmit","isDirty","isValid","addAlert","addError","useAlerts","onSubmit","node","AlertVariant","error","Modal","ButtonVariant","FormProvider","ClusteringPanel","registeredNodes","access","formatDate","useFormatDate","nodes","setNodes","expanded","setExpanded","selectedNode","setSelectedNode","addNodeOpen","setAddNodeOpen","key","setKey","refresh","testCluster","result","parseResult","toggleDeleteNodeConfirm","DeleteNodeConfirm","useConfirmDialog","object","ExpandableSection","_event","val","KeycloakDataTable","entry","ToolbarItem","FORMAT_DATE_AND_TIME","ListEmptyState","ApplicationUrls","FineGrainOpenIdConnect","providers","clientSignatureProviders","contentEncryptionProviders","cekManagementProviders","signatureProviders","convert","list","sortProviders","i","prependEmpty","prependNone","Switch","p","FineGrainSamlEndpointConfig","OpenIdConnectCompatibilityModes","watch","isFeatureEnabled","useIsFeatureEnabled","tokenExchangeEnabled","useRefreshTokens","Feature","OpenIdVerifiableCredentials","PROTOCOL_OIDC","PROTOCOL_OID4VC","prefixKey","successCount","failedCount","AdvancedTab","client","setValue","publicClient","attributes","authenticationFlowBindingOverrides","resetFields","names","PageSection","ScrollForm","Text","toUpperCase","ClientSessions","SessionsTable","first","max","search","fetchAdminUI","AccessSettings","hasAccess","useAccess","isManager","LoginSettings","FixedButtonsGroup","LoginSettingsPanel","loginThemes","consentRequired","displayOnConsentScreen","TextAreaControl","validateUrl","uri","LogoutPanel","frontchannelLogout","frontchannelLogoutTooltip","ClientSettings","ClientDescription","SamlConfig","SamlSignature","CapabilityConfig","ValueInput","rowIndex","attribute","selectableValues","resources","register","getValues","isValueOpenArray","setIsValueOpenArray","toggleValueSelect","arr","attributeValues","values","defaultContextAttributes","attr","renderSelectOptionType","scopeValues","resource","scope","getMessageBundleKey","attributeName","camelCase","Td","KeycloakSelect","SelectVariant","v","TextInput","KeyBasedAttributeInput","fields","append","remove","useFieldArray","isKeyOpenArray","setIsKeyOpenArray","toggleKeySelect","watchLastValue","Table","Thead","Tr","Th","Tbody","MinusCircleIcon","PlusCircleIcon","AuthorizationDataModal","data","show","toggle","useToggle","TextContent","TextVariants","AuthorizationEvaluateResourcePolicies","idx","outerPolicy","clientId","useParams","prev","Link","toPermissionDetails","DecisionEffect","ExpandableRowContent","DescriptionList","TextList","item","TextListItem","toPolicyDetails","capitalize","AuthorizationEvaluateResource","evaluateResults","filterResults","results","filter","status","Results","evaluateResult","back","filterDropdownOpen","toggleFilterDropdown","setFilter","searchQuery","setSearchQuery","searchInput","setSearchInput","confirmSearchQuery","handleKeyDown","e","filteredResources","noEvaluatedData","noFilteredData","Toolbar","ToolbarGroup","InputGroup","InputGroupItem","SearchIcon","Divider","AuthorizationEvaluate","AuthorizationEvaluateContent","ForbiddenSection","trigger","isExpanded","setIsExpanded","applyToResourceType","setApplyToResourceType","setResources","scopes","setScopes","setEvaluateResult","clientRoles","setClientRoles","roles","evaluate","formValues","keys","keyValueToArray","resEval","r","s","evaluation","Panel","PanelHeader","Title","PanelMainBody","ClientSelect","UserSelect","role","AuthorizationExport","code","setCode","authorizationDetails","setAuthorizationDetails","authDetails","exportAuthDetails","CodeEditor","KeycloakSpinner","EmptyButton","permissionType","disabled","navigate","useNavigate","toNewPermission","TooltipEmptyButton","Tooltip","EmptyPermissionsState","isResourceEnabled","isScopeEnabled","EmptyState","EmptyStateHeader","EmptyStateIcon","EmptyStateBody","EmptyStateFooter","AssociatedPoliciesRenderer","row","MoreLabel","AuthorizationPermissions","isDisabled","permissions","setPermissions","selectedPermission","setSelectedPermission","policyProviders","setPolicyProviders","disabledCreate","setDisabledCreate","createOpen","toggleCreate","setSearch","setMax","setFirst","permission","associatedPolicies","params","policies","toggleDeleteDialog","DeleteConfirm","noData","searching","PaginatingTableToolbar","SearchDropdown","Dropdown","DropdownList","DropdownItem","Alert","rows","index","DetailDescriptionLink","DetailCell","uris","setScope","DetailDescription","toScopeDetails","UriRenderer","TableText","AuthorizationResources","selectedResource","setSelectedResource","setPermission","fetchPermissions","toCreateResource","toResourceDetails","AuthorizationScopes","deleteDialog","selectedScope","setSelectedScope","collapsed","setCollapsed","getScope","c","newlyOpened","resourcesScopes","resourceScope","DeleteScopeDialog","toNewScope","ImportDialog","onConfirm","closeDialog","imported","setImported","JsonFileUpload","Radio","POLICY_ENFORCEMENT_MODES","AuthorizationSettings","setResource","importDialog","toggleImportDialog","importResource","mode","DecisionStrategySelect","SecretInput","buttonLabel","secret","PasswordInput","CopyToClipboardButton","ExpireDateFormatter","time","ClientSecret","secretRotated","setSecretRotated","secretExpirationTime","secretRotatedExpirationTime","expired","toggleInvalidateConfirm","InvalidateConfirm","SignedJWT","clientAuthenticatorType","cryptoInfo","option","X509","Credentials","setProviders","useWatch","setSecret","accessToken","setAccessToken","selectedProvider","provider","componentTypes","providerProperties","regenerate","call","message","regenerateClientSecret","toggleClientSecretConfirm","ClientSecretConfirm","regenerateAccessToken","toggleAccessTokenConfirm","AccessTokenConfirm","Card","CardBody","displayName","DynamicComponents","ClipboardCopy","CertificateDisplay","keyInfo","Certificate","helpTextKey","plain","useId","CERT_PEM","extensions","getFileExtension","format","KeyForm","isSaml","hasPem","useFile","supportedKeystoreTypes","keySizes","FileUploadControl","StoreSettings","NumberControl","GenerateKeyDialog","Keys","refreshParent","setKeyInfo","openGenerateKeys","toggleOpenGenerateKeys","setOpenGenerateKeys","openImportKeys","toggleOpenImportKeys","setOpenImportKeys","useJwksUrl","info","generate","keyStore","importKey","importFile","formData","file","rest","ImportKeyDialog","CardHeader","CardTitle","ExportSamlKeyDialog","close","keyType","download","submitForm","callback","SamlKeysDialog","localeKey","onCancel","type","setType","setKeys","submit","Flex","FlexItem","SamlImportKeyDialog","onImported","KEYS","KEYS_MAPPING","KeySection","onChanged","onGenerate","onImport","title","showImportDialog","section","useMetadataDescriptorUrl","FormPanel","SamlKeys","isChanged","setIsChanged","selectedType","setSelectedType","openImport","setImportOpen","setRefresh","toggleDisableDialog","DisableConfirm","regenerateKey","toggleReGenerateDialog","ReGenerateConfirm","isNew","DEDICATED_ROW","TypeSelector","fineGrainedAccess","isDedicatedRow","CellDropdown","changeClientScope","ClientScopes","clientName","localeSort","useLocaleSort","searchType","setSearchType","searchTypeType","setSearchTypeType","AllClientScopes","addDialogOpen","setAddDialogOpen","setRest","selectedRows","setSelectedRowState","setSelectedRows","kebabOpen","setKebabOpen","isViewer","loader","defaultClientScopes","optionalClientScopes","clientScopes","find","clientScope","optional","ClientScope","defaultScopes","allowedProtocols","mapByKey","nameFilter","typeFilter","firstNum","removeClientScope","AddScopeDialog","addClientScope","SearchToolbar","ChangeTypeDropdown","EllipsisVIcon","toDedicatedScope","translationFormatter","GeneratedCodeTab","text","user","label","ProtocolMappers","protocolMappers","EffectiveRoles","effectiveRoles","EvaluateScopes","prefix","mapperTypes","selectableScopes","setSelectableScopes","isScopeOpen","setIsScopeOpen","activeTab","setActiveTab","setEffectiveRoles","setProtocolMappers","userInfo","setUserInfo","idToken","setIdToken","tabContent1","useRef","tabContent2","tabContent3","tabContent4","tabContent5","selectedAudience","hasViewUsers","mapperList","mapper","audience","QuestionCircleIcon","Grid","GridItem","TabContent","Tabs","Tab","TabTitleText","ServiceAccount","serviceAccount","setServiceAccount","hasManageClients","assignRoles","realmRoles","InfoCircleIcon","Trans","toUser","RoleMapping","ClientDetailHeader","onChange","toggleDownloadDialog","badges","protocolName","getProtocolName","Label","dropdownItems","exportClient","isRealmClient","ViewHeader","ClientDetails","hasManageAuthorization","hasViewAuthorization","hasViewClients","permissionsEnabled","downloadDialogOpen","toggleDownloadDialogOpen","changeAuthenticatorOpen","toggleChangeAuthenticatorOpen","isAdminPermissionsClient","useIsAdminPermissionsClient","setClient","tab","toClient","settingsTab","useRoutableTab","keysTab","credentialsTab","rolesTab","clientScopesTab","authorizationTab","serviceAccountTab","sessionsTab","permissionsTab","advancedTab","eventsTab","activeEventsTab","setActiveEventsTab","clientScopesTabRoute","toClientScopesTab","clientScopesSetupTab","clientScopesEvaluateTab","authorizationTabRoute","toAuthorizationTab","authorizationSettingsTab","authorizationResourcesTab","authorizationScopesTab","authorizationPoliciesTab","authorizationPermissionsTab","authorizationEvaluateTab","authorizationExportTab","toClients","setupForm","convertToFormValues","fetchedClient","cloneDeep","confirmed","messageKey","convertFormValuesToObject","submittedClient","newClient","RoutableTabs","RolesList","toCreateRole","roleId","toClientRole","AuthorizationPolicies","PermissionsTab","UserEvents","AdminEvents"],"mappings":"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","x_google_ignoreList":[0,1,2]}